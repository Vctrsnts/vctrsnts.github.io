<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://vctrsnts.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://vctrsnts.github.io/" rel="alternate" type="text/html" /><updated>2025-05-27T16:39:42+00:00</updated><id>https://vctrsnts.github.io/feed.xml</id><title type="html">Si lo haces, hazlo bien!</title><subtitle></subtitle><entry><title type="html">Restic + Backrest + MiniO - 2</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/docker/2025/05/27/restic-copias-locales-2.html" rel="alternate" type="text/html" title="Restic + Backrest + MiniO - 2" /><published>2025-05-27T00:00:00+00:00</published><updated>2025-05-27T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/docker/2025/05/27/restic-copias-locales-2</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/docker/2025/05/27/restic-copias-locales-2.html"><![CDATA[<p>Continuamos con esta segunda parte donde explicaremos como sacar provecho de estas 3 aplicaciones, en este caso, explicare el script que estoy usando para realizar las copia, que es una variaci√≥n de uno que tiene <strong>Lorenzo</strong> en su <a href="https://github.com/atareao/dotfiles/blob/main/.local/bin/backup.sh.jinja" target="_blank">gitHub</a>, pero que en mi caso, en vez de ser un fichero <strong>jinja</strong>, es un fichero en bash a pelo.</p>

<!-- more -->

<blockquote>
  <p>ü§î No entiendo el sentido que tiene de utilizar los ficheros <strong>jinja</strong>. Se que es una plantilla para la creaci√≥n de un fichero al vuelo, pero como utilizarlos, es lo que se me escapa. Ya le preguntaremos a <strong>Lorenzo</strong> su funci√≥n o a ver si tiene algun <em>podcast</em> donde lo explique.</p>
</blockquote>

<p>Aqui teneis el <em>script</em> que estoy usando ahora mismo (versionado del original de <strong>atareao</strong>) pero para mis necesidades.</p>

<blockquote>
  <p>Esta primera parte, es la funci√≥n del <code class="language-plaintext highlighter-rouge">script</code> el cual se encarga de enviar las notificaciones, ahora si, a mi servidor de <strong>Matrix</strong>.</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Funci√≥ per a notificar les accions del script
enviarNotificacions(){
    local repository="$1"
    local action="$2"
    local data="$3"

    local result=""
    local formatted_message="&lt;strong&gt;üì¢ Resumen de respaldo:&lt;/strong&gt;&lt;br&gt;"
    formatted_message+="&lt;strong&gt;üóÇ Repositorio:&lt;/strong&gt; ${repository}&lt;br&gt;"
    formatted_message+="&lt;strong&gt;‚ö° Acci√≥n:&lt;/strong&gt; ${action}&lt;br&gt;"
    formatted_message+="&lt;strong&gt;üì¶ Archivos procesados:&lt;/strong&gt;&lt;br&gt;&lt;pre&gt;"

    while read -r line; do
        [[ -n "$line" ]] &amp;&amp; result+="${line}&lt;br /&gt;"
    done &lt; &lt;(echo "$data")

    formatted_message+="${result}&lt;/pre&gt;"

    # Tria el final de cada missatge segons l'acci√≥ que s'ha dut a terme
    case "$action" in
        create) formatted_message+="&lt;strong&gt;üíæ End backup at ${repository}&lt;/strong&gt;" ;;
        check) formatted_message+="&lt;strong&gt;üîç End check at ${repository}&lt;/strong&gt;" ;;
        prune) formatted_message+="&lt;strong&gt;üóëÔ∏è End prune at ${repository}&lt;/strong&gt;" ;;
        snapshots) formatted_message+="&lt;strong&gt;üì∏ End snapshots at ${repository}&lt;/strong&gt;" ;;
    esac

    # Escapar caracters especials adequadament
    formatted_message=$(echo "$formatted_message" | sed -E 's/"/\\"/g')

    # Construcci√≥ manual del JSON verificant que tot estigui en una sola linia
    json_payload=$(printf '{"msgtype":"m.text","format":"org.matrix.custom.html","formatted_body":"%s"}' "$formatted_message")

    # Enviem la notificaci√≥ fent servir CURL
    curl -X PUT \
        -H "Authorization: Bearer ${MATRIX_TOKEN}" \
        -H "Content-Type: application/json" \
        -d "$json_payload" \
        "${MATRIX_SERVER}/_matrix/client/v3/rooms/${MATRIX_ROOM}/send/m.room.message/$(date '+%s%3N')"
}
</code></pre></div></div>
<blockquote>
  <p>Esta segunda parte del <code class="language-plaintext highlighter-rouge">script</code>, es la que si se encarga de llevar a cabo las copias de seguridad en mi equipo local.</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!/usr/bin/env bash
# -*- coding: utf-8 -*-

# Carrega les variables d'entorn que estan en el fitxer backup.env
# En cas d'error donar un missatge
ENV_FILE="$HOME/.local/bin/backup.env"

if [ -f "$ENV_FILE" ]; then
    set -a
    source "$ENV_FILE"
    set +a
else
    echo "Error: No se encuentra el archivo $ENV_FILE"
    exit 1
fi

# Amb els valors del fitxer backup.env, les pasem a variables per fer-les servir m√©s endavant
# Configuraci√≥n de Restic
export RESTIC_PASSWORD=${RESTIC_PASSWORD}
export AWS_ACCESS_KEY_ID=${SERVER_AWS_ACCESS_KEY_ID}
export AWS_SECRET_ACCESS_KEY=${SERVER_AWS_SECRET_ACCESS_KEY}

# Aqui tenim les ubicacions dels repositoris
# Com veus tinc la del servidor local
# I m√©s endavant anira la del VPS
# Configuraci√≥n de repositorios
REPOS=(
     "s3:${SERVER_MINIO_URL}/minio_repositori"
)

# Directoris dels que volem copies de seguretat
DIRECTORIOS=(
    "/home/user/.config"
    "/home/user/.fonts"
    "/home/user/.icons"
    "/home/user/.local/bin"
    "/home/user/.ssh"
    "/home/user/.themes"
    "/home/user/.signature"
    "/home/user/.bashrc"
    "/home/user/Mail"
    "/home/user/Projects"
    "/home/user/Varios/Novela"
)

# Aqui informem de els fitxers amb les extensions excloses
EXCLUSIONES=(
    "--exclude=*.tmp"
    "--exclude=*.mkv"
    "--exclude=*.mp4"
    "--exclude=*.mp3"
    "--exclude=*.avi"
    "--exclude=*.log"
    "--exclude=*.AppImage"
)
#
# Ara si que ve la festa
#

# Es realitzar les copies de seguretat a cada repositori
# Una vegada finalitzat, s'enviar notificaci√≥
for REPO in "${REPOS[@]}"; do
    create_output=$(restic -r "$REPO" backup \
                    --tag ${TAG_1} \
                    --tag ${TAG_2} \
                    --host ${HOST} \
                    --verbose \
                    --skip-if-unchanged \
                    "${DIRECTORIOS[@]}" \
                    "${EXCLUSIONES[@]}")
    ok=$?
    enviarNotificacions "$REPO" "create" "$create_output" "$ok"
done

# Es realitzar una verifici√≥ de la copia de seguretat
# Tamb√©, una vegada finalitzat el procediment, s'envia una notificaci√≥
for REPO in "${REPOS[@]}"; do
    check_output=$(restic -r "$REPO" check)
    ok=$?
    enviarNotificacions "$REPO" "check" "$check_output" "$ok"
done

# S'esborren les copies de seguretat que sobrepassen el limit que em informt
# En aquest cas es el seg√ºent:
#  7 diaries
#  4 setmanals
#  6 mensuals
# Tamb√© s'envia una notificaci√≥ a la finalitzaci√≥ del procediment
for REPO in "${REPOS[@]}"; do
    prune_output=$(restic -r "$REPO" forget \
                    --prune \
                    --keep-daily 7 \
                    --keep-weekly 4 \
                    --keep-monthly 6)
    ok=$?
    enviarNotificacions "$REPO" "prune" "$prune_output" "$ok"
done

# S'obte un llistat de les copies que tenim en cada repositori
# Tamb√© s'envia una notificaci√≥ a la finalitzaci√≥ del procediment
for REPO in "${REPOS[@]}"; do
    snapshots_output=$(restic -r "$REPO" snapshots -c)
    ok=$?
    enviarNotificacions "$REPO" "snapshots" "$snapshots_output" "$ok"
done
</code></pre></div></div>

<p>Una de las partes m√°s importantes del proceso para hacer las copias de seguridad ya lo tenemos en marcha, el <code class="language-plaintext highlighter-rouge">script</code> que realiza las copias de seguridad y las envia a nuestro servidor (<strong>S3</strong>) de copias de seguridad. Recordad que en nuestro caso, el servidor que tenemos instalado en <strong>MiniO</strong>.</p>

<p>Con esto ya podrias dar por finalizado el procedimiento de copias de seguridad. Pero recordando un docker, que habia conocido gracias a <strong>Lazaro</strong> que no es otro que <strong>backrest</strong>, era el encargado de realizar las copias de seguridad de mi servidor local y subirlas a <strong>Mega</strong>, pero todo se fue üí©, en el momento que empezaron a fallar los HDD por culpa de la <a href="/hardware/2025/04/20/modificaciones-servidor-3.html" target="_blank">alimentaci√≥n</a>, asi que lo deje de lado.</p>

<p>Para hacer un breve resumen de lo que es <strong>backrest</strong> es un <em>cliente grafico</em> de <strong>restic</strong>, y si eso era asi, podia utilizarlo, como cliente de mis copias de seguridad situadas en el servidor local. Lo unico que tenia que hacer, era informar donde estaban estas copias y que tipo de servicio estaba usando (<strong>S3</strong>).</p>

<blockquote>
  <p>‚ö†Ô∏è Con respecto a <strong>backrest</strong>, os recomiendo que vayais a leer el <a href="https://elblogdelazaro.org/backrest-backups-en-nubes-s3" target="_blank">articulo</a> de <strong>Lazaro</strong> que tiene en su pagina web.</p>
</blockquote>

<p>Asi mismo, si os fijais, en el script, concretamente en la parte que se encarga de hacer las copias de seguridad, tenemos estas 2 variables u opciones <strong>TAG_1</strong> y <strong>TAG_2</strong> que:</p>
<ul>
  <li><strong>TAG_1</strong> identifica la copia de seguridad</li>
  <li><strong>TAG_2</strong> identifica el creador de la copia de seguridad</li>
</ul>

<p>Esto por si solo no hace nada, pero a la hora de ir a <strong>backrest</strong>, en vez de ver que tal copia pertenece a <em>_unsigned_</em> que puede hacer un poco de da√±o a los ojos üòé lo tenemos identificado por el <strong>TAG_1</strong> y cuando visualizamos la informaci√≥n de las copias vemos el creador de las mismas, que es el <strong>TAG_2</strong>, quedando de la siguiente manera:</p>

<p><img src="/assets/img/images/backrest_02.jpg" alt="" /></p>

<p>Una vez que tenia esto, todo lo dem√°s es bien sencillo.</p>

<p>Ahora si que tengo la uni√≥n perfecta de los 3 mundos:</p>
<ul>
  <li><strong>Restic</strong> se encarga de realizar las copias de seguridad de mi equipo local a mi servidor <strong>S3</strong></li>
  <li><strong>MiniO</strong> es mi servidor de copias de seguridad (<strong>S3</strong>)</li>
  <li><strong>Backrest</strong> mi cliente grafico, para visualizar las copias de seguridad que voy haciendo y asi tenerlas controladas</li>
</ul>

<p>Aqui podria a√±adir un mundo m√°s que seria <strong>Matrix</strong> que es el encargado de notificarme las acciones que se van haciendo mientras se realiza la copia de seguridad.</p>

<p>Lo unico que hay que tener en cuenta con <strong>Backrest</strong>, es lo siguiente:</p>
<ul>
  <li>Trabajando de esta manera, cuando nos conectamos a el, no refresca, o yo no he sabido como hacerlo, los snapshost, asi que solamente tenemos que ir a nuestra secci√≥n de repositorios y refrescar el indice de estos y ya nos aparecen las copias de seguridad</li>
  <li>En el momento que queramos recuperar algun archivo, no lo hace contra mi equipo local, no te aparece el fichero y tu lo descargas y listo, sino que lo recupera en el servidor local, asi que una vez que se ha recuperado, tienes que ir al directorio donde lo ha dejado y moverlo a tu equipo local. Como alternativa, es recuperar desde tu equipo local el archivo que necesitas y entonces si que funcionara.</li>
</ul>

<p>Hasta aqui hemos llegado la segunda parte de este articulo, nos queda la ultima y no por ello la menos importante.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elblogdelazaro.org/tags/restic" target="_blank">El Blog de L√°zaro - Restic</a></li>
  <li><a href="https://atareao.es/podcast/no-pierdas-tus-datos-backups-infalibles" target="_blank">677 - No pierdas tus datos. Backups infalibles</a></li>
  <li><a href="https://atareao.es/podcast/backups-en-android-con-restic" target="_blank">680 - Backups en Android con Restic</a></li>
  <li><a href="https://geekland.eu/copias-de-seguridad-con-restic-de-forma-automatica" target="_blank">Como hacer copias de seguridad cifradas con Restic de forma autom√°tica</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Docker" /><category term="Debian GNU/Linux" /><category term="Docker" /><summary type="html"><![CDATA[Continuamos con esta segunda parte donde explicaremos como sacar provecho de estas 3 aplicaciones, en este caso, explicare el script que estoy usando para realizar las copia, que es una variaci√≥n de uno que tiene Lorenzo en su gitHub, pero que en mi caso, en vez de ser un fichero jinja, es un fichero en bash a pelo.]]></summary></entry><entry><title type="html">Matrix - 4. De vuelta al inicio, de Gotify a Matrix</title><link href="https://vctrsnts.github.io/docker/matrix/gotify/2025/05/25/gotify-matrix.html" rel="alternate" type="text/html" title="Matrix - 4. De vuelta al inicio, de Gotify a Matrix" /><published>2025-05-25T00:00:00+00:00</published><updated>2025-05-25T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/matrix/gotify/2025/05/25/gotify-matrix</id><content type="html" xml:base="https://vctrsnts.github.io/docker/matrix/gotify/2025/05/25/gotify-matrix.html"><![CDATA[<p>Como ya explique en este <a href="/docker/matrix/gotify/2025/05/20/matrix-gotify.html" target="_blank">articulo</a>, ante la imposibilidad de usar <strong>Matrix</strong> me pase a <strong>Gotify</strong> aunque me negue a dejar de lado a <em>Matrix</em> y segui investigando, el porque no funcionaba correctamente y asi llegado el momento, poderlo usar o sino, tener una alternativa <em>Gotify</em>.</p>

<!-- more -->

<p>Aqui si que tengo que dar las gracias a <strong>Lorenzo</strong> de <strong>atareao</strong>, por toda la ayuda que me ofrecio para resolver el problema que tenia üëè.</p>

<p>Lo primero fue facilitarme el <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> que el estaba usando para <strong>Matrix</strong>, os lo pongo  continuaci√≥n por si os sirve de ayuda, pero modificado para mis necesidades:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">conduit</span><span class="pi">:</span>
   <span class="na">image</span><span class="pi">:</span> <span class="s">matrixconduit/matrix-conduit:latest</span>
   <span class="na">container_name</span><span class="pi">:</span> <span class="s">matrixConduit</span>
   <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
   <span class="na">volumes</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">${HOME}/config/matrix/db:/var/lib/matrix-conduit/</span>
   <span class="na">environment</span><span class="pi">:</span>
     <span class="na">RUST_BACKTRACE</span><span class="pi">:</span> <span class="s">full</span>
     <span class="na">CONDUIT_LOG</span><span class="pi">:</span> <span class="s">warn</span>
     <span class="na">CONDUIT_SERVER_NAME</span><span class="pi">:</span> <span class="s">matrix.servidor.org</span>
     <span class="na">CONDUIT_DATABASE_PATH</span><span class="pi">:</span> <span class="s">/var/lib/matrix-conduit/</span>
     <span class="na">CONDUIT_DATABASE_BACKEND</span><span class="pi">:</span> <span class="s">rocksdb</span>
     <span class="na">CONDUIT_PORT</span><span class="pi">:</span> <span class="m">6167</span>
     <span class="na">CONDUIT_MAX_REQUEST_SIZE</span><span class="pi">:</span> <span class="s">20_000_000</span> <span class="c1"># in bytes, ~20 MB</span>
     <span class="na">CONDUIT_ALLOW_REGISTRATION</span><span class="pi">:</span> <span class="kc">false</span>
     <span class="na">CONDUIT_ALLOW_FEDERATION</span><span class="pi">:</span> <span class="kc">false</span>
     <span class="na">CONDUIT_ALLOW_CHECK_FOR_UPDATES</span><span class="pi">:</span> <span class="kc">true</span>
     <span class="na">CONDUIT_ENABLE_LIGHTNING_BOLT</span><span class="pi">:</span> <span class="kc">true</span>
     <span class="na">CONDUIT_TRUSTED_SERVERS</span><span class="pi">:</span> <span class="s1">'</span><span class="s">["matrix.org"]'</span>
     <span class="na">CONDUIT_ADDRESS</span><span class="pi">:</span> <span class="s">0.0.0.0</span>
     <span class="na">CONDUIT_CONFIG</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span> <span class="c1"># Ignore this</span>
   <span class="na">networks</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">proxy</span>
   <span class="na">labels</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">traefik.enable=true</span>
     <span class="pi">-</span> <span class="s">traefik.http.services.conduit.loadbalancer.server.port=6167</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.conduit.entrypoints=websecure</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.conduit.rule=Host(`${MATRIX_SERVER}`)</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.conduit-secure.tls=true</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.conduit-secure.tls.certresolver=letsencrypt</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.conduit.middlewares=cors-headers@docker</span>
     <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowOriginList=*</span>
     <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowHeaders=Origin, X-Requested-With, Content-Type, Accept, Authorization</span>
     <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowMethods=GET, POST, PUT, DELETE, OPTIONS</span>
</code></pre></div></div>
<p>Con este simple <code class="language-plaintext highlighter-rouge">docker</code> es lo unico que se necesita para instalar <strong>Matrix</strong>, no como lo tenia yo <a href="/docker/matrix/2025/03/25/instal-config-matrix.html" target="_blank">antes</a> que eso si que era complicado, ahora si que ya teniamos todas las herramientas para hacer funcionar a <strong>Matrix</strong>, o eso creia yo.</p>

<p>Una vez que ya tenia el <strong>docker</strong>, lo unico que me quedaba era probarlo, porque esta nueva manera de instalaci√≥n, era mucho m√°s sencilla que la que yo tenia antes. Pues aqui vamos a ver que resultado obtenemos:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="w"> </span>docker compose up <span class="nt">-d</span> conduit
</code></pre></div></div>
<p>Despu√©s de la instalaci√≥n, todo funcionaba correctamente, pero seguia con el problema de que las notificaciones no me llegaban al movil.</p>

<p>Aqui busque ayuda de todo el mundo, para saber el porque seguia sin funcionarme las notificaciones, tambien probe <strong>Synapse</strong>, pero con el mismo resultado, tambien llame a todas las puertas y todas me las encontraba cerradas o miraban la mirilla, pero no me abrianla puerta ;), hasta que al final pedi ayuda a <strong>atareao</strong> que muy amablemente se ofrecio a ver si conseguiamos llevar a buen puerto este problema que tenia, porque el, con esta misma configuraci√≥n, no tenia problemas.</p>

<p>Os pongo un resumen de todo fue todo, porque sino seria muy largo todo y os dareis cuenta de lo que una peque√±a cosa, los problemas que puede llegar a dar:</p>
<blockquote>
  <p><strong>atareao:</strong> Cuantos usuarios tienes en Matrix?<br />
<strong>yo:</strong> Uno solo, que es el adm que soy yo<br />
<strong>atareao:</strong> Crea otro usuario y manda los mensajes con el otro usuario<br /></p>
</blockquote>

<p>Y aqui es cuando llegamos al final de todo, con mi cerebro ya habia explosionado en mil trozitos y pidiendo a <strong>@atareao</strong> me que lance por un barranco ü•π<br /></p>
<blockquote>
  <p><strong>yo:</strong> @atareao Tienes cerca alguna cuerda larga y un barranco?<br />
<strong>yo:</strong> Para que me ates y me lances por ese barranco<br />
<strong>yo:</strong> He hecho lo que has comentado<br />
<strong>yo:</strong> He creado un usuario que es el administrador de los canales y luego me he creado mi usuario.<br />
<strong>yo:</strong> Entonces el adm me ha invitado a los canales y con el script que te he pasado estoy enviando mensajes a la sala y me aparecen las notificaciones<br />
<strong>yo:</strong> Por eso, yo me ato de pies y manos y tu solo tienes que empujarme hacia el barranco<br />
<strong>atareao:</strong> Ya‚Ä¶ Tiene l√≥gica que si te env√≠as a ti mismo un mensaje no te notifique que tienes un mensaje nuevo<br /></p>
</blockquote>

<p>Llevaba 1 mes con este problema al que no le encontraba soluci√≥n, y todo era por culpa de que solamente tenia un unico usuario, y por eso las notifiaciones no me llegaban. Que si te pones a pensar, tiene su logica, porque uno envia un mensaje al canal, para que el resto de usuarios les llegue la notificaciones. Pero claro es una cosa que no piensas, hasta que alguien te hace caer en ello.</p>

<p>Gracias <strong>atareao</strong> por toda la ayuda que me has dado.</p>

<p>Y ahora si que si, tengo a pleno rendimiento mi servidor de matrix para poder usarlo para las notificaciones de todos mis servicios.</p>

<p>De momento, tengo en funcionamiento:</p>
<ul>
  <li>El envio de notificaciones cuando se general los archivos <code class="language-plaintext highlighter-rouge">XML</code> de los podcast que descargo.</li>
  <li>Las notificaciones de la ejecuci√≥n de las copias de seguridad, que lo podreis ver en este <a href="/debian%20gnu/linux/docker/2025/05/27/restic-copias-locales-2.html" target="_blank">articulo</a>.</li>
</ul>

<p>Me queda pendiente las notificaciones:</p>
<ul>
  <li>Notificaciones de <strong>unRaid</strong></li>
  <li>Notificaciones de <strong>flexGet</strong></li>
</ul>

<p>Pero con estas tendre que pelearme un poco m√°s porque tengo que usar <strong>pushBits</strong>, tal como explique en este <a href="/docker/matrix/2025/03/28/pushbits.html" target="_blank">articulo</a>.</p>

<p>Y alguna cosa m√°s de la que me gustaria estar informado, pero para eso tengo que investigar si se puede hacer o no. Ya os ire informando de los progresos que voy teniendo.</p>

<h4 id="referencia">Referencia</h4>
<p><a href="https://github.com/atareao/self-hosted/tree/main/matrix" target="_blank">atareao - gitHub</a></p>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Matrix" /><category term="Gotify" /><category term="Docker" /><category term="Matrix" /><category term="Gotify" /><summary type="html"><![CDATA[Como ya explique en este articulo, ante la imposibilidad de usar Matrix me pase a Gotify aunque me negue a dejar de lado a Matrix y segui investigando, el porque no funcionaba correctamente y asi llegado el momento, poderlo usar o sino, tener una alternativa Gotify.]]></summary></entry><entry><title type="html">Restic + Backrest + MiniO - 1</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/docker/2025/05/22/restic-copias-locales-1.html" rel="alternate" type="text/html" title="Restic + Backrest + MiniO - 1" /><published>2025-05-22T00:00:00+00:00</published><updated>2025-05-22T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/docker/2025/05/22/restic-copias-locales-1</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/docker/2025/05/22/restic-copias-locales-1.html"><![CDATA[<p>Lo primero y antes de nada, tengo que dar las gracias a <strong>L√°zaro</strong> de <a href="https://elblogdelazaro.org" target="_blank">El Blog de L√°zaro</a> y a <strong>Lorenzo</strong> de <a href="https://atareao.es" target="_blank">Atareao</a>, por todo el conocimiento que me han aportando, porque si eso, yo no podria haber hecho lo que voy a explicar en este articulo. Muchas gracias üëè.</p>

<!-- more -->

<p>Ahora vamos a explicar como gracias a estas 2 increibles personas, he creado mi perfecto (para mi), sistema de copias de seguridad.</p>

<blockquote>
  <p>Nota: ‚ùó Tengo que decir que me falta la parte de externalizar las copias, pero es muy parecido a lo que tengo ahora, asi que no debe de haber muchos problemas ü§û.</p>
</blockquote>

<p>Lo primero y m√°s basico, es explicar lo que quiero hacer:</p>
<ul>
  <li>Mediante <strong>restic</strong>, hacer las copias de seguridad de mi equipo personal y llevarlas al servidor local con <strong>unRaid</strong>.</li>
  <li><strong>Atareao</strong> explica que lo correcto es hacer una copia de seguridad en local, otra al servidor local y una al VPS externo.
    <ul>
      <li>Yo entiendo que las copias en local, si te falla el HDD / SDD del equipo no sirven de nada, que mejor hacer solo copia de seguridad en servidor local (que ya tengo implementado) y otra en VPS externo (que me falta por implementar).</li>
    </ul>
  </li>
  <li>Mantener la regla de <em>7 copias diarias</em>, <em>4 semanales</em>, <em>6 mensuales</em>. Me parece un poco excesivo, pero nunca se sabe, m√°s vale prevenir que curar.</li>
</ul>

<p>Asi que me puse a ello. Pero lo primero era tener un HDD para guardar las copias de seguridad, y eso, ahora mismo, con mi nuevo <a href="/hardware/2025/04/20/modificaciones-servidor-3.html" target="_blank">servidor</a> es muy sencillo realizar esta ampliaci√≥n, solamente he aprovechado un HDD de 1Tb que tenia por aqui tirado, lo he conectado a <em>unRaid</em> y a funcionar. De nuevo, tengo que dar las gracias a <strong>@Mr. H</strong>, por el increible dise√±o que ha hecho.</p>

<p>Una vez que ya tenia mi disco para las copias de seguridad, venia el momento de instalar <strong>restic</strong> en mi equipo personal y en Debian GNU/Linux, con un simple <strong>APT</strong> lo tienes instalado:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usuari@debian:~$ sudo apt install restic
</code></pre></div></div>
<p>Y ya esta instalado.</p>

<p>Ahora pasamos a las cosas m√°s complicadas, la instalaci√≥n de <strong>backrest</strong> y de <strong>MiniO</strong>.</p>

<p>Pero complicado si no estas en <strong>unRaid</strong>, sino es tan facil como ir a la secci√≥n <strong>Apps</strong>, buscar <strong>backrest</strong> e instalar. No voy a explicar como se hace la instalaci√≥n en <strong>unRaid</strong>, primero, porque es muy sencilla y porque solamente tienes que configurar que te aparece, y si no hay suficiente con esto, tienes esta otra, porque <strong>L√°zaro</strong>, ha hecho un <a href="https://elblogdelazaro.org/backrest-una-interfaz-web-para-restic-backup" target="_blank">articulo</a> donde lo explica mucho mejor, asi que, porque inventar la rueda si ya esta inventada.</p>

<div class="row">
    
    <div class="column">
        <img src="/assets/img/images/backrest_01.jpg" alt="backrest_01.jpg" />
    </div>
    
    <div class="column">
        <img src="/assets/img/images/minio.png" alt="minio.png" />
    </div>
    
</div>

<p>Una vez, tenemos <strong>backrest</strong>, solamente nos falta la instalaci√≥n de <strong>MiniO</strong> y como antes, mejor leer el <a href="https://atareao.es/podcast/no-pierdas-tus-datos-backups-infalibles" target="_blank">articulo</a> de <strong>Lorenzo</strong> que tambien lo explica muy bien.</p>

<blockquote>
  <p>Nota: Lo que hay que tener en cuenta a la hora de instalar <strong>MiniO</strong> es la nota que a√±ade el creador de este docker, para cuando se usa en <strong>unRaid</strong></p>
</blockquote>

<blockquote>
  <p>‚ö†Ô∏è Attention: Unfortunately due to changes in Minio, the unRAID file system is no longer supported. The only way to get Minio to work on unRAID now is by mapping a single disk directly or setting up a V-Disk.</p>
</blockquote>

<p>En mi caso, no he tenido ningun problema, porque solamente tengo un HDD para las copias de seguridad, pero siempre hay que tenerlo en cuenta.</p>

<h4 id="a-tener-en-cuenta-en-la-configuraci√≥n-de-nuestro-repositorio-en-backrest">A tener en cuenta en la configuraci√≥n de nuestro repositorio en backrest</h4>
<p>A la hora de realizar la instalaci√≥n de <strong>backrest</strong>, tenemos que tener en cuenta, que la <strong>Ip local</strong> tiene que ser la de nuestro servidor, es el que recibe las copias de seguridad de <strong>restic</strong> de nuestro equipo local.</p>

<p>Asi mismo, en mi caso, no tengo configurado ningun plan de gesti√≥n de copias, porque eso se encarga el script de <code class="language-plaintext highlighter-rouge">bash</code> que tengo en mi equipo local haciendo las copias de seguridad.</p>

<p>Despu√©s de este peque√±o apunte, voy a explicar algunas cosas sobre el uso y funcionamiento de <strong>restic</strong> que nos pueden venir bien para m√°s adelante.</p>

<h4 id="1-saber-el-estado-de-las-copias">1. Saber el estado de las copias:</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usuari@debian:~$ restic -r /path/to/backup snapshots
</code></pre></div></div>
<h4 id="2-para-crear-copias-de-seguridad-de-varios-directorios">2. Para crear copias de seguridad de varios directorios</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usuari@debian:~$ restic -r /path/to/backup backup /dir_1 /dir_2 etc....
</code></pre></div></div>
<h4 id="3-para-restaurar-copia-de-seguridad">3. para restaurar copia de seguridad</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usuari@debian:~$ restic -r /path/to/backup restore latest --target /dir_recuperar
</code></pre></div></div>
<h4 id="4-borrar-repositorios-para-solo-mantener-x-repositorios">4. Borrar repositorios para solo mantener X repositorios</h4>
<blockquote>
  <p>Nota: En este caso, como ejemplo, hemos puesto 6 (en este caso hemos puesto 6)</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usuari@debian:~$ restic -r /path/to/backup forget --keep-last 6 prune
</code></pre></div></div>
<h4 id="5-borrar-backups-de-m√°s-de-30-dias">5. Borrar backups de m√°s de 30 dias</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>usuari@debian:~$ restic -r /path/to/backup forget --keep-within 30d
</code></pre></div></div>
<p>Ahora vendria la parte m√°s interesante, el como hacer uso de estas 3 aplicaciones para manejar nuestras copias de seguridad, pero esto lo explicare en el siguiente <a href="/debian%20gnu/linux/docker/2025/05/27/restic-copias-locales-2.html" target="_blank">articulo</a>, porque sino, este puede salir muy largo y volverme muy pesado.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elblogdelazaro.org/tags/restic" target="_blank">El Blog de L√°zaro - Restic</a></li>
  <li><a href="https://atareao.es/podcast/no-pierdas-tus-datos-backups-infalibles" target="_blank">677 - No pierdas tus datos. Backups infalibles</a></li>
  <li><a href="https://atareao.es/podcast/backups-en-android-con-restic" target="_blank">680 - Backups en Android con Restic</a></li>
  <li><a href="https://geekland.eu/copias-de-seguridad-con-restic-de-forma-automatica" target="_blank">Como hacer copias de seguridad cifradas con Restic de forma autom√°tica</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Docker" /><category term="Debian GNU/Linux" /><category term="Docker" /><summary type="html"><![CDATA[Lo primero y antes de nada, tengo que dar las gracias a L√°zaro de El Blog de L√°zaro y a Lorenzo de Atareao, por todo el conocimiento que me han aportando, porque si eso, yo no podria haber hecho lo que voy a explicar en este articulo. Muchas gracias üëè.]]></summary></entry><entry><title type="html">Matrix - 3. De Matrix a Gotify</title><link href="https://vctrsnts.github.io/docker/matrix/gotify/2025/05/20/matrix-gotify.html" rel="alternate" type="text/html" title="Matrix - 3. De Matrix a Gotify" /><published>2025-05-20T00:00:00+00:00</published><updated>2025-05-20T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/matrix/gotify/2025/05/20/matrix-gotify</id><content type="html" xml:base="https://vctrsnts.github.io/docker/matrix/gotify/2025/05/20/matrix-gotify.html"><![CDATA[<p>Como bien sabeis, porque lo explique en este <a href="/docker/matrix/2025/03/25/instal-config-matrix.html" target="_blank">articulo</a> y en este <a href="/docker/matrix/2025/03/28/pushbits.html" target="_blank">otro</a>, estaba usando <strong>Matrix</strong> como servidor de comunicaci√≥n entre mis servidores y un servidor. Pero mientras m√°s lo usaba, m√°s desesperaci√≥n me producia, porque, puede parecer una tonteria, pero en el movil, no recibia las notificaciones de los mensajes que me llegaban al cliente de <strong>Matrix</strong>, que en este caso era <strong>FluffyChat</strong>.</p>

<!-- more -->

<p>Lo habia instalado tanto de <strong>F-Droid</strong> como de la <strong>PlayStore</strong> y en los 2 casos, con el mismo resultado, no me llegaban las notificaciones. Tambien habia probado <strong>Element</strong> con el mismo resultado. Instale <strong>Synapse</strong> tambi√©n en el VPS para ver si el problema estaba en <strong>Conduit</strong>, pero ni asi lograba que me llegaran las notificaciones.</p>

<p>Investigue por todos sitios, <em>gitHub</em> de <em>Conduit</em>, matrix de <em>Conduit</em> y siempre con los mismos resultados, o no me respondian, o no entendian el motivo del porque no funcionaba.</p>

<p>Al final ya no sabia que hacer, hasta que <a href="https://elblogdelazaro.org/gu%C3%ADa-paso-a-paso-c%C3%B3mo-instalar-gotify-en-unraid" target="_blank">Lazaro</a> publico un nuevo articulo de como instalar <strong>Gotify</strong> en <strong>unRaid</strong>, en mi caso no seria en <strong>unRaid</strong>, porque sino, tengo que abrir el servidor al mundo entero y es una cosa que quiero evitar, pero como tengo el VPS, pues decidi instalarlo ahi.</p>

<p>Tengo que decir que yo ya jugaba con un poco de ventaja con respecto a <strong>Gotify</strong>, porque hace un par de a√±os, antes de usar <strong>Telegram</strong> como servidor de notificaciones de mis servicios y de <strong>unRaid</strong>, lo habia utilizado, pero no me acabada de convencer, porque eso de tener 2 aplicaciones abiertas en el movil, <em>telegram</em> y a la vez <em>gotify</em> para recibir las notificaciones, pues me parecia un derroche de bateria, asi que al final lo acabe poniendo todo el <em>telegram</em> porque era la que m√°s usaba.</p>

<p>Asi que de vuelta al ruedo, a realizar la instalaci√≥n de <strong>Gotify</strong>, a traves de su correspondiente <code class="language-plaintext highlighter-rouge">docker-compose</code>:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">gotify</span><span class="pi">:</span>
   <span class="na">image</span><span class="pi">:</span> <span class="s">gotify/server:latest</span>
   <span class="na">container_name</span><span class="pi">:</span> <span class="s">gotify</span>
   <span class="na">env_file</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">gotify.env</span>
   <span class="na">volumes</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">${HOME}/config/gotify:/app/data</span>
   <span class="na">networks</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">proxy</span>
   <span class="na">labels</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">traefik.enable=true</span>
     <span class="pi">-</span> <span class="s">traefik.http.services.gotify.loadbalancer.server.port=80</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.gotify.entrypoints=websecure</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.gotify.rule=Host(`${GOTIFY_SERVER}`)</span>
</code></pre></div></div>
<p>Lo unico que hay que tener en cuenta es el fichero <code class="language-plaintext highlighter-rouge">gotify.env</code>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">TZ=Europe/Madrid
</span></code></pre></div></div>
<p>Que es donde se configura la zona horaria, pero el resto, es como cualquier otro <em>docker-compose</em>, ahora solamente queda hacer un <code class="language-plaintext highlighter-rouge">docker commpose up -d gotify</code> y listo, y como adem√°s lo tengo configurado para que use <em>traefik</em> siguiendo los magnificos articulos que pone a disposici√≥n del publico <strong>atareo</strong>, pues es todo mucho m√°s facil.</p>

<p>Lo que si que tengo que agradecer a <strong>Lazaro</strong>, es que en su <a href="https://elblogdelazaro.org/gu%C3%ADa-paso-a-paso-c%C3%B3mo-instalar-gotify-en-unraid" target="_blank">articulo</a>, explica muy bien todo el tema de las aplicaciones, que seguramente fue una de las razones del porque me echo para atras <strong>Gotify</strong> cuando lo use la primera vez, junto con que puedes poner los iconos de cada aplicaci√≥n, pues ya lo tenia todo en marcha. Solo me faltaba instalar la aplicaci√≥n en el movil y tenia todas las notificaciones de mis serviciones a mi disposici√≥n y encima diferenciadas por aplicaciones (salas) para que todo estuviera m√°s claro y facil de entender:</p>
<ul>
  <li>Backups
    <ul>
      <li>En mi caso, las copias de seguridad las hago a traves de <strong>restic</strong>, otro articulo que tengo que hacer (y tambien gracias a <strong>atareao</strong> por dar a conocer el sistema de copias que el usa), y que junto a un <em>script</em> de <strong>Gotify</strong> podia estar informado de cuando y como se habian echo las copias de seguridad.</li>
    </ul>
  </li>
  <li>flexGet</li>
  <li>unRaid</li>
  <li>Gesti√≥n de Podcast</li>
  <li>Y m√°s cosas que quiera a√±adir gracias a los plugins que tiene
    <ul>
      <li>Aqui tengo que hacer un inciso, los que yo encontre son un poco üôÅ y no se les puede sacar mucho provecho.</li>
    </ul>
  </li>
</ul>

<p>El script en cuesti√≥n es el siguiente:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>SCRIPT PER ENVIAR LES NOTIFICACIONS
<span class="go">curl -s -S --data \ 
</span><span class="gp">  '{"message": "'"$</span><span class="o">{</span>DIR_NAME<span class="o">}</span>.xml<span class="s2">"'"</span>, <span class="s2">"title"</span>: <span class="s2">"'"</span><span class="k">${</span><span class="nv">TITLE_RSS</span><span class="k">}</span><span class="s2">"'"</span>, <span class="se">\</span>
<span class="gp">  "priority":'"$</span><span class="o">{</span>GOTIFY_PRIORITY<span class="o">}</span><span class="s2">"', "</span>extras<span class="s2">": {"</span>client::display<span class="s2">": </span><span class="se">\</span><span class="s2">
</span><span class="go">  {"contentType": "text/markdown"}}}' \
</span><span class="gp">  -H 'Content-Type: application/json' "$</span>GOTIFY_SERVER<span class="s2">"
</span></code></pre></div></div>
<p>Y con esto, ya tengo de nuevo en marcha mi sistema de notificaciones para substituir <strong>telegram</strong> por algo m√°s <strong>libre</strong> y asi tener <strong>mas libertad digital</strong> tal como dice <strong>Lorenzo</strong>.</p>

<p>Los que tengais el dashboard de <strong>HomePage</strong>, saber que si usar <strong>Gotify</strong> tienes un widget, que puedes usar y tener a la vista las <em>aplicaciones</em>, los <em>clientes</em> y los <em>mensajes</em> recibidos. En este <a href="/docker/unraid/2024/06/03/usando-homepage-2.html" target="_blank">articulo</a> teneis una imagen de como queda.</p>

<p>Aqui tengo que hacer un inciso, no os penseis que me he olvidado de <strong>Matrix</strong>, aun lo tengo en la cabeza metido molestando y riendose de mi, porque no lo he hecho funcionar correctamente, algo parecido a esto:</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/cerebro.jpg" alt="cerebro.jpg" />
    </div>
    
</div>

<p>Pero tiene que saber, que a mi me cuesta mucho darme por vencido y que al final conseguire hacer funcionar correctamente a <strong>Matrix</strong>, pero ya explicare en otro articulo, como me va mi lucha contra √©l.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elblogdelazaro.org/gu%C3%ADa-paso-a-paso-c%C3%B3mo-instalar-gotify-en-unraid" target="_blank">Gu√≠a Paso a Paso: C√≥mo Instalar Gotify en Unraid</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Matrix" /><category term="Gotify" /><category term="Docker" /><category term="Matrix" /><category term="Gotify" /><summary type="html"><![CDATA[Como bien sabeis, porque lo explique en este articulo y en este otro, estaba usando Matrix como servidor de comunicaci√≥n entre mis servidores y un servidor. Pero mientras m√°s lo usaba, m√°s desesperaci√≥n me producia, porque, puede parecer una tonteria, pero en el movil, no recibia las notificaciones de los mensajes que me llegaban al cliente de Matrix, que en este caso era FluffyChat.]]></summary></entry><entry><title type="html">Modificaciones en el servidor - 3</title><link href="https://vctrsnts.github.io/hardware/2025/04/20/modificaciones-servidor-3.html" rel="alternate" type="text/html" title="Modificaciones en el servidor - 3" /><published>2025-04-20T00:00:00+00:00</published><updated>2025-04-20T00:00:00+00:00</updated><id>https://vctrsnts.github.io/hardware/2025/04/20/modificaciones-servidor-3</id><content type="html" xml:base="https://vctrsnts.github.io/hardware/2025/04/20/modificaciones-servidor-3.html"><![CDATA[<p>Este nuevo articulo no sabia si llamarlo <strong>Modificaciones en el servidor - 3</strong> o <strong>La imaginaci√≥n humana no tiene limites</strong>, porque una vez que hayais leido este articulo pensareis lo mismo que yo.</p>

<!-- more -->

<p>Como recordareis, en este <a href="/hardware/2024/10/19/modificando-servidor-2.html">articulo</a> os comentaba que despu√©s de los ultimos cambios, mi servidor habia quedado de la siguiente manera:</p>
<ul>
  <li>Intel Xeon e2286M</li>
  <li>32Gb de RAM</li>
  <li>4 HDD‚Äôs
    <ul>
      <li>1 HDD de 18Tb</li>
      <li>1 HDD de 16Tb</li>
      <li>1 HDD de 12Tb</li>
      <li>1 HDD de 1Tb
        <ul>
          <li>Este lo uso para copias de seguridad.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>Lo m√°s importante es saber el porque de este cambio. Al principio todo iba correctamente, aunque habia momentos en que notaba que los discos duros me hacian el tonto, como si se desconectasen o se reiniciasen pero como me lo hacia pocas veces, pues no le hacia mucho caso, porque como pasaba poco, pues nada.</p>

<p>La cosa cambio, cuando le a√±adi un nuevo <em>HDD Seagate Exos X20 SATA</em> (gracias a <strong>HomeLabs</strong> y sus conjuntas üòà), quedando el servidor con la siguiente configuraci√≥n:</p>
<ul>
  <li>5 HDD‚Äôs
    <ul>
      <li>2 HDD de 18Tb
        <ul>
          <li>1 HDD Toshiba</li>
          <li>1 HDD Seagate Exos</li>
        </ul>
      </li>
      <li>1 HDD de 16Tb</li>
      <li>1 HDD de 12Tb</li>
      <li>1 HDD de 1Tb</li>
    </ul>
  </li>
</ul>

<p>Y aqui se hicieron m√°s seguidos y peligrosos los problemas que habia visto con anterioridad. Ya eran m√°s importantes porque estos pasaban cada 2 por 3, los HDD‚Äôs se reiniciaban sin motivo aparente y sobre todo cuando se hacian copias de muchos archivos a la vez o de archivos muy pesados y para que veais lo peligroso que habia, que a veces el array de <strong>unRaid</strong> se <em>desmontaba</em> quedando todos los discos duros desactivados con el consiguiente peligro para la integridad de la informaci√≥n.</p>

<p>Asi que tuve que desconectador algunos HDD. Al final, el servidor quedo de la siguiente manera:</p>
<ul>
  <li>3 HDD‚Äôs
    <ul>
      <li>2 HDD de 18Tb
        <ul>
          <li>1 HDD Toshiba</li>
          <li>1 HDD Seagate Exos</li>
        </ul>
      </li>
      <li>1 HDD de 12Tb</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>üìõ Como veis, peor de lo que estaba al principio, hablando de espaci√≥ de almacenamiento y con los mismos problemas o peores.</p>
</blockquote>

<p>Lanze la pregunta a mi canal favorito de Telegram, <em>HomeLabs</em> y la respuesta que me dieron, es que todo tenia pinta de falta de potencia para manejar los 3 que tenia en ese momento. No entendia, porque habia una falta de potencia, si antes habia podido usar 3 HDD‚Äôs sin ningun problema, usando el mismo transformador que tenia, el de <strong>135w</strong>, mediante la siguiente <a href="https://homelabs.club/cambios-y-modificaciones-compatibles-con-los-tinys-m910q-m710q-m910x" target="_blank">modificaci√≥n</a> donde se puede alimentar, siempre que tengas el transformador de 135w, un par de HDD‚Äôs.</p>

<p>El problema no era que por los 3 HDD‚Äôs, sino porque 2 eran de alta capacidad (18T) junto con el <em>Xeon</em> del Tiny y la fuente ya no podida dar todo la demanada que se le pedia. La soluci√≥n que me dieron y que redundaria tanto en mi benefici√≥ como en la salud de los HDD‚Äôs, porque para los HDD‚Äôs no es nada aconsejable que se esten <em>reiniciando</em> constantemente.</p>

<p>Mire las diferentes posibles soluciones que tenia a mi alcance, y todas tenian como resultado final, a√±adir una fuente de alimentaci√≥n externa unicamente para los HDD‚Äôs. Tambien me comentaron, que si tomaba este camino, podria, con la misma fuente, alimentar el <em>Tiny</em> y asi solamente tendria un unico cable, el espaci√≥ del que dispongo es muy limitado.</p>

<p>Mientras pensaba en si hacer la modificaci√≥n que me habian comentado, me contacto como un angel salvador üëº, <strong>@Mr H</strong>, al que siempre le estare agradecido por el increible trabajo de dise√±o que ha realizado, y tampoco nos podemos olvidar de <strong>J.Lu</strong>, los 2 de <a href="https://t.me/homelabsclub" target="_blank">HomeLabs</a>.</p>

<p><strong>@Mr H</strong> me comento que estaba haciendo un nuevo dise√±o para poder acoplar un blackplane de 8 HDD‚Äôs a un Tiny ü§Ø. Ya conocia a <strong>@Mr H</strong> porque tenia una antigua versi√≥n de <a href="/hardware/2024/09/18/modificando-servidor-1.html" target="_blank">este mismo concepto</a>, que tambi√©n habia dise√±ado el, pero solo para 6, pero con un dise√±o m√°s rudimentario y simple (segun <em>@Mr H</em>), no tan refinado como este nuevo (segun sus propias palabras).</p>

<p>Aqui podeis ver una primera versi√≥n del dise√±o en el que estaba trabajando:</p>

<div class="row">
    
    <div style="flex: 33.333333333333336%">
        <img src="/assets/img/images/TiNAS_01.jpg" alt="TiNAS_01.jpg" />
    </div>
    
    <div style="flex: 33.333333333333336%">
        <img src="/assets/img/images/TiNAS_02.jpg" alt="TiNAS_02.jpg" />
    </div>
    
    <div style="flex: 33.333333333333336%">
        <img src="/assets/img/images/TiNAS_03.jpg" alt="TiNAS_03.jpg" />
    </div>
    
</div>

<blockquote>
  <p>üëè Tengo que agradecer a <strong>@Mr H</strong> por permitirme publicar el dise√±o del TiNAS</p>
</blockquote>

<p>Que os parece? No es increible ü§©.</p>

<p>Tambien me comento que serian necesarios algunos componentes m√°s y que eran muy faciles de conseguir en Aliexpress:</p>
<ul>
  <li><a href="https://es.aliexpress.com/item/1005007594599660.html" target="_blank">Probador de arranque de fuente de alimentaci√≥n</a></li>
  <li><a href="https://es.aliexpress.com/item/1005007539344272.html" target="_blank">Cable SATA 3,0 de 0,5 m/1m Cable SATA de angulo recto de 90 grados</a>
    <ul>
      <li>Os aconsejo coger, como <a href="https://es.aliexpress.com/item/1005007539344272.html" target="_blank">minimo</a> el de 6, yo pedi el de 4 y ya me estoy planteando comprar el de 6.</li>
    </ul>
  </li>
  <li><del><a href="https://es.aliexpress.com/item/1005007722058869.html" target="_blank">Rele</a></del>
    <ul>
      <li>Comprar este <a href="https://es.aliexpress.com/item/1005006782658465.html" target="_blank">otro</a> porque con el primero nunca me llego a funcionar, no se si era por culpa del propio rele que ya no funcionaba o porque lo estropee yo.</li>
    </ul>
  </li>
  <li><a href="https://es.aliexpress.com/item/10000289980196.html" target="_blank">Fuente de alimentaci√≥n Modular</a></li>
  <li><a href="https://es.aliexpress.com/item/1005006838080256.html" target="_blank">Placa de circuito plano posterior para 8 HDD - SATAo SAS</a></li>
  <li><a href="https://es.aliexpress.com/item/1005006954833827.html" target="_blank">Cable de alimentaci√≥n USB</a>
    <ul>
      <li>Aunque este os lo podeis ahorrar si teneis vosotros y como minimo tiene que ser de 50cm.</li>
    </ul>
  </li>
  <li><a href="https://es.aliexpress.com/item/1005005162114038.html" target="_blank">Tornillos a prueba de golpes para HDD 3.5‚Äù</a></li>
  <li><a href="https://es.aliexpress.com/item/1005004704710515.html" target="_blank">Cable de alimentaci√≥n</a>
    <ul>
      <li>Este cable, es para unificar los 2 cables (fuente y transformador en uno solo)</li>
    </ul>
  </li>
  <li><a href="https://es.aliexpress.com/item/4001263294249.html" target="_blank">Tarjeta de expasi√≥n</a>
    <ul>
      <li>Esta es la que venia utilizando hasta el momento y que tambien iba a usar para esta nueva versi√≥n.</li>
    </ul>
  </li>
  <li><a href="https://www.amazon.es/dp/B0BNT4NLP8" target="_blank">Thermalright Ventilador delgado TL-C12015</a>
    <ul>
      <li>Tenia un <em>Artic</em> pero cuando quiero poner otro, como los cantos de donde tienen que ir, son redondos, no entran 2 ventiladores, asi que pedi consejo a <strong>@Mr H</strong> y me aconsejo este que es mucho mejor y son los que usa el.</li>
    </ul>
  </li>
  <li><a href="https://es.aliexpress.com/item/1005004974264597.html" target="_blank">Cable de resistencia de ventilador</a>
    <ul>
      <li>Esto es porque los conectores para los 2 ventiladores del blackplane suministran 12v y siento decirlo, pero de momento, el <em>Artic</em> si lo conecto hace un poco de ruido üò≠, asi que siguiendo el consejo, de nuevo de <strong>@Mr H</strong>, voy a comprar estos conectores para reducir un 50% (color rojo) la tensi√≥n de los ventiladores.</li>
    </ul>
  </li>
  <li><a href="https://es.aliexpress.com/item/1005008654185241.html" target="_blank">Cable Molex IDE de 4 pines a SATA de 15 pines</a>
    <ul>
      <li>Este es otro cable, para, siguiendo el consejo del vendedor del blackplane, hay que poner los 2 conectores <em>ATX</em> junto con el <em>SATA</em> para alimentarlo.</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>‚ö†Ô∏è He actualizado la lista de la compra, porque han pasado ya unas cuantas semanas de uso y he cambiado algunas cosas por necesidad.</p>
</blockquote>

<blockquote>
  <p>‚ö†Ô∏è Seguramente os estareis preguntando porque en vez de ir por este camino, no me compro componentes nuevos y con una misma fuente, que tambien podria ser de 500w, tener un equipo mejor y m√°s actual. La respuesta podria <strong>si</strong>, pero teniendo ya todo o gran parte de los componentes que necesitaba, no me salia a cuenta deshacerme de todo y comprar equipamiento nuevo, adem√°s, el espacio que tengo es limitado y tengo lo que tengo.</p>
</blockquote>

<blockquote>
  <p>‚ö†Ô∏è Adem√°s, nunca vas a llegar a usar los 500w de la fuente, porque primero tendria que tener los 8 HDD en funcionamiento siempre, actualmente tengo 4 y como maximo podre llegar a tener 6 que es lo maximo que me da mi tarjeta de expansi√≥n <em>PCI</em> y el momento en que un HDD consume m√°s es al iniciar toda la parte mecanica. Asi que‚Ä¶</p>
</blockquote>

<p>Eso si, tengo que indicar que el preci√≥ es un poco elevado, pero todo eso es por culpa de la fuente de alimentaci√≥n, que en mi caso seleccione la de 500w, porque nunca se sabe.</p>

<p>A lo mejor os preguntais, como podra funcionar todo el sistema si por una banda, esta la fuente de alimentaci√≥n para los discos y por otra el transformador para el Tiny, porque no es plan de dejar la fuente de alimentaci√≥n todo el rato conectada alimentando a los HDD‚Äôs, aun cuando el servidor este apagado. No tiene ningun sentido.</p>

<p>Podeis estar tranquilos, yo me hice esa misma pregunta y <strong>@Mr H</strong> me lo aclaro todo. El sistema es sencillo, pero si no te lo explican, puedes perderte un poco, y tengo que decir que yo estudie electronica industrial, pero de eso hace mucho tiempo, y de electronico ya queda muy poco (aunque gracias a esta modificaci√≥n, he tenido que recuperar viejos habitos) üòÅ.</p>

<p>El sistema es bien simple, por una banda tienes la alimentaci√≥n del Tiny, que cuando lo enciendes, se activa todo el sistema, incluido los conectores del USB, esto es importante porque es aqui, donde radica la simpleza y genialidad de todo el sistema. Cuando se activan los USB, tenemos un cable USB que va conectado a un <strong>rele</strong>, para que este al activarse, active a su vez la fuente de alimentaci√≥n que <em>activara</em> todos los HDD‚Äôs dando por iniciado todo el sistema. Asi mismo, en el momento de apagar el servidor, el USB dejara de alimentar el <strong>rele</strong>, haciendo que se desactive la fuente y por consiguiente los HDD‚Äôs.</p>

<p>Os pongo 2 imagenes que representarian el sistema en plan que se pueda entender, el interruptor seria el USB que cuando se enciende el Tiny y la bombilla serian los HDD‚Äôs:</p>

<div class="row">
    
    <div style="flex: 33.333333333333336%">
        <img src="/assets/img/images/HDD_OFF.png" alt="HDD_OFF.png" />
    </div>
    
    <div style="flex: 33.333333333333336%">
        <img src="/assets/img/images/HDD_ON.png" alt="HDD_ON.png" />
    </div>
    
</div>

<p>Por eso digo, que todo es muy simple, pero a la vez una genialidad. La unica pega que le veo, es que tienes que tener dos cables de corriente, uno para el transformador de la Tiny y otro para la fuente de alimentaci√≥n. Pero esto se puede solucionar facilmente si compras este <a href="https://es.aliexpress.com/item/1005004704710515.html" target="_blank">cable</a> que permite la conexi√≥n de una fuente de alimentaci√≥n y un transformador y asi tienes un 2x1.</p>

<p>Adem√°s, cuando te ponen la miel en los labios, no puedes parar y eso es lo que pasa cuando estas apuntado al canal de <strong>HomeLabs</strong>, que te van llegando ofertas cada 2x3 de cosas, que en principio no te interesan pero cuando te llega una oferta superincreible, pues, no puedes dejarla pasara, y eso paso con la venta conjunta de discos <strong>NVME</strong>, <strong>disco</strong>, pero no de 128Mb o 256Mb, sino de 4Tb.</p>

<p>Como resultdo de esta compra, mi servidor quedo de la siguiente manera y ya definitivamente, repito, sino me echaran de casa:</p>
<ul>
  <li>Intel Xeon e2286M</li>
  <li>32Gb de RAM</li>
  <li>5 HDD‚Äôs
    <ul>
      <li>2 de 18Tb
        <ul>
          <li>1 Toshiba Series MG09</li>
          <li>1 Seagate Exos X20 SATA</li>
        </ul>
      </li>
      <li>1 de 16Tb</li>
      <li>1 de 12Tb</li>
      <li>1 NVME WD SN 700 de 4Tb</li>
    </ul>
  </li>
</ul>

<p>Aunque tengo pensado volver a a√±adir el de 1Tb para volver a activar las copias de seguridad, porque estoy con el culo al aire con respecto a este tema.</p>

<p>Todo esto montado y en funcionamiento en una caja echa en impresi√≥n 3D con las siguientes medidas aproximadas:</p>
<ul>
  <li>21cm largo.</li>
  <li>20cm alto.</li>
  <li>20cm ancho.</li>
</ul>

<p>Y que gracias a un simple y peque√±o <strong>Thinkcenter m910x</strong>, que m√°s se puede pedir.</p>

<p>Aqui teneis algunas fotos de como es la criatura en su habitat natural:</p>

<div class="row">
    
    <div style="flex: 33.333333333333336%">
        <img src="/assets/img/images/TiNAS_04.jpg" alt="TiNAS_04.jpg" />
    </div>
    
    <div style="flex: 33.333333333333336%">
        <img src="/assets/img/images/TiNAS_05.jpg" alt="TiNAS_05.jpg" />
    </div>
    
    <div style="flex: 33.333333333333336%">
        <img src="/assets/img/images/TiNAS_06.jpg" alt="TiNAS_06.jpg" />
    </div>
    
</div>

<p>Ya os ire contando como va todo con esta nueva modificaci√≥n.</p>

<blockquote>
  <p>‚òéÔ∏è Si quereis saber m√°s informaci√≥n sobre este proyecto, el <strong>TiNAS</strong>, contactar a traves de Telegram con el canal de telegram de <a href="https://t.me/homelabsclub" target="_blank">HomeLabs.club - Telegram</a> y os daran toda la informaci√≥n sobre este proyecto y otros que se estan llevando a cabo en la asociaci√≥n.</p>
</blockquote>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://homelabs.club" target="_blank">HomeLabs.club - Web</a></li>
  <li><a href="https://t.me/homelabsclub" target="_blank">HomeLabs.club - Telegram</a></li>
  <li><a href="https://homelabs.club/cambios-y-modificaciones-compatibles-con-los-tinys-m910q-m710q-m910x/" target="_blank">Cambios y modificaciones compatibles con los tiny‚Äôs M910Q/M710Q/M910X</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Hardware" /><category term="Hardware" /><summary type="html"><![CDATA[Este nuevo articulo no sabia si llamarlo Modificaciones en el servidor - 3 o La imaginaci√≥n humana no tiene limites, porque una vez que hayais leido este articulo pensareis lo mismo que yo.]]></summary></entry><entry><title type="html">Matrix - 2. PushBits, la pasarela que faltaba</title><link href="https://vctrsnts.github.io/docker/matrix/2025/03/28/pushbits.html" rel="alternate" type="text/html" title="Matrix - 2. PushBits, la pasarela que faltaba" /><published>2025-03-28T00:00:00+00:00</published><updated>2025-03-28T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/matrix/2025/03/28/pushbits</id><content type="html" xml:base="https://vctrsnts.github.io/docker/matrix/2025/03/28/pushbits.html"><![CDATA[<p>Como bien explique en el anterior <a href="/docker/matrix/2025/03/25/instal-config-matrix.html" target="_blank">articulo</a>, explicaba la instalaci√≥n y configuraci√≥n, nada facil, de mi servidor de <strong>matrix</strong> ahora os vengo a traer el siguiente articulo, donde explico el uso que le he dado y los problemeas que me he encontrado asi como los planes de futuro.</p>

<!-- more -->

<p>Despu√©s de la instalaci√≥n de <em>matrix</em> ahora tenia que configurar los servicios para que pudiera utilizar este nuevo servicio que he instalado y aqui es donde me he encontrado algunos problemas, porque no todos los servicios que tengo actualmente incluyendo a <em>unRaid</em> no estan del todo preparados para su uso. Ya lo ireis viendo si seguiis leyendo.</p>

<p>El primer servicio que queria que utilizar <em>matrix</em> es <a href="https://www.flexget.com">flexget</a>, y asi en vez de usar <em>telegram</em> usaria <em>matrix</em>. Segun la documentaci√≥n de <a href="https://flexget.com/en/Plugins/Notifiers/matrix">flexget</a>, este servicio estaba soportado, aunque tengo que decir, que la documentaci√≥n, siento usar estas palabras, es un poco penosa, no se como pueden poner esa informaci√≥n. Podrian explicar que tipo de mensajes soporta esta aplicaci√≥n, de que manera se tienen que enviar, etc‚Ä¶ cosas que te pueden servir de ayuda para tu despu√©s utilizarlo de la manera que quiereas.</p>

<p>Pero lo unico que te indican es lo siguiente:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">notify</span><span class="pi">:</span>
  <span class="na">entries</span><span class="pi">:</span>
    <span class="na">via</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">matrix</span><span class="pi">:</span>
          <span class="na">server</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://matrix.org"</span>
          <span class="na">token</span><span class="pi">:</span> <span class="s">senders token</span>
          <span class="na">room_id</span><span class="pi">:</span> <span class="s">room identifier</span>
</code></pre></div></div>
<p>Nada m√°s. Eso si, te explican que es cada cosa (<em>server</em>, <em>token</em> y <em>room_id</em>), pero ya esta. Lo siento, pero para mi esto no es una documentaci√≥n, m√°s bien son los apuntes de alguien.</p>

<p>Siento decir que esto solo es el principio, porque cuando me puse a hacer las pruebas, no habia manera de hacerlo funcionar con la instalaci√≥n de <em>Conduit</em> que yo tenia. No funcionaba ni para atras. Cambiando script, haciendo pruebas con todo lo que me encontrada por internet, haciendo preguntas a <em>Copilot</em>, que teoricamente tiene acceso a todo lo de <em>GitHub</em> y <em>flexget</em> esta hay. Cambiando de <em>Conduit</em> a <em>Synapse</em>, pero ni con esas habia manera de enviar un simple mensaje a mi servidor de <em>matrix</em>.</p>

<p>La unica respuesta que obtenia de <em>flexget</em> era lo siguiente:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">root@08aa614bcf06:/config#</span><span class="w"> </span>Error <span class="k">while </span>sending notification to <span class="sb">`</span>matrix<span class="sb">`</span>: 404 Client Error: Not Found <span class="k">for </span>url: https://matrix.myServer.org/_matrix/client/r0/rooms/roomID/send/m.room.message?access_token<span class="o">=</span>TOKEN
</code></pre></div></div>
<p>Al final despu√©s de muchas preguntas al <em>Slack</em> de <em>flexget</em>, consegui que me respondieran, y lo que me dijeron de que el problema, por el mensaje que me estaba dando <em>flexget</em>, era de que este estaba utilizando la antigua versi√≥n del envio de mensajes <code class="language-plaintext highlighter-rouge">r0</code>, en vez de la m√°s actual que ya implemtan todos los servidores de <em>matrix</em> asi como todos los clientes üò±.</p>

<p>Y es una cosa que pude comprobar yo mismo, porque encontre el archivo que utiliza <em>flexget</em> para manejar las notificaciones, y se podia ver claramente como los envios se hacen mediante una versi√≥n anterior a la que se usa actualmente en <em>matrix</em>. Pues empezamos bien. La primera en la frente.</p>

<p>Tambien queria usar <em>matrix</em> para que mi servidor de <em>unRaid</em> me enviara todas las notificaciones, y aqui va la segunda en la frente, <em>unRaid</em> no esta preparado, de momento, para hacer uso de <em>matrix</em>. Que bien empezamos. Con lo que habia sufrido para instalar <em>matrix</em> y voy y me encuentro que las 2 primeras cosas que quiero usar <em>matrix</em> no estan soportadas. Asi, que iba hacer ahora. Desinstalar <em>matrix</em> y volver a <em>telegram</em>.</p>

<blockquote>
  <p>O como decia <a href="https://es.wikipedia.org/wiki/George_Patton">Geoge S. Patton</a> <strong>Nunca est√°s vencido hasta que lo admites</strong>.</p>
</blockquote>

<p>Asi que me puse a investigar por la opci√≥n m√°s importante y <em>necesaria</em>, hacer que <em>unRaid</em> pudiera enviar las notificaciones a <em>matrix</em>. Despu√©s de mucho investigar, encontre esta <a href="https://forums.unraid.net/topic/122107-matrix-notification-agent" target="_blank">pregunta</a> en el foro de <em>unRaid</em>, que al principio no acababa de entender, pero me explicaron, que hay un servicio en docker, que se llama <a href="https://www.pushbits.io" target="_blank">PushBits</a> que hace de puente entre <em>matrix</em> y cualquier otro servicio, porque <strong>simula</strong> que estas enviando los mensajes a un servidor de <strong>Gotify</strong> y actualmente hay muchos m√°s que pueden enviar notificaciones a <em>Gotify</em> que a <em>matrix</em>, y uno de estos es <em>unRaid</em> que a parte poder enviar las notificaciones a un servidor <em>Gotify</em> tambien permite el envio de notificaciones a <em>PushBits</em>.</p>

<p>Pues ya tenia todo lo necesario, para que tanto <em>unRaid</em> como <em>flexget</em>, pueden enviar mensajes a <em>Gotify</em>. Seguro que lo tenia todo? Faltaba la parte m√°s dificil de todas, la instalataci√≥n y configuraci√≥n. Y aqui se viene otro ba√±o de realidad. En el repositorio de <a href="https://github.com/pushbits/server" target="_blank">Pushbits</a> no encontraba nada de como hacer posible la instalacion a traves de <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> y como usarlo despu√©s.</p>

<p>Asi que de nuevo a investigar. Nunca se va acabar esto de investigar üòì. Lo unico que me alegra, es que cuando deje de investigar solamente sera por 2 posibilidades, o soy tan listo que lo se todo ü§£, cosa dificil, o es que estoy muerto üíÄ.</p>

<p>Pero lo que es la vida, no se como, pero encontre la web de <em>PushBits</em> donde te puede llevar tanto al repositorio como a la documentaci√≥n, no se como no lo vi antes, y en la documentaci√≥n, aqui si, es donde obtuvo lo primero, el fichero del <code class="language-plaintext highlighter-rouge">docker-compose</code> para poderlo usar:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">pushbits</span><span class="pi">:</span>
   <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/pushbits/server:latest</span>
   <span class="na">container_name</span><span class="pi">:</span> <span class="s">matrixPushbits</span>
   <span class="na">networks</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">proxy</span>
   <span class="na">volumes</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">/etc/localtime:/etc/localtime:ro</span>
     <span class="pi">-</span> <span class="s">/etc/timezone:/etc/timezone:ro</span>
     <span class="pi">-</span> <span class="s">${HOME}/config/matrix/pushbits:/data</span>
   <span class="na">environment</span><span class="pi">:</span>
     <span class="na">PUSHBITS_DATABASE_DIALECT</span><span class="pi">:</span> <span class="s1">'</span><span class="s">sqlite3'</span>
     <span class="na">PUSHBITS_ADMIN_MATRIXID</span><span class="pi">:</span> <span class="s1">'</span><span class="s">@user:matrix.myServer.org'</span> <span class="c1"># The Matrix account on which the admin will receive their notifications.</span>
     <span class="na">PUSHBITS_ADMIN_PASSWORD</span><span class="pi">:</span> <span class="s1">'</span><span class="s">passwordAdmin'</span> <span class="c1"># The login password of the admin account. Default username is 'admin'.</span>
     <span class="na">PUSHBITS_MATRIX_USERNAME</span><span class="pi">:</span> <span class="s1">'</span><span class="s">userMatrix'</span> <span class="c1"># The Matrix account from which notifications are sent to all users.</span>
     <span class="na">PUSHBITS_MATRIX_PASSWORD</span><span class="pi">:</span> <span class="s1">'</span><span class="s">passwordMatrix'</span> <span class="c1"># The password of the above account.</span>
   <span class="na">labels</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">traefik.enable=true</span>
     <span class="pi">-</span> <span class="s">traefik.http.services.pushbits.loadbalancer.server.port=5050</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.pushbits.entrypoints=websecure</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.pushbits.rule=Host(`${NOTIFY_SERVER}`)</span>
</code></pre></div></div>
<p>Luego me faltaba entender su funcionamiento, y siento decir que la documentaci√≥n a excepci√≥n de su instalaci√≥n, tambien peca un poco, o a lo mejor soy yo que no encuentro las cosas, que tambien puede ser.</p>

<p>Pero de nuevo la suerte fue mi aliada, que seria de mi, sin las incidencias que entra la gente, porque encontre esta <a href="https://github.com/pushbits/server/issues/71" target="_blank">incidencia</a> donde explicaba todo lo que se tiene que hacer para usar <em>PushBits</em>, pero en ese caso, fallaba, pero para mi ya era algo. Habia conseguido toda la informaci√≥n necesaria para usar este nuevo servicio.</p>

<p>A parte de saber como se tiene que usar, tambien tienes que tener el fichero de configuraci√≥n, que puedes obtener un ejemplo del repositorio, aunque yo pongo el que estoy utilizando ahora mismo y que me funciona perfectamente:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># A sample configuration for PushBits.</span>
<span class="c1"># Populated fields contain their default value.</span>
<span class="c1"># Required fields are marked with [required].</span>

<span class="na">debug</span><span class="pi">:</span> <span class="kc">false</span>

<span class="na">http</span><span class="pi">:</span>
    <span class="c1"># The address to listen on. If empty, listens on all available IP addresses of the system.</span>
    <span class="na">listenaddress</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>

    <span class="c1"># The port to listen on.</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">5050</span>

    <span class="c1"># What proxies to trust.</span>
    <span class="na">trustedproxies</span><span class="pi">:</span> <span class="pi">[]</span>

    <span class="c1"># Filename of the TLS certificate.</span>
    <span class="na">certfile</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>

    <span class="c1"># Filename of the TLS private key.</span>
    <span class="na">keyfile</span><span class="pi">:</span> <span class="s1">'</span><span class="s">'</span>

<span class="na">database</span><span class="pi">:</span>
    <span class="c1"># Currently sqlite3, mysql, and postgres are supported.</span>
    <span class="na">dialect</span><span class="pi">:</span> <span class="s1">'</span><span class="s">sqlite3'</span>

    <span class="c1"># - For sqlite3, specify the database file.</span>
    <span class="c1"># - For mysql specify the connection string. See details at https://github.com/go-sql-driver/mysql#dsn-data-source-name</span>
    <span class="c1"># - For postgres, see https://github.com/jackc/pgx.</span>
    <span class="c1">#   Also consider the canonical docs at https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING.</span>
    <span class="na">connection</span><span class="pi">:</span> <span class="s1">'</span><span class="s">pushbits.db'</span>

<span class="na">admin</span><span class="pi">:</span>
    <span class="c1"># The username of the initial admin.</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s1">'</span><span class="s">admin'</span>

    <span class="c1"># The password of the initial admin.</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s1">'</span><span class="s">passWord'</span>

    <span class="c1"># The Matrix ID of the initial admin, where notifications for that admin are sent to.</span>
    <span class="c1"># [required]</span>
    <span class="na">matrixid</span><span class="pi">:</span> <span class="s1">'</span><span class="s">@user:matrix.myServer.org'</span>

<span class="na">matrix</span><span class="pi">:</span>
    <span class="c1"># The Matrix server to use for sending notifications.</span>
    <span class="na">homeserver</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://matrix.myServer.org'</span>

    <span class="c1"># The username of the Matrix account to send notifications from.</span>
    <span class="c1"># [required]</span>
    <span class="na">username</span><span class="pi">:</span> <span class="s1">'</span><span class="s">userMatrix'</span>

    <span class="c1"># The password of the Matrix account to send notifications from.</span>
    <span class="c1"># [required]</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s1">'</span><span class="s">passwordMatrix'</span>

<span class="na">security</span><span class="pi">:</span>
    <span class="c1"># Wether or not to check for weak passwords using HIBP.</span>
    <span class="na">checkhibp</span><span class="pi">:</span> <span class="kc">false</span>

<span class="na">crypto</span><span class="pi">:</span>
    <span class="c1"># Configuration of the KDF for password storage. Do not change unless you know what you are doing!</span>
    <span class="na">argon2</span><span class="pi">:</span>
        <span class="na">memory</span><span class="pi">:</span> <span class="m">131072</span>
        <span class="na">iterations</span><span class="pi">:</span> <span class="m">4</span>
        <span class="na">parallelism</span><span class="pi">:</span> <span class="m">4</span>
        <span class="na">saltlength</span><span class="pi">:</span> <span class="m">16</span>
        <span class="na">keylength</span><span class="pi">:</span> <span class="m">32</span>

<span class="na">formatting</span><span class="pi">:</span>
    <span class="c1"># Whether to use colored titles based on the message priority (&lt;0: grey, 0-3: default, 4-10: yellow, 10-20: orange, &gt;20: red).</span>
    <span class="na">coloredtitle</span><span class="pi">:</span> <span class="kc">false</span>

<span class="c1"># This settings are only relevant if you want to use PushBits with alertmanager</span>
<span class="na">alertmanager</span><span class="pi">:</span>
    <span class="c1"># The name of the entry in the alerts annotations or lables that should be used for the title</span>
    <span class="na">annotationtitle</span><span class="pi">:</span> <span class="s">title</span>
    <span class="c1"># The name of the entry in the alerts annotations or labels that should be used for the message</span>
    <span class="na">annotationmessage</span><span class="pi">:</span> <span class="s">message</span>

<span class="na">repairbehavior</span><span class="pi">:</span>
    <span class="c1"># Reset the room's name to what was initially set by PushBits.</span>
    <span class="na">resetroomname</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="c1"># Reset the room's topic to what was initially set by PushBits.</span>
    <span class="na">resetroomtopic</span><span class="pi">:</span> <span class="kc">true</span>
</code></pre></div></div>
<p>A parte del fichero de configuraci√≥n, tambien necesitas crear una <em>sala / aplicaci√≥n</em> (yo asimilo sala de <em>matrix</em>, con aplicaci√≥n de <em>PushBits</em>), donde primero tienes que dar de alta la aplicaci√≥n, del que obtendras un <strong>TOKEN</strong> que podras usar para identificar quien esta enviando los mensajes a <em>matrix</em>. Y esto se consigue de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> matrixPushbits sh
<span class="go">
</span><span class="gp">#</span><span class="w"> </span>VISUALITZEM LES SALES / APLICACIONS QUE TENIM ACTUALMENTE
<span class="gp">/app $</span><span class="w"> </span>pbcli application list <span class="nt">--url</span> http://172.20.0.5:8080 <span class="nt">--username</span> admin
<span class="go">
</span><span class="gp">#</span><span class="w"> </span>En el cas de que en vulguessim crear una sala / aplicaci√≥, haures de fer el seg√ºent
<span class="gp">#</span><span class="w"> </span>En aquest cas, estic creant una sala / aplicaci√≥ per a flexget
<span class="gp">/app $</span><span class="w"> </span>pbcli application create flexget <span class="nt">--url</span> http://172.20.0.5:8080 <span class="nt">--username</span> admin
</code></pre></div></div>
<blockquote>
  <p>‚ùó Cuando pongais la <strong>URL</strong> tener en cuenta que es la url del contenedor donde esta corriendo pushbits</p>
</blockquote>

<p>Cuando tengas creada la sala / aplicaci√≥n, obtendras un <strong>token</strong> que sera el que tendras que utilizar para validarte con <em>Pushbits</em> y a su vez, este se comunicara con la sala de <em>matrix</em>. Y te puedo asegurar que funciona a la perfecci√≥n üéâ.</p>

<p>Ya solo nos queda configurar, <em>unRaid</em> para que se envien las notificaciones y como este, esta preparado para <em>PushBits</em> pues todo perfecto:</p>

<div class="row">
    
    <div style="flex: 33.333333333333336%">
        <img class="single" src="/assets/img/images/PushBits.png" alt="PushBits.png" />
    </div>
    
</div>

<p>De la misma manera que <em>unRaid</em> funciona con <em>PushBits</em>, <em>flexget</em>, como tiene la posibilidad de enviar notificaciones a traves de <em>Gotify</em> y <em>PushBits</em> puede <em>simular</em> a este, pues nada m√°s sencillo:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">notify-all</span><span class="pi">:</span>
  <span class="na">notify</span><span class="pi">:</span>
    <span class="na">entries</span><span class="pi">:</span>
      <span class="na">title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Nou</span><span class="nv"> </span><span class="s">Video'</span>
      <span class="na">message</span><span class="pi">:</span> <span class="pi">|+</span>
        <span class="s">*Titol:* { original_title | replace('.XXX.720p.HEVC.x265.PRT', '') | replace('.XXX.720p.HD.WEBRip.x264-TGxXX', '') | asciify | strip_symbols }</span>
        <span class="s"># Aixo son provas per enviar images a matrix, pero que de moment no funcionant.</span>
        <span class="s">[Image](https://img.freepik.com/free-photo/side-view-woman-bdsm-aesthetics_23-2151117274.jpg)</span>
      <span class="na">via</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">gotify</span><span class="pi">:</span>
            <span class="c1"># Adre√ßa de PushBits</span>
            <span class="na">url</span><span class="pi">:</span> <span class="s1">'</span><span class="s">{?</span><span class="nv"> </span><span class="s">credencials.gotify.server</span><span class="nv"> </span><span class="s">?}'</span>
            <span class="err">*</span> <span class="s">Token que ens ha donat al donar d'alta l'aplicaci√≥</span>
            <span class="na">token</span><span class="pi">:</span> <span class="s1">'</span><span class="s">{?</span><span class="nv"> </span><span class="s">credencials.gotify.token</span><span class="nv"> </span><span class="s">?}'</span>
            <span class="c1"># Prioritat del missatge. Aqui et recomano que revisis la documentaci√≥n de Gotify</span>
            <span class="c1"># En el meu cas, jo tinc possat el valor 1</span>
            <span class="na">priority</span><span class="pi">:</span> <span class="s1">'</span><span class="s">{?</span><span class="nv"> </span><span class="s">credencials.gotify.priority</span><span class="nv"> </span><span class="s">?}'</span>
            <span class="c1"># Format dels missatges</span>
            <span class="na">content_type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">text/markdown'</span>
</code></pre></div></div>
<p>Y ahora si que podemos decir que todo lo que yo queria ya lo tengo en funcionamiento. Aunque tengo que seguir investigando la posibilidad de poder enviar imagenes como mensajes adjuntos, pero esto ya lo dejo para m√°s adelante. Lo siguiente es hacer, como tiene en funcionamiento <em>atareao</em> un <em>bot de matrix</em> para que me vaya informando de los mails que voy recibiendo y luego, el tiempo ya dira‚Ä¶</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.pushbits.io" target="_blank">PushBits</a></li>
  <li><a href="https://github.com/pushbits/server/issues/71" target="_blank">Request failed at creating new application</a></li>
  <li><a href="https://forums.unraid.net/topic/122107-matrix-notification-agent">Matrix notification agent</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Matrix" /><category term="Docker" /><category term="Matrix" /><summary type="html"><![CDATA[Como bien explique en el anterior articulo, explicaba la instalaci√≥n y configuraci√≥n, nada facil, de mi servidor de matrix ahora os vengo a traer el siguiente articulo, donde explico el uso que le he dado y los problemeas que me he encontrado asi como los planes de futuro.]]></summary></entry><entry><title type="html">Matrix - 1. Instalaci√≥n y configuraci√≥n</title><link href="https://vctrsnts.github.io/docker/matrix/2025/03/25/instal-config-matrix.html" rel="alternate" type="text/html" title="Matrix - 1. Instalaci√≥n y configuraci√≥n" /><published>2025-03-25T00:00:00+00:00</published><updated>2025-03-25T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/matrix/2025/03/25/instal-config-matrix</id><content type="html" xml:base="https://vctrsnts.github.io/docker/matrix/2025/03/25/instal-config-matrix.html"><![CDATA[<p>A partir de unos articulos de <a href="https://atareao.es/?s=matrix" target="_blank">Lorenzo</a> y de <a href="https://ugeek.github.io" target="_blank">uGeek</a> (podeis encontrar m√°s informaci√≥n en la referencia), me pico la sobre como seria tener mi propio servidor de mensajeria y poderlo utilizar para enviar las notificaciones de mis servicios y asi no depender tanto de <em>Telegram</em>.</p>

<p>Y de hay viene este nuevo articulo, donde explicare todo el proceso de instalaci√≥n y uso de mi nuevo servidor <strong>Matrix</strong> en mi VPS y os aviso que no ha sido nada sencillo.</p>

<!-- more -->

<blockquote>
  <p>‚ö†Ô∏è Nota: Pero antes, tengo que tirarle un poco de las orejas a <strong>Lorenzo</strong>, porque la informaci√≥n que tiene puesto en su <strong>pagina web</strong> o en su repositorio de <strong>GitHub</strong> es muy floja con respecto a la instalaci√≥n y configuraci√≥n de todo lo que se necesita para su correcto uso, y eso me ha lastrado mucho a la hora de realizar toda la instalaci√≥n y configuraci√≥n. 
Porque cuando tienes algo por donde empezar, todo se hace m√°s facil y no como esta vez que ha sido como tirarte a la piscina sin saber nadar y sin flotador. Que si, he aprendido mucho, pero no es lo m√°s recomendable.
Que conste que no es ninguna recriminaci√≥n hacia <strong>Lorenzo</strong>, porque seguro que tendra algun motivo para no haberlo subido a su repositorio, pero es que ha sido como un dolor de muelas todo el proceso. üò≠</p>
</blockquote>

<p>Despu√©s del tiron de orejas, viene lo bueno, la explicaci√≥n de todo lo necesario para tener un servidor de <strong>Matrix</strong> en marcha y a pleno rendimiento, aunque aun le faltan algunas cosas que explicare en proximos articulos.</p>

<p>Lo primero es decidir que servidor de <em>Matrix</em> utilizar. Como he dicho, <strong>uGeek</strong> y <strong>Lorenzo</strong> 2 muy diferentes entre ellos, te recomiendo que leas los articulos que hablan de ello porque son muy interesantes, y estos servidores son:</p>
<ul>
  <li><em>uGeek</em>: <a href="https://github.com/matrix-org/synapse" target="_blank">Synapse</a></li>
  <li><em>Lorenzo</em>: <a href="https://conduit.rs" target="_blank">Conduit</a></li>
</ul>

<p>En principio, el que recomienda <strong>Matrix</strong> es que se use <em>Synapse</em>, pero es un poco pesado de usar para las cosas, que en mi caso quiero hacer, que son basicamente:</p>
<ul>
  <li>Un solo usuario üòÅ</li>
  <li>Solo enviara notificaciones de los servicios que tengo activos tanto en mi servidor domestico como de mi VPS.</li>
  <li>El volumen de notificaciones que tendra que enviar es muy bajo.</li>
</ul>

<p>En este caso, para este tipo de uso, segun lo que he podido leer, y <strong>atareao</strong> pone mucho enfasis en este punto, el mejor es <strong>conduit</strong> por los pocos recursos que necesita asi como los que consume.</p>

<p>Asi que en primera instancia me fui a por la instalaci√≥n de <strong>Conduit</strong> como servidor de <strong>Matrix</strong> y como he dicho, <strong>Lorenzo</strong> no lo ha puesto nada facil, porque no habia subido a su repositorio, como siempre hace, el <code class="language-plaintext highlighter-rouge">docker-compose</code> para la instalaci√≥n, y ha sido una tarea ardua y nada sencilla.</p>

<p>Eso si, lo cortes no quita lo valiente, y tengo que decir que <em>Lorenzo</em> si que puso el <code class="language-plaintext highlighter-rouge">docker-compose</code> en este <a href="https://atareao.es/podcast/crear-bots-en-matrix" target="_blank">articulo</a>, para instalar el servidor de <em>Matrix</em> y el cliente <em>Cinny</em>, pero no de la manera que nos tiene acostumbrados.</p>

<blockquote>
  <p>‚ö†Ô∏è Opini√≥n Persona: Con respecto a los articulos y m√°s concretamente los videos de <em>Lorenzo</em>, antes si explicaba todo el proceso de instalaci√≥n, <em>en plan rapido y explicaba un poco por encima lo que hace cada cosa</em>, pero ya era algo por donde empezar, ahora en los nuevos videos esto no lo hace y se hace un poco m√°s dificil ver y entender todo el conjunto. Que si, de esta manera aprendes m√°s, pero el inicio es m√°s cuesta arriba.</p>
</blockquote>

<p>Pues como iba diciendo, tenia un <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> por el que empezar a trastear y en mi caso quedo de la siguiente manera:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">cinny</span><span class="pi">:</span>
   <span class="na">image</span><span class="pi">:</span> <span class="s">ajbura/cinny:latest</span>
   <span class="na">init</span><span class="pi">:</span> <span class="kc">true</span>
   <span class="na">container_name</span><span class="pi">:</span> <span class="s">matrixCinny</span>
   <span class="na">networks</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">internal</span>
   <span class="na">volumes</span><span class="pi">:</span>
     <span class="c1"># Es el GitHub de Cinny podeu trobar un config.json per comen√ßar</span>
     <span class="pi">-</span> <span class="s">${HOME}/config/matrix/cinny/config.json:/app/config.json</span>
   <span class="na">labels</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">traefik.enable=true</span>
     <span class="pi">-</span> <span class="s">traefik.http.services.cinny.loadbalancer.server.port=80</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.cinny-secure.entrypoints=websecure</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.cinny-secure.rule=Host(`${CINNY_SERVER}`)</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.cinny-secure.tls=true</span>
     <span class="c1"># En aquest cas, vaig trobar a falta informaci√≥ respecte al que fa exactament aquests 2 middlewares.</span>
     <span class="c1"># M√©s o menys ara tinc que clar fan, pero...</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.cinny-secure.middlewares=traefik-real-ip@file,http2https@file</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.cinny-secure.tls.certresolver=letsencrypt</span>

<span class="na">conduit</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">matrixconduit/matrix-conduit:latest</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">matrixConduit</span>
  <span class="na">init</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/matrix/db:/var/lib/matrix-conduit/</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/matrix/conduit.toml:/conduit.toml</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">CONDUIT_CONFIG</span><span class="pi">:</span> <span class="s">/conduit.toml</span>
    <span class="na">RUST_BACKTRACE</span><span class="pi">:</span> <span class="s">full</span>
  <span class="na">networks</span><span class="pi">:</span>
   <span class="pi">-</span> <span class="s">internal</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">traefik.enable=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.services.conduit.loadbalancer.server.port=6167</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.conduit-secure.entrypoints=websecure</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.conduit-secure.rule=Host(`${MATRIX_SERVER}`)</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.conduit-secure.tls=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.conduit-secure.tls.certresolver=letsencrypt</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.conduit-secure.middlewares=cors-headers@docker</span>
    <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowOriginList=*</span>
    <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowHeaders=Origin, X-Requested-With, Content-Type, Accept, Authorization</span>
    <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowMethods=GET, POST, PUT, DELETE, OPTIONS</span>

 <span class="na">well-known</span><span class="pi">:</span>
   <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:latest</span>
   <span class="na">container_name</span><span class="pi">:</span> <span class="s">matrixNginx</span>
   <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
   <span class="na">networks</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">internal</span>
   <span class="na">volumes</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">${HOME}/config/matrix/nginx/matrix.conf:/etc/nginx/conf.d/matrix.conf</span> <span class="c1"># the config to serve the .well-known/matrix files</span>
     <span class="pi">-</span> <span class="s">${HOME}/config/matrix/nginx/www:/var/www/</span> <span class="c1"># location of the client and server .well-known-files</span>
   <span class="na">labels</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">traefik.enable=true</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.to-matrix-wellknown.rule=Host(`${MATRIX_SERVER}`) &amp;&amp; PathPrefix(`/.well-known/matrix`)</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.to-matrix-wellknown.tls=true</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.to-matrix-wellknown.tls.certresolver=letsencrypt</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.to-matrix-wellknown.middlewares=cors-headers@docker</span>
     <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowOriginList=*</span>
     <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowHeaders=Origin, X-Requested-With, Content-Type, Accept, Authorization</span>
     <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowMethods=GET, POST, PUT, DELETE, OPTIONS</span>
</code></pre></div></div>
<p>Esto es el <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> como ya he dicho, para <em>Cinny</em>, <em>Conduit</em> y <em>WellKnown</em> (Nginx), este ultimo, por lo que he ido leyendo, entiendo que se usa m√°s para todas las funcionalidades de cuando tu servidor de <em>matrix</em> esta federado con el resto de servidores, pero que en teoria, para un uso normal no haria falta, pero si lo usa <em>Lorenzo</em> seguramente algo se me escapa. <em>Donde manda patron, no manda marinero</em>.</p>

<p>Asi mismo, a parte del <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> tambien se tienen que hacer unas modificaciones en el <strong>proxy</strong> que estes utilizando, que en mi caso es <strong>traefik</strong>. Las modificaciones que se tienen que hacer en el fichero <code class="language-plaintext highlighter-rouge">traefik.yml</code> son:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">experimental</span><span class="pi">:</span>
  <span class="na">plugins</span><span class="pi">:</span>
    <span class="na">geoBlock</span><span class="pi">:</span>
      <span class="na">moduleName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">github.com/PascalMinder/geoblock"</span>
      <span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">v0.2.5"</span>
    <span class="na">traefik-real-ip</span><span class="pi">:</span>
      <span class="na">modulename</span><span class="pi">:</span> <span class="s">github.com/soulbalz/traefik-real-ip</span>
      <span class="na">version</span><span class="pi">:</span> <span class="s">v1.0.3</span>
</code></pre></div></div>
<p>Y a continuaci√≥n la modificaci√≥n que se tiene que hacer en <code class="language-plaintext highlighter-rouge">dynamic.yml</code>:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">http</span><span class="pi">:</span>
  <span class="na">middlewares</span><span class="pi">:</span>
    <span class="na">http2https</span><span class="pi">:</span>
      <span class="na">redirectScheme</span><span class="pi">:</span>
        <span class="na">scheme</span><span class="pi">:</span> <span class="s">https</span>
        <span class="na">permanent</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">traefik-real-ip</span><span class="pi">:</span>
      <span class="na">plugin</span><span class="pi">:</span>
        <span class="na">traefik-real-ip</span><span class="pi">:</span>
          <span class="na">excludednets</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s2">"</span><span class="s">1.1.1.1/24"</span>

    <span class="na">cors-headers</span><span class="pi">:</span>
      <span class="na">headers</span><span class="pi">:</span>
        <span class="na">accessControlAllowOriginList</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">*"</span>
        <span class="na">accessControlAllowHeaders</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">Origin"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">X-Requested-With"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">Content-Type"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">Accept"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">Authorization"</span>
        <span class="na">accessControlAllowMethods</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">GET"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">POST"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">PUT"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">DELETE"</span>
          <span class="pi">-</span> <span class="s2">"</span><span class="s">OPTIONS"</span>
          
  <span class="na">routers</span><span class="pi">:</span>
    <span class="na">conduit-secure</span><span class="pi">:</span>
      <span class="na">rule</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Host(`${MATRIX_SERVER}`)"</span>
      <span class="na">entryPoints</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">websecure"</span>
      <span class="c1"># Servico docker del Servidor de Matrix, en mi caso, Conduit</span>
      <span class="na">service</span><span class="pi">:</span> <span class="s2">"</span><span class="s">conduit"</span>
      <span class="na">tls</span><span class="pi">:</span>
        <span class="na">certResolver</span><span class="pi">:</span> <span class="s2">"</span><span class="s">letsencrypt"</span>

  <span class="na">services</span><span class="pi">:</span>
    <span class="na">conduit</span><span class="pi">:</span>
      <span class="na">loadBalancer</span><span class="pi">:</span>
        <span class="na">servers</span><span class="pi">:</span>
          <span class="c1"># URL del servicio de Conduit</span>
          <span class="pi">-</span> <span class="na">url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://conduit:6167"</span>
</code></pre></div></div>
<p>Y con esto, ya tendria que funcionar sin ningun problema nuestro <em>servidor de Matrix</em>. En principio es asi, pero ahora es cuando te das de bruzes con la realidad.</p>

<p>Lo primero es ver que si envias un mensaje desde la consola, este llegue correctamente a tu servidor y aqui es cuando empezaron mis problemas y eso que el script es facil. Encontre miles de los scripts. Pero la diferencia que habia entre unos y otros, es que unos hacian uso de <em>POST</em>, que es la versi√≥n antigua para enviar los mensajes, y otros usaban el <em>PUT</em> que es la versi√≥n m√°s actual y que todos los servidores de <em>matrix</em> acceptan.</p>

<p>No os podeis imaginar la de problemas que tenia.</p>

<p>Llegue hasta un punto de eliminar el servidor de <strong>Conduit</strong> y probar con <strong>Synapse</strong> a ver si el problema radicaba es eso. Tambien hice multiples modificaciones a los ficheros de traefik (<code class="language-plaintext highlighter-rouge">traefik.yml</code> y <code class="language-plaintext highlighter-rouge">dynamic.yml</code>) y no conseguia que nada funcionase. El problema no estaba en el servidor que utilizase, sino m√°s bien, en el <em>script</em>. Aqui fue donde si que pedi ayuda a <em>Lorenzo</em> porque no sabia por donde salir y fue cuando me paso el <em>script</em> que lo soluciono todo y que pongo a continuaci√≥n:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="o">!</span> /bin/bash
<span class="go">
MATRIX_SERVER="https://matrix.myserver.org"
TOKEN="TOKEN_MATRIX"
ROOM_ID="ROOM_ID:matrix.myserver.org"

curl -XPUT \
</span><span class="gp">    -H "Authorization: Bearer $</span><span class="o">{</span>TOKEN<span class="o">}</span><span class="s2">"</span><span class="se">\</span><span class="s2">
</span><span class="go">    -H "Content-Type: application/json"\
    -d '{"msgtype":"m.text","body":"hello world"}' \
</span><span class="gp">    "https://$</span><span class="o">{</span>MATRIX_SERVER<span class="o">}</span>/_matrix/client/v3/rooms/<span class="k">${</span><span class="nv">ROOM_ID</span><span class="k">}</span>:<span class="k">${</span><span class="nv">MATRIX_SERVER</span><span class="k">}</span>/send/m.room.message/<span class="si">$(</span><span class="nb">date</span> <span class="s1">'+%s%3N'</span><span class="si">)</span><span class="s2">"
</span></code></pre></div></div>
<p>Con este simple <em>script</em> todo volvio a la vida y yo por fin podia ver la luz al final del camino.</p>

<p>No pare de enviar mensajes desde la consola al cliente, desde el cliente al movil, desde el movil al cliente y ahora si, todo funcionaba correctamente.</p>

<p>Lo unico que no me acababa de funcionar bien, era el tema de enviar imagenes, esto viene porque en una de las tareas que quiero usar, es necesario enviar imagenes, y no habia manera de que el cliente del portatil se pudieran ver las imagenes. En cambio en el movil si que las veia.</p>

<p>Para que veais lo frustante que es, llegue a probar todos los clientes habidos y por haber a traves de web y en todos me pasaba lo mismo. Me pase 3 dias peleando contra esto y en todos me daba de bruces contra la pared. Hasta que se me ocurrio la brillante idea üí°, porque no lo hice antes, de preguntar en el foro de <em>Conduit</em>. Lo que me respondieron era para darme de collejas hasta en el carnet de identidad. La pregunta era muy simple, <em>tienes el navegador en modo incognito</em> ü§Ø</p>

<p>No me lo podia creer, no podia ser que por estar con esta configuraci√≥n no se vieran las imagenes, pues ya os lo podeis imaginar. Si por esta tonteria no se pueden ver las imagenes. Desactive esa opci√≥n y las imagenes que enviaba las podia ver si problemas en el cliente de mi portatil ü§¨.</p>

<p>Llevaba 3 dias intentando solucionar este problema y todo era por culpa del navegador <em>Firefox</em> que me estaba apu√±alando por la espalda. Que es culpa mia porque podia haberlo preguntado antes, pero quien iba a pensar que por estar en <em>modo incognito</em> se bloquearan las imagenes. Una cosa m√°s que ya tenia solucionada.</p>

<p>Lo unico que me faltaba era que los servicios pudieran enviar imagenes pero esto, ya os puedo decir que hasta donde yo se, no es posible, porque por lo que he llegado a entender, y eso que he hecho miles de pruebas, y he leido mucho sobre este tema, es que primero se tiene que enviar la imagen al servidor de <em>matrix</em>, para que te de una especie de <em>URL</em>, m√°s concretamente un <strong>MXC</strong> y luego con esta direcci√≥n tu ya puedes enviar un mensaje con esa imagen adjunta. Y no todos los servicios con los que se puede usar <em>matrix</em> tienen ese tipo de funcionalidad implementada.</p>

<p>Aunque <em>matrix</em> mismo podria cambiar esta manera de funcionar y funcionar de la misma manera de <em>Telegram</em>, <em>Discord</em> o <em>Slack</em>.</p>

<p>Pero bueno, ya podia hacer funcionar correctamente mi servidor de matrix y podia enviar y recibir mensajes entre mis diferentes dispositivos.</p>

<p>Ahora solamente queda la opci√≥n de sacarle jugo al nuevo servico. Pero esto ya lo explicare en otro articulo que este me parece que ya se esta haciendo muy largo. Porque tambi√©n os tengo que decir que tuve que sudar sangre y lagrimas para conseguir lo que yo queria.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://atareao.es/podcast/crear-bots-en-matrix" target="_blank">535 - Crear bots en Matrix</a></li>
  <li><a href="https://atareao.es/podcast/de-mattermost-a-matrix" target="_blank">522 - De Mattermost a Matrix</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2022-07-11-conduit-el-matrix-escrito-en-rust.html" target="_blank">Conduit. El matrix escrito en rust</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2021-01-28-servidor-de-mensajeria-matrix-synapse-en-raspberry-ubuntu-debian--con-docker.html" target="_blank">Servidor de mensajer√≠a Matrix Synapse, en Raspberry, Ubuntu, Debian‚Ä¶ con Docker</a></li>
  <li><a href="https://cinny.in" target="_blank">Cinny</a></li>
  <li><a href="https://github.com/matrix-org/synapse" target="_blank">Synapse</a></li>
  <li><a href="https://conduit.rs" target="_blank">Conduit</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Matrix" /><category term="Docker" /><category term="Matrix" /><summary type="html"><![CDATA[A partir de unos articulos de Lorenzo y de uGeek (podeis encontrar m√°s informaci√≥n en la referencia), me pico la sobre como seria tener mi propio servidor de mensajeria y poderlo utilizar para enviar las notificaciones de mis servicios y asi no depender tanto de Telegram. Y de hay viene este nuevo articulo, donde explicare todo el proceso de instalaci√≥n y uso de mi nuevo servidor Matrix en mi VPS y os aviso que no ha sido nada sencillo.]]></summary></entry><entry><title type="html">Historia del cambio de terminal</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2025/01/13/cambiando-a-wezterm.html" rel="alternate" type="text/html" title="Historia del cambio de terminal" /><published>2025-01-13T00:00:00+00:00</published><updated>2025-01-13T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2025/01/13/cambiando-a-wezterm</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2025/01/13/cambiando-a-wezterm.html"><![CDATA[<p>Este es un articulo, que como puedes ver, es un articulo muy parecido a los que he ha escrito <strong>Lorenzo</strong>, de <a href="https://atareao.es" target="_blank">Atareao</a>, porque es algo, que si te pones a pensar es una de las aplicaciones que m√°s se utilizan en <em>GNU/Linux</em> pero a la que no se le da mucha impportacia.</p>

<p>Nos estamos refiriendo a la terminal.</p>

<!-- more -->

<p>Esa aplicaci√≥n, en mi caso, no era una cosa a la que le diera mucha importancia. Siempre usaba la que venia por defecto en el <em>Desktop</em> que instalaba en ese momento, <em>konsole</em> en el caso de <strong>KDE</strong>, <em>xfce4-terminal</em> en el caso de <strong>XFCE</strong>, o sino en el caso de usar los <em>Windows Tiling Manager</em> que el mejor ejemplo, se podria decir que es <strong>i3-WM</strong>, tambien usaba <em>xfce4-terminal</em>. Pero al usar los que venian por defecto, siempre, en mi caso, me encontraba un poco limitado porque si quieres trabajar con diferentes <em>paneles</em> o <em>escritorios</em>, tienes que usar diferentes pesta√±as y tienes que ir saltando de pesta√±a en pesta√±a y eso era un poco rollo.</p>

<p>Pero todo cambio, a partir de un <a href="https://www.youtube.com/watch?v=7gmpjacFoHM" target="_blank">video</a> del <strong>PeladoNerd</strong> donde explicaba el uso de <strong>TMUX</strong>. Un famoso <em>multiplexor</em> donde podias tener varios <em>terminales</em> en la misma ventana.</p>

<p>Esto era una mejora en mi manera de trabajar con respecto a lo que tenia antes. Pero aun habia un peque√±o problema que seguia existiendo, que aunque habia logrado una mejora muy sustancial con respecto a lo que tenia antes, tenia que seguir utilizando 2 aplicaciones:</p>
<ul>
  <li>La terminal que habia instalado.</li>
  <li><em>Tmux</em> para disponer de estas mejoras.</li>
</ul>

<p>Aqui os pongo la configuraci√≥n del fichero <code class="language-plaintext highlighter-rouge">tmux.conf</code> que estaba usando en ese momento. Nunca se sabe si os puede ser de utilidad:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">## Configuraci√≥ per defecte</span>
<span class="nb">set</span> <span class="nt">-g</span> assume-paste-time 0
<span class="c"># Iniciem les pestanyes de TMUX per 1 en comptes de 0</span>
<span class="nb">set</span> <span class="nt">-g</span> base-index 1
setw <span class="nt">-g</span> main-pane-width 126
<span class="c">#setw -g aggressive-resize off</span>
<span class="nb">set</span> <span class="nt">-g</span> status on
<span class="nb">set</span> <span class="nt">-g</span> history-limit 10000
<span class="c">#set -g pane-border-format "#P: #{pane_current_command}"</span>
<span class="nb">set</span> <span class="nt">-g</span> mouse on

<span class="c">## Canviem la keybind per defecte</span>
unbind C-b
<span class="nb">set</span> <span class="nt">-g</span> prefix C-a
<span class="nb">bind </span>C-a send-prefix

<span class="c"># custom bindings</span>
bind-key H resize-pane <span class="nt">-L</span> 5
bind-key L resize-pane <span class="nt">-R</span> 5
bind-key j <span class="k">select</span><span class="nt">-pane</span> <span class="nt">-t</span> :.-
bind-key x swap-pane <span class="nt">-t</span> :.0 <span class="se">\;</span> <span class="k">select</span><span class="nt">-pane</span> <span class="nt">-t</span> :.0
bind-key k kill-pane <span class="se">\;</span> <span class="k">select</span><span class="nt">-layout</span> main-vertical
bind-key v split-window <span class="nt">-v</span> <span class="se">\;</span> <span class="k">select</span><span class="nt">-layout</span> main-vertical <span class="se">\;</span> swap-pane <span class="nt">-t</span> :.0 <span class="se">\;</span> <span class="k">select</span><span class="nt">-pane</span> <span class="nt">-t</span> :.0
<span class="c"># EXECUTEM SCRIPT</span>
bind-key r run-shell <span class="s2">"~/.tmux/scripts/resize-adaptable.sh -l main-vertical -p 60"</span>
<span class="c">## Configuracio de diferents accions programades</span>
<span class="c"># Es recarrega la configuraci√≥ de tmux</span>
bind-key R source-file ~/.tmux.conf <span class="se">\;</span> display-message <span class="s2">"Config reloaded"</span>
<span class="c"># Es pasa a opcio "paste-buffer"</span>
<span class="c">#bind-key p paste-buffer</span>
<span class="c"># Es pasa a opci√≥ "copy-mode"</span>
<span class="c">#bind-key c copy-mode</span>

<span class="c">## Configuraci√≥ del Status Bar</span>
set-window-option <span class="nt">-g</span> window-status-format <span class="s2">""</span>
set-window-option <span class="nt">-g</span> window-status-current-format <span class="s2">""</span>

<span class="c">## Configuraci√≥ del color del Status Bar</span>
set-option <span class="nt">-g</span> status-bg colour235 <span class="c">#base02</span>
set-option <span class="nt">-g</span> status-fg yellow <span class="c">#yellow</span>

<span class="c">## Es visualitzar la adre√ßa IP</span>
<span class="nb">set</span> <span class="nt">-g</span> status-left-length 178
<span class="c"># Configuraci√≥ per a la visualitzaci√≥ de la adre√ßa IP</span>
<span class="nv">DEFAULT_GW</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span>ip route | <span class="nb">grep</span> <span class="s1">'default'</span> | <span class="nb">awk</span> <span class="s1">'{print $3}'</span><span class="si">)</span><span class="s2">"</span>

<span class="nb">set</span> <span class="nt">-g</span> status-left <span class="s2">"#[fg=green][#P] #[fg=yellow]#(ip address | grep 'enp3s0' | grep 'inet ' | awk '{print </span><span class="se">\"</span><span class="s2">inet </span><span class="se">\"</span><span class="nv">$2</span><span class="s2">}')#[fg=red]#(ip address | grep 'wlp8s0' | grep 'inet ' | awk '{print </span><span class="se">\"</span><span class="s2">inet </span><span class="se">\"</span><span class="nv">$2</span><span class="s2">}') #[fg=white]208.67.222.222 (#(ping -c1 208.67.222.222 | grep time | cut -f4 -d'=')) #[fg=white]#(ip route | grep 'default' | awk '{print </span><span class="se">\"</span><span class="s2">gateway </span><span class="se">\"</span><span class="nv">$3</span><span class="s2">}') (#(ping -c1 </span><span class="nv">$DEFAULT_GW</span><span class="s2"> | grep time | cut -f4 -d'='))"</span>

<span class="nb">set</span> <span class="nt">-g</span> status-right-length 60
<span class="nb">set</span> <span class="nt">-g</span> status-right <span class="s2">"#[fg=yellow]%d %b %Y #[fg=green]%H:%M"</span>
</code></pre></div></div>
<p>Si os fijais, hay un script (que os pongo a continuaci√≥n) que lo que hacia es redimensionar el tama√±o del panel al de la pantalla, porque no habia forma de que esto se hiciera automaticamente:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">lflag</span><span class="o">=</span>
<span class="nv">pflag</span><span class="o">=</span>
<span class="nv">tflag</span><span class="o">=</span>
<span class="k">while </span><span class="nb">getopts </span>l:p:t: name<span class="p">;</span>
<span class="k">do
    case</span> <span class="nv">$name</span> <span class="k">in
    </span>l<span class="p">)</span>    <span class="nv">lflag</span><span class="o">=</span>1
      <span class="nv">layout_name</span><span class="o">=</span><span class="nv">$OPTARG</span><span class="p">;;</span>
    p<span class="p">)</span>    <span class="nv">pflag</span><span class="o">=</span>1
          <span class="nv">percentage</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span><span class="p">;;</span>
    t<span class="p">)</span>    <span class="nv">tflag</span><span class="o">=</span>1
          <span class="nv">target</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span><span class="p">;;</span>
    ?<span class="p">)</span>   <span class="nb">printf</span> <span class="s2">"Usage: %s: [-l layout-name] [-p percentage] [-t target-window]</span><span class="se">\n</span><span class="s2">"</span> <span class="nv">$0</span>
          <span class="nb">exit </span>2<span class="p">;;</span>
    <span class="k">esac</span>
<span class="k">done

if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$pflag</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    if</span> <span class="o">!</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$percentage</span><span class="s2">"</span> <span class="nt">-eq</span> <span class="s2">"</span><span class="nv">$percentage</span><span class="s2">"</span> <span class="o">]</span> 2&gt; /dev/null<span class="p">;</span> <span class="k">then
        </span><span class="nb">printf</span> <span class="s2">"Percentage (-p) must be an integer"</span> <span class="o">&gt;</span>&amp;2
        <span class="nb">exit </span>1
    <span class="k">fi
fi
if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$lflag</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    if</span> <span class="o">[</span> <span class="nv">$layout_name</span> <span class="o">!=</span> <span class="s1">'main-horizontal'</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="nv">$layout_name</span> <span class="o">!=</span> <span class="s1">'main-vertical'</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then
        </span><span class="nb">printf</span> <span class="s2">"layout name must be main-horizontal or main-vertical"</span> <span class="o">&gt;</span>&amp;2
        <span class="nb">exit </span>1
    <span class="k">fi
fi

if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$layout_name</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"main-vertical"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nv">MAIN_PANE_SIZE</span><span class="o">=</span><span class="si">$(</span><span class="nb">expr</span> <span class="si">$(</span>tmux display <span class="nt">-p</span> <span class="s1">'#{window_width}'</span><span class="si">)</span> <span class="se">\*</span> <span class="nv">$percentage</span> <span class="se">\/</span> 100<span class="si">)</span>
    <span class="nv">MAIN_SIZE_OPTION</span><span class="o">=</span><span class="s1">'main-pane-width'</span>

<span class="k">fi

if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$layout_name</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"main-horizontal"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span><span class="nv">MAIN_PANE_SIZE</span><span class="o">=</span><span class="si">$(</span><span class="nb">expr</span> <span class="si">$(</span>tmux display <span class="nt">-p</span> <span class="s1">'#{window_height}'</span><span class="si">)</span> <span class="se">\*</span> <span class="nv">$percentage</span> <span class="se">\/</span> 100<span class="si">)</span>
    <span class="nv">MAIN_SIZE_OPTION</span><span class="o">=</span><span class="s1">'main-pane-height'</span>
<span class="k">fi

if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$target</span><span class="s2">"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
    </span>tmux setw <span class="nt">-t</span> <span class="nv">$target</span> <span class="nv">$MAIN_SIZE_OPTION</span> <span class="nv">$MAIN_PANE_SIZE</span><span class="p">;</span> tmux <span class="k">select</span><span class="nt">-layout</span> <span class="nt">-t</span> <span class="nv">$target</span> <span class="nv">$layout_name</span>
<span class="k">else
    </span>tmux setw <span class="nv">$MAIN_SIZE_OPTION</span> <span class="nv">$MAIN_PANE_SIZE</span><span class="p">;</span> tmux <span class="k">select</span><span class="nt">-layout</span> <span class="nv">$layout_name</span>
<span class="k">fi

</span><span class="nb">exit </span>0
</code></pre></div></div>
<p>Y con esta configuraci√≥n estuve un monton de tiempo porque desconocia que m√°s alla de esto habian m√°s cosas.</p>

<p>Todo esto cambio, cuando descubri a <a href="https://atareao.es" target="_blank">Lorenzo</a> donde en uno de sus <a href="https://atareao.es/podcast/kitty-el-mejor-terminal-para-linux" target="_blank">articulos</a> explicaba que habia encontrado una nueva terminal donde todo lo que, en mi caso necesitaba, ya estaba implementado por defecto. Y esta aplicaci√≥n, no era otra que <a href="https://sw.kovidgoyal.net/kitty" target="_blank">Kitty</a>. Teniendo en cuenta que las opiniones de <strong>Lorenzo</strong> las tengo en muy alta estima, pues decidi probar esta nueva <em>terminal</em>.</p>

<p>Desde el momento que la instale y la configure, aqui teneis el fichero de configuraci√≥n de <code class="language-plaintext highlighter-rouge">kitty.conf</code>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># vim:fileencoding=utf-8:ft=conf:foldmethod=marker</span>

<span class="c">#: Fonts {</span>
  font_family      Fira Code
  bold_font        auto
  italic_font      auto
  bold_italic_font auto

  font_size 10.0
<span class="c">#: }</span>

<span class="c">#: Cursor customization {</span>
  cursor <span class="c">#f19618</span>
<span class="c">#: }</span>

<span class="c">#: Scrollback {</span>
  scrollback_lines 2000
<span class="c">#: }</span>

<span class="c">#: Mouse {</span>
  detect_urls <span class="nb">yes

  </span>copy_on_select <span class="nb">yes</span>
<span class="c">#: }</span>

<span class="c">#: Terminal bell {</span>
  enable_audio_bell silence
<span class="c">#: }</span>

<span class="c">#: Window layout {</span>
  enabled_layouts tall

  window_border_width 5.0

  window_padding_width 3.0

  hide_window_decorations no
<span class="c">#: }</span>

<span class="c">#: Color scheme {</span>
  foreground <span class="c">#e5e1cf</span>
  background <span class="c">#0e1419</span>

  background_opacity 0.8

  selection_foreground <span class="c">#0e1419</span>

  selection_background <span class="c">#243340</span>

  color0 <span class="c">#000000</span>
  color8 <span class="c">#323232</span>

  <span class="c">#: black</span>

  color1 <span class="c">#ff3333</span>
  color9 <span class="c">#ff6565</span>

  <span class="c">#: red</span>

  color2  <span class="c">#b8cc52</span>
  color10 <span class="c">#e9fe83</span>

  <span class="c">#: green</span>

  color3  <span class="c">#e6c446</span>
  color11 <span class="c">#fff778</span>

  <span class="c">#: yellow</span>

  color4  <span class="c">#36a3d9</span>
  color12 <span class="c">#68d4ff</span>

  <span class="c">#: blue</span>

  color5  <span class="c">#f07078</span>
  color13 <span class="c">#ffa3aa</span>

  <span class="c">#: magenta</span>

  color6  <span class="c">#95e5cb</span>
  color14 <span class="c">#c7fffc</span>

  <span class="c">#: cyan</span>

  color7  <span class="c">#ffffff</span>
  color15 <span class="c">#ffffff</span>
<span class="c">#: }</span>

<span class="c">#: Advanced {</span>
  allow_remote_control <span class="nb">yes</span>
<span class="c">#: }</span>

<span class="c">#: Keyboard shortcuts {</span>
  kitty_mod ctrl+shift

  <span class="c">#: Clipboard {</span>

  map kitty_mod+c copy_to_clipboard
<span class="c">#: }</span>

<span class="c">#: Window management {</span>
  map kitty_mod+enter new_window
<span class="c">#: }</span>

<span class="c">#: Font sizes {</span>
  map kitty_mod+plus      change_font_size all +2.0
  map kitty_mod+minus     change_font_size all <span class="nt">-2</span>.0
  map kitty_mod+backspace change_font_size all 0
<span class="c">#: }</span>
</code></pre></div></div>
<p>Me encanto su funcionamiento y su facilidad de uso, eso si, despu√©s de que te hayas acostumbrado a las combinaciones de teclas que se tiene que usar, pero en mi caso, eran pocas, asi que no tuve ningun problema en adaptarme a ellas.</p>

<p>Pero como dice el refran, <em>todo lo bueno se acaba</em> y eso me paso. Un dia, en una actualizaci√≥n de <em>kitty</em>, todo dejo de funcionar. Dejar de funciona no es la palabra correcta, lo que paso, es que todo se fue a la üí©.</p>

<p>El problema que tenia, es que mientras lo estaba usando, me aparecian simbolos en la terminal como si se estuviera pulsando teclas aleatoriamente, sin ningun motivo, cuando esto no era asi. Podia dejar de usar el teclado y los caracteres seguian apareciendo en la pantalla.</p>

<p>Lo primero que hice fue borrar la configuraci√≥n que tenia hasta el momento, a ver si habia habido algun cambio y por eso tenia este problema, pero todo seguia igual. Tambien borre el paquete y lo volvi a instalar, pero sin ningun cambio.</p>

<p>Busque informaci√≥n, tanto en la web de <em>kitty</em> como en la web de <em>Debian GNU/Linux</em> para ser si alguien habia reportado este fallo. Pero lo unico que encontre es a 2 personas que si que lo habian reportado, pero en una versi√≥n anterior a la que yo estaba usando, el problema se habia solucionado, pero eso habia pasado hace un par de a√±os. Asi que esa no era mi soluci√≥n. Pues viendo los problemas que tenia, me puse a buscar otra terminal que me diera las misma cosas que habia tenido hasta ahora con <em>kitty</em> pero sin este molesto problema.</p>

<p>Que hacemos cuando tienes un problema de este tipo, pues preguntas al profesor, que no es otro de que <strong>Lorenzo</strong>, porque el ya habia hecho una lista de todos los posibles candidatos. Me paso esta pagina web <a href="https://github.com/cdleon/awesome-terminals" target="_blank">web</a>, que a el le habia ayudado mucho en su elecci√≥n donde podias ver todas las ventajas e inconvenientes de cada opci√≥n. Al final me decidi usar <a href="https://github.com/wez/wezterm" target="_blank">wezterm</a> que ofrecia lo mismo que <em>kitty</em>.</p>

<p>La unica pega que tiene es que para instalar el paquete en <em>Debian GNU/Linux</em>, tienes que <a href="https://wezfurlong.org/wezterm/install/linux.html#__tabbed_1_3" target="_blank">instarlo</a> por fuera del sistema. Una cosa que no me gusta mucho. Tambien tienes la opci√≥n de instalarlo a traves de <em>AppImage</em>, <em>Flatpak</em>, pero para segun que aplicaciones, las prefiero tener instaladas correctamente en el sistema.</p>

<p>El fichero que uso actualmente de configuraci√≥n es el siguiente:</p>
<div class="language-lua highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- Configuraci√≥n b√°sica para WezTerm</span>
<span class="kd">local</span> <span class="n">wezterm</span> <span class="o">=</span> <span class="nb">require</span> <span class="s1">'wezterm'</span>
<span class="kd">local</span> <span class="n">act</span> <span class="o">=</span> <span class="n">wezterm</span><span class="p">.</span><span class="n">action</span>

<span class="k">return</span> <span class="p">{</span>
  <span class="c1">-- Actualiza la barra de estado cada 1 segundo</span>
  <span class="n">status_update_interval</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> 
  <span class="c1">-- Fuente</span>
  <span class="n">font</span> <span class="o">=</span> <span class="n">wezterm</span><span class="p">.</span><span class="n">font</span><span class="p">(</span><span class="s2">"Fira Code"</span><span class="p">),</span> <span class="c1">-- Cambia esto a la fuente que prefieras</span>
  <span class="n">font_size</span> <span class="o">=</span> <span class="mi">10</span><span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="c1">-- Tama√±o de la fuente</span>
  <span class="n">default_cursor_style</span> <span class="o">=</span> <span class="s2">"BlinkingBar"</span><span class="p">,</span>

  <span class="c1">-- Ligaduras tipogr√°ficas</span>
  <span class="n">font_rules</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span>
      <span class="n">intensity</span> <span class="o">=</span> <span class="s2">"Bold"</span><span class="p">,</span>
      <span class="n">font</span> <span class="o">=</span> <span class="n">wezterm</span><span class="p">.</span><span class="n">font_with_fallback</span><span class="p">({</span><span class="s2">"Fira Code"</span><span class="p">,</span> <span class="s2">"Monospace"</span><span class="p">})</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="c1">-- Colores</span>
  <span class="n">color_scheme</span> <span class="o">=</span> <span class="s2">"Dracula"</span><span class="p">,</span> <span class="c1">-- Cambia esto por el esquema que m√°s te guste</span>

  <span class="c1">-- Estilo de la ventana</span>
  <span class="n">window_padding</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">left</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="c1">-- Espaciado desde la izquierda</span>
    <span class="n">right</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="c1">-- Espaciado desde la derecha</span>
    <span class="n">top</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="c1">-- Espaciado superior</span>
    <span class="n">bottom</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="c1">-- Espaciado inferior</span>
  <span class="p">},</span>

  <span class="c1">-- Establecer el esquema de la barra de t√≠tulo</span>
  <span class="n">window_background_opacity</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">98</span><span class="p">,</span> <span class="c1">-- Opacidad de la ventana</span>

  <span class="c1">-- Activar ligaduras de fuentes</span>
  <span class="n">use_fancy_tab_bar</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">-- Mostrar una barra de pesta√±as con los nombres de las pesta√±as</span>
  <span class="n">tab_bar_at_bottom</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">-- Coloca la barra de pesta√±as en la parte superior (cambiar a `true` si prefieres abajo)</span>
  <span class="n">hide_tab_bar_if_only_one_tab</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>

  <span class="c1">-- Comportamiento de las pesta√±as</span>
  <span class="n">default_prog</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"/bin/bash"</span><span class="p">},</span> <span class="c1">-- Cambia por tu shell preferido (zsh, fish, etc.)</span>

  <span class="n">inactive_pane_hsb</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">saturation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">,</span>
    <span class="n">brightness</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">,</span>
  <span class="p">},</span>
  
  <span class="c1">-- Teclas de acceso r√°pido</span>
  <span class="n">keys</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">-- Dividir el terminal</span>
    <span class="p">{</span><span class="n">key</span><span class="o">=</span><span class="s2">"v"</span><span class="p">,</span> <span class="n">mods</span><span class="o">=</span><span class="s2">"CTRL|SUPER"</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">act</span><span class="p">{</span><span class="n">SplitVertical</span><span class="o">=</span><span class="p">{</span><span class="n">domain</span><span class="o">=</span><span class="s2">"CurrentPaneDomain"</span><span class="p">}}},</span>
    <span class="p">{</span><span class="n">key</span><span class="o">=</span><span class="s2">"h"</span><span class="p">,</span> <span class="n">mods</span><span class="o">=</span><span class="s2">"CTRL|SUPER"</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">act</span><span class="p">{</span><span class="n">SplitHorizontal</span><span class="o">=</span><span class="p">{</span><span class="n">domain</span><span class="o">=</span><span class="s2">"CurrentPaneDomain"</span><span class="p">}}},</span>

    <span class="c1">-- Crear una nueva pesta√±a</span>
    <span class="p">{</span><span class="n">key</span><span class="o">=</span><span class="s2">"t"</span><span class="p">,</span> <span class="n">mods</span><span class="o">=</span><span class="s2">"CTRL|SHIFT"</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">wezterm</span><span class="p">.</span><span class="n">action</span><span class="p">{</span><span class="n">SpawnTab</span><span class="o">=</span><span class="s2">"CurrentPaneDomain"</span><span class="p">}},</span>

    <span class="c1">-- Cambiar entre pesta√±as</span>
    <span class="p">{</span><span class="n">key</span><span class="o">=</span><span class="s2">"LeftArrow"</span><span class="p">,</span> <span class="n">mods</span><span class="o">=</span><span class="s2">"CTRL|SUPER"</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">act</span><span class="p">{</span><span class="n">ActivatePaneDirection</span><span class="o">=</span><span class="s2">"Next"</span><span class="p">}},</span>
    <span class="p">{</span><span class="n">key</span><span class="o">=</span><span class="s2">"RightArrow"</span><span class="p">,</span> <span class="n">mods</span><span class="o">=</span><span class="s2">"CTRL|SUPER"</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">act</span><span class="p">{</span><span class="n">ActivatePaneDirection</span><span class="o">=</span><span class="s2">"Prev"</span><span class="p">}}</span>
  <span class="p">},</span>

  <span class="c1">-- Habilitar el "scrollback" (historial de la terminal)</span>
  <span class="n">scrollback_lines</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="c1">-- Aumenta el n√∫mero de l√≠neas del historial de la terminal</span>

  <span class="c1">-- Configuraci√≥n avanzada para la terminal</span>
  <span class="n">window_decorations</span> <span class="o">=</span> <span class="s2">"NONE"</span><span class="p">,</span> <span class="c1">-- Puedes elegir entre "NONE", "TITLE", "RESIZE", etc.</span>

  <span class="n">mouse_bindings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span><span class="n">event</span><span class="o">=</span><span class="p">{</span><span class="n">Up</span><span class="o">=</span><span class="p">{</span><span class="n">streak</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">button</span><span class="o">=</span><span class="s2">"Right"</span><span class="p">}},</span> <span class="n">mods</span><span class="o">=</span><span class="s2">"NONE"</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="n">wezterm</span><span class="p">.</span><span class="n">action</span><span class="p">{</span><span class="n">PasteFrom</span><span class="o">=</span><span class="s2">"PrimarySelection"</span><span class="p">}},</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Y tal como yo lo tengo configurado, me funciona perfectamente para las necesidades que tengo y lo m√°s extra√±o, es que no tengo los problemas con las pulsaciones fantasma que me ocurria con <em>kitty</em>, porque tambien habia pensado que el portatil se habia roto, pero claro, sino con otra terminal el problema no aparece, pues, el problema esta en <em>kitty</em>.</p>

<p>Aun asi, intente darle una nueva oportunidad a <em>kitty</em>, para ver si con alguna nueva actualizaci√≥n, se habia solucionado el problema de las pulsaciones, pero el problema seguia persistiendo. Hasta intente usar <em>kitty</em> con el fichero minimo de configuraci√≥n necesario para su funcionamiento, pero ni aun asi, el error seguia.</p>

<p>Asi, que no me quedo otra cosa, que volver a <em>wezterm</em> que tan buen sabor de boca me habia dejado y por eso, aun lo sigo usando hasta este momento y que espero que sea para mucho tiempo.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.youtube.com/watch?v=7gmpjacFoHM" target="_blank">POR QUE LOS SRE USAN MAC ? Mis herramientas de trabajo (Parte 2)</a></li>
  <li><a href="https://github.com/tmux/tmux" target="_blank">Tmux</a></li>
  <li><a href="https://atareao.es/podcast/kitty-el-mejor-terminal-para-linux" target="_blank">253 - Kitty, el mejor terminal para Linux</a></li>
  <li><a href="https://atareao.es/podcast/las-aplicaciones-imprescindibles-en-linux-en-2024" target="_blank">560 - Las aplicaciones imprescindibles en Linux en 2024</a></li>
  <li><a href="https://atareao.es/podcast/batalla-de-terminales-en-linux-wezterm" target="_blank">571 - Batalla de terminales en Linux. Wezterm</a></li>
  <li><a href="https://github.com/cdleon/awesome-terminals" target="_blank">awesome-terminals</a></li>
  <li><a href="https://github.com/wez/wezterm" target="_blank">Wezterm</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[Este es un articulo, que como puedes ver, es un articulo muy parecido a los que he ha escrito Lorenzo, de Atareao, porque es algo, que si te pones a pensar es una de las aplicaciones que m√°s se utilizan en GNU/Linux pero a la que no se le da mucha impportacia. Nos estamos refiriendo a la terminal.]]></summary></entry><entry><title type="html">Propositos 2025</title><link href="https://vctrsnts.github.io/blog/2025/01/11/propositos-2025.html" rel="alternate" type="text/html" title="Propositos 2025" /><published>2025-01-11T00:00:00+00:00</published><updated>2025-01-11T00:00:00+00:00</updated><id>https://vctrsnts.github.io/blog/2025/01/11/propositos-2025</id><content type="html" xml:base="https://vctrsnts.github.io/blog/2025/01/11/propositos-2025.html"><![CDATA[<p>Como a buen principio de a√±o y que me gustaria conversar en los siguientes a√±os, es poner un listado de las cosas que me gustaria conseguir este a√±o con referencia a mi servidor, docker, etc‚Ä¶ O sea, todo lo que tiene que ver con el mundo de la tecnologia y la informatica.</p>

<!-- more -->

<p>La lista que me gustaria poder conseguir a finales de este a√±o, seria la siguiente:</p>
<ul>
  <li>Conseguir de alguna manera poder escuchar los podcast en mi portatil sin tener que utilizar aplicaciones tan desactualizadas como <strong>gPodder</strong>.
    <ul>
      <li>Porque he estado buscando otras aplicaciones que tenian buena pinta, pero o que no tienen paquete para <em>Debian GNU/Linux</em> o imagen <em>AppImage</em>. Se que esta la posibilidad de usar <em>snap</em>, pero tener que instalar aplicaciones externas para usar un paquete, que teoricamente lo tiene todo pues no es muy logico.</li>
    </ul>
  </li>
  <li>Mejorar, siempre que sea posible, mi servidor <em>unRaid</em>. No se como lo podria mejorar m√°s, porque tal como esta ahora mismo lo veo perfecto, pero hay algunas cosas, sobretodo con la caja, para m√°s informaci√≥n podeis leer este <a href="/hardware/2024/09/18/modificando-servidor-1.html" target="_blank">articulo</a> porque la sujecci√≥n al tiny, no me parece muy fiable.
    <ul>
      <li>Tambien, he pensado en poner m√°s HDD pero para eso, necesitaria a√±adir una fuente externa para poderlos alimentar estos HDD.</li>
    </ul>
  </li>
  <li>Rezar üòâ para que el portatil no reviente, aunque no es un tema que me preocupe mucho, porque tengo en la reserva un <a href="/thinkcenter/2023/09/11/substitutos-portatil.html" target="_blank">tiny</a>.</li>
  <li>Mejorar mi VPS en todo lo que se pueda y sacarle m√°s partido.
    <ul>
      <li>Aunque ya esta bien tal como esta, pero siempre se puede exprimir todo un poco m√°s.</li>
    </ul>
  </li>
  <li>Tengo en mente, que es una cosa que siempre me ha rondado por la cabeza, es comprar mi propio dominio personal y por ende, tener mi propia pagina web en el VPS.
    <ul>
      <li>Aunque luego digo que no es necesario, porque tal como lo tengo ahora <strong>gitHub</strong>, tengo m√°s que suficiente para todo lo que yo hago. Pero ahi estamos, con esa idea siempre rondando por la cabeza.</li>
    </ul>
  </li>
  <li>Como habreis visto es este otro <a href="/blog/2024/12/23/nueva-web.html" target="_blank">articulo</a>, ahora mismo, la tengo ubicada como un proyecto m√°s de <strong>gitHub</strong>, anteriormente la habia tenido en <strong>gitLab</strong>.
    <ul>
      <li>Pero lo he abandonado porque el funcionamiento que tiene no me gusta mucho y despu√©s de descubrir este nuevo sitio <a href="https://codeberg.org" target="_blank">Codeberg</a>, estoy pensando es esta nueva web, ubicarla aqui, porque asi aprendemos cosas nuevas.</li>
    </ul>
  </li>
</ul>

<p>Aqui tenemos la lista que en principio son los puntos fuertes que me gustaria ver cumplido, pero nunca se sabe, porque estas listas son variables y donde digo que me gustaria hacer una cosa, luego no se cumple pero se a√±ade un nuevo tema que me inspara m√°s o ideas que voy viendo escuchando o leyendo los articulos de los podcasters que sigo actualmente:</p>
<ul>
  <li><a href="https://atareao.es">Atareao</a></li>
  <li><a href="https://elblogdelazaro.org">Lazaro</a></li>
  <li><a href="https://ugeek.github.io">uGeek</a></li>
</ul>

<p>A parte de que este mundo de la tecnologia y la informatica, es como una <em>caja de bombones</em>, nunca sabes lo que te va a tocar.</p>

<p>Y sobretodo, a ver cuantas de estos puntos de esta lista, se ven cumplidas a finales de este nuevo a√±o ü§û.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://codeberg.org">Codeberg</a></li>
  <li><a href="https://atareao.es">Atareao</a></li>
  <li><a href="https://elblogdelazaro.org">Lazaro</a></li>
  <li><a href="https://ugeek.github.io">uGeek</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Blog" /><category term="Blog" /><summary type="html"><![CDATA[Como a buen principio de a√±o y que me gustaria conversar en los siguientes a√±os, es poner un listado de las cosas que me gustaria conseguir este a√±o con referencia a mi servidor, docker, etc‚Ä¶ O sea, todo lo que tiene que ver con el mundo de la tecnologia y la informatica.]]></summary></entry><entry><title type="html">Opini√≥n Personal sobre unRaid - Final</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/unraid/2025/01/03/opini%C3%B3n-unraid-final.html" rel="alternate" type="text/html" title="Opini√≥n Personal sobre unRaid - Final" /><published>2025-01-03T00:00:00+00:00</published><updated>2025-01-03T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/unraid/2025/01/03/opini%C3%B3n-unraid-final</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/unraid/2025/01/03/opini%C3%B3n-unraid-final.html"><![CDATA[<p>Como primer articulo de este nuevo a√±o, os pongo el articulo final que me faltaba sobre <strong>mi opini√≥n personal - final</strong> con respecto a <strong>unRaid</strong>, pero he estado un poco liado y por eso me he retrasado un poco, pero ahora vamos al articulo final con respecto a lo que <strong>yo</strong> pienso.</p>

<!-- more -->

<p>Recordad, que veniamos de estos 2 articulos sobre <strong>unRaid</strong>:</p>
<ul>
  <li><a href="/unraid/2024/06/13/opinion-unraid-1.html" target="_blank">Opini√≥n Personal sobre unRaid - 1</a></li>
  <li><a href="/unraid/2024/06/23/opinion-unraid-2.html" target="_blank">Opini√≥n Personal sobre unRaid - 2</a></li>
</ul>

<p>Donde hablaba de lo bueno y de lo malo que yo le he encontrado y si no me han matado los <em>fanboys</em> de unRaid, voy a dar mi opini√≥n final sobre √©l.</p>

<p>Lo unico bueno que yo le veo es toda la gesti√≥n de los HDD que hace el sistema operativo. En pocas palabras, <strong>MergeFS</strong> que creo que es la manera que usa <em>unRaid</em> para la gesti√≥n de los HDD es una maravilla. Tambien esta toda la gesti√≥n y toda la informaci√≥n que puedes extraer del sistema ( hardware, HDD, network, temperatura, etc‚Ä¶ ) pero ya esta. Y claro, en mi caso, me gustaria obtener, no se m√°s cosas de este sistema que te lo <strong>venden</strong> como <em>el m√†s mejor de todos</em> los Sistemas Operativos para tener tu propio NAS en casa.</p>

<blockquote>
  <p>‚ö†Ô∏è Pero os digo una cosa, si yo puediera replicar esta funcionalidad en cualquier servidor que yo pudiera tener, dejaria de lado <em>unRaid</em> y lo haria, pero entiendo que configurar correctamente <strong>MergeFS</strong>, no debe ser tan facil como parece. Repito, que es lo unico positivo que le veo a todo el sistema.</p>
</blockquote>

<p>A parte, de que en algunos momentos, todo el sistema me decepciona un poco, que puede ser porque me falte investigar m√°s todas las funcionalidades / plugins que hay disponibles para instalar, pero eso tambien es un problema que yo le veo. Hay tantas cosas, tantos plugins, tanto de todo que puedes perderte en este mundo y salir de el sintiendo que has perdido el tiempo.</p>

<p>Porque si, hay muchas cosas que te pueden facilitar la vida, pero que tienes que conocerlas y no hay ningun sitio donde explique todas las posibilidades. Muchos me direis que esta la pagina de plugins de <em>unRaid</em> pero de tantas cosas que hay, te pierdes. Es lo mismo que se dice de <em>Debian GNU/Linux</em>. Que es una de las distribuciones con mayor numero de paquetes. Que por un lado es beneficioso, pero por otro lado de tanto que hay te puedes perder en tantos paquetes y no puedes sacar todo el potencial que da. Pues opino lo mismo de <em>unRaid</em>, tiene tantas cosas que, de tantas que tienes no puedes aprovecharlas.</p>

<p>Otra cosa, que no me parece que sea correcto, es que usen el SO <em>Slackware</em> como base para <em>unRaid</em>. Habiendo de mejores, <em>es mi opini√≥n personal</em>, no entiendo, porque usan este, me lo tendrian que explicar. Seguramente tendran algun motivo, pero no se me ocurre cual podria ser. Y aqui si que no voy a meterme de que si <em>Debian, Ubuntu, Gento, Arch, etc</em>, pero algun motivo tiene que haber para esta elecci√≥n.</p>

<p>Para finalizar y que es lo que me parece la peor manera de trabajar que se puede usar, es que todo el <strong>SO</strong> este instalado en un <em>USB</em>.</p>

<p>Que alguien me explique el motivo de esto. Seguramente me diran de que el <strong>SO</strong> no esta instalado realmente en el USB, sino que cuando se inicia el sistema, se carga el SO del USB a la memoria ram del servidor para asi ganar en velocidad. Ni las Raspberrys funcionan ya de esta manera.</p>

<p>Al principio, y eso que tengo todos los modelos a excepci√≥n de la RPI5, si que funcionaban de esta manera, pero habia un monton de problemas porque no estaban pensadas para ese funcionamiento y la gente se las ingenio para dejar unicamente en la SD el sistema de inicio (que no eran m√°s que 3 ficheros) y el resto en el HDD y con eso se ganaba seguridad de que no estropeabas la SD a menos que estuvieras reiniciando el sistema cada 2 x 3.</p>

<p>Y ahora me vienen los de <em>unRaid</em> y me venden la moto de que este es el mejor sistema de funcionamiento. Como que los USB no se diferencian mucho de las tarjetas SD. Vale no rebentaran cuando hayas echo 1.000 escrituras, sino que rebentaran cuando hayas echo 10.000 y entonces todo a tomar viento.</p>

<p>Tanto cuesta, y m√°s ahora que una disco SSD o un nvme estan tirados de precio. Puedes tener 300 HDD conectados a <em>unRaid</em> haciendo de array, pero no puedes tener uno que haga de sistema operativo, con todo los beneficios que con ello comporta. Que alguien me lo explique, porque no lo entiendo.</p>

<p>Para acabarlo de rematar, pero esto es m√°s cuestion a nivel de empresa, todo el follon que montaron con el tema de las licencias, <em>que si ahora son vitalicias, pues ahora ya no, hay perdon, que nos hemos equivocado, nos referiamos a las nuevas, las antiguas seguiran como estaban</em>.</p>

<p>Esto se parecia al <em>camarote de los hermanos marx</em>. Pero claro, hay que entender que son una empresa y que el aire no paga a los empleados. Aqui se equivocaron tanto la empresa como los usuarios. Unos por decir algo que luego no iban a cumplir y los otros por creerse todo lo que les dicen. O los usuarios que se piensan que lo que digan las empresas van a misa y nunca mienten ni enga√±an?</p>

<p>Porque si piensan de esta manera, ya puedes empezar a dejar de usar cualquier cosa, porque si te pones a pensar, en cualquier momento, algo que la empresa X dijo que seria para toda la vida, luego va y lo cambia porque le va mejor y da igual lo que dijera en su momento. A mi me interesa, pues lo cambio y si ha alguien no le gusta, ya sabe donde esta la puerta. Y ejemplos de este tipo hay a patadas. O no te ha pasado nunca? Porque yo conozco algunos que primero prometieron <strong>el oro y el moro</strong> y luego donde <strong>dije digo, digo diego</strong>.</p>

<blockquote>
  <p>‚ö†Ô∏è Hasta aqui mi opini√≥n personal con respecto a <em>unRaid</em>. Como veis es un peque√±o resumen de todo lo que ya habia comentado en los 2 anteriores articulos, las cosas buenas y las cosas malas. Vosotros, seguramente pensareis de una manera diferente a la mia o no, pero en eso consiste ser un a persona. Que cada uno piensa de una manera diferente. Y nunca se sabe, a lo mejor mi manera de ver a <em>unRaid</em> cambia, porque voy descubriendo cosas nuevas que hacen que mi visi√≥n vaya cambiando. No consiste en eso el aprender?</p>
</blockquote>

<p>Eso si, tengo que dar las gracias a <strong>Lazaro</strong> de <a href="https://elblogdelazaro.org">El blog de L√°zaro</a> porque gracias a el, cada dia voy descubriendo cosas nuevas sobre <strong>unRaid</strong> que van haciendo que poco a poco, muy poco a poco, mi opini√≥n vaya cambiando con respecto a algunas cosas, no todas, pero algunas si. <strong>Gracias Lazaro üëè</strong></p>
<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elblogdelazaro.org/posts/2024-12-02-integrar-metricas-de-unraid-en-homepage">Integrar m√©tricas de Unraid en Homepage</a></li>
  <li><a href="https://elblogdelazaro.org/posts/2024-07-29-backrest-backups-en-nubes-s3">Backrest, backups en nubes S3</a></li>
  <li><a href="https://elblogdelazaro.org/posts/2019-11-28-restic-backups-bien-hechos">Restic: Backups bien hechos</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="unRAID" /><category term="Debian GNU/Linux" /><category term="unRAID" /><summary type="html"><![CDATA[Como primer articulo de este nuevo a√±o, os pongo el articulo final que me faltaba sobre mi opini√≥n personal - final con respecto a unRaid, pero he estado un poco liado y por eso me he retrasado un poco, pero ahora vamos al articulo final con respecto a lo que yo pienso.]]></summary></entry><entry><title type="html">Nuevo sitio web</title><link href="https://vctrsnts.github.io/blog/2024/12/23/nueva-web.html" rel="alternate" type="text/html" title="Nuevo sitio web" /><published>2024-12-23T00:00:00+00:00</published><updated>2024-12-23T00:00:00+00:00</updated><id>https://vctrsnts.github.io/blog/2024/12/23/nueva-web</id><content type="html" xml:base="https://vctrsnts.github.io/blog/2024/12/23/nueva-web.html"><![CDATA[<p>Que no cunda el panico ante el titulo de este articulo.</p>

<p>No voy a hacer ningun cambio en este web ni voy a borrarlo todo e irme de hermita√±o a una cueva ü§£</p>

<p>Solamente es para informar, que como tenia <strong>wordpress</strong> una pagina web donde iba subiendo los libros que he ido leyendo durante estos a√±os, pues ‚Ä¶</p>

<!-- more -->

<p>De la misma manera que me paso antes, cuando di el salto a <strong>GitHub</strong> para tener un poco m√°s de control sobre la web, m√°s que <em>wordpress</em> seguro que lo tengo, pues he hecho lo mismo pero esta vez en <strong>GitLab</strong>.</p>

<p>A parte de toda la creaci√≥n de los articulos, donde sigo usando <strong>Jekyll</strong> para la generaci√≥n del sitio estatico, tambien me ha servido para aprender como es el funcionamiento de <strong>GitLab</strong>. Eso si, tengo que decir que es muy diferente a <strong>GitHub</strong> en todo, o en casi todo.</p>

<p>Lo veo todo m√°s lioso y m√°s confuso, me resulto m√°s facil <strong>GitHub</strong>, pero eso si tengo que decir que los <a href="https://elblogdelazaro.org/search/?q=GitLab" target="_blank">articulos</a> de <strong>Lazaro</strong> me sirvieron de punta de lanza para resolver todas las dudas que me iban surgiendo con respecto a funcionamiento y creaci√≥n de un sitio en <strong>GitLab</strong>.</p>

<p>De nuevo <strong>gracias Lazaro por tus articulos</strong>.</p>

<p>Tambien, tengo que decir que me apoye en <strong>Copilot</strong> (y tengo que decir que me ayudo m√°s que <strong>ChatGPT</strong>), para crear un script que me facilitara el proceso de subir los archivos a mi repositorio, porque siempre lo he encontrado tedioso y complicado.</p>

<p>El script que estoy usando actualmente para subir los archivos resultantes de mi sitio a <strong>GitLab</strong>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># Up2GitLab 0.2</span>
  <span class="c"># Actualitzar facil i rapidament el teu repositori de GitLab</span>
  <span class="c"># (CC) 2024 Victor Santos</span>
  <span class="c"># https://vctrsnts.github.io</span>
  <span class="c"># Bajo licencia GNU/GPL</span>

  <span class="c"># Mode de fer servir: executal de la seg√ºent manera:</span>
  <span class="c"># sh up2GitLab.sh</span>

  <span class="c"># Actualitzacio del public key amb GitLab perque sempre tenia problemes amb la key</span>
  <span class="nb">eval</span> <span class="s2">"</span><span class="si">$(</span>ssh-agent <span class="nt">-s</span><span class="si">)</span><span class="s2">"</span>
  ssh-add /root/.ssh/idKeyGitLab

  <span class="c"># Validaci√≥ de que estem 'conectats' a gitlab</span>
  ssh <span class="nt">-T</span> git@gitlab.com

  <span class="nb">sleep </span>10

  <span class="c"># A traves de Docker, actualitzem el fitxer RSS</span>
  <span class="c"># docker exec jekyll_book bundle exec jekyll build</span>
  <span class="c"># cp ../Gemfile .</span>
  docker <span class="nb">exec </span>jekyll_book bundle <span class="nb">exec </span>jekyll build

  <span class="nb">sleep </span>10

  <span class="nb">cp</span> ../Gemfile <span class="nb">.</span>

  <span class="c"># Solicita el mensaje del commit</span>
  <span class="nb">read</span> <span class="nt">-p</span> <span class="s2">"Introduce el mensaje del commit: "</span> commit_message

  <span class="nb">rm</span> <span class="nt">-rf</span> .fuse<span class="k">*</span>

  <span class="c"># Aseg√∫rate de estar en el directorio del repositorio</span>
  <span class="nv">repo_dir</span><span class="o">=</span><span class="s2">"directori on esta el _site de jekyll"</span>
  <span class="nb">cd</span> <span class="s2">"</span><span class="nv">$repo_dir</span><span class="s2">"</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">"Directorio del repositorio no encontrado"</span><span class="p">;</span> <span class="nb">exit </span>1<span class="p">;</span> <span class="o">}</span>

  <span class="c"># Establecer el repositorio remoto (opcional, si no est√° ya configurado)</span>
  <span class="nv">remote_repo</span><span class="o">=</span><span class="s2">"el teu repositori de GitLab"</span>
  git remote add origin <span class="s2">"</span><span class="nv">$remote_repo</span><span class="s2">"</span> 2&gt;/dev/null

  <span class="c"># Configurar la reconciliaci√≥n de ramas divergentes</span>
  git config <span class="nt">--global</span> pull.rebase <span class="nb">false</span>

  <span class="c"># A√±ade todos los cambios al √≠ndice</span>
  <span class="k">if</span> <span class="o">!</span> git add .<span class="p">;</span> <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"Error al a√±adir cambios"</span>
      <span class="nb">exit </span>1
  <span class="k">fi</span>

  <span class="c"># Realiza el commit amb el seg√ºent missatge</span>
  <span class="k">if</span> <span class="o">!</span> git commit <span class="nt">-m</span> <span class="s2">"</span><span class="nv">$commit_message</span><span class="s2">"</span><span class="p">;</span> <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"Error al realitzar el commit. Verifica que hi hagi canvis per pujar."</span>
      <span class="nb">exit </span>1
  <span class="k">fi</span>

  <span class="c"># Realiza el push a la rama master</span>
  <span class="k">if</span> <span class="o">!</span> git push origin main <span class="nt">--force</span><span class="p">;</span> <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"Error al realitzar el push a la rama master"</span>
      <span class="nb">exit </span>1
  <span class="k">fi</span>

  <span class="c"># Registre dactivitats</span>
  <span class="nv">log_file</span><span class="o">=</span><span class="s2">"</span><span class="nv">$repo_dir</span><span class="s2">/push_log.txt"</span>
  <span class="nb">echo</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">date</span><span class="si">)</span><span class="s2">: Commit realitzat amb el missatge '</span><span class="nv">$commit_message</span><span class="s2">' i push a la rama master"</span> <span class="o">&gt;&gt;</span> <span class="s2">"</span><span class="nv">$log_file</span><span class="s2">"</span>

  <span class="nb">echo</span> <span class="s2">"Canvis pujats amb exit a la rama master."</span>
</code></pre></div></div>

<p>Algunos os chocara el porque a√±ado la <strong>key</strong> momentos antes de hacer el <em>push</em>, esto lo hago, porque como tengo a parte del repositorio de <strong>GitLab</strong> tambien tengo el repositorio de <strong>GitHub</strong> y a veces el sistema se volvia loco, no he encontrado explicaci√≥n a esto, prefiero hacerlo de esta manera y asi me evito problemas y mezclo los ficheros entre los diferentes sitios. No tendria que pasar, pero nunca se sabe. Los caminos del se√±or son inescrutables üòá.</p>

<p>Asi mismo, tambien tengo un <code class="language-plaintext highlighter-rouge">sleep 10</code> porque de esa manera evito que a la hora de actualitzar mi repositorio me suba un ficher <code class="language-plaintext highlighter-rouge">.fuse*</code> a <strong>GitLab</strong>, pero no funciona del todo bien. Esto es debido, a que antes de actualizar el repositorio, ejecuto <code class="language-plaintext highlighter-rouge">docker exec jekyll_book bundle exec jekyll build</code> para regenerar los siguientes ficheros:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">feed.xml</code></li>
  <li><code class="language-plaintext highlighter-rouge">sitemap.xml</code></li>
  <li><code class="language-plaintext highlighter-rouge">robots.txt</code></li>
</ul>

<p>Con la direcci√≥n correcta del sitio, porque sino, a la hora de subirlo al repositorio, me lo subia con la ip por defecto de <strong>Jekyll</strong>, que no es otra que <em>http://0.0.0.0:4000</em> y de esta manera, es lo que he encontrado yo, pone la correcta.</p>

<p>Con este script, subo los archivos al repositorio de <strong>GitLab</strong>, espero los 5 minutos de rigor para que se actulize el sistema y ya lo tengo todo actualizado y listo para visitar.</p>

<p>Adem√°s como tambien tiene el feed que junto al script que podeis encontrar en este <a href="/debian%20gnu/linux/python/2024/12/10/publicar-redes-sociales.html" target="_blank">articulo</a> voy publicando, eso si en <a href="https://www.tumblr.com/vctrsnts" target="_blank">Tumblr</a>, para no mezclar articulos de diferentes tematicas (informatica, tecnologia, etc..) con los articulos de los libros en Mastodon. Eso si, tengo que pensar si los publico en <a href="https://bsky.app/profile/vctrsnts.bsky.social" target="_blank">BlueSky</a> o no que es m√°s como un <strong>Twitter - X</strong> pero en sus comienzos. A ver cuanto dura.</p>

<p>Y despu√©s de todo esto, <a href="https://vctrsnts.gitlab.io" target="_blank">aqui</a> podeis encontrar la nueva pagina web donde voy colgando los libros que he leido.</p>

<blockquote>
  <p>Antes de nada, avisar que la web, esta en <strong>Catal√°n</strong>. Se que un sitio de este estilo, ya de por si, tendra pocas visitas y aun menos si esta en catal√°n. Y hasta aqui puedo leer, porque sino me encenderia y este no es ni el lugar para eso ü§¨ üî•.</p>
</blockquote>

<p>Espero que os sea de utilidad y encontreis libros que os gusten y que yo ya he leido. Si teneis dudas, podeis contactar conmigo, para preguntar sobre alguno en concreto.</p>

<blockquote>
  <p>Aun me faltan por a√±adir unos cuantos m√°s. Es lo malo que tiene de ir a trabajar en Rodalies / Renfe, que tienes mucho tiempo libre ü§£.</p>
</blockquote>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elblogdelazaro.org/posts/2018-12-10-sitio-web-estatico-gitlab" target="_blank">C√≥mo crear un sitio web est√°tico en Gitlab Pages</a></li>
  <li><a href="https://elblogdelazaro.org/posts/2017-09-23-jekyll-y-gitlab" target="_blank">Como crear un blog con Jekyll y Gitlab Pages</a></li>
  <li><a href="https://vctrsnts.gitlab.io" target="_blank">Parlem de llibres</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Blog" /><category term="Blog" /><summary type="html"><![CDATA[Que no cunda el panico ante el titulo de este articulo. No voy a hacer ningun cambio en este web ni voy a borrarlo todo e irme de hermita√±o a una cueva ü§£ Solamente es para informar, que como tenia wordpress una pagina web donde iba subiendo los libros que he ido leyendo durante estos a√±os, pues ‚Ä¶]]></summary></entry><entry><title type="html">Mis aplicaciones por defecto 2024</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2024/12/11/mis-aplicaciones-2024.html" rel="alternate" type="text/html" title="Mis aplicaciones por defecto 2024" /><published>2024-12-11T00:00:00+00:00</published><updated>2024-12-11T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2024/12/11/mis-aplicaciones-2024</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2024/12/11/mis-aplicaciones-2024.html"><![CDATA[<p>Siguiendo la iniciativa de <a href="https://elblogdelazaro.org/posts/2024-12-09-mis-aplicaciones-por-defecto-2024" target="_blank">Lazaro</a>, pues tambien pondre mi granito de arena a esta buena idea, porque asi, la gente puede descubrir nuevas aplicaciones que nunca habrias pensado que existieran, y de esta manera, pues‚Ä¶</p>

<!-- more -->

<p>Y es lo que me pasa a mi, que gracias a estos listados, descubro nuevas cosas que me son utiles y que por mi cuenta, nunca habria pensado en ello.</p>

<p>Pero en mi caso, si que se puede decir que son las aplicaciones del 2024, porque un poco m√°s y escribo este articulo en el 2025 üòÅ</p>

<p>Pues aqui esta mi lista:</p>

<ul>
  <li>üìÆ Servidor de correo: Riseup y Google Mail</li>
  <li>üì® Cliente de correo: Claws Mail (en escritorio) y K9-Mail (Pixel)</li>
  <li>üì∏ Camara de fotos: Camara del Pixel</li>
  <li>üñºÔ∏è Gestor de fotos: Immich (autoalojado) y que descubri hace poco gracias a <a href="https://elblogdelazaro.org/posts/2024-11-18-marcos-de-fotos-digitales-con-immich-kiosk">Lazaro</a></li>
  <li>üóÉÔ∏è Copias de seguridad: Backrest y restic (autoalojado) y que descubri gracias a <a href="https://elblogdelazaro.org/posts/2024-06-24-backrest-una-interfaz-web-para-restic-backup">Lazaro</a></li>
  <li>üîé Navegador: Librewolf</li>
  <li>üí¨ Chat: Telegram y WhatsApp</li>
  <li>üìù Editor de texto: Geany</li>
  <li>üéûÔ∏è Ver despu√©s: MPlayer o Libreelec (HTC)</li>
  <li>‚òÅÔ∏è Almacenamiento en la nube: el espacio que me da mi servidor (unRaid)</li>
  <li>üéß Musica: Navidrome (autoalojado), Sonixd (en escritorio) y Tempo (Pixel)</li>
  <li>üìª Podcast: AnntenaPod</li>
  <li>üîê Gestor de contrase√±as: Bitwarden</li>
  <li>üìì Gesti√≥n del blog: Geany (Jekyll)</li>
</ul>

<p>Pues este es mi primer articulo de este estilo.</p>

<p>A ver si el a√±o que viene tambien le doy continuaci√≥n a este tipo de articulos, que considero que son buenos, porque gracias a ellos, la gente puede descubrir nuevas aplicaciones.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elblogdelazaro.org/posts/2024-12-09-mis-aplicaciones-por-defecto-2024" target="_blank">Mis aplicaciones por defecto 2024</a></li>
  <li><a href="https://thecheis.com/2023/12/05/mis-aplicaciones-por-defecto-en-2023" target="_blank">Mis aplicaciones por defecto en 2023</a></li>
  <li><a href="https://elblogdelazaro.org/posts/2024-11-18-marcos-de-fotos-digitales-con-immich-kiosk" target="_blank">Marcos de fotos digitales con Immich Kiosk</a></li>
  <li><a href="https://elblogdelazaro.org/posts/2024-06-24-backrest-una-interfaz-web-para-restic-backup" target="_blank">Backrest, una interfaz Web para Restic Backup</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[Siguiendo la iniciativa de Lazaro, pues tambien pondre mi granito de arena a esta buena idea, porque asi, la gente puede descubrir nuevas aplicaciones que nunca habrias pensado que existieran, y de esta manera, pues‚Ä¶]]></summary></entry><entry><title type="html">Publicando nuevos articulos en RRSS</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/python/2024/12/10/publicar-redes-sociales.html" rel="alternate" type="text/html" title="Publicando nuevos articulos en RRSS" /><published>2024-12-10T00:00:00+00:00</published><updated>2024-12-10T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/python/2024/12/10/publicar-redes-sociales</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/python/2024/12/10/publicar-redes-sociales.html"><![CDATA[<p>Este nuevo articulo, se puede decir que es la fusi√≥n de este <a href="/debian%20gnu/linux/python/2022/11/14/publicar-feed-mastodon.html" target="_blank">articulo</a> y este <a href="/debian%20gnu/linux/python/2024/11/12/publicar-feed-tumblr.html" target="_blank">otro</a> donde explicaba como dar publicidad o informar en las diferentes redes sociales que estoy, <strong>Mastodon</strong>, <strong>Tumblr</strong> y ahora <strong>BlueSky</strong> de los articulos nuevos que voy a√±adiendo asi como de los antiguos, porque nunca se sabe si algun articulo anterior puede servir de ayuda a alguna persona.</p>

<!-- more -->

<p>Pero despu√©s del anuncio que hizo <strong>@Yoyo308</strong> de que se habia apuntado en la nueva red social llamada <a href="https://bsky.app" target="_blank">BlueSky</a> que quiere llegar a ser como la antigua <strong>Twitter</strong> o la nueva <strong>X</strong>. Eso si, espero que no se convierta en lo mismo que es ahora <strong>X</strong>. Lo hice, solamente para <em>reservar</em> mi nombre de usuario.</p>

<p>Eso si, tambien os digo, que la unica que uso actualmente es <strong>Mastodon</strong>. Esto lo digo con conocimiento de causa, porque hace un mes intente volver a <strong>X</strong> y solo dure una semana, todo era üí©. Para que os hagais una idea, una porqueriza esta m√°s limpio que <strong>X</strong>.</p>

<p>Por el mismo motivo tambien me di de alta en <a href="https://www.tumblr.com/vctrsnts" target="_blank">tumblr</a>, prefiero tener el nombre que yo quiero y asi luego no arrepentirme. Ya me paso con <strong>X</strong> y no quiero que me pase lo mismo.</p>

<p>Despues de haberos pegado la chapa con esta explicaci√≥n, vayamos a por lo importante, porque tengo la sensaci√≥n de que este articulo sera un poco largo, el script que ahora mismo estoy utilizando para informar de antiguos <strong>articulos articulos</strong> que tengo en mi web para su consulta, pero en este caso, para las 3 redes sociales y a la vez. Se puede decir que es la uni√≥n del script de <a href="https://elblogdelazaro.org/posts/2021-08-16-bot-en-python-para-publicar-un-feed-de-forma-aleatorios-en-twitter-y-mastodom">mastodon</a> que nos brindo <a href="https://elblogdelazaro.org">Lazaro</a> pero ampliado, para que funcione tambien en <strong>BlueSky</strong> y <strong>Tumblr</strong> y con mis granitos de sal junto con el condimento de <a href="https://copilot.microsoft.com/onboarding">Copilot</a>, que tengo que decir, que para aclarar dudas y dar ideas nuevas para programar va mejor que <a href="https://chatgpt.com">ChatGpt</a>, me ha salido un script en <em>Python</em> muy majo.</p>

<p>El script en cuesti√≥n es el siguiente:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python
# -*- coding: utf-8 -*-
#
# Aquest script, llegeix el FEED RSS del teu blog i publicat un article de forma aleatoria  ( Mastodon, Tumblr, BlueSky )
#
# Tens que tindra instalats els seg√ºents paquets de python:
#  - os
#  - feedparser
#  - random
#  - requests
#  - atproto
#  - mastodon
#  - pytumblr
#  - python-dotenv
#
# Modificat per: Victor Santos
# Web: https://vctrsnts.github.io
#
</span><span class="kn">import</span> <span class="n">os</span>
<span class="kn">import</span> <span class="n">random</span>
<span class="kn">import</span> <span class="n">requests</span>
<span class="kn">import</span> <span class="n">feedparser</span>
<span class="kn">from</span> <span class="n">atproto</span> <span class="kn">import</span> <span class="n">Client</span> <span class="k">as</span> <span class="n">BskyClient</span><span class="p">,</span> <span class="n">models</span> <span class="k">as</span> <span class="n">BskyModels</span>
<span class="kn">from</span> <span class="n">mastodon</span> <span class="kn">import</span> <span class="n">Mastodon</span>
<span class="kn">import</span> <span class="n">pytumblr</span>
<span class="kn">from</span> <span class="n">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>

<span class="k">def</span> <span class="nf">load_environment_variables</span><span class="p">():</span>
    <span class="c1"># CARREGA LES VARIABLE D'ENTORN DES DE EL FITXER GENERAL
</span>    <span class="nf">load_dotenv</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="sh">'</span><span class="s">bsky_user</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">BSKY_USER</span><span class="sh">'</span><span class="p">,</span> <span class="bp">False</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">bsky_pass</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">BSKY_PASS</span><span class="sh">'</span><span class="p">,</span> <span class="sh">""</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">mastodon_token</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">MASTODON_TOKEN</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">mastodon_url</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">MASTODON_URL</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">consumer_key</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">CONSUMER_KEY</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">consumer_secret</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">CONSUMER_SECRET</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">oauth_token</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">OAUTH_TOKEN</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">oauth_secret</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">OAUTH_SECRET</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">feed_url</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">FEED_URL</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">image_url</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">IMAGE_URL</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">blog_name</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">BLOG_NAME</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">postBsky</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">POST_TO_BSKY</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">false</span><span class="sh">'</span><span class="p">).</span><span class="nf">lower</span><span class="p">()</span> <span class="o">==</span> <span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">postMastodon</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">POST_TO_MASTODON</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">false</span><span class="sh">'</span><span class="p">).</span><span class="nf">lower</span><span class="p">()</span> <span class="o">==</span> <span class="sh">'</span><span class="s">true</span><span class="sh">'</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">postTumblr</span><span class="sh">'</span><span class="p">:</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="sh">'</span><span class="s">POST_TO_TUMBLR</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">false</span><span class="sh">'</span><span class="p">).</span><span class="nf">lower</span><span class="p">()</span> <span class="o">==</span> <span class="sh">'</span><span class="s">true</span><span class="sh">'</span>
    <span class="p">}</span>

<span class="k">def</span> <span class="nf">fetch_feed_entries</span><span class="p">(</span><span class="n">feed_url</span><span class="p">):</span>
    <span class="c1"># LLEGEIX EL FEED I ENS RETORNAR ELS ITEMS DEL FEED
</span>    <span class="n">feed</span> <span class="o">=</span> <span class="n">feedparser</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">feed_url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">feed</span><span class="p">.</span><span class="n">entries</span><span class="p">,</span> <span class="n">feed</span><span class="p">.</span><span class="n">feed</span><span class="p">.</span><span class="n">title</span>

<span class="k">def</span> <span class="nf">select_random_item</span><span class="p">(</span><span class="n">entries</span><span class="p">):</span>
    <span class="c1"># ES SELECCIONAR UN ARTICLE ALEATORI
</span>    <span class="k">return</span> <span class="n">random</span><span class="p">.</span><span class="nf">choice</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">fetch_image_data</span><span class="p">(</span><span class="n">image_url</span><span class="p">):</span>
    <span class="c1"># OBTENIM DADES DE LA IMATGE DE LA URL
</span>    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">image_url</span><span class="p">)</span>
    <span class="n">response</span><span class="p">.</span><span class="nf">raise_for_status</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span><span class="p">.</span><span class="n">content</span>

<span class="k">def</span> <span class="nf">post_to_bluesky</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">feed_url</span><span class="p">,</span> <span class="n">image_url</span><span class="p">):</span>
    <span class="n">client</span> <span class="o">=</span> <span class="nc">BskyClient</span><span class="p">()</span>
    <span class="n">client</span><span class="p">.</span><span class="nf">login</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
    
    <span class="n">entries</span><span class="p">,</span> <span class="n">feed_title</span> <span class="o">=</span> <span class="nf">fetch_feed_entries</span><span class="p">(</span><span class="n">feed_url</span><span class="p">)</span>
    <span class="n">item</span> <span class="o">=</span> <span class="nf">select_random_item</span><span class="p">(</span><span class="n">entries</span><span class="p">)</span>
    
    <span class="n">titulo</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">title</span>
    <span class="n">uri</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">link</span>
    
    <span class="n">img_data</span> <span class="o">=</span> <span class="nf">fetch_image_data</span><span class="p">(</span><span class="n">image_url</span><span class="p">)</span>

    <span class="n">thumb</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">upload_blob</span><span class="p">(</span><span class="n">img_data</span><span class="p">)</span>
    <span class="n">embed</span> <span class="o">=</span> <span class="n">BskyModels</span><span class="p">.</span><span class="n">AppBskyEmbedExternal</span><span class="p">.</span><span class="nc">Main</span><span class="p">(</span>
        <span class="n">external</span><span class="o">=</span><span class="n">BskyModels</span><span class="p">.</span><span class="n">AppBskyEmbedExternal</span><span class="p">.</span><span class="nc">External</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="n">feed_title</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="n">titulo</span><span class="p">,</span>
            <span class="n">uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span>
            <span class="n">thumb</span><span class="o">=</span><span class="n">thumb</span><span class="p">.</span><span class="n">blob</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">client</span><span class="p">.</span><span class="nf">send_post</span><span class="p">(</span><span class="sh">'</span><span class="s">Recordant articles ja publicats:</span><span class="sh">'</span><span class="p">,</span> <span class="n">embed</span><span class="o">=</span><span class="n">embed</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">fetch_random_article</span><span class="p">(</span><span class="n">feed_url</span><span class="p">):</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">feedparser</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">feed_url</span><span class="p">)</span>
    <span class="n">feedlen</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">])</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">feedlen</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">entry</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">][</span><span class="n">num</span><span class="p">]</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="sh">'</span><span class="s">title</span><span class="sh">'</span><span class="p">]</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="sh">'</span><span class="s">link</span><span class="sh">'</span><span class="p">]</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">entry</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">summary</span><span class="sh">'</span><span class="p">,</span> <span class="sh">''</span><span class="p">)</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">tag</span><span class="p">.</span><span class="n">term</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">tags</span><span class="sh">'</span><span class="p">,</span> <span class="p">[])]</span>
    <span class="k">return</span> <span class="n">title</span><span class="p">,</span> <span class="n">link</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">tags</span>

<span class="k">def</span> <span class="nf">post_to_mastodon</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">feed_url</span><span class="p">):</span>
    <span class="n">mastodon</span> <span class="o">=</span> <span class="nc">Mastodon</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">token</span><span class="p">,</span> <span class="n">api_base_url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
    <span class="n">title</span><span class="p">,</span> <span class="n">link</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">tags</span> <span class="o">=</span> <span class="nf">fetch_random_article</span><span class="p">(</span><span class="n">feed_url</span><span class="p">)</span>
    <span class="n">status</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">Recordant articles ja publicats:</span><span class="se">\n</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">link</span><span class="si">}</span><span class="sh">"</span>
    <span class="n">mastodon</span><span class="p">.</span><span class="nf">status_post</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">authenticate_tumblr</span><span class="p">(</span><span class="n">client_vars</span><span class="p">):</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">pytumblr</span><span class="p">.</span><span class="nc">TumblrRestClient</span><span class="p">(</span>
        <span class="n">client_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">consumer_key</span><span class="sh">'</span><span class="p">],</span>
        <span class="n">client_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">consumer_secret</span><span class="sh">'</span><span class="p">],</span>
        <span class="n">client_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">oauth_token</span><span class="sh">'</span><span class="p">],</span>
        <span class="n">client_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">oauth_secret</span><span class="sh">'</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">client</span>

<span class="k">def</span> <span class="nf">create_tumblr_post</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">blog_name</span><span class="p">,</span> <span class="n">feed_url</span><span class="p">):</span>
    <span class="n">title</span><span class="p">,</span> <span class="n">link</span><span class="p">,</span> <span class="n">summary</span><span class="p">,</span> <span class="n">tags</span> <span class="o">=</span> <span class="nf">fetch_random_article</span><span class="p">(</span><span class="n">feed_url</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">&lt;strong&gt;Recordant articles ja publicats:&lt;/strong&gt;&lt;br&gt;</span><span class="si">{</span><span class="n">summary</span><span class="si">}</span><span class="sh">"</span>
    <span class="n">client</span><span class="p">.</span><span class="nf">create_link</span><span class="p">(</span>
        <span class="n">blog_name</span><span class="p">,</span> 
        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> 
        <span class="n">url</span><span class="o">=</span><span class="n">link</span><span class="p">,</span> 
        <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> 
        <span class="n">tags</span><span class="o">=</span><span class="n">tags</span>
    <span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">env_vars</span> <span class="o">=</span> <span class="nf">load_environment_variables</span><span class="p">()</span>
    
    <span class="k">if</span> <span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">postBsky</span><span class="sh">'</span><span class="p">]:</span>
        <span class="nf">post_to_bluesky</span><span class="p">(</span><span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">bsky_user</span><span class="sh">'</span><span class="p">],</span> <span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">bsky_pass</span><span class="sh">'</span><span class="p">],</span> <span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">feed_url</span><span class="sh">'</span><span class="p">],</span> <span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">image_url</span><span class="sh">'</span><span class="p">])</span>
    
    <span class="k">if</span> <span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">postMastodon</span><span class="sh">'</span><span class="p">]:</span>
        <span class="nf">post_to_mastodon</span><span class="p">(</span><span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">mastodon_token</span><span class="sh">'</span><span class="p">],</span> <span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">mastodon_url</span><span class="sh">'</span><span class="p">],</span> <span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">feed_url</span><span class="sh">'</span><span class="p">])</span>
    
    <span class="k">if</span> <span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">postTumblr</span><span class="sh">'</span><span class="p">]:</span>
        <span class="n">client</span> <span class="o">=</span> <span class="nf">authenticate_tumblr</span><span class="p">(</span><span class="n">env_vars</span><span class="p">)</span>
        <span class="nf">create_tumblr_post</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">blog_name</span><span class="sh">'</span><span class="p">],</span> <span class="n">env_vars</span><span class="p">[</span><span class="sh">'</span><span class="s">feed_url</span><span class="sh">'</span><span class="p">])</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">"</span><span class="s">__main__</span><span class="sh">"</span><span class="p">:</span>
    <span class="nf">main</span><span class="p">()</span>
</code></pre></div></div>

<p>A continuaci√≥n, os explico lo que hace cada funci√≥n ( m√°s o menos ):</p>

<h4 id="main">main()</h4>
<p>Funci√≥n de inici√≥ y la que se encarga de:</p>
<ul>
  <li>Cargar las variables del fichero general <code class="language-plaintext highlighter-rouge">load_environment_variables()</code></li>
  <li>Verifica si <code class="language-plaintext highlighter-rouge">postBsky</code>, <code class="language-plaintext highlighter-rouge">postMastodon</code>, <code class="language-plaintext highlighter-rouge">postTumblr</code> es <code class="language-plaintext highlighter-rouge">true</code>, porque si es <code class="language-plaintext highlighter-rouge">false</code>, la funci√≥n de postear un mensaje en la red social correspondiente (Mastodon, Tumblr o BlueSky), no se ejecutaria.</li>
</ul>

<h4 id="create_tumblr_postclient-blog_name-feed_url">create_tumblr_post(client, blog_name, feed_url)</h4>
<p>Funci√≥n que se encarga de enviar un post a <strong>Tumblr</strong>, necesita:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Client</code>, la conexi√≥n con <strong>Tumblr</strong>.</li>
  <li><code class="language-plaintext highlighter-rouge">blog_name</code>, nombre de tu blog en esta red social, esto es asi, porque puedes tener m√°s de uno.</li>
  <li><code class="language-plaintext highlighter-rouge">feed_url</code>, archivo RSS de nuestra web.</li>
</ul>

<h4 id="authenticate_tumblrclient_vars">authenticate_tumblr(client_vars)</h4>
<p>Funci√≥n que por decirlo de alguna manera, se encarga de hacer la conexi√≥n con <strong>Tumblr</strong>.</p>

<h4 id="post_to_mastodontoken-url-feed_url">post_to_mastodon(token, url, feed_url)</h4>
<p>Funci√≥n que se encarga de postear los mensajes a <strong>Mastodon</strong>, necesita:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">token</code>, validaci√≥n con <strong>Mastodon</strong>.</li>
  <li><code class="language-plaintext highlighter-rouge">url</code>, instancia que utilizamos.</li>
  <li><code class="language-plaintext highlighter-rouge">feed_url</code>, archivo RSS de nuestra web.</li>
</ul>

<h4 id="fetch_random_articlefeed_url">fetch_random_article(feed_url)</h4>
<p>Funci√≥n que se encarga de seleccionar aleatoriamente un articulo para postear en las redes que tengo configuradas en este momento (Mastodon y Tumblr), no se usa para <strong>BlueSky</strong> porque esta funciona de una manera diferente. El fin es el mismo, pero üòÖ</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">feed_url</code>, archivo RSS de nuestra web.</li>
</ul>

<h4 id="post_to_blueskyuser-password-feed_url-image_url">post_to_bluesky(user, password, feed_url, image_url)</h4>
<p>Funci√≥n que se encarga de posterar los mensajes a <strong>BlueSky</strong>, necesita:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">user</code>, <code class="language-plaintext highlighter-rouge">password</code>, usuario y password de validaci√≥n.</li>
  <li><code class="language-plaintext highlighter-rouge">feed_url</code>, archivo RSS de nuestra web.</li>
  <li><code class="language-plaintext highlighter-rouge">image_url</code>, imagen que queremos que acompa√±e a nuestro post.</li>
</ul>

<h4 id="fetch_image_dataimage_url">fetch_image_data(image_url)</h4>
<p>Funci√≥n que se encarga de obtener la informaci√≥n de la imagen que quieres que acompa√±e al post de <strong>BlueSky</strong>.</p>

<h4 id="select_random_itementries">select_random_item(entries)</h4>
<p>Funci√≥n que se encarga de seleccionar aleatoriamente un articulo pero para <strong>BlueSky</strong>.</p>

<h4 id="fetch_feed_entriesfeed_url">fetch_feed_entries(feed_url)</h4>
<p>Funci√≥n que se encarga de cargar todos los items / articulos del fichero RSS.</p>

<h4 id="load_environment_variables">load_environment_variables()</h4>
<p>Funci√≥n que se encarga de cargar todas las variables necesarias para el correcto funcionamiento del script, que en este caso son las siguientes:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">BSKY_USER</code>, <code class="language-plaintext highlighter-rouge">BSKY_PASS</code> usuario y password para <strong>BlueSky</strong></li>
  <li><code class="language-plaintext highlighter-rouge">MASTODON_TOKEN</code>, <code class="language-plaintext highlighter-rouge">MASTODON_URL</code> token y direcci√≥n del servidor para <strong>Mastodon</strong></li>
  <li><code class="language-plaintext highlighter-rouge">CONSUMER_KEY</code>, <code class="language-plaintext highlighter-rouge">CONSUMER_SECRET</code>, <code class="language-plaintext highlighter-rouge">OAUTH_TOKEN</code>, <code class="language-plaintext highlighter-rouge">OAUTH_SECRET</code>, las validaciones de credenciales para <strong>Tumblr</strong>.</li>
  <li><code class="language-plaintext highlighter-rouge">FEED_URL</code>, direcci√≥n del <code class="language-plaintext highlighter-rouge">feed</code> de nuestra pagina web.</li>
  <li><code class="language-plaintext highlighter-rouge">IMAGE_URL</code>, direcci√≥n de la imagen que queremos que se visualize en <strong>BlueSky</strong></li>
  <li><code class="language-plaintext highlighter-rouge">BLOG_NAME</code>, nombre del blog que usamos en <strong>Tumblr</strong>.</li>
  <li><code class="language-plaintext highlighter-rouge">POST_TO_BSKY</code>, <code class="language-plaintext highlighter-rouge">POST_TO_MASTODON</code>, <code class="language-plaintext highlighter-rouge">POST_TO_TUMBLR</code>, en que redes sociales queremos postear. Tiene que ser <code class="language-plaintext highlighter-rouge">true</code> para que se <em>activen</em>.</li>
</ul>

<p>Solo nos falta, antes de nada probarlo. Que en mi caso, fue en un <em>entorno virtual</em> de pruebas que tiene <strong>Python</strong>, no sabia que eso existia, y se hace de la siguiente manera:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="w"> </span>python <span class="nt">-m</span> venv .venv
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">source</span> .venv/bin/activate
</code></pre></div></div>

<p>Ahora si que podemos hacer todas las pruebas que queramos si necesidad de estropear o ensuciar nuestro sistema, porque una vez que hemos acabado, se desactiva y todo queda igual de limpio que antes de empezar las pruebas.</p>

<p>Eso si, para hacer funcionar el script, tenemos que tener instalados los siguientes paquetes o modulos de <strong>Python</strong>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="w"> </span>pip3.9 <span class="nb">install </span>feedparser twython Mastodon.py PyTumblr python-dotenv atproto requests
</code></pre></div></div>
<p>Por ultimo, ahora si, nos queda a√±adir este script en nuestro servidor, que en mi caso es <em>unRaid</em> para que cada noche se ejecute (vendito modulo <strong>user_scripts</strong>) y ya lo tendriamos todo listo y funcionando.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elblogdelazaro.org/posts/2021-08-16-bot-en-python-para-publicar-un-feed-de-forma-aleatorios-en-twitter-y-mastodom" target="_blank">Script de Python para publicar un Feed de forma aleatoria en Twitter y Mastodom</a></li>
  <li><a href="https://chatgpt.com" target="_blank">ChatGpt</a></li>
  <li><a href="https://copilot.microsoft.com/onboarding" target="_blank">Copilot</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Python" /><category term="Debian GNU/Linux" /><category term="Python" /><summary type="html"><![CDATA[Este nuevo articulo, se puede decir que es la fusi√≥n de este articulo y este otro donde explicaba como dar publicidad o informar en las diferentes redes sociales que estoy, Mastodon, Tumblr y ahora BlueSky de los articulos nuevos que voy a√±adiendo asi como de los antiguos, porque nunca se sabe si algun articulo anterior puede servir de ayuda a alguna persona.]]></summary></entry><entry><title type="html">Publicar feed en Tumblr</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/python/2024/11/12/publicar-feed-tumblr.html" rel="alternate" type="text/html" title="Publicar feed en Tumblr" /><published>2024-11-12T00:00:00+00:00</published><updated>2024-11-12T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/python/2024/11/12/publicar-feed-tumblr</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/python/2024/11/12/publicar-feed-tumblr.html"><![CDATA[<p>Este articulo, podria decirse que es una continuaci√≥n de este <a href="/debian%20gnu/linux/python/2022/11/14/publicar-feed-mastodon.html" target="_blank">articulo</a> pero en este caso, es para <a href="https://www.tumblr.com" target="_blank">Tumblr</a>.</p>

<p>La idea es la misma, pero para otra red social. Eso si, m√°s peque√±a y desconocida o al menos para mi. Nunca habia oido de ella, pero nunca se sabe y asi ya estoy en ella, aunque sea solamente para publicar los articulos que voy a√±adiendo a mi web / blog.</p>

<!-- more -->

<p>Partimos de la base que antes de empezar tenemos que tener instalado:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="w"> </span>pip <span class="nb">install</span> <span class="nt">--user</span> pytumblr
</code></pre></div></div>
<p>Tambien tenemos que tener <code class="language-plaintext highlighter-rouge">feedparser</code> que se usa para el tratamiento de los <em>XML</em> que si tienes este mismo <strong>script</strong> pero para <em>Mastodon</em>, seguramente ya lo tienes. Sino te tocara instalarlo.</p>

<p>El siguiente paso, es dar de alta <em>tu aplicaci√≥n</em> en el <em>API</em> de <em>Tumblr</em>. Esto es un poco confuso, porque es dificil de encontrar, pero son los siguientes:</p>
<ul>
  <li><a href="https://www.tumblr.com/oauth/register" target="_blank">Darse de alta</a></li>
  <li><a href="https://api.tumblr.com/console/calls/user/info" target="_blank">Autentificar la aplicaci√≥</a></li>
</ul>

<p>Tener en cuenta una cosa, primero os aconsejo que os creeis la cuenta en <em>Tumblr</em> y que luego accedais a estos links, sino os pedira usuario y password.</p>

<p>En el momento de dar de alta la aplicaci√≥n se obtiene:</p>
<ul>
  <li><em>Consumer_key</em></li>
  <li><em>Consumer_secret</em></li>
</ul>

<p>Luego, cuando se autentifica la aplicaci√≥n se obtiene:</p>
<ul>
  <li><em>Oauth_token</em></li>
  <li><em>Oauth_token_secret</em></li>
</ul>

<p>Para poder publicar en esta red. Despu√©s solamente tienes que tener el <em>script</em> en <code class="language-plaintext highlighter-rouge">Python</code> para publicar.</p>

<p>En este caso, pondre el que yo estoy utilizando ahora mismo, aunque estoy estudiando hacerle unos cambios para a√±adir m√°s informaci√≥n. Pero con esto ya teneis un principio.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">#!/usr/bin/env python
</span>  <span class="c1"># -*- coding: utf-8 -*-
</span>
  <span class="c1"># script que lee el feed rss de un blog y publica un articulo de forma aleatoria en twitter y mastodon
</span>
  <span class="c1"># Tienes que tener instaladas las librerias feedparser, Twython, Mastodon
</span>
  <span class="c1"># Autor: Victor Santos y un poco de ChatGPT
</span>  <span class="c1"># https://vctrsnts.github.io
</span>
  <span class="c1"># Llama a los modulos Python
</span>  <span class="kn">import</span> <span class="n">feedparser</span>
  <span class="kn">import</span> <span class="n">pytumblr</span>
  <span class="kn">import</span> <span class="n">random</span>
  <span class="kn">import</span> <span class="n">xml.etree.ElementTree</span> <span class="k">as</span> <span class="n">ET</span>

  <span class="n">consumer_key</span> <span class="o">=</span> <span class="sh">'</span><span class="s">xxxxxxxxxxxxxxx</span><span class="sh">'</span>
  <span class="n">consumer_secret</span> <span class="o">=</span> <span class="sh">'</span><span class="s">xxxxxxxxxxxxxxx</span><span class="sh">'</span>
  <span class="n">oauth_token</span> <span class="o">=</span> <span class="sh">'</span><span class="s">xxxxxxxxxxxxxxx</span><span class="sh">'</span>
  <span class="n">oauth_secret</span> <span class="o">=</span> <span class="sh">'</span><span class="s">xxxxxxxxxxxxxxx</span><span class="sh">'</span>

  <span class="c1"># Authenticate and create a client
</span>  <span class="n">client</span> <span class="o">=</span> <span class="n">pytumblr</span><span class="p">.</span><span class="nc">TumblrRestClient</span><span class="p">(</span>
      <span class="n">consumer_key</span><span class="p">,</span>
      <span class="n">consumer_secret</span><span class="p">,</span>
      <span class="n">oauth_token</span><span class="p">,</span>
      <span class="n">oauth_secret</span>
  <span class="p">)</span>
  <span class="c1"># Per extreure les categories del Feed
</span>  <span class="k">def</span> <span class="nf">extract_categories_from_specific_entry</span><span class="p">(</span><span class="n">feed_url</span><span class="p">,</span> <span class="n">entry_index</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
      <span class="c1"># Parse the feed using feedparser
</span>      <span class="n">feed</span> <span class="o">=</span> <span class="n">feedparser</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">feed_url</span><span class="p">)</span>

      <span class="c1"># If feed.entries is empty, we attempt to return categories from the first entry (index 0)
</span>      <span class="k">if</span> <span class="ow">not</span> <span class="n">feed</span><span class="p">.</span><span class="n">entries</span><span class="p">:</span>
          <span class="k">return</span> <span class="nf">get_categories_from_entry</span><span class="p">(</span><span class="n">feed</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Return categories from index 0, if possible
</span>
      <span class="c1"># If the feed has entries, extract from the specified index
</span>      <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">feed</span><span class="p">.</span><span class="n">entries</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">entry_index</span><span class="p">:</span>
          <span class="n">entry</span> <span class="o">=</span> <span class="n">feed</span><span class="p">.</span><span class="n">entries</span><span class="p">[</span><span class="n">entry_index</span><span class="p">]</span>
          <span class="c1"># Extract categories (tags) from the entry and add '"' around each category
</span>          <span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="n">category</span><span class="p">.</span><span class="n">term</span> <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">tags</span><span class="sh">'</span><span class="p">,</span> <span class="p">[])]</span>
          <span class="k">return</span> <span class="sh">"</span><span class="s">,</span><span class="sh">"</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">categories</span><span class="p">)</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Error: Feed has less than </span><span class="si">{</span><span class="n">entry_index</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s"> entries, returning categories from index 0.</span><span class="sh">"</span><span class="p">)</span>
          <span class="k">return</span> <span class="nf">get_categories_from_entry</span><span class="p">(</span><span class="n">feed</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>  <span class="c1"># Return categories from index 0
</span>          
  <span class="c1"># Helper function to get categories from the first entry (index 0)
</span>  <span class="k">def</span> <span class="nf">get_categories_from_entry</span><span class="p">(</span><span class="n">feed</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
      <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">feed</span><span class="p">.</span><span class="n">entries</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">index</span><span class="p">:</span>
          <span class="n">entry</span> <span class="o">=</span> <span class="n">feed</span><span class="p">.</span><span class="n">entries</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
          <span class="c1"># Extract categories (tags) from the entry and add '"' around each category
</span>          <span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="n">category</span><span class="p">.</span><span class="n">term</span> <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">tags</span><span class="sh">'</span><span class="p">,</span> <span class="p">[])]</span>
          <span class="k">return</span> <span class="sh">"</span><span class="s">,</span><span class="sh">"</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">categories</span><span class="p">)</span>
      <span class="k">return</span> <span class="sh">""</span>  <span class="c1"># Return empty string if no tags found
</span>
  <span class="c1"># Seleccionamos el Feed
</span>  <span class="n">feed</span> <span class="o">=</span> <span class="sh">'</span><span class="s">tu direcci√≥n web hacia el feed.xml</span><span class="sh">'</span>

  <span class="c1"># Parseamos el Feed
</span>  <span class="n">d</span> <span class="o">=</span> <span class="n">feedparser</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">feed</span><span class="p">)</span>

  <span class="c1"># Extrae la longitud del Feed y aleatoreamente selecciona un articulo
</span>  <span class="n">feedlen</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">])</span>
  <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">feedlen</span><span class="p">)</span>

  <span class="c1"># Inicializa la API de Twitter, escribe el nuevo estado y salimos d['entries'][0] es el √∫ltimo  articulo publicado
</span>  <span class="n">link</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">][</span><span class="n">num</span><span class="p">][</span><span class="sh">'</span><span class="s">link</span><span class="sh">'</span><span class="p">]</span>
  <span class="n">title</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">][</span><span class="n">num</span><span class="p">][</span><span class="sh">'</span><span class="s">title</span><span class="sh">'</span><span class="p">]</span>
  <span class="n">status_text</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">][</span><span class="n">num</span><span class="p">][</span><span class="sh">'</span><span class="s">summary_detail</span><span class="sh">'</span><span class="p">][</span><span class="sh">'</span><span class="s">value</span><span class="sh">'</span><span class="p">]</span>
  <span class="n">description</span> <span class="o">=</span> <span class="p">(</span><span class="sh">"</span><span class="s">&lt;strong&gt;Recordando articulos publicados:&lt;/strong&gt;</span><span class="sh">"</span> <span class="o">+</span> <span class="sh">"</span><span class="s">&lt;br&gt;</span><span class="sh">"</span> <span class="o">+</span> <span class="n">status_text</span><span class="p">)</span>
  <span class="n">tags</span> <span class="o">=</span> <span class="nf">extract_categories_from_specific_entry</span><span class="p">(</span><span class="n">feed</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>

  <span class="c1"># Replace 'your-blog-name' with your actual Tumblr blog name
</span>  <span class="n">blogName</span> <span class="o">=</span> <span class="sh">"</span><span class="s">tuNombreDeBlog</span><span class="sh">"</span>

  <span class="c1"># Create the post
</span>  <span class="n">client</span><span class="p">.</span><span class="nf">create_link</span><span class="p">(</span>
    <span class="n">blogName</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="n">link</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="n">tag</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">"</span><span class="s">,</span><span class="sh">"</span><span class="p">)]</span>
  <span class="p">)</span>
</code></pre></div></div>
<p>En este <em>script</em> hay que tener en cuenta unas cosas:</p>
<ul>
  <li><em>blogName</em>: Cuando te distes de alta en este red social, el nombre de usuario, es el nombre de tu blog y es el que tienes que poner aqui.</li>
  <li><em>feed</em>: Es el fichero <em>xml</em> que quieres usar</li>
  <li><em>consumer_key</em>: La primera clave que necesitas</li>
  <li><em>consumer_secret</em>: La segunda clave que necesitas</li>
  <li><em>oauth_token</em>: La tercera clave que necesitas</li>
  <li><em>oauth_token_secret</em>: La ultima de las 4 claves que necesitas</li>
</ul>

<p>Una vez, tengas el fichero creado, si quieres hacer pruebas, tienes que hacerlo de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>python3 nombreDelArchivo.py
</code></pre></div></div>
<p>Entonces, si no has tenido ningun problema, a tu cuenta de <em>Tumblr</em> te llegara un articulo aleatorio de tu web.</p>

<p>Como he dicho, aun lo tengo que mejorar, porque quiero a√±adir la imagen de la web, etc‚Ä¶ Pero esto esta en estudio.</p>

<p>Despu√©s de hacer las pruebas que creas oportunas, solo te quedara configurar el cron, para que se ejecute cuando tu quieras.</p>

<p>Tambien, tengo otro <em>script</em> que publica el ultimo articulo publicado. Se puede utilizar este mismo script, pero tienes que hacer algunas modificaciones:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Aixo ja no fa falta</span>
import random

<span class="c"># Aixo tampoc fa falta</span>
feedlen <span class="o">=</span> len<span class="o">(</span>d[<span class="s1">'entries'</span><span class="o">])</span>
num <span class="o">=</span> random.randint<span class="o">(</span>0, feedlen<span class="o">)</span>

<span class="c">#Aqui en comptes de 'num' ha de ser '0' quedan aixi</span>
status_text <span class="o">=</span> d[<span class="s1">'entries'</span><span class="o">][</span>0][<span class="s1">'title'</span><span class="o">]</span> + <span class="s1">'&lt;br&gt;'</span> + d[<span class="s1">'entries'</span><span class="o">][</span>0][<span class="s1">'link'</span><span class="o">]</span>
articulo <span class="o">=</span> <span class="o">(</span><span class="s2">"&lt;trong&gt;Ultimo art√≠culo publicado:&lt;/strong&gt;"</span> + <span class="s1">'&lt;br&gt;'</span> + status_text<span class="o">)</span>
</code></pre></div></div>
<p>El resto de codigo para publicar es el mismo.</p>
<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://github.com/tumblr/pytumblr" target="_blank">tumblr/pytumblr</a></li>
  <li><a href="https://pypi.org/project/PyTumblr2" target="_blank">PyTumblr2 0.2.4</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Python" /><category term="Debian GNU/Linux" /><category term="Python" /><summary type="html"><![CDATA[Este articulo, podria decirse que es una continuaci√≥n de este articulo pero en este caso, es para Tumblr. La idea es la misma, pero para otra red social. Eso si, m√°s peque√±a y desconocida o al menos para mi. Nunca habia oido de ella, pero nunca se sabe y asi ya estoy en ella, aunque sea solamente para publicar los articulos que voy a√±adiendo a mi web / blog.]]></summary></entry><entry><title type="html">Servicio para actualizar imagenes docker</title><link href="https://vctrsnts.github.io/docker/vps/2024/10/28/script-actualizar-docker.html" rel="alternate" type="text/html" title="Servicio para actualizar imagenes docker" /><published>2024-10-28T00:00:00+00:00</published><updated>2024-10-28T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/vps/2024/10/28/script-actualizar-docker</id><content type="html" xml:base="https://vctrsnts.github.io/docker/vps/2024/10/28/script-actualizar-docker.html"><![CDATA[<p>Como he tenido malas experencias a la hora de usar servicios para mantener las imagenes actualizadas, he cambiado el servici√≥ que tenia actualmente <strong>whatsup</strong> por <strong>cup</strong>.</p>

<!-- more -->

<p>En estos 3 articulos donde explico todo el proceso:</p>
<ul>
  <li><a href="/debian%20gnu/linux/docker/2023/01/25/usando-watchtower.html" target="_blank">Usando watchtower</a></li>
  <li><a href="/docker/2023/02/19/actualizacion-watchtower.html" target="_blank">Cambiando watchtower por diun</a></li>
  <li><a href="/docker/2023/04/29/donde-dije-digo-digo-diego.html" target="_blank">Donde digo dije, digo Diego</a></li>
</ul>

<p>Pero no me hacia mucha gracia, asi que cambie a <strong>Whatsup</strong>, pero me volvia un poco loco y buscaba algo m√°s facil y simple, que simplemente me informara de lo que hay, sin tantas complicaciones como me daba <strong>Whatsup</strong>.</p>

<p>Hasta que encontre este <a href="https://elblogdelazaro.org/posts/2024-10-04-comprueba-las-actualizaciones-de-tus-imagenes-docker-con-cup-docker" target="_blank">articulo</a> en el <strong>blog de lazaro</strong> donde daba una alternativa a <strong>Whatsup</strong>. Este nuevo servicio es <a href="https://github.com/sergi0g/cup" target="_blank">cup</a>, donde el funcionamiento es muy parecido a <strong>Whatsup</strong> pero m√°s simple.</p>

<p>Asi que me lei el articulo y me resulto muy interesante asi que lo he instalado en mi servidor y me ha gustado mucho y lo he dejado instalado porque me parece muy interesante. Aunque tiene algunos errores, ten en cuenta, que este servicio esta en construcci√≥n, asi que a lo mejor cuando uses tu, el error que tengo yo (no puedo cambiar el tema de la web), puede que este ya solucionado, pero‚Ä¶</p>

<p>La instalaci√≥n es muy simple. Yo en mi caso lo he instalado a traves de <code class="language-plaintext highlighter-rouge">docker-compose</code> de la siguiente manera:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cup</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/sergi0g/cup:latest</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">cup</span> <span class="c1"># Optional</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
  <span class="na">networks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">internal</span>
  <span class="na">command</span><span class="pi">:</span> <span class="s">-c /config/cup.json serve</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/var/run/docker.sock:/var/run/docker.sock</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/cup/cup.json:/config/cup.json</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">traefik.enable=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.services.cup.loadbalancer.server.port=${PORT}</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.cup.entrypoints=websecure</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.cup-secure.middlewares=myauth@file</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.cup.rule=Host(`${CUP_SERVER}`)</span>
</code></pre></div></div>
<p>Como podeis ver, en mi caso, uso <strong>traefik</strong> por eso tengo las respectivas etiquetas. Pero funciona de la misma manera sin estas etiquetas, pero si es asi, tienes que a√±adir el puerto que quieres usar:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cup</span><span class="pi">:</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">8000:8000</span>
</code></pre></div></div>
<p>Y con esto tendras una pagina web, a la que accederas desde el puerto que tu indiques y veras los servicions que estan disponibles junto con los que tienen disponible la actualizaci√≥n.</p>

<p>A parte de tener este servicio, se que podria usar <strong>diun</strong>, volver a <strong>whatsup</strong> o <strong>watchtower</strong>, tambien me he echo un script en <code class="language-plaintext highlighter-rouge">bash</code> para actualizar los servicios m√°s facilmente, lo hago yo manualmente, pero me resulta m√°s comodo de esta manera, pero para simplificar las instrucciones necesarias.</p>

<p>El script tiene lo siguiente:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c">#!/bin/bash</span>

   <span class="k">for </span>param <span class="k">in</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span><span class="p">;</span> <span class="k">do

     </span>docker compose pull <span class="nv">$param</span> <span class="o">&amp;&amp;</span> docker compose up <span class="nt">-d</span> <span class="nv">$param</span> <span class="o">&amp;&amp;</span> docker image prune

   <span class="k">done</span>
</code></pre></div></div>
<p>Se usa de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="w"> </span>sh update_docker.sh docker_1 docker_2 ...
</code></pre></div></div>
<p>Y con esto ya he finalizado este articulo rapido y facil. Que ha veces son los m√°s dificiles de hacer.</p>
<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://es.ccm.net/ordenadores/linux/2368-bash-los-parametros" target="_blank">Pasar par√°metros Bash script desde la Shell</a></li>
  <li><a href="https://elblogdelazaro.org/comprueba-las-actualizaciones-de-tus-im%C3%A1genes-docker-con-cup/" target="_blank">Comprueba las actualizaciones de tus im√°genes docker con cup</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="VPS" /><category term="Docker" /><category term="VPS" /><summary type="html"><![CDATA[Como he tenido malas experencias a la hora de usar servicios para mantener las imagenes actualizadas, he cambiado el servici√≥ que tenia actualmente whatsup por cup.]]></summary></entry><entry><title type="html">Los podcast que escucho</title><link href="https://vctrsnts.github.io/blog/2024/10/21/podcast-escucho.html" rel="alternate" type="text/html" title="Los podcast que escucho" /><published>2024-10-21T00:00:00+00:00</published><updated>2024-10-21T00:00:00+00:00</updated><id>https://vctrsnts.github.io/blog/2024/10/21/podcast-escucho</id><content type="html" xml:base="https://vctrsnts.github.io/blog/2024/10/21/podcast-escucho.html"><![CDATA[<p>Este va a ser un articulo como muchos otros, donde la gente explica que podcast sigue o escucha, pero antes de eso, lo primero es felicitar a <strong>Jose</strong> de <a href="https://www.ivoox.com/podcast-frente-al-cliente_sq_f1819687_1.html" target="_blank">Frente al Cliente</a> por el premio, merecidisimo, que le otrogaron en las <strong>JPOD 2024</strong>.</p>

<p>Lo que me extra√±a es que no fuera a buscarlo. Sera por esa mala costumbre que tienen los camareros de trabajar los fines de semana üòú.</p>

<p>Muchas felicidades <strong>Jose</strong></p>

<!-- more -->

<p>Y ahora pasemos a lo que interesa, os pondre a continuaci√≥n los podcast que sigo y al genero a que pertenecen, tal como los tengo yo clasificados, en algunos podre una peque√±a rese√±a sobre lo que opinio.</p>

<blockquote>
  <p>Es mi opini√≥n personal. Sino te gusta leer opiniones de la gente que van en contra de tus ideas, te recomiendo que dejes de leer.</p>
</blockquote>

<h3 id="historia">Historia</h3>
<h4 id="--en-guardia---catalunya-radio">- En Guardia - Catalunya Radio</h4>
<p>Maximo exponente del <a href="https://www.3cat.cat/3cat/en-guardia" target="_blank">podcast</a> sobre temas de la historia de Catalunya y del mundo. Puedes escuchar desde la <strong>Bullanga de Barcelona en 1835</strong> hasta la historia de la <strong>piedra de Girona</strong>. Algo debe tener este programa que lleva 23 a√±os en antena. Tan mal no lo deben hacer, creo yo.</p>

<p>No me canso de escuchar sus episodios y no os miento si digo, que algunos de los capitulos que han hecho, los he escuchado m√°s de una vez.</p>

<p>Y como dice ese famoso entrenador de futbol, <em>no hace falta decir nada m√°s</em>.</p>

<h4 id="--memorias-de-un-tambor">- Memorias de un tambor</h4>
<p><a href="https://memoriasdeuntambor.com" target="_blank">Podcast</a> de historia pero solamente de Espa√±a. No se como descubri este podcast, pero como habla de historia, pues a la saca.</p>

<p>Eso si, tengo que matizar que algunos temas de los que trata <em>estoy totalmente en contra de la opini√≥n que se da en el podcast</em>. Es muy facil opinar o explicar la historia pero solo desde un punto de vista, y hasta aqui puedo leer. Porque como dice el refran, <em>la historia la escriben los vencedores</em>.</p>

<p>Pero hay que tener un cosa en cuenta, lo valiente no quita lo bailado. Si te gusta la historia, con este podcast disfrutaras.</p>

<h3 id="informatica">Informatica</h3>
<h4 id="--atareao-con-linux">- Atareao con Linux</h4>
<p>Que se puede decir de este <a href="https://atareao.es" target="_blank">podcast</a>. Tendrias que tenerlo en la primera posici√≥n de podcast si estas en el mundo de la informatica. No se le puede decir que es un genio, pero poco le falta. Pero si que se le puede llamar el MacGyver de la informatica. Dale una hoja de papel y un lapiz y es capaz de hacerte un docker para controlar las luces de tu arbol de navidad üéÑ.</p>

<p>Se podrian decir m√°s cosas, pero seguramente seria repetir lo que todo el mundo ya ha dicho. Eso si, si hay que ponerle un pero, es que quiere hacer tantas cosas que a veces no llega a todas.</p>

<h4 id="--desahogo-geek">- Desahogo Geek</h4>
<p>Un <a href="https://www.ivoox.com/podcast-desahogo-geek_sq_f11202056_1.html" target="_blank">podcast</a> hecho por una persona como tu o como yo pero con un gran amor por todo lo relacionado con tecnologia y la informatica. Es capaz de hablarte tanto de <em>bitcoins</em> como de <em>servidores</em>.</p>

<p>Estuvo durante un tiempo desconectado del mundo del podcasting, supongo que tendria que hacer un reset de todo. Y ahora ha vuelto, pero con las ideas m√°s claras, eso es lo que entendi de su ultimo podcast, que todo seria m√°s natural y menos artificial üòÄ.</p>

<p>Si tuviese que decir una cosa, seria <em>que se te ha echado de menos durante todo este tiempo</em>.</p>

<h4 id="--podcast-linux">- Podcast Linux</h4>
<p>Gran exponente del <a href="https://podcastlinux.com" target="_blank">podcasting</a> en Espanya y en especial de GNU/Linux que cualquier persona de este mundillo tendria que escuchar. Una lastima que nos dejara por cuestiones ajenas al podcasting, pero la vida es la vida y las prioridades cambian. Asi es la vida.</p>

<p>Te aconsejo escuchar todos los podcast, porque aunque algunos tengan unos a√±os, aun siguen vigentes. Puedes descubrir entre sus podcast, desde su incursi√≥n al mundo de los <em>Xeon chinos</em> hasta de los portatiles reciclados.</p>

<p>Y es a el, al que tengo que darles las gracias por haberme echo descubrir los <strong>Thinkpads</strong>.</p>

<h4 id="--ugeek">- uGeek</h4>
<p>Un nuevo <a href="https://ugeek.github.io/list.html" target="_blank">podcast</a> que tendrian que estar en tu lista de los 10 magnificos. Muy buenas explicaciones de todo tipo de temas relacionados con la informatica.</p>

<p>Me ha servido de inspiraci√≥n para muchos de mis proyectos que sin sus podcasts y su pagina web, no hubiera podido seguir.</p>

<p>Actualmente esta un poco desaparecido, espero que no sea nada grave. <em>uGeek</em>, se te echa de menos.</p>

<h4 id="--sayonara-tecno">- Sayonara Tecno</h4>
<p>Un <a href="https://www.ivoox.com/podcast-sayonara-tecno_sq_f12083422_1.html" target="_blank">podcast</a> que descubri escuchando a <strong>Atareao</strong>, cuanto le debo a nuestro querido <strong>Lorenzo</strong>, de 10 minutos como maximo, pero muy interesantes, porque habla de la tecnologia pero de una manera amena y que hace que sea muy interesante.</p>

<p>Porque hay que reconocerlo, a veces la tecnologia y informatica pueden ser muy pesadas.</p>

<h4 id="--salmorejo-geek---sube-parriba">- Salmorejo Geek - Sube Parriba</h4>
<p>Un <a href="https://podcasters.spotify.com/pod/show/subeparriba" target="_blank">podcast</a>, la mejor definici√≥n de este podcast, es lo que dice el mismo sobre su podcast:</p>

<p><em>El podcast que nunca deber√≠as haber escuchado. Cosas que me pasan por la cabeza sin ning√∫n tipo de intenci√≥n. Sube parriba y baja pabao. Un Podcast de @yoyo308</em>.</p>

<p>Increible y muy agradable podcast que hace <strong>Yoyo</strong>, nuestro famoso jornalero que puede darte una disertaci√≥n tanto de Ubuntu, GNU/Linux, Mac o de la mejor manera de sulfatar los olivos. Nunca se sabe con que te va a salir.</p>

<p>Mi enhorabuena a esta estrella de los bits. Gracias por todo el trabajo que haces.</p>

<h3 id="general">General</h3>
<h4 id="--charlando-con">- Charlando con‚Ä¶</h4>
<p>Interesante <a href="https://podcasters.spotify.com/pod/show/alberto5757" target="_blank">podcast</a> de nuestro querido <em>PapaFriki</em> donde hace interesantes entrevistas a todo tipo de personas. Desde abogados, funcionarios, enfermeras y todas las personas que a veces nunca pensariamos que tienes cosas interesantes que decir, pero que luego cuando las oyes, dices, <em>pues mira esto no lo sabia y es muy interesante</em>.</p>

<p>Sigue asi <em>PapaFriki</em>.</p>

<h4 id="--frente-al-cliente">- Frente al cliente</h4>
<p>Que m√°s se puede decir de este <a href="https://www.ivoox.com/podcast-frente-al-cliente_sq_f1819687_1.html" target="_blank">podcast</a> que no haya dicho en el inicio de este articulo.</p>

<p>Merecido premio que ha conseguido nuestro camarero favorito y que nos ense√±a las entra√±as de lo que sucede en el otro lado de la barra de un bar o restaurante.</p>

<p>A parte de que a veces, nos sorprende con temas que no esperarias escuchar en un podcast de este estilo, esto va por el podcast que hicistes con referencia a los <em>robots</em> y a la <em>IA</em>.</p>

<p>Sigue asi, campeon y enhorabuena por el premio recibido üèÜ</p>

<h4 id="--papafriki">- Papafriki</h4>
<p><a href="https://www.ivoox.com/podcast-papa-friki_sq_f1557748_1.html" target="_blank">Podcast</a> donde realmente se cumple lo que promete el creador, las <em>batallitas del d√≠a a d√≠a de un Pap√° Friki con su familia</em> y el mundo de la tecnologia que le rodea, que no es poco.</p>

<p>Todos sus programas son interesantes de escuchar, pero tengo que darle un tiron de orejas con respecto a un capitulo, que siento ser pesado, pero no se puede hacer un podcast sobre ese tema, sin conocer o escuchar a la otra parte.</p>

<p>A excepci√≥n de este tiron de orejas, podcast muy interesante y muy recomendable.</p>

<h4 id="--espa√±a-criminal">- Espa√±a Criminal</h4>
<p><a href="https://www.ivoox.com/podcast-espana-criminal_sq_f11827506_1.html" target="_blank">Podcast</a> de tematica criminal que descubri escuchando <strong>Charlando con‚Ä¶</strong> donde trata temas de crimenes, pero a nivel de juicio y explicando con palabras muy facilos todo los sucesos tal como se describieron en el juicio.</p>

<p>Es un tema que esta muy de moda ultimamente, pero que <em>Francisco</em> lo hace muy ameno y facil.</p>

<h4 id="--pa-ti-la-perra-gorda">- Pa ti la perra gorda</h4>
<p>Interesante <a href="https://www.ivoox.com/podcast-pa-ti-perra-gorda_sq_f11672823_1.html" target="_blank">podcast</a> por la tematica que tratan. Nuestros protagonistas que muestras sus diferentes puntos de vista sobre que o quien es mejor.</p>

<p>Quien es mejor, <em>el inspector gadget o Sailormon</em> o entre <em>Pamela Anderson y Gracita Morales</em> üòÅ</p>

<h4 id="--estas-online---joanna-rubio">- Estas Online - Joanna Rubio</h4>
<p>Este <a href="https://www.ivoox.com/podcast-estas-online-podcast_sq_f11900875_1.html" target="_blank">podcast</a> lo descubri escuchando a <strong>Pa ti la Perra</strong> y es como una radio-novela, tan famosas antiguamente, pero que en este caso, la creadora del mismo, le da una vuelta de tuerca al concepto, porque Joanna recrea la telenovela pero a traves de wasaps.</p>

<p>Todavia no he podido echarle el guante al primer capitulo, pero es lo que pasa cuando tienes tantas cosas por escuchar, que el tiempo se te echa encima.</p>
<h4 id="referencia">Referencia</h4>]]></content><author><name>VSANTOS</name></author><category term="Blog" /><category term="Blog" /><summary type="html"><![CDATA[Este va a ser un articulo como muchos otros, donde la gente explica que podcast sigue o escucha, pero antes de eso, lo primero es felicitar a Jose de Frente al Cliente por el premio, merecidisimo, que le otrogaron en las JPOD 2024. Lo que me extra√±a es que no fuera a buscarlo. Sera por esa mala costumbre que tienen los camareros de trabajar los fines de semana üòú. Muchas felicidades Jose]]></summary></entry><entry><title type="html">Controlando la temperatura del servidor</title><link href="https://vctrsnts.github.io/hardware/unraid/2024/10/20/controlado-temperatura-servidor.html" rel="alternate" type="text/html" title="Controlando la temperatura del servidor" /><published>2024-10-20T00:00:00+00:00</published><updated>2024-10-20T00:00:00+00:00</updated><id>https://vctrsnts.github.io/hardware/unraid/2024/10/20/controlado-temperatura-servidor</id><content type="html" xml:base="https://vctrsnts.github.io/hardware/unraid/2024/10/20/controlado-temperatura-servidor.html"><![CDATA[<p>Como ya comente en el anterior <a href="/hardware/2024/10/19/modificando-servidor-2.html" target="_blank">articulo</a> donde explicaba que habia puesto un <strong>Xeon</strong> en mi servidor y todo lo referente a la temperatura.</p>

<p>Pero claro, eso me gustaria verlo reflejado en <strong>unRAID</strong>, porque hasta ahora, solamente habia podido visualizar la temperatura de la CPU, de la placa base era imposible cuando teoricamente los Tiny son equipos con componentes muy normales y comunes.</p>

<!-- more -->

<p>Pues en este caso, de comunes lo tienen todo menos los sensores de control de la temperatura. Adem√°s <strong>unRAID</strong> no ayudaba mucho con ello. Seguramente muchos direis, y por que no instalas el plugin <strong>Dynamix System Temperature</strong> y problema solucionado.</p>

<p>Ya lo tengo instalado y aun as√≠, lo unico que podia visualizar era la temperatura de la CPU:</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/configure_temperature_01.jpg" alt="configure_temperature_01.jpg" />
    </div>
    
</div>

<p>Y eso que teoricamente <em>sensors</em> funcionaba correctamente. Eso creia yo.</p>

<p>Asi que despu√©s de instalar el <strong>Xeon</strong> me propuse visualizar todas las temperaturas posibles para asi controlar mejor el servidor, porque no es lo mismo tener un <em>i5-6500T</em> que un <strong>Xeon</strong> y lo primero de todo era saber que <strong>sensor</strong> se tenian que usar para poder visualizar la informaci√≥n de ellos. y resulto que me toco el peor de todos, el que es m√°s complicado de hacer funcionar. Ni m√°s ni menos que el <strong>nct6683</strong>.</p>

<p>Y en todos los sitios que encontraba informaci√≥n, porque me resulto muy dificil, decian que no era nada facil hacerlo funcionar en GNU/Linux, pero yo segui buscando hasta que encontre la siguiente <a href="https://fun2ex.com/fixed-z370m-pro4-unraid-temperature-problem" target="_blank">web</a>, donde explicaban que se tenia que hacer para hacer funcionar los sensores del <strong>nct6683</strong>.</p>

<p>Lo que habia que hacer es ejecutar lo siguiente:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">root@unRaid: modprobe coretemp
root@unRaid: modprobe -r nct6683
root@unRaid: modprobe nct6683 force=1
</span></code></pre></div></div>
<p>Y lo probe, y mira por donde que dio resultado. Podia ver todos los sensores disponibles en la placa, incluido la velocidad del ventilador.</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/configure_temperature_02.jpg" alt="configure_temperature_02.jpg" />
    </div>
    
</div>

<p>Asi que me dije, pues mira, no ha sido tan dificil como parecia.</p>

<p>Ingenuo de mi. <strong>UnRAID</strong> no hace nada para facilitar las cosas, sino todo lo contrario, las complica y cada vez, me estoy dando cuenta de ello.</p>

<p>Lo que pasa es que si reinicias <strong>unRAID</strong> todo se pierde y ya no detecta nada. Asi que tenia que buscar una manera de que esta configuraci√≥n fuera permanente. Busque informaci√≥n sobre que hacer en estos casos en <strong>unRAID</strong> y un <a href="https://forums.unraid.net/topic/18959-script-to-enable-sata-controllers-without-kernel-modification/" target="_blank">hilo</a> decia, que si pones un fichero <code class="language-plaintext highlighter-rouge">bash</code> en <code class="language-plaintext highlighter-rouge">/boot/config</code> el sistema lo ejecuta cuando se inicia. Pero no pasaba asi y si queria que los sensores volvieran a funcionar, tenia que volver a ejecutar las 3 instrucciones de nuevo.</p>

<p>En otro <a href="https://forums.unraid.net/topic/143931-how-can-i-get-modules-to-load-on-reboot-automatically/" target="_blank">hilo</a>, que si lo pones en <code class="language-plaintext highlighter-rouge">/boot/custom/scripts</code> tambien funcionaba, pero en mi caso, ninguno de los 2 casos era el correcto.</p>

<p>Y no veia la manera de como solucionar la cosa, hasta que recorde, que tengo un <code class="language-plaintext highlighter-rouge">script</code> que se ejecuta cada vez que se inician los arrays, que me instala las aplicaciones necesarias para hacer publicaciones en <em>Mastodon</em>, y pense, porque no, si ejecuto el <code class="language-plaintext highlighter-rouge">bash</code> cada vez que se inicia el array, tendria que funcionar sin ningun problema.</p>

<p>No tenia nada que perder, y lo probe. Y resulto perfecto. Ya podia visualizar correctamente la temperatura de la CPU, de la placa base y la velocidad del ventilador. Que m√°s se podia pedir. Pero eso si, tener que recurrir a scripts para hacer esto, me parece un poco üò°</p>

<p>Y asi se puede ver como queda actualmente:</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/configure_temperature_03.jpg" alt="configure_temperature_03.jpg" />
    </div>
    
</div>

<p>Un pasito m√°s que he dado para tener mi servidor como a mi me gusta.</p>

<p>Y ahora estoy pensando en conseguir que pueda enviar mis copias de seguridad de mi movil al servidor. He oido que hay un docker que se llama <strong>Syncthing</strong> que hace algo parecido, pero tengo que estudiarlo m√°s.</p>

<p>Vosotros que servicios de docker teneis y que penseis que son indispensables de tener en un servidor???</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://fun2ex.com/fixed-z370m-pro4-unraid-temperature-problem" target="_blank">Resolve the issue of the ASRock Z370M-Pro4 motherboard not being able to obtain fan speed in Unraid</a></li>
  <li><a href="https://forums.unraid.net/topic/115301-%E6%B8%A9%E5%BA%A6%E6%A3%80%E6%B5%8B%E6%8F%92%E4%BB%B6%E6%97%A0%E6%B3%95%E6%A3%80%E6%B5%8B%E5%88%B0%E4%B8%BB%E6%9D%BF%E9%A3%8E%E6%89%87%E7%9A%84%E8%BD%AC%E9%80%9F" target="_blank">El complemento de detecci√≥n de temperatura no puede detectar la velocidad del ventilador de la placa base, <strong>web en chino</strong></a></li>
  <li><a href="https://forums.unraid.net/topic/18959-script-to-enable-sata-controllers-without-kernel-modification/" target="_blank">Script to enable SATA Controllers without kernel modification</a></li>
  <li><a href="https://forums.unraid.net/topic/143931-how-can-i-get-modules-to-load-on-reboot-automatically/" target="_blank">How can I get modules to load on reboot automatically?</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Hardware" /><category term="unRAID" /><category term="Hardware" /><category term="unRAID" /><summary type="html"><![CDATA[Como ya comente en el anterior articulo donde explicaba que habia puesto un Xeon en mi servidor y todo lo referente a la temperatura. Pero claro, eso me gustaria verlo reflejado en unRAID, porque hasta ahora, solamente habia podido visualizar la temperatura de la CPU, de la placa base era imposible cuando teoricamente los Tiny son equipos con componentes muy normales y comunes.]]></summary></entry><entry><title type="html">Modificaciones en el servidor - 2</title><link href="https://vctrsnts.github.io/hardware/2024/10/19/modificando-servidor-2.html" rel="alternate" type="text/html" title="Modificaciones en el servidor - 2" /><published>2024-10-19T00:00:00+00:00</published><updated>2024-10-19T00:00:00+00:00</updated><id>https://vctrsnts.github.io/hardware/2024/10/19/modificando-servidor-2</id><content type="html" xml:base="https://vctrsnts.github.io/hardware/2024/10/19/modificando-servidor-2.html"><![CDATA[<p>Se ha venido una nueva modificaci√≥n en el servidor, y una m√°s, pero esta vez, ha sido m√°s a nivel de hardware que de software.</p>

<p>Como sabreis, si no os habeis dado cuenta leyendo algunos de mis articulos, estoy subscrito al canal de telegram de <a href="https://homelabs.club" target="_blank">HomeLabs.club</a>, donde siempre tienen alguna nueva cosa para liarte la manta a la cabeza.</p>

<!-- more -->

<p>Una de estas cosas, fue un sorteo que hicieron entre los miembros VIP del canal y como nunca tengo muchas esperanzas en este tipo de sorteos, pues me apunte. Nunca se sabe lo que puede pasar.</p>

<p>Lo que paso fue increible, habian muchas cosas por sortear, televisores, Tiny‚Äôs, telefonos, hubs, etc‚Ä¶ Y yo junto con unos pocos fui uno de los agraciados con que me tocase un Tiny, en concreto un M710q y seguramente muchos direis, uff que poca cosa, pero si os digo lo que llevaba en sus extra√±as ya no direis lo mismo.</p>

<p>Este M710q, llevaba un <a href="https://www.intel.la/content/www/xl/es/products/sku/192993/intel-xeon-e2286m-processor-16m-cache-2-40-ghz/specifications.html" target="_blank">Intel¬Æ Xeon¬Æ E-2286M</a>, con las siguientes caracteristicas (resumen):</p>
<ul>
  <li>Cantidad de n√∫cleos: 8</li>
  <li>Total de subprocesos: 16</li>
  <li>Frecuencia turbo m√°xima: 5.00 GHz</li>
  <li>Frecuencia b√°sica del procesador: 2.40 GHz</li>
  <li>Cach√©: 16 MB Intel¬Æ Smart Cache</li>
  <li>Tama√±o de memoria m√°ximo (depende del tipo de memoria): 128 GB</li>
</ul>

<p>Un <strong>Xeon</strong> junto con <strong>32Gb</strong> de RAM y una entrada de ethernet conectada a la WIFI (que no se que voy hacer con eso). Para que os hagais una idea, el Tiny lleva el maximo de lo que su socket puede llevar.</p>

<p>No me lo podia creer cuando me dijeron que habia ganado esto y eso, como ya de dicho con anterioridad, soy esceptico en estos sorteos porque nunca me ha tocada nada, pero bueno, un dia es un dia.</p>

<p>Despu√©s de la noticia, tenia que ponerme a pensar que iba hacer eso ese equipo. En principio no necesitaba ningun equipo m√°s porque voy servido. Asi que me vino a la cabeza, y si le pongo el <strong>Xeon</strong> al servidor. Seguramente os echareis las manos a la cabeza de que eso no es posible. No es la primera vez que lo hago, porque tengo en reserva otro Tiny con otro <strong>Xeon</strong> que sera mi futuro PC cuando el portatil que tengo ahora mismo muera, y por lo que veo, no tardara mucho, porque ultimamente me hace mucho el tonto. Asi que de vuelta al ruedo de los mods.</p>

<p>Eso si, me volvi a ver este <a href="https://www.youtube.com/watch?v=ZDUWrwq1PXE" target="_blank">video</a> donde explica detalladamente todos los pasos que se tienen que hacer para modificar la BIOS de un Tiny para que accepte un <strong>Xeon</strong>.</p>

<p>El proceso es facil, pero hay que ir con cuidado, porque lo primero es leer la <em>BIOS</em> del Tiny, luego modificarla y luego volverla a poner en el Tiny. Ya os digo que tengo experiencia, pero es una cosa que me da mucho respeto, porque nunca se sabe lo que puede pasar ü§Ø.</p>

<p>El proceso en si, dura como 30 minutos, pero que 30 minutos, siempre piensas que se va a estropear todo y que ya no volvera a funcionar.</p>

<p>Pero todo funciono correctamente üòÅ y ya tenia en mi servidor el <strong>Xeon</strong> quedando con la siguiente configuraci√≥n:</p>
<ul>
  <li>Intel Xeon e2286M</li>
  <li>32Gb de RAM</li>
  <li>4 HDD‚Äôs
    <ul>
      <li>1 de 18Tb</li>
      <li>1 de 16Tb</li>
      <li>1 de 12Tb</li>
      <li>1 HDD de 1Tb
        <ul>
          <li>Este lo uso para copias de seguridad</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>En pocas palabras un servidor que nunca me voy a acabar. Lo unico que puede pasar es que revienten los HDD, pero el resto tengo para toda una vida.</p>

<p>Todo estaba ya estaba listo para conectar y hacerlo funcionar. Y el resultado fue todo un exito, todo funcionando correctamente y sin ningun problema a excepci√≥n de la temperatura del <strong>Xeon</strong> y del ventilador que cuando se le da un poco de ca√±a se nota que esta hay presente.</p>

<p>Como no puede ser de otra manera, <strong>HomeLabs</strong> lo habia previsto y tenia una especie de <a href="https://t.me/c/1410082468/127" target="_blank">peque√±o manual</a>, para hacer <strong>downgrade</strong> al <strong>Xeon</strong> y asi reducir tanto el rango de trabajo del mismo como la temperatura que con todo ello conlleva que se reduce el ruido del ventilador.</p>

<p>Pero aun asi, todavia, cuando le pedias ca√±a al <strong>Xeon</strong> hacia acto de presencia, pues me aconsejaron que lo mejor en estos casos, es quitar el <strong>Turbo Bost</strong> de la CPU. Y eso que hice. Le desactive esa opci√≥n y ahora todo funciona con una mejor temperatura.</p>

<p>Mucha gente me dira que para eso no tengas un <strong>Xeon</strong> pero hay que tener en cuenta que el sistema de refrigeraci√≥n no es el correcto, lleva el ventilador, de cobre para disipar mejor, pero es un simple ventilador. Adem√°s si en vez de <em>5Ghz</em> me va a <em>2.4Ghz</em> tampoco voy a notar mucha diferencia.</p>

<p>Es mi servidor personal, no uno de la nasa. Con esto ya estoy servido.</p>

<p>Lo unico que me faltaba por hacer era visualizar la temperatura tanto de la CPU como de la placa base en unRaid que era una cosa que nunca habia conseguido hacer, la de la CPU si, pero la placa base no.</p>

<p>Pero eso sera en otro <a href="/hardware/unraid/2024/10/20/controlado-temperatura-servidor.html">articulo</a>.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.youtube.com/watch?v=ZDUWrwq1PXE">Como modificar la bios de tu Lenovo m710q, m910q o m910x tiny para usar CPUs no soportadas</a></li>
  <li><a href="https://t.me/c/1410082468/127">Hacer downgrade a Xeon</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Hardware" /><category term="Hardware" /><summary type="html"><![CDATA[Se ha venido una nueva modificaci√≥n en el servidor, y una m√°s, pero esta vez, ha sido m√°s a nivel de hardware que de software. Como sabreis, si no os habeis dado cuenta leyendo algunos de mis articulos, estoy subscrito al canal de telegram de HomeLabs.club, donde siempre tienen alguna nueva cosa para liarte la manta a la cabeza.]]></summary></entry><entry><title type="html">Modificaciones en el servidor - 1</title><link href="https://vctrsnts.github.io/hardware/2024/09/18/modificando-servidor-1.html" rel="alternate" type="text/html" title="Modificaciones en el servidor - 1" /><published>2024-09-18T00:00:00+00:00</published><updated>2024-09-18T00:00:00+00:00</updated><id>https://vctrsnts.github.io/hardware/2024/09/18/modificando-servidor-1</id><content type="html" xml:base="https://vctrsnts.github.io/hardware/2024/09/18/modificando-servidor-1.html"><![CDATA[<p>Durante estas vacaciones he modificado un poco el aspecto de mi servidor con la finalidad de que todo estuviera un poco m√°s ordenado y m√°s homogeneo, porque por una banda, tenia mi <a href="/unraid/2024/03/07/cambiando-unraid.html" target="_blank">servidor</a> por un lado y por otro, en un caddy metalico de discos comprado en Aliexpress, los HDD al que le habia puesto este <a href="https://www.amazon.es/dp/B09SLPRYYZ" target="_blank">ventilador</a> para bajar la temperatura de los mismos.</p>

<!-- more -->

<p>Esto viene como consecuencia de que durante buena parte del verano, habian estado a unos agradables, 45¬∫ - 50¬∫ y que yo sepa, estas temperaturas no son muy buenas para un HDD, aunque sean HDD‚Äôs para servidores, que ya de por si, tendrian que estar preparados para el calor, pero es una cosa que no queria comprobar.</p>

<p>Asi que me puse con las modificaciones‚Ä¶</p>

<p>Y estas modificaciones, como no puede ser de otra manera, se las tengo que agradecer a <strong>@harebonse</strong> del canal de <strong>HomeLabs.Club</strong> por crear una caja o m√°s concretamente <strong>Lenovo ThinkCentre NAS/drive case</strong> y que a la vez, se le puede a√±adir hasta 6 HDD‚Äôs que no son pocos.</p>

<p>De nuevo, gracias por todo el trabajo‚Ä¶ Y como una imagen vale m√°s que mil palabras, aqui pongo una imagen de como es el dise√±o de esta caja:</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/server_01.jpg" alt="server_01.jpg" />
    </div>
    
</div>

<p>Antes de empezar con la modificaci√≥n real del servidor, necesitaba tener todos los materiales necesarios para hacer el cambio, que en este caso es:</p>
<ul>
  <li>Ventiladors ARCTIV P14</li>
  <li>Tornillo de cabeza avellanada 6-32 de 8mm.
    <ul>
      <li>Esto los he puesto, para que los HDD tengan una mejor sujecci√≥n, aunque con unos de 6mm tambien funcionaban, pero prefiero un poco m√°s de seguridad üòÇ</li>
    </ul>
  </li>
  <li>Cable USB con adaptador para ventilador.</li>
  <li>Y lo m√°s importante, la caja</li>
</ul>

<p>Una vez que tenia todo el material, me puse con el montaje de la misma.</p>

<p>Lo que si que hay que tener en cuenta, es que como puede aceptar hasta 6 HDD‚Äôs, la caja esta dise√±ada para que puedas acoplar una fuente de alimentaci√≥n de 12v para los HDD. En mi caso, yo obtenia la alimentaci√≥n directamente de la placa del Tiny y como uso un transformador de 135w con lo que al usar solamente 4 HDD‚Äôs no es necesario a√±adir la fuente adicional.</p>

<p>Tambien hay que tener en cuenta, que se le puede a√±adir una placa controladora <strong>p822</strong> para los HDD‚Äôs, porque la caja tiene los agujeros especificos para dicha placa.</p>

<p>Para finalizar, os pongo un par de fotos de como queda todo el montaje en mi servidor:</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/server_02.jpg" alt="server_02.jpg" />
    </div>
    
</div>

<p>Aqui hay que tener en cuenta, que la posici√≥n de la tapa delantera esta al reves (equivocaci√≥n mia, pero que en mi caso es positiva), el ventilador tendria que estar m√°s arriba, para asi llevar el aire, a parte de a los HDD‚Äôs tambien a la controladora, pero como este no es mi caso, esta asi, para que el mayo flujo de aire vaya hacia los discos.</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/server_03.jpg" alt="server_03.jpg" />
    </div>
    
</div>

<p>Como podeis ver, mis vacaciones han sido interesantes. Pocas modificaciones en mi servidor pero de gran calado.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.amazon.es/dp/B09SLPRYYZ" target="_blank">Ventilador Arctic P14 Slim</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Hardware" /><category term="Hardware" /><summary type="html"><![CDATA[Durante estas vacaciones he modificado un poco el aspecto de mi servidor con la finalidad de que todo estuviera un poco m√°s ordenado y m√°s homogeneo, porque por una banda, tenia mi servidor por un lado y por otro, en un caddy metalico de discos comprado en Aliexpress, los HDD al que le habia puesto este ventilador para bajar la temperatura de los mismos.]]></summary></entry><entry><title type="html">Usando Traefik - 4</title><link href="https://vctrsnts.github.io/docker/vps/2024/07/26/usando-traefik-4.html" rel="alternate" type="text/html" title="Usando Traefik - 4" /><published>2024-07-26T00:00:00+00:00</published><updated>2024-07-26T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/vps/2024/07/26/usando-traefik-4</id><content type="html" xml:base="https://vctrsnts.github.io/docker/vps/2024/07/26/usando-traefik-4.html"><![CDATA[<p>Tal como indique en este <a href="/docker/vps/2024/04/19/traefik.html">articulo</a>, lo unico que me faltaba por a√±adir a <strong>traefik</strong> para tener mi VPS lo m√°s seguro posible era <strong>crowdsec</strong> y por fin, ya lo tengo instalado.</p>

<p>Antes de lanzarte a la piscina directamente, te aconsejo que les eches un vistazo a este <a href="https://atareao.es/podcast/mas-herramientas-para-proteger-tu-linux">articulo</a> de <strong>atareao</strong> donde habla de <em>crowdsec</em> y tambien a este <a href="https://www.youtube.com/watch?v=-GxUP6bNxF0">video</a>, que me ha servido como guia en todo el proceso.</p>

<!-- more -->

<p>Si sigues leyendo este articulo, es que ya has revisado los articulos y el video que te he aconsejado antes, asi que ya podemos empezar. Para empezar, partimos de la configuraci√≥n inicial que tengo en <strong>traefik</strong> y que podeis ver en los diferentes articulos, podemos empezar con la instalaci√≥n de <strong>crowdsec</strong>.</p>

<p>Lo primero y antes de nada, hice una peque√±a modificaci√≥n a la configuraci√≥n de <strong>traefik</strong> para asi tener mejor identificado el volumen que esta utilizando. Ahora mismo, el <code class="language-plaintext highlighter-rouge">docker-compose</code> donde tengo <strong>traefik</strong> lo tengo de la siguiente manera:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">traefik</span><span class="pi">:</span>
   <span class="na">volumes</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">traefik_log:/var/log/traefik</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">traefik_log</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">traefik_log</span>
</code></pre></div></div>
<p>De esta manera, tal como comento, tengo mejor identificado el <code class="language-plaintext highlighter-rouge">volumen</code> de <em>traefik</em>.</p>

<p>Despu√©s de esto ya podemos pasar a la instalaci√≥n de <strong>crowdsec</strong>. Tengo que informar antes de empezar, que la instalaci√≥n se divide en varias fases y que hay que ir, con un poco de cuidado, porque sino‚Ä¶</p>

<p>La primera de ellas es la creaci√≥n de los directorios y archivos que nos haran falta para el correcto funcionamiento de <strong>crowdsec</strong> y <strong>bouncer-traefik</strong>.</p>

<p>Lo primero es crear el directorio <code class="language-plaintext highlighter-rouge">crowdsec</code>. Yo lo tengo en el mismo directorio donde tengo la configuraci√≥n de <strong>traefik</strong> quedando de la siguiente manera:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">|--</span> <span class="err">config</span>
<span class="err">|</span><span class="s">---- traefik</span>
<span class="err">|</span><span class="s">---- crowdsec</span>
<span class="err">|</span><span class="s">------ acquis</span>
<span class="err">|</span><span class="s">-------- ssh.yaml</span>
<span class="err">|</span><span class="s">------ acquis.yml</span>
<span class="err">|</span><span class="s">------ mywhitelist.yml</span>
</code></pre></div></div>
<p>Donde tendremos:</p>

<h3 id="acquissshyaml">acquis/ssh.yaml</h3>

<p>Que es el encargado de controlar las conexiones <code class="language-plaintext highlighter-rouge">ssh</code> a nuestro servidor y asi, hacemos que <strong>crowdsec</strong> tambien las controle (ya explicaremos como).</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">filenames</span><span class="pi">:</span>
   <span class="pi">-</span> <span class="s">/logs/auth.log</span>
   <span class="pi">-</span> <span class="s">/logs/syslog</span>
<span class="na">labels</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">syslog</span>
</code></pre></div></div>

<h3 id="acquisyml">acquis.yml</h3>

<p>Los ficheros <em>log</em> de <strong>traefik</strong>, tanto el <code class="language-plaintext highlighter-rouge">access.log</code> como el <code class="language-plaintext highlighter-rouge">traefik.log</code>.</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">filenames</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">/var/log/traefik/*</span>
<span class="na">labels</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">traefik</span>
</code></pre></div></div>
<p>Y por ultimo</p>

<h3 id="mywhitelistyml">mywhitelist.yml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">crowdsecurity/whitelists</span>
<span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Whitelist</span><span class="nv"> </span><span class="s">events</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">my</span><span class="nv"> </span><span class="s">ip</span><span class="nv"> </span><span class="s">addresses"</span>
<span class="na">whitelist</span><span class="pi">:</span>
  <span class="na">reason</span><span class="pi">:</span> <span class="s2">"</span><span class="s">my</span><span class="nv"> </span><span class="s">ip</span><span class="nv"> </span><span class="s">ranges"</span>
  <span class="na">ip</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">XXX.XXX.XXX.XXX"</span>
</code></pre></div></div>
<p>Que es el fichero donde indicaremos a <strong>crowdsec</strong> las <strong>IP</strong> que son de confianza. Yo he puesto, la ip desde la que siempre me conecto al <em>VPS</em> para que asi no la tenga encuenta, aunque m√°s adelante haremos una prueba para ver el funcionamiento de <strong>crowdsec</strong> con respecto a esta <em>IP</em>.</p>

<blockquote>
  <p>‚ö†Ô∏è Antes de nada, informar que en el fichero de <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> donde tengo <strong>traefik</strong> tambien tengo la configuraci√≥n de <strong>crowdsec</strong>, porque me ha resultado m√°s facil, si lo haces con diferentes ficheros <code class="language-plaintext highlighter-rouge">yml</code> hay que tener un par de cosas en cuenta que ya os informare llegado el momento.</p>
</blockquote>

<p>Una vez que tenemos esto claro, empezamos a√±adiendo a nuestro fichero de <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> lo necesario para <strong>crowdsec</strong>:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#</span>
<span class="c1"># CROWDSEC - SEGURETAT PER A TRAEFIK I EL SERVIDOR</span>
<span class="c1">#</span>
 <span class="na">crowdsec</span><span class="pi">:</span>
   <span class="na">image</span><span class="pi">:</span> <span class="s">crowdsecurity/crowdsec:v1.6.2</span>
   <span class="na">container_name</span><span class="pi">:</span> <span class="s">crowdsec</span>
   <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
   <span class="na">networks</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">proxy</span>
   <span class="na">init</span><span class="pi">:</span> <span class="kc">true</span>
   <span class="na">environment</span><span class="pi">:</span>
     <span class="na">GID</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${GID-1000}"</span>
     <span class="na">COLLECTIONS</span><span class="pi">:</span> <span class="s2">"</span><span class="s">crowdsecurity/linux</span><span class="nv"> </span><span class="s">crowdsecurity/traefik</span><span class="nv"> </span><span class="s">crowdsecurity/sshd"</span>
   <span class="na">volumes</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">${HOME}/config/crowdsec/acquis.yml:/etc/crowdsec/acquis.yaml</span>
     <span class="pi">-</span> <span class="s">${HOME}/config/crowdsec/mywhitelists.yml:/etc/crowdsec/parsers/s02-enrich/mywhitelists.yaml</span>
     <span class="pi">-</span> <span class="s">${HOME}/config/crowdsec/acquis/:/etc/crowdsec/acquis.d/</span>
     <span class="pi">-</span> <span class="s">crowdsec-db:/var/lib/crowdsec/data/</span>
     <span class="pi">-</span> <span class="s">crowdsec-config:/etc/crowdsec/</span>
     <span class="pi">-</span> <span class="s">traefik_log:/var/log/traefik/:ro</span>
     <span class="pi">-</span> <span class="s">/var/log/auth.log:/logs/auth.log:ro</span>
     <span class="pi">-</span> <span class="s">/var/log/syslog.log:/logs/syslog.log:ro</span>
   <span class="na">depends_on</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">traefik</span>
</code></pre></div></div>
<p>En la configuraci√≥n hay que tener en cuenta un par de cosas:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">depedens_on:</code> Aqui le indicamos a <strong>crowdsec</strong> que no puede iniciarse sino esta antes <strong>traefik</strong> en funcionamiento. Es como una medida de seguridad.</li>
  <li><code class="language-plaintext highlighter-rouge">COLLECTIONS: "crowdsecurity/linux crowdsecurity/traefik crowdsecurity/sshd"</code>
    <ul>
      <li>Yo lo entiendo, como las alertas o lo que tiene que <em>tener en cuentra</em> <strong>crowdsec</strong> para luego tomar las acciones necesarias. Hay muchas m√°s opciones que puedes ir a√±adiendo. Las puedes encontrar <a href="https://app.crowdsec.net/hub/collections">aqui</a>. En mi caso he puesto:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">crowdsecurity/linux</code> para los posibles <strong>bugs</strong> que pueda tener <strong>Linux</strong></li>
          <li><code class="language-plaintext highlighter-rouge">crowdsecurity/traefik</code> para los posibles <strong>bugs</strong> de <strong>traefik</strong></li>
          <li><code class="language-plaintext highlighter-rouge">crowdsecurity/sshd</code> para los posibles <strong>bugs</strong> de <strong>ssh</strong></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">networks</code> tanto <em>traefik</em>, <em>crowdsec</em> y <em>bounces-traefik</em>, que lo explicare m√°s adelante, tienen que estar en la misma <em>red</em> para que se puedan comunicar entre ellos.</li>
  <li>Tambien tenemos que tener en cuenta los <em>volumenes</em> que vamos a usar en <strong>crowdsec</strong>, que en este caso son los que pongo a continuaci√≥n:
    <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">volumes</span><span class="pi">:</span>
  <span class="na">crowdsec-db</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">crowdsec-db</span>
  <span class="na">crowdsec-config</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">crowdsec-config</span>
  <span class="na">traefik_log</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">traefik_log</span>
</code></pre></div>    </div>
    <blockquote>
      <p>‚ö†Ô∏è Si os fijais, he puesto el mismo nombre de volumen para los logs que tengo en <em>traefik</em> a <em>crowdsec</em> porque comparten el mismo fichero de <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>, pero aqui hay que tener una cosa en cuenta, en caso de que lo tengas en <em>ficheros / stacks</em> diferentes tienes que a√±adir, en el caso de los <em>logs</em> de <em>crowdsec</em> que afectan a <em>traefik</em>, la opci√≥n <code class="language-plaintext highlighter-rouge">external: true</code> porque indicas que los <em>logs</em> estan en otro <em>docker-compose</em>, si se puede decir asi, quedando de la siguiente manera:</p>
    </blockquote>
  </li>
</ul>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">volumes</span><span class="pi">:</span>
    <span class="na">crowdsec-db</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">crowdsec-db</span>
    <span class="na">crowdsec-config</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">crowdsec-config</span>
    <span class="na">traefik_log</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">traefik_log</span>
      <span class="na">external</span><span class="pi">:</span> <span class="kc">true</span>
</code></pre></div></div>
<p>Una vez que tenemos esto, ya podemos <em>activar</em> la primera fase de <em>crowdsec</em>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker compose up <span class="nt">-d</span> crowdsec
</code></pre></div></div>
<p>Despues de esto, podemos revisar los <em>logs</em> de <em>crowdsec</em> para ver si de momento vamos por buen camino y tambien podemos verificar si <em>traefik</em> aun esta vivo.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker logs <span class="nt">-f</span> crowdsec
</code></pre></div></div>
<blockquote>
  <p>‚ö†Ô∏è Si has llegado hasta aqui, el unico fallo que puedes tener es que los <em>logs</em> de <em>traefik</em> no esten accesibles a <em>crowdsec</em>, para eso fijate bien en como <em>montas</em> los volumenes.</p>
</blockquote>

<p>Otra pruebas que puedes hacer es acceder a <em>crowdsec</em> y ver si tienes acceso directo a los ficheros de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker <span class="nb">exec</span> <span class="nt">-it</span> crowdsec sh
<span class="go">crowdsec:~ cd /var/log/
</span></code></pre></div></div>
<p>Si llegado a este punto, no ves el directorio de <code class="language-plaintext highlighter-rouge">traefik</code> es que el error lo tienes en los volumenes. Aqui te tocara investigar un poco üòÄ pero en cambio si ves el log de <strong>crowdsec</strong> puedes seguir adelanta con el siguiente paso.</p>

<p>El siguiente paso, es <em>actualizar</em> el sistema de alertas o <em>bugs</em> que tiene que controlar <strong>crowdsec</strong>. Para hacer esto, se hace de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker <span class="nb">exec </span>crowdsec cscli hub update
</code></pre></div></div>
<p>Y por ultimo, es aplicar estas actualizaciones a la <strong>base de datos</strong> de <strong>crowdsec</strong> a traves de:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker <span class="nb">exec </span>crowdsec cscli hub upgrade
</code></pre></div></div>
<p>Lo que podemos hacer con las actualizaciones de las alertas, es ponerlo en el cron, para que cada dia, en mi caso, se actualize esta <strong>BBDD</strong>. Tu lo puedes poner como quieros, como dice el refran, <em>para gustos, colores</em>.</p>

<p>Despu√©s de esto, viene la parte m√°s importate de todo, instalar, el contenedor de <em>bouncer-traefik</em> o en pocas palabras, el que comunicara <em>traefik</em> con <em>crowdsec</em>. A lo mejor lo que digo, no es del todo cierto, pero yo lo entiendo de esta manera.</p>

<p>Para hacer esto, solamente necesitamos lo siguiente (yo sigo en el mismo <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> donde tengo <em>traefik</em> y <em>crowdsec</em>):</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">bouncer-traefik</span><span class="pi">:</span>
   <span class="na">image</span><span class="pi">:</span> <span class="s">docker.io/fbonalair/traefik-crowdsec-bouncer:latest</span>
   <span class="na">container_name</span><span class="pi">:</span> <span class="s">bouncer-traefik</span>
   <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
   <span class="na">networks</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">proxy</span>
   <span class="na">init</span><span class="pi">:</span> <span class="kc">true</span>
   <span class="na">environment</span><span class="pi">:</span>
     <span class="na">CROWDSEC_BOUNCER_API_KEY</span><span class="pi">:</span> <span class="s">XXXXXXXXXXXXXXX</span>
     <span class="na">CROWDSEC_AGENT_HOST</span><span class="pi">:</span> <span class="s">crowdsec:8080</span>
   <span class="na">depends_on</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">crowdsec</span>
</code></pre></div></div>
<p>Aqui a parte del <code class="language-plaintext highlighter-rouge">depends_on</code>, donde indicamos a <strong>bouncer-traefik</strong> que no se puede iniciar si antes no esta <strong>crowdsec</strong>, <code class="language-plaintext highlighter-rouge">networks</code>, lo mismo que con <strong>crowdsec</strong> y <strong>traefik</strong>, los 3 en la misma red.</p>

<blockquote>
  <p>‚ö†Ô∏è En este contenedor, lo m√°s importante y con lo que tenemos que tener m√°s cuidado es con <code class="language-plaintext highlighter-rouge">CROWDSEC_BOUNCER_API_KEY</code>. Es la <em>API</em> que nos da <em>crowdsec</em> para <em>bouncer-traefik</em> y solo aparece una vez, sino te apuntas este codigo, en pocas palabras, tendras que volver a realizar la instalaci√≥n de <em>traefik</em>, <em>crowdsec</em> y <em>bouncer-traefik</em>. Te lo digo por experiencia. Seguramente hay alguna manera de evitar esto, pero yo no lo he encontrado. Y a dem√°s, asi se aprende algo nuevo.</p>
</blockquote>

<p>Para obtener el codigo de la <strong>API</strong> se hace a traves de la siguiente instrucci√≥n:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker <span class="nb">exec </span>crowdsec cscli bouncers add bouncer-traefik
</code></pre></div></div>
<p>Que, tal como he dicho antes, nos da el codigo una unica vez y no m√°s. Si quieres lo que puedes hacer primero es guardarlo y luego lo a√±ades donde toca, o sino, lo pones en el fichero <code class="language-plaintext highlighter-rouge">variables.yml</code> o sino en <code class="language-plaintext highlighter-rouge">.env</code> para utilizarlo aqui.</p>

<p>Despu√©s solamente nos queda <em>activar</em> el contenedor:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker compose up <span class="nt">-d</span> bouncer-traefik
</code></pre></div></div>
<p>Como siempre, pueder verificar los <em>logs</em> de <strong>traefik</strong> y <strong>crowdsec</strong> para ver si todo sigue funcionando correctamente o intentando acceder a los servicios. Si puedes, de momento todo va bien.</p>

<p>Ahora lo unico que nos queda es indicar a <strong>traefik</strong> que tiene instalado <strong>crowdsec</strong> y <strong>bouncer-traefik</strong> y que haga uso de ellos. Esto se consigue modificando los siguientes ficheros:</p>

<h3 id="dynamicyml">dynamic.yml</h3>

<p>Le indicamos a <strong>traefik</strong> que tiene <em>bouncer-traefik</em> en funcionamiento y que puede hacer las consultas mediante la direcci√≥n <code class="language-plaintext highlighter-rouge">http://bouncer-traefik:8080/api/v1/forwardAuth</code>.</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">http</span><span class="pi">:</span>
  <span class="na">middlewares</span><span class="pi">:</span>
    <span class="na">crowdsec-bouncer</span><span class="pi">:</span>
      <span class="na">forwardauth</span><span class="pi">:</span>
        <span class="na">address</span><span class="pi">:</span> <span class="s">http://bouncer-traefik:8080/api/v1/forwardAuth</span>
        <span class="na">trustForwardHeader</span><span class="pi">:</span> <span class="kc">true</span>
</code></pre></div></div>

<h3 id="traefikyml">traefik.yml</h3>

<p>En el fichero <code class="language-plaintext highlighter-rouge">traefik.yml</code> le indicamos en que <em>consultas</em> tiene que usar <strong>crowdsec</strong> y esto se hace de la siguiente manera:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">api</span><span class="pi">:</span>
  <span class="na">dashboard</span><span class="pi">:</span> <span class="kc">true</span>

<span class="na">entryPoints</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">address</span><span class="pi">:</span> <span class="s2">"</span><span class="s">:80"</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">middlewares</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">crowdsec-bouncer@file</span>
  <span class="na">websecure</span><span class="pi">:</span>
    <span class="na">address</span><span class="pi">:</span> <span class="s2">"</span><span class="s">:443"</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">middlewares</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">crowdsec-bouncer@file</span>
</code></pre></div></div>
<p>Le estamos indicando que tanto en consultas <code class="language-plaintext highlighter-rouge">http</code> como en <code class="language-plaintext highlighter-rouge">https</code> haga las consultas a <strong>crowdsec</strong>.</p>

<p>Cuando ya tenemos <strong>traefik</strong> configurado, solamente nos quedara <em>recrear</em> el contenedor de <strong>traefik</strong>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker compose up <span class="nt">-d</span> traefik <span class="nt">--force-recreate</span>
</code></pre></div></div>
<p>Y si volvemos a revisar los <em>logs</em> de <strong>traefik</strong> y todo sigue funcionando correctamente es que lo hemos conseguido. Otra prueba que podemos hacer es acceder a los servicios que tenemos en el servidor que si todo funciona bien, tendremos acceso, sino, la hemos cagado üí©</p>

<blockquote>
  <p>‚ö†Ô∏è Ahora pasamos a ver el funcionamiento de <strong>crowdsec</strong> en vivo, esto lo podemos hacer de la siguiente, pero os informo, queda a vuestra libre elecci√≥n. Esta prueba, consiste en bloquear nuestra ip de acceso al servidor. Esto se hace de la siguiente manera:</p>
</blockquote>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker <span class="nb">exec </span>crowdsec cscli decisions add <span class="nt">--ip</span> nuestra_ip_de_acceso
</code></pre></div></div>
<p>Una vez que <em>hemos baneado nuestra propia ip</em>, para asegurarnos de ello, pasamos a verificar que es asi mediante:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker <span class="nb">exec </span>crowdsec cscli decisions list
</code></pre></div></div>
<p>Donde veremos que, ciertamente, hemos baneado nuestra ip. Y para ver como funciona, nos conectamos a los servicios que tenemos alojados en el VPS / servidor y nos tiene que aparecer el mensaje de <strong>forbidden</strong>. Pero tranquilo, no te asustes para revertir este <em>baneo</em> tenemos que hacer la instruccion contraria:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker <span class="nb">exec </span>crowdsec cscli decisions delete <span class="nt">--ip</span> nuestra_ip_de_acceso
</code></pre></div></div>
<p>Y si volvemos a ejecutar la orden:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker <span class="nb">exec </span>crowdsec cscli decisions list
</code></pre></div></div>
<p>Nos tiene que aparecer el mensaje de <code class="language-plaintext highlighter-rouge">No active decisions</code>. Ya puedes respirar ü•≥.</p>

<p>Tambien, puedes ver un poco lo que esta haciendo <strong>crowdsec</strong> y <strong>traefik</strong>, para ello puedes usar las siguientes instrucciones:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="c"># CONTROLAS LAS OPCIONES ACTIVADAS QUE TIENE CROWDSEC</span>
<span class="gp">usuari@debian:~$</span>docker <span class="nb">exec </span>crowdsec cscli metrics
</code></pre></div></div>
<p>Y con esto:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="c"># CONTROLAS LOS BANEOS QUE SE HAN PRODUCIDO EN TU SERVIDOR</span>
<span class="gp">usuari@debian:~$</span>docker <span class="nb">exec </span>crowdsec cscli alerts list
</code></pre></div></div>
<p>Y con esto podemos dar por concluida la instalaci√≥n de <strong>crowdsec</strong> y <strong>bouncer-traefik</strong> juntamente con <strong>traefik</strong> en nuestro <em>servidor / VPS</em>.</p>

<p>Espero que te sirva y que puedas aprender tanto como he aprendido yo.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://technotim.live/posts/crowdsec-traefik">Documentaci√≥n - CrowdSec &amp; Traefik Tutorial</a></li>
  <li><a href="https://www.youtube.com/watch?v=-GxUP6bNxF0">Video - CrowdSec &amp; Traefik Tutorial</a></li>
  <li><a href="https://atareao.es/podcast/mas-herramientas-para-proteger-tu-linux/">528 - M√°s herramientas para proteger tu Linux</a></li>
  <li><a href="https://github.com/atareao/self-hosted/blob/main/traefik/traefik.yml">GitHub Atareao - Traefik</a></li>
  <li><a href="https://github.com/atareao/self-hosted/blob/main/crowdsec/docker-compose.yml">GitHub Atareao - Crowdsec</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="VPS" /><category term="Docker" /><category term="VPS" /><summary type="html"><![CDATA[Tal como indique en este articulo, lo unico que me faltaba por a√±adir a traefik para tener mi VPS lo m√°s seguro posible era crowdsec y por fin, ya lo tengo instalado. Antes de lanzarte a la piscina directamente, te aconsejo que les eches un vistazo a este articulo de atareao donde habla de crowdsec y tambien a este video, que me ha servido como guia en todo el proceso.]]></summary></entry><entry><title type="html">Opini√≥n Personal sobre unRaid - 2</title><link href="https://vctrsnts.github.io/unraid/2024/06/23/opinion-unraid-2.html" rel="alternate" type="text/html" title="Opini√≥n Personal sobre unRaid - 2" /><published>2024-06-23T00:00:00+00:00</published><updated>2024-06-23T00:00:00+00:00</updated><id>https://vctrsnts.github.io/unraid/2024/06/23/opinion-unraid-2</id><content type="html" xml:base="https://vctrsnts.github.io/unraid/2024/06/23/opinion-unraid-2.html"><![CDATA[<p>Tal como explique en este <a href="/unraid/2024/06/05/opinion-unraid.html" target="_blank">articulo</a> comente que iba a dar mi opini√≥n con respecto a <strong>unRaid</strong> y aqui va el segundo de los 2 articulos que tenia planeado escribir dando mi opini√≥n con respecto a las cosas positivas y negativas, y hoy toca hablar de las cosas negativas que le he encontrado, y siento decir que son m√°s que las positivas que negativas.</p>

<!-- more -->

<p>Aunque algunas, al final las he podido solucionar, pero la soluci√≥n que he utilizado, seguramente sea la correcta si voy a mirar la documentaci√≥n de <em>unRaid</em>, pero no me parece correcto que se tenga que hacer de esta manera.</p>

<h3 id="puntos-negativos">Puntos negativos</h3>

<h4 id="usando-el-so-mediante-un-usb">Usando el SO mediante un USB</h4>
<p>Lo primero y m√°s importante como punto negativo, es que en pleno siglo XXI, se tenga que usar un SO mediante un USB, con lo que implica eso. Ni la RaspberryPi y ya es decir mucho, usa ese sistema ya. Si, lo puedes usar, pero a√±adieron la opci√≥n de instalar el SO en un HDD externo y no me creo, que unRaid, no sea capaz de replicar esta funcionalida. Seguramente, me direis, que es para no estropear el RAID o cualquier otra cosa, pero un USB. Y porque no en una <strong>SD</strong> ya puestos?</p>

<p>Pero si ahora todo el mundo tiene un SSD por hay abandonado donde se podria instalar el SO y funcionaria 100 veces mejor que el USB y con lo que se reducirian los posibles errores de escritura que tiene a la larga un USB, porque como todo el mundo sabe, un USB, no es para estar escribiendo todo el rato.</p>

<p>Seguramente me direis que eso no pasa con unRaid, que no esta escribiendo todo el rato en el USB, no se si es cierto o no, pero me hago la siguiente pregunta. Y los <strong>logs</strong>? donde se graban en la RAM? Y si es asi, que pasa cuando se reinicia el sistema, se pierden los logs?</p>

<p>Digo los <strong>logs</strong>, como podria decir cualquier otra cosa. No es mejor poder instalar el SO en un HDD / SDD que este en unRaid y asi usarlo como disco de sistema.</p>

<p>Porque teniendo 300 HDD conectados a unRaid y que no puedas disponer de ninguno como disco para el SO, me parece un poco fuerte.</p>

<p>Y esto es lo primero en la frente, no se que m√°s sorpresas me deparara unRaid.</p>

<h4 id="instalaci√≥n-de-aplicaciones">Instalaci√≥n de aplicaciones</h4>
<p>Cuando me refiero a la instalaci√≥n de aplicaciones, no me estoy refiriendo a docker, que de eso ya hablare m√°s adelante o a los SO para virtualizar, que no voy a dar mi opini√≥n con respecto a esto, porque no lo estoy usando. Me estoy refiriendo ha aplicaciones que puedas necesitar. Y voy a poner un ejemplo para explicar a lo que me estoy refiriendo.</p>

<p>En mi caso, tengo un <a href="/debian%20gnu/linux/blog/docker/2023/08/01/como-funciona-esta-web.html" target="_blank">script</a>, que cada fin de semana sube un <em>toot</em> a mi cuenta de <em>Mastodon</em> gracias a Python que tienes que instalar, con esto no tengo ningun problema, porque a traves del <em>plugin</em> <strong>NerdTools</strong> se puede hacer facilmente y sin complicaciones.</p>

<p>Pero el problema es que a parte de Python, tambi√©n necesitas otros programas, como podria ser <em>Mastodon.py</em>, <em>Twython</em> y <em>feedparser</em> y que tienes que instalar a traves de <code class="language-plaintext highlighter-rouge">pip install</code> y esto es lo que no acabo de entender. El motivo por el cual no hacen lo mismo que otras distribuciones que mediante, me voy a centrar en la distribuci√≥n que hace m√°s de 20 a√±os que uso, y esta no es otra que <em>GNU/Debian</em>, y esto se haria de la siguiente manera con <code class="language-plaintext highlighter-rouge">apt install python3-twython</code> o <code class="language-plaintext highlighter-rouge">apt install python3-feedparser</code> ya tienes estos programas instalados y no como en <em>unRaid</em> que lo tienes que hacer a traves de python <code class="language-plaintext highlighter-rouge">pip install feedparser</code>.</p>

<p>Yo esto lo veo como una desventaja. Porque adem√°s, es que si te vas a la paqueteria de <em>Slackware</em> estos paquetes <del>si que estan disponibles y eso por eso que no entiendo porque no se pueden instalar</del>.</p>

<blockquote>
  <p>‚ö†Ô∏è Nota: Aqui hago un inciso, porque he buscado estos paquetes en la distribuci√≥n de <em>Slackware</em> y no estan disponibles para su instalaci√≥n, entonces entiendo que se tiene que hacer a traves de <code class="language-plaintext highlighter-rouge">pip install</code>, pero aun asi me resulta extra√±o. Sera que estoy acostumbrado a GNU/Debian.</p>
</blockquote>

<p>Y luego para acabarlo de rematar, una vez que los instalas y en el caso de que se reinicie el servidor, nos puede pasar a todos, estos se tienen que volver a instalar. No le encuentro ningun sentido, porque si es un paquete que tu has instalado, significa que es algo que tu quieres y necesitas, sino no lo instalarias.</p>

<p>Esto me ha pasado al querer usar el paquete <strong>lame</strong> para recodificar un mp3 (que es un paquete que si que esta en la paqueteria de <em>Slackware</em>). Primero que no estaba disponible a traves de la paqueteria de <em>unRaid</em> asi que tuve que ir a la paqueteria de <em>Slackware</em> e instalarlo pero no me funcionaba y, vuelvo a repetir, cuando se reinicia el servidor, el paquete se pierde.</p>

<p>Esto tiene una facil soluci√≥n, pero que sino lo sabes, pues‚Ä¶ (culpa mia por no leer la documentaci√≥n de <em>unRaid</em>, pero digamos la verdad, quien se lee los manuales), todo se soluciona basicamente si copiamos el paquete en <code class="language-plaintext highlighter-rouge">boot/extra</code> para que asi la proxima vez, el servidor instale la aplicaci√≥n. Pero en mi caso, esto no funcionaba y no sabia el motivo y es un punto que no me acaba de gustar y que se tendria que mejorar para futuras versiones, que cualquier aplicaci√≥n externa a <em>unRaid</em> se pierda despu√©s de un reinicio. Tienes la opci√≥n de ponerla en <code class="language-plaintext highlighter-rouge">boot/extra</code>, pero lo tienes que hacer y si no lo sabes, pues‚Ä¶</p>

<blockquote>
  <p>‚ö†Ô∏è Nota: buscando informaci√≥n sobre la paqueteria de <em>slackware</em> he encontrado este <a href="https://cameronjtinker.com/posts/installing-system-packages-on-unraid-aka-slackware" target="_blank">articulo</a> donde explica cual es la manera correcta de instalar, paqueteria externa en nuestro <em>unRaid</em> y funciona correctamente. Me he descargado <strong>lame</strong> y he seguido las indicaciones y de momento lo tengo funcionado.
Esto se hace a traves de la siguiente instrucci√≥n <code class="language-plaintext highlighter-rouge">upgradepkg --install-new paquete.txz</code></p>
</blockquote>

<p>Ya hemos instalado la aplicaci√≥n, pero no tendria que ser tan dificil si ya tenemos dentro del propio <em>unRaid</em> la posibilidad de instalar aplicaciones <em>externas</em> a traves del plugin <em>NerdTools</em> pues se le tendria que sacar m√°s provecho.</p>

<h4 id="gesti√≥n-de-docker">Gesti√≥n de docker</h4>

<p>Se que la <em>gesti√≥n de docker</em>, <em>unRaid</em> la hace a traves de plantillas. Supongo que es la mejor es la mejor forma de gestionar los dockers, pero me parece muy floja. Con todas las posibilidades que tiene docker y que las plantillas te limiten todas las posibilidades que te da. Si tienes la opci√≥n de a√±adir lo que tu quieres ‚Äúa√±adiendo varibles, rutas, etc‚Ä¶‚Äù pero se hace m√°s lento y complicado, si como es mi caso, estas acostumbrado a usar <em>docker</em> a traves de un fichero <em>yaml</em>.</p>

<p>Si tienes la posibilidad de instalar el <em>plugin compose</em>, pero claro, tienes que instalar otra cosa, que si vas sumando, al final, haces que todo el sistema se vuelva m√°s lento. No podria estar ya implementada esta opcion y poderla usar? Si en docker tenemos <em>docker compose</em>, porque no se puede tener lo mismo. Asi amplias las posibilidades y no la encorsetas en las plantillas, que si, para empezar estan bien, pero te limitan mucho, y m√°s si, como yo, estas acostumbrado a usar un simple fichero para <em>docker</em>.</p>

<p>Creo que aqui, se tendria que hacer un planteamiento en como se estructura y se usa docker, para dotar a <em>unRaid</em>, de la misma versatilidad que tiene docker. Porque luego, si lo ves, todo se hace a traves de <code class="language-plaintext highlighter-rouge">docker-compose</code>.</p>

<p>Pero claro, esto ya es un suma y sigue, que cosas que a mi entender son muy mejorables y que van sumando, y que en mi caso, no le vea mucha utilidad usar <em>unRaid</em> en comparaci√≥n a tener un servidor con una <em>GNU/Debian</em> u otra distribuci√≥n junto con <em>docker</em>.</p>

<h4 id="gesti√≥n-del-administrador-de-archivos">Gesti√≥n del administrador de archivos</h4>

<p>El gestor de archivos que usa <em>unRaid</em> es muy malo, siento decirlo. Podria ser mejor, pero no le sacan todo el potencial que se le podria sacar.</p>

<p>Un ejemplo de esto, es que una vez que has seleccionado los archivos a tratar, tienes que ir hasta el final de la pagina para realizar la acci√≥n. No podria funcionar esto de otra manera. Que siempre fueran visibles las acciones que quieres realizar?</p>

<p>A parte el funcionamiento es poco agil y en el caso de querer descargar archivos a tu ordenador, tienes que ir de archivo en archivo, no puedes hacer una selecci√≥n y descargarlos todos a la vez.</p>

<p>Se nota que aun hace falta mucho trabajo que hacer con este gestor de archivos y que se le podria sacar m√°s provecho de lo que se esta haciendo ahora.</p>

<h4 id="so-que-hay-por-debajo-de-unraid">SO que hay por debajo de unRaid</h4>

<p>Esto es la opini√≥n m√°s personal de todo el articulo y lo digo con toda la convicci√≥n del mundo.</p>

<p>Si no lo habeis notado aun, soy usuario de <em>Debian GNU/Linux</em> desde hace m√°s de 20 a√±os y seguramente aun me falta mucho que aprender con respecto a todo el mundo de GNU/Linux. Pero aunque solo sea por los a√±os que llevo usandolo, tengo una opini√≥n formada con respecte a <em>GNU/Debian</em> y por eso, me gustaria saber el motivo de porque han usado <em>Slackware</em> como plataforma para crear <em>unRaid</em> cuando, si por algo es conocido GNU/Debian es por la multitud de posibilidades que tiene para instalar en cualquier hardware.</p>

<p>Adem√°s, tiene, seguramente, uno de los mejores sistema de instalaci√≥n de paquetes y con muchos a√±os a sus espaldas y me estoy refiriendo a <em>APT</em> o <em>APT-GET</em>. Y por eso no lo entiendo. Vuelvo a decir es una opini√≥n personal y seguramente habra un motivo, pero no lo se ver.</p>

<p>Y si mucho me apurais, podrian haber utilizado <a href="https://es.wikipedia.org/wiki/NetBSD" target="_blank">NetBSD</a> que yo lo considero el <em>GNU/Debian</em> de los <em>BSD</em>, porque este SO se pueda instalar en 58 plataformas diferentes y se dice pronto.</p>

<h4 id="foro-de-ayuda">Foro de ayuda</h4>

<p>Foro de ayuda como tal, si que existe en la pagina web de <em>unRaid</em>, pero hay otro en <em>Discord</em> que te ayudan todo lo que pueden y m√°s, sobre eso no tengo ninguna queja, pero habiendo <em>telegram</em> que seguramente todo el mundo que usa <em>unRaid</em> lo tiene instalado, no logro entender porque usan <em>Discord</em>. Porque obligas a la persona a tener 2 aplicaciones, <em>telegram</em> y <em>Discord</em>.</p>

<p>Y, en mi opini√≥n, prefiero solo tener una sola de aplicaci√≥n para eso. A parte, en el canal de telegram de <strong>HomeLabs</strong> tambien hay mucha gente que usa <em>unRaid</em> y, en mi caso, prefiero hacer las consultas hay que en <em>Discord</em>, por decir que me he dado de baja de <em>Discord</em> y ahora todas las dudas que tengo, las hago por telegram. Me resulta m√°s facil y todo lo tengo concentrado en una aplicaci√≥n y no en 2 como tenia antes.</p>

<p>No entiendo el motivo del porque usan <em>Discord</em>. Seguramente habra algun motivo, pero lo desconozco. Y se que antes usaban telegram, porque mucha gente de <em>HomeLabs</em> me lo confirmaron.</p>

<h3 id="opini√≥n-final">Opini√≥n Final</h3>
<p>Se que podria poner en 4 lineas mi opini√≥n final con respecto a <em>unRaid</em>, pero prefiero hacerlo en un ultimo articulo, para explicar lo que pienso.</p>

<p>Este articulo saldra, proximamente, si es que los <strong>fanboys</strong> de unRaid, no me han matado. üòÖ</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://en.wikipedia.org/wiki/Unraid" target="_blank">Slackware on unRaid</a></li>
  <li><a href="https://es.wikipedia.org/wiki/NetBSD" target="_blank">NetBSD</a></li>
  <li><a href="/debian%20gnu/linux/blog/docker/2023/08/01/como-funciona-esta-web.html" target="_blank">Como funciona esta web y su creaci√≥n</a></li>
  <li><a href="https://cameronjtinker.com/posts/installing-system-packages-on-unraid-aka-slackware" target="_blank">Installing system packages on unRAID aka Slackware</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="unRAID" /><category term="unRAID" /><summary type="html"><![CDATA[Tal como explique en este articulo comente que iba a dar mi opini√≥n con respecto a unRaid y aqui va el segundo de los 2 articulos que tenia planeado escribir dando mi opini√≥n con respecto a las cosas positivas y negativas, y hoy toca hablar de las cosas negativas que le he encontrado, y siento decir que son m√°s que las positivas que negativas.]]></summary></entry><entry><title type="html">Opini√≥n Personal sobre unRaid - 1</title><link href="https://vctrsnts.github.io/unraid/2024/06/13/opinion-unraid-1.html" rel="alternate" type="text/html" title="Opini√≥n Personal sobre unRaid - 1" /><published>2024-06-13T00:00:00+00:00</published><updated>2024-06-13T00:00:00+00:00</updated><id>https://vctrsnts.github.io/unraid/2024/06/13/opinion-unraid-1</id><content type="html" xml:base="https://vctrsnts.github.io/unraid/2024/06/13/opinion-unraid-1.html"><![CDATA[<p>Tal como explique en este <a href="/unraid/2024/06/05/opinion-unraid.html" target="_blank">articulo</a> comente que iba a dar mi opini√≥n con respecto a <strong>unRaid</strong> y aqui va el primero de los 2 articulos que tenia planeado escribir dando mi opini√≥n con respecto a las cosas positivas y negativas.  y aqui la el primero de los 2 articulos. Vamos a hablar de las cosas positivas que le he encontrado.</p>

<!-- more -->

<h3 id="puntos-positivos">Puntos positivos</h3>

<h4 id="gesti√≥n-de-los-discos-duros">Gesti√≥n de los discos duros</h4>
<p>Seguramente esto es el punto m√°s positivo que tiene <em>unRaid</em> y seguramente es el motivo por el cual, yo creo, que el 99,99% de la gente que lo usa, es por este motivo. Y dentro de este grupo me incluyo yo.</p>

<p>Porque no he visto ninguna gesti√≥ de HDD tan eficiente como hace <em>unRaid</em> con referencia a los HDD‚Äôs. Y esta gesti√≥n es el lo que lo hace diferente del resto de SO de NAS.</p>

<p>Por lo que he leido la gesti√≥n la hace a traves de <strong>mergeFS</strong> que en palabras mundanas es la uni√≥n de m√°s de un HDD <em>como si fuera uno solo</em> junto con toda la gesti√≥n de los archivos que conlleva este sistema. Asi mismo, tambien tiene la gesti√≥n del HDD de paridad.</p>

<p>Yo lo resumo en como tener un sistema de RAID‚Äôs con los consiguientes discos espejo, pero sin ser un RAID.</p>

<p>Lo unico que hay que tener en cuenta es la parte de la <em>paridad</em> del HDD de respaldo que has de tener, pero eso implica que, si todos tus HDD suman 32Tb de informaci√≥n o es el maximo a lo que podrias llegar, necesitas un HDD de esa capacidad, <em>incorrecto</em>, o m√°s para cubrir esa paridad. Que si quieres no es obligatorio tenerlo, yo en mi caso no lo tengo, porque para las 4 cosas que tengo no me merece la pena, pero nunca se sabe.</p>

<blockquote>
  <p>‚ö†Ô∏è Tengo que hacer un inciso en este apartado que me ha corregido <a href="https://elblogdelazaro.org">Lazaro</a> con respecto a esta afirmaci√≥n por parte mia. El ejemplo que me dice, es que si tienes 10 HDD de 4Tb cada uno, en total 40Tb, solo necesitaras un unico HDD de 4Tb para hacer el de paridad. 
Pero claro, esto si lo tienes configurado de esta manera o de alguna manera similar, pero en el caso, como tengo yo, que tengo 2 HDD, uno de 18Tb y otro de 16Tb, entiendo que tendre que tener un HDD de como minimo 18Tb. Que es aqui donde yo he cometido el error, pensando que tendrias que tener un HDD con la capacidad maxima (en mi caso, 32Tb). Fallo mio. üò∞</p>
</blockquote>

<p>Asi mismo, tambien hay que tener en cuenta, que lo primero que se tiene que hacer una vez has puesto un nuevo HDD en el servidor, es hacer un <em>PreClear</em> de este mismo para comprobar la <em>salud</em> de HDD, pero hay que tener en cuenta una cosa que dependiendo de la capacidad del HDD puedes estar con el HDD conectado y haciendo las validacions correspondientes del <em>PreClear</em> durante unas 96 hores, esto es lo que me paso a mi y lo explique en este <a href="/unraid/2024/03/07/cambiando-unraid.html" target="_blank">articulo</a>. Que sino estas preparado pues de puede sorprender y asustar, pero si luego entiendes que lo hace para validar el HDD, pues no esta mal, porque si se tira, como fue mi caso, 96 hores y no le pasa nada al HDD, esta en buenas condiciones. Aunque nunca puedes dar un 100%, pero bueno, un 90% si.</p>

<p>Para eso, prefiero tener un buen sistema de copias de seguridad para salvaguardar la informaci√≥n que a mi si que me interesa no perder.</p>

<p>Repito, esta gesti√≥n de los HDD‚Äôs es lo que da tanto valor a <em>unRaid</em>. Seguramente tu mismo te podrias hacer esta misma gesti√≥n en tu propio servidor, pero tendrias que configurar lo que no esta escrito. O no, nunca me he puesto a investigar como se hace. Porque a lo mejor son 4 ficheros y tienes la misma funcionalidad de ahora mismo tiene unRaid.</p>

<h4 id="gesti√≥n-de-la-configuraci√≥n-del-servidor">Gesti√≥n de la configuraci√≥n del servidor</h4>
<p>Otro de los puntos positivos que le he encontrado, es la facilidad en la configuraci√≥n de todo el sistema una vez se ha instalado, que de esto hablare en los puntos negativos, porque‚Ä¶</p>

<p>Como iba diciendo, la configuraci√≥n es muy sencilla he intuitiva lo que facilita la puesta en marcha del sistema. Aunque si quieres, puedes decir mucho m√°s tiempo para una configuraci√≥n m√°s refinada del sistema, modificando parametros, pero eso ya te llevaria m√°s tiempo y tendrias que estar muy seguro y conocer el hardware de tu servidor para hacer eso.</p>

<h4 id="gesti√≥n-de-la-informaci√≥n-graficas-que-genera-el-servidor">Gesti√≥n de la informaci√≥n (graficas) que genera el servidor</h4>
<p>Y el ultimo punto positivo para mi, es la informaci√≥ (graficas, metricas) que te ofrece <em>unRaid</em> de tu sistema en la pantalla principal. Se que hay otras aplicaciones de las que podrias extraer m√°s informaci√≥n (netdata, grafana, etc‚Ä¶), pero para empezar y al nivel que mi me interesa tengo m√°s que suficiente. Ya digo que mi servidor no es como los servidores de la Nasa, sino que es mi servidor personal. Por eso mismo, digo, que con la informaci√≥n que por defecto me ofrece ya tengo m√°s que suficiente.</p>

<p>Tambien tengo que decir, que al servidor, le tengo instalado el docker de <a href="https://nicolargo.github.io/glances" target="_blank">glances</a> para asi desde mi pagina principal de mi dashboard (<a href="/docker/unraid/2024/06/03/usando-homepage-2.html" target="_blank">homepage</a>) visualizar la informaci√≥n sin tener que estar accediendo todo el rato al servidor. Y si veo algo extra√±o, entonces si que accedo al servidor, para visualizar lo que pasa.</p>

<h3 id="conclusi√≥n">Conclusi√≥n</h3>
<p>Y con esto, hemos acabado los puntos positivos para mi. Repito, para mi. Es mi opini√≥n personal. Seguramente vosotros tengais muchos m√°s o menos, pero estos son los mios üòé</p>

<p>Eso si, tengo que decir que el punto positivo m√°s importante que tiene <em>unRaid</em> es toda la gesti√≥n que hacer de los HDD. Pero claro, no podemos decir que me gusta una cosa, por el solo hecho de que tenga una unica cosa positiva. Para mi modo de ver, lo positivo y lo negativo tiene que estar m√°s o menos equilibrado o tirando m√°s hacia el lado de lo positivo, pero en mi caso, esto no es asi, le encuentro m√°s cosas negativas que positivas y esto lo podreis ver en el siguiente articulo.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://nicolargo.github.io/glances" target="_blank">Glances</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="unRAID" /><category term="unRAID" /><summary type="html"><![CDATA[Tal como explique en este articulo comente que iba a dar mi opini√≥n con respecto a unRaid y aqui va el primero de los 2 articulos que tenia planeado escribir dando mi opini√≥n con respecto a las cosas positivas y negativas. y aqui la el primero de los 2 articulos. Vamos a hablar de las cosas positivas que le he encontrado.]]></summary></entry><entry><title type="html">Usando Traefik - 3</title><link href="https://vctrsnts.github.io/docker/vps/2024/06/06/usando-traefik-3.html" rel="alternate" type="text/html" title="Usando Traefik - 3" /><published>2024-06-06T00:00:00+00:00</published><updated>2024-06-06T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/vps/2024/06/06/usando-traefik-3</id><content type="html" xml:base="https://vctrsnts.github.io/docker/vps/2024/06/06/usando-traefik-3.html"><![CDATA[<p>Como recordais hice 2 articulos donde en el <a href="/docker/vps/2024/05/06/usando-traefik-1.html">primero articulo</a> explicaba como se podia usar <strong>traefik</strong> con otros servicios de docker y en el <a href="/docker/vps/2024/05/13/usando-traefik-2.html">segundo articulo</a>, explicaba como se le podia a√±adir una capa m√°s de seguridad a nuestro servicio de <em>traefik</em> que consistia en bloquear las peticiones de paises de nuestra lista negra.</p>

<p>En este 3 articulo, explicare unas modificaciones que, como siempre me pasa, no acabe de entender al leer el <a href="">articulo principal</a> de <a href="https://www.atareao.es">atareao</a> y que gracias, no se si por inspiraci√≥n divida de <em>Lorenzo</em> he acabado de entender.</p>

<!-- more -->

<p>Estas modificaciones, si te fijas bien, en el articulo de <em>Atareao</em> y que esta al final, comenta que despu√©s de lo que se ha hecho, hay suficiente con estas lineas:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="s">traefik.enable=true</span>
<span class="pi">-</span> <span class="s">traefik.http.services.jellyfin.loadbalancer.server.port=8096</span>
<span class="pi">-</span> <span class="s">traefik.http.routers.jellyfin.entrypoints=websecure</span>
<span class="pi">-</span> <span class="s">traefik.http.routers.jellyfin.rule=Host(`${FQDN}`)</span>
</code></pre></div></div>
<p>Para que <em>traefik</em> tenga en cuenta el servicio que nosotros le estamos indicando y lo configure correctamente e incluso con un certificado de <strong>letsncrypt</strong>. En el caso de <strong>Lorenzo</strong> el lo explica para <em>Jellyfin</em>, pero en mi caso, lo explicare para <strong>rss-funnel</strong>, que es el servicio de ejemplo que utilice en el primer articulo. Tambien pondre las modificaciones necesarias que se tiene que hacer en los ficheros de configuraci√≥n de <em>traefik</em>.</p>

<p>Como podeis recordar en la configuraci√≥n de <code class="language-plaintext highlighter-rouge">rss-funnel</code> del primer articulo, lo tenia configurado de la siguiente manera:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">rssFunnel</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/shouya/rss-funnel:latest</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">rssFunnel</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
  <span class="na">networks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">proxy</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">33333:4080</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/rss-funnel/funnel.yaml:/funnel.yaml</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">RSS_FUNNEL_CONFIG</span><span class="pi">:</span> <span class="s">/funnel.yaml</span>
    <span class="na">RSS_FUNNEL_BIND</span><span class="pi">:</span> <span class="s">0.0.0.0:PORT</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">traefik.enable=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.services.rssFunnel.loadbalancer.server.port=4080</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.entrypoints=web</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.rule=Host(`${PODCAST_SERVER}`)</span>
    <span class="pi">-</span> <span class="s">traefik.http.middlewares.rssFunnel-https-redirect.redirectscheme.scheme=websecure</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.middlewares=rssFunnel-https-redirect</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.entrypoints=websecure</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.rule=Host(`${PODCAST_SERVER}`)</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.tls=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.tls.certresolver=letsencrypt</span>
</code></pre></div></div>
<p>Pero siguiendo las pautas que ha dado <em>atareao</em>, tendria que quedar de la siguiente manera:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">rssFunnel</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/shouya/rss-funnel:latest</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">rssFunnel</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
  <span class="na">networks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">proxy</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/rss-funnel/funnel.yaml:/funnel.yaml</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">RSS_FUNNEL_CONFIG</span><span class="pi">:</span> <span class="s">/funnel.yaml</span>
    <span class="na">RSS_FUNNEL_BIND</span><span class="pi">:</span> <span class="s">0.0.0.0:PORT</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">traefik.enable=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.services.rssFunnel.loadbalancer.server.port=4080</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.entrypoints=websecure</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.rule=Host(`${PODCAST_SERVER}`)</span>
</code></pre></div></div>
<p>Como veis, he quitado toda la parte del puerto, la secci√≥n del certificado y la secci√≥n de la redirecci√≥n porque de todo esto, se encarga <em>traefik</em>, esto es como consecuencia de que en el fichero <code class="language-plaintext highlighter-rouge">traefik.yml</code> hemos puesto lo siguiente:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">api</span><span class="pi">:</span>
  <span class="na">dashboard</span><span class="pi">:</span> <span class="kc">true</span>

<span class="na">entryPoints</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">address</span><span class="pi">:</span> <span class="s2">"</span><span class="s">:80"</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">redirections</span><span class="pi">:</span>
        <span class="na">entryPoint</span><span class="pi">:</span>
          <span class="na">to</span><span class="pi">:</span> <span class="s">websecure</span>
          <span class="na">scheme</span><span class="pi">:</span> <span class="s">https</span>
          <span class="na">permanent</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">websecure</span><span class="pi">:</span>
    <span class="na">address</span><span class="pi">:</span> <span class="s2">"</span><span class="s">:443"</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">tls</span><span class="pi">:</span>
        <span class="na">certresolver</span><span class="pi">:</span> <span class="s">letsencrypt</span>
</code></pre></div></div>
<p>Que es el encargado de crear automaticamente los certificados de todos los dominios que ponemos con <em>traefik</em>. Y os puedo decir que funciona perfectamente.</p>

<p>Lo he aplicado a los siguientes contenedores:</p>
<ul>
  <li><a href="/docker/vps/2024/01/10/searxng-uno-todo.html">SearxNG</a></li>
  <li><a href="/docker/vps/2024/04/13/uno-juntarlos-todos.html">rss-Funnel</a></li>
  <li><a href="/docker/vps/2024/04/19/traefik.html">Traefik</a></li>
</ul>

<p>Y funciona de fabula. Como dice el dicho, nunca te iras a dormir sin conocer una nueva cosa.</p>

<p>Despu√©s de esto lo ultimo que me falta es ponerme con <strong>crowdsec</strong> que, una vez m√°s, siempre habia pensado que era un <em>plugin</em> que se a√±adia a <em>traefik</em> y no, es un contenedor m√°s con su respectiva configuraci√≥n.</p>

<p>Pero ahora estoy m√°s tranquilo, porque entiendo un poco m√°s como funciona el mundo de <em>traefik</em> y con ayuda de la excelente documentaci√≥n que tiene <em>Atareao</em> con respecto a esto, creo que no tendre ningun problema en implementarlo en mi servidor.</p>

<p>Como dice el dicho</p>

<h4 id="la-suerte-favorece-a-los-valientes">La suerte favorece a los valientes</h4>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://atareao.es/podcast/exprimiendo-tu-proxy-inverso-traefik">532 - Exprimiendo tu proxy inverso Traefik</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="VPS" /><category term="Docker" /><category term="VPS" /><summary type="html"><![CDATA[Como recordais hice 2 articulos donde en el primero articulo explicaba como se podia usar traefik con otros servicios de docker y en el segundo articulo, explicaba como se le podia a√±adir una capa m√°s de seguridad a nuestro servicio de traefik que consistia en bloquear las peticiones de paises de nuestra lista negra. En este 3 articulo, explicare unas modificaciones que, como siempre me pasa, no acabe de entender al leer el articulo principal de atareao y que gracias, no se si por inspiraci√≥n divida de Lorenzo he acabado de entender.]]></summary></entry><entry><title type="html">Opini√≥n Personal sobre unRaid</title><link href="https://vctrsnts.github.io/unraid/2024/06/05/opinion-unraid.html" rel="alternate" type="text/html" title="Opini√≥n Personal sobre unRaid" /><published>2024-06-05T00:00:00+00:00</published><updated>2024-06-05T00:00:00+00:00</updated><id>https://vctrsnts.github.io/unraid/2024/06/05/opinion-unraid</id><content type="html" xml:base="https://vctrsnts.github.io/unraid/2024/06/05/opinion-unraid.html"><![CDATA[<p>Tal como explique en este <a href="/unraid/2024/03/07/cambiando-unraid.html" target="_blank">articulo</a> empece a usar <strong>unRaid</strong> y puedo decir que despu√©s 3 meses (algunos podeis pensar que es poco tiempo), ya me he hecho una opini√≥n sobre este SO y la voy a exponer.</p>

<p>Repito es mi opini√≥n personal y se que este articulo puede levantar ampollas, pero como digo, es mi opini√≥n y a quien no le guste <em>que s‚Äôhi posi fulles</em>.</p>

<!-- more -->

<p>Intentare poner una lista de los puntos positivos y negativos que, repito que es mi opini√≥n personal, hace que a mi parecer aun esta un poco verde para ser un Sistema Operativo para usar como NAS casero y que en mi caso me hace replantear el uso de <strong>unRaid</strong> en mi servidor.</p>

<h3 id="puntos-positivos">Puntos positivos</h3>
<ul>
  <li>Gesti√≥ de discos duros</li>
  <li>Gesti√≥n de la configuraci√≥n del servidor</li>
  <li>Gesti√≥n de la informaci√≥n (graficas) que genera el servidor</li>
</ul>

<h3 id="puntos-negativos">Puntos negativos</h3>
<ul>
  <li>Usando el SO mediante un USB</li>
  <li>Instalaci√≥n de aplicaciones</li>
  <li>Gesti√≥n de docker</li>
  <li>Gesti√≥n del administrador de archivos</li>
  <li>Sistema Operativo que hay por debajo de unRaid</li>
  <li>Foro de ayuda</li>
</ul>

<p>Esto, en mi opini√≥n, son los puntos positivos y negativos que he encontrado. Seguramente muchos direis estoy haciendo una monta√±a de un grano de arena, pero acostumbrado como estaba a gestionar mi servidor con Debian GNU/Linux desde la consola a pasar a gestionar el servidor a traves de <em>unRaid</em>.</p>

<p>Ya se que muchos tambien direis que, no haberte cambiado, pero en eso consiste el aprender, en probar cosas y en sacar tus propias concluisones para poder rebatir si lo que me habian dicho era cierto o falso.</p>

<p>Y tal como dije en este <a href="/unraid/2024/03/07/cambiando-unraid.html" target="_blank">articulo</a> fui yo el que di el salto de <em>Debian</em> a <em>unRaid</em> porque por lo que me explicaban y por lo que veia, daba la sensaci√≥n de que todo era m√°s facil de gestionar y de usar, pero en mi caso, no ha sido asi.</p>

<p>Como digo, en futuras entradas, podreis leer lo <em>bueno</em> y lo <em>malo</em>, <em>a lo mejor lo malo</em>, no seria la palabra correcta, sino lo mejorable, en mi opini√≥n, que le he encontrado a <em>unRaid</em>.</p>]]></content><author><name>VSANTOS</name></author><category term="unRAID" /><category term="unRAID" /><summary type="html"><![CDATA[Tal como explique en este articulo empece a usar unRaid y puedo decir que despu√©s 3 meses (algunos podeis pensar que es poco tiempo), ya me he hecho una opini√≥n sobre este SO y la voy a exponer. Repito es mi opini√≥n personal y se que este articulo puede levantar ampollas, pero como digo, es mi opini√≥n y a quien no le guste que s‚Äôhi posi fulles.]]></summary></entry><entry><title type="html">Usando HomePage. El Dashboard - 2</title><link href="https://vctrsnts.github.io/docker/unraid/2024/06/03/usando-homepage-2.html" rel="alternate" type="text/html" title="Usando HomePage. El Dashboard - 2" /><published>2024-06-03T00:00:00+00:00</published><updated>2024-06-03T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/unraid/2024/06/03/usando-homepage-2</id><content type="html" xml:base="https://vctrsnts.github.io/docker/unraid/2024/06/03/usando-homepage-2.html"><![CDATA[<p>Como ya comente en el anterior <a href="/docker/unraid/2024/02/12/usando-homepage-1.html" target="_blank">articulo</a>  donde hablaba de que estaba usando <strong>HomePage</strong> con una configuraci√≥n <em>normal</em> y muy <em>simple</em>, pero que a la vez era funcional, por no decir basica para cuando te inicias, pero me faltaba algo, en resumen, queria algo m√°s‚Ä¶</p>

<!-- more -->

<p>Entonces buscando informaci√≥n, acabe en el <a href="https://www.github.com/gethomepage" target="_blank">github</a>, que es lo que tenia que haber echo desde el principio, descubri esta <a href="https://github.com/gethomepage/homepage/discussions/473" target="_blank">hilo</a> donde la gente, compartia sus <em>dashboards</em> junto con los ficheros de configuraci√≥n. Y tengo que decir que habia cosas muy chulas y muy curradas y lo m√°s importante, cosas que no sabia que se podian hacer.</p>

<p>Y mirando lo que la gente subia, encontre uno, no fui el unico que pregunto, que era increible y muy funcional porque tenias al alcance toda la informaci√≥n que necesitabas.</p>

<p>Asi que toda la gente, le pidio si podia pasar üòÅ los ficheros de configuraci√≥n que usaba y le tengo que estar muy agradecido porque subio los ficheros de configuraci√≥n que el usaba y que me sirvio para <em>estudiar</em> como lo tenia todo montado. Asi que lo adapte a mis necesidades quedando de la siguiente manera (en mi caso):</p>

<h3 id="pesta√±a-home">Pesta√±a Home</h3>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/screenshot_004.png" alt="screenshot_004.png" />
    </div>
    
</div>

<h3 id="pesta√±a-glances">Pesta√±a Glances</h3>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/screenshot_005.png" alt="screenshot_005.png" />
    </div>
    
</div>

<p>Como se puede ver, uso dos <em>pesta√±as</em> donde en la primera pesta√±a se puede visualizar:</p>
<ul>
  <li>La informaci√≥n de todos los <em>dockers</em> que uso junto con los links a las webs que m√°s uso.</li>
  <li>Toda la informaci√≥n (graficas) de los 2 servidores, que tengo ahora mismo.</li>
</ul>

<p>En el <code class="language-plaintext highlighter-rouge">settings.yaml</code> es donde se configuran los <em>tabs</em> o mejor dicho, las <em>pesta√±as</em>. Esto se consigue a traves de la variable <strong>tab</strong>, que es donde indicamos a que pesta√±a pertenece cada <em>secci√≥n</em>. Para que quede m√°s claro, se puede decir que en la pesta√±a <strong>tab: Home</strong> tendremos lo siguiente:</p>
<ul>
  <li>Virtualization</li>
  <li>Monitoring</li>
  <li>Media</li>
  <li>Network</li>
</ul>

<p>En cambio, en la pesta√±a <strong>tab: Glances</strong> tendremos lo siguiente:</p>
<ul>
  <li>Graficas <em>Servidor 1</em></li>
  <li>Graficas <em>Servidor 2</em></li>
</ul>

<p>Y ahora viene lo m√°s importante, los ficheros de configuraci√≥n que estoy usando:</p>

<h3 id="settingsyaml">settings.yaml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">### Customization</span>
<span class="na">headerStyle</span><span class="pi">:</span> <span class="s">clean</span>
<span class="na">cardBlur</span><span class="pi">:</span> <span class="s">md</span>
<span class="na">theme</span><span class="pi">:</span> <span class="s">dark</span>
<span class="na">color</span><span class="pi">:</span> <span class="s">zinc</span>
<span class="na">quicklaunch</span><span class="pi">:</span>
  <span class="na">searchDescriptions</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">hideInternetSearch</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">showSearchSuggestions</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">hideVisitURL</span><span class="pi">:</span> <span class="kc">false</span>

<span class="c1">### Group layouts</span>
<span class="na">layout</span><span class="pi">:</span>
<span class="c1">## Homepage</span>
  <span class="na">Virtualization</span><span class="pi">:</span>
    <span class="na">tab</span><span class="pi">:</span> <span class="s">Home</span>
    <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi-desktop-classic</span>
  <span class="na">Monitoring</span><span class="pi">:</span>
    <span class="na">tab</span><span class="pi">:</span> <span class="s">Home</span>
    <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi-message-alert</span>
  <span class="na">Media</span><span class="pi">:</span>
    <span class="na">tab</span><span class="pi">:</span> <span class="s">Home</span>
    <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi-video-vintage</span>
  <span class="na">Network</span><span class="pi">:</span>
    <span class="na">tab</span><span class="pi">:</span> <span class="s">Home</span>
    <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi-lan</span>

<span class="c1">## Glances</span>
  <span class="na">Servidor 1 (unRaid)</span><span class="pi">:</span>
    <span class="na">tab</span><span class="pi">:</span> <span class="s">Glances</span>
    <span class="na">useEqualHeights</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">style</span><span class="pi">:</span> <span class="s">row</span>
    <span class="na">columns</span><span class="pi">:</span> <span class="m">3</span>
    <span class="na">initiallyCollapsed</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">Servidor 2 (Contabo)</span><span class="pi">:</span>
    <span class="na">tab</span><span class="pi">:</span> <span class="s">Glances</span>
    <span class="na">useEqualHeights</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">style</span><span class="pi">:</span> <span class="s">row</span>
    <span class="na">columns</span><span class="pi">:</span> <span class="m">3</span>
    <span class="na">initiallyCollapsed</span><span class="pi">:</span> <span class="kc">false</span>

<span class="c1">## Bookmarks</span>
  <span class="na">Blogs</span><span class="pi">:</span>
    <span class="na">icon</span><span class="pi">:</span> <span class="s">si-blogger</span>
  <span class="na">Compres</span><span class="pi">:</span>
    <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi-shopping-outline</span>
  <span class="na">Comunicacio</span><span class="pi">:</span>
    <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi-newspaper</span>
  <span class="na">Videos</span><span class="pi">:</span>
    <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi-movie-open-edit-outline</span>
  <span class="na">VPS</span><span class="pi">:</span>
    <span class="na">icon</span><span class="pi">:</span> <span class="s">mdi-google-cloud</span>
</code></pre></div></div>
<p>Es en el archivo <code class="language-plaintext highlighter-rouge">services.yaml</code> donde definimos lo que contiene cada <strong>secci√≥n</strong> (<em>Virtualization</em>, <em>Monitoring</em>, etc..).</p>

<h3 id="servicesyaml">services.yaml</h3>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">-</span> <span class="no">Virtualization</span><span class="p">:</span>
    <span class="o">-</span> <span class="ss">unRaid:
        icon: </span><span class="n">unraid</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description:
        ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">siteMonitor: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>

<span class="o">-</span> <span class="no">Monitoring</span><span class="p">:</span>
    <span class="o">-</span> <span class="no">What</span><span class="err">'</span><span class="n">s</span> <span class="no">Up</span> <span class="no">Docker</span><span class="p">?:</span>
        <span class="ss">icon: </span><span class="n">whats</span><span class="o">-</span><span class="n">up</span><span class="o">-</span><span class="n">docker</span><span class="o">-</span><span class="n">light</span><span class="p">.</span><span class="nf">png</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">Notifications</span> <span class="k">for</span> <span class="no">New</span> <span class="no">Container</span> <span class="no">Version</span> <span class="no">Releases</span>
        <span class="ss">ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">siteMonitor: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">widget:
          type: </span><span class="n">whatsupdocker</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">username: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_WUDUSER</span><span class="p">}}</span>
          <span class="ss">password: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_WUDPASS</span><span class="p">}}</span>

    <span class="o">-</span> <span class="no">Scrutiny</span><span class="p">:</span>
        <span class="ss">icon: </span><span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">repository</span><span class="o">-</span><span class="n">images</span><span class="p">.</span><span class="nf">githubusercontent</span><span class="p">.</span><span class="nf">com</span><span class="o">/</span><span class="mi">289524449</span><span class="o">/</span><span class="n">fc01e480</span><span class="o">-</span><span class="n">e6ab</span><span class="o">-</span><span class="mi">11</span><span class="n">ea</span><span class="o">-</span><span class="mf">9e20</span><span class="o">-</span><span class="mi">53257</span><span class="n">df6f326</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">S</span><span class="o">.</span><span class="no">M</span><span class="o">.</span><span class="no">A</span><span class="o">.</span><span class="no">R</span><span class="o">.</span><span class="no">T</span><span class="o">.</span> <span class="no">Monitoring</span> <span class="no">Dashboard</span>
        <span class="ss">ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">siteMonitor: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">container: </span><span class="n">scrutiny</span>
        <span class="ss">widget:
          type: </span><span class="n">scrutiny</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">fields: </span><span class="p">[</span><span class="s2">"passed"</span><span class="p">,</span> <span class="s2">"failed"</span><span class="p">]</span>

    <span class="o">-</span> <span class="no">Gotify</span><span class="p">:</span>
        <span class="ss">icon: </span><span class="n">gotify</span><span class="p">.</span><span class="nf">png</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">Simple</span><span class="p">,</span> <span class="no">HTTP</span><span class="o">-</span><span class="n">based</span> <span class="no">Pub</span><span class="o">-</span><span class="nb">sub</span> <span class="no">Notification</span> <span class="no">Service</span>
        <span class="ss">ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">siteMonitor: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">container: </span><span class="n">gotify</span>
        <span class="ss">widget:
          type: </span><span class="n">gotify</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">key: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_GOTIFY</span><span class="p">}}</span>

<span class="o">-</span> <span class="no">Media</span><span class="p">:</span>
    <span class="o">-</span> <span class="no">Jackett</span><span class="p">:</span>
        <span class="ss">icon: </span><span class="n">jackett</span><span class="p">.</span><span class="nf">png</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">Servidor</span> <span class="no">Indexers</span>
        <span class="ss">ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">siteMonitor: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">container: </span><span class="n">jackett</span>
        <span class="ss">widget:
          type: </span><span class="n">jackett</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
    <span class="o">-</span> <span class="no">Transmission</span><span class="p">:</span>
        <span class="ss">icon: </span><span class="n">transmission</span><span class="p">.</span><span class="nf">png</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">Servidor</span> <span class="no">Transmission</span>
        <span class="ss">ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">siteMonitor: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">container: </span><span class="n">transmission</span>
        <span class="ss">widget:
          type: </span><span class="n">transmission</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>

    <span class="o">-</span> <span class="no">Jellyfin</span><span class="p">:</span>
        <span class="ss">icon: </span><span class="n">jellyfin</span><span class="p">.</span><span class="nf">png</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">Servidor</span> <span class="no">Multimedia</span>
        <span class="ss">ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">widget:
          type: </span><span class="n">jellyfin</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">key: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_JELLYFIN</span><span class="p">}}</span>
          <span class="ss">enableBlocks: </span><span class="kp">true</span>
          <span class="ss">enableNowPlaying: </span><span class="kp">false</span>
          <span class="ss">fields: </span><span class="p">[</span><span class="s2">"movies"</span><span class="p">,</span> <span class="s2">"series"</span><span class="p">,</span> <span class="s2">"episodes"</span><span class="p">]</span>

    <span class="o">-</span> <span class="no">Navidrome</span><span class="p">:</span>
        <span class="ss">icon: </span><span class="n">navidrome</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">Servidor</span> <span class="no">Musica</span>
        <span class="ss">container: </span><span class="n">navidrome</span>
        <span class="ss">widget:
          type: </span><span class="n">navidrome</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">user: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_NAVUSER</span><span class="p">}}</span>
          <span class="ss">token: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_NAVTOKN</span><span class="p">}}</span>
          <span class="ss">salt: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_NAVSALT</span><span class="p">}}</span>

    <span class="o">-</span> <span class="no">Calibre</span><span class="p">:</span>
        <span class="ss">icon: </span><span class="n">calibre</span><span class="p">.</span><span class="nf">png</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">Software</span> <span class="n">de</span> <span class="n">gesti</span><span class="err">√≥</span> <span class="n">de</span> <span class="n">llibres</span>
        <span class="ss">ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">siteMonitor: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">container: </span><span class="n">calibre</span>

    <span class="o">-</span> <span class="no">Calibre</span><span class="o">-</span><span class="no">Web</span><span class="p">:</span>
        <span class="ss">icon: </span><span class="n">calibre</span><span class="o">-</span><span class="n">web</span><span class="p">.</span><span class="nf">png</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">Web</span> <span class="n">per</span> <span class="n">a</span> <span class="n">la</span> <span class="n">gesti</span><span class="err">√≥</span> <span class="n">de</span> <span class="n">llibres</span> <span class="p">(</span><span class="no">Calibre</span><span class="p">)</span> <span class="n">i</span> <span class="n">la</span> <span class="n">seva</span> <span class="no">BBDD</span>
        <span class="ss">ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">siteMonitor: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">container: </span><span class="n">calibre</span><span class="o">-</span><span class="n">web</span>
        <span class="ss">widget:
          type: </span><span class="n">calibreweb</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">username: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_CALIBREUSER</span><span class="p">}}</span>
          <span class="ss">password: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_CALIBREPASS</span><span class="p">}}</span>

<span class="o">-</span> <span class="no">Network</span><span class="p">:</span>
    <span class="o">-</span> <span class="no">Traefik</span><span class="p">:</span>
        <span class="ss">icon: </span><span class="n">traefik</span><span class="p">.</span><span class="nf">png</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">Open</span><span class="o">-</span><span class="n">source</span> <span class="no">Reverse</span> <span class="no">Proxy</span> <span class="ow">and</span> <span class="no">Load</span> <span class="no">Balancer</span>
        <span class="ss">ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">siteMonitor: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">widget:
          type: </span><span class="n">traefik</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">username: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_TRAEFIKUSR</span><span class="p">}}</span>
          <span class="ss">password: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_TRAEFIKPWD</span><span class="p">}}</span>
    <span class="o">-</span> <span class="no">PiHole</span><span class="p">:</span>
        <span class="ss">icon: </span><span class="n">pi</span><span class="o">-</span><span class="n">hole</span><span class="p">.</span><span class="nf">png</span>
        <span class="ss">href: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">description: </span><span class="no">Servidor</span> <span class="no">PiHole</span>
        <span class="ss">ping: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">siteMonitor: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
        <span class="ss">container: </span><span class="n">pihole</span>
        <span class="ss">widget:
          type: </span><span class="n">pihole</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">key: </span><span class="p">{{</span><span class="no">HOMEPAGE_VAR_PIHOLE</span><span class="p">}}</span> 

<span class="o">-</span> <span class="n">dasReich</span> <span class="p">(</span><span class="n">unRaid</span><span class="p">):</span>
    <span class="o">-</span> <span class="no">CPU</span> <span class="no">Usage</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">cpu</span>
    <span class="o">-</span> <span class="no">Memory</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">memory</span>
    <span class="o">-</span> <span class="no">Network</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">network</span><span class="ss">:eth0</span>
    <span class="o">-</span> <span class="no">Processes</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">process</span>
    <span class="o">-</span> <span class="no">Disk</span> <span class="no">I</span><span class="o">/</span><span class="no">O</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">disk</span><span class="ss">:nvme0n1</span>
    <span class="o">-</span> <span class="no">Disk</span> <span class="no">I</span><span class="o">/</span><span class="no">O</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">disk</span><span class="ss">:sdb</span>

<span class="o">-</span> <span class="no">Wiking</span> <span class="p">(</span><span class="no">Contabo</span><span class="p">):</span>
    <span class="o">-</span> <span class="no">CPU</span> <span class="no">Usage</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">cpu</span>
    <span class="o">-</span> <span class="no">Memory</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">memory</span>
    <span class="o">-</span> <span class="no">Network</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">network</span><span class="ss">:eth0</span>
    <span class="o">-</span> <span class="no">Processes</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">process</span>
    <span class="o">-</span> <span class="no">Disk</span> <span class="no">Usage</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">fs</span><span class="ss">:/</span><span class="n">etc</span><span class="o">/</span><span class="n">hostname</span>
    <span class="o">-</span> <span class="no">Disk</span> <span class="no">I</span><span class="o">/</span><span class="no">O</span><span class="p">:</span>
        <span class="ss">widget:
          type: </span><span class="n">glances</span>
          <span class="ss">url: </span><span class="p">[</span><span class="n">url</span><span class="p">]</span>
          <span class="ss">metric: </span><span class="n">disk</span><span class="ss">:sda</span></code></pre></figure>

<p>Si os fijais, podreis ver que he usado <em>variables</em> del estilo <strong>HOMEPAGE_VAR_CALIBREUSER</strong> o <strong>HOMEPAGE_VAR_PIHOLE</strong>, esto lo usamos, para que el fichero quede los m√°s <strong>limpio</strong> posible de passwords, keys, etc‚Ä¶ que en caso de algun problema queden expuestos.</p>

<p>Entonces, para hacer esto, lo unico que se tiene que hacer, es crear un fichero <code class="language-plaintext highlighter-rouge">.env</code> con las <em>variables</em> que se necesiten, pero siempre tienen que venir precedidas de <code class="language-plaintext highlighter-rouge">HOMEPAGE_VAR_...</code> (os pondre las variables que yo he usado), pero aqui vosotros sois libres de crear m√°s:</p>
<h3 id="env">.env</h3>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code># PASSWORDS CALIBRE-WEB
#
HOMEPAGE_VAR_CALIBREUSER=[user]
HOMEPAGE_VAR_CALIBREPASS=[password]

# PASSWORD TRANSMISSION
#
#HOMEPAGE_VAR_TRANSUSER=[user]
#HOMEPAGE_VAR_TRANSPASS=[password]

# KEY JELLYFIN
#
HOMEPAGE_VAR_JELLYFIN=[key]

# KEY GOTIFY
#
HOMEPAGE_VAR_GOTIFY=[key]

# TRAEFIK PASSWORD
#
HOMEPAGE_VAR_TRAEFIKUSR=[user]
HOMEPAGE_VAR_TRAEFIKPWD=[password]

# NAVIDROME
#
HOMEPAGE_VAR_NAVUSER=[user]
HOMEPAGE_VAR_NAVTOKN=[key]
HOMEPAGE_VAR_NAVSALT=[key]

# WHATS UP MY DOCKERS
#
HOMEPAGE_VAR_WUDUSER=[user]
HOMEPAGE_VAR_WUDPASS=[password]

# PIHOLE
#
HOMEPAGE_VAR_PIHOLE=[key]
</code></pre></div></div>

<h3 id="widgetsyaml">widgets.yaml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">logo</span><span class="pi">:</span>
    <span class="na">icon</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
<span class="pi">-</span> <span class="na">glances</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">glances</span>
    <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
    <span class="na">label</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">label</span><span class="pi">]</span>
    <span class="na">mem</span><span class="pi">:</span> <span class="kc">false</span>
    <span class="na">cpu</span><span class="pi">:</span> <span class="kc">false</span>
    <span class="na">expanded</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">disk</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/etc/hostname</span>
<span class="pi">-</span> <span class="na">glances</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">glances</span>
    <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
    <span class="na">label</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">label</span><span class="pi">]</span>
    <span class="na">mem</span><span class="pi">:</span> <span class="kc">false</span>
    <span class="na">cpu</span><span class="pi">:</span> <span class="kc">false</span>
    <span class="na">expanded</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">disk</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/etc/hostname</span>

<span class="pi">-</span> <span class="na">search</span><span class="pi">:</span>
    <span class="na">provider</span><span class="pi">:</span> <span class="s">custom</span>
    <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
    <span class="na">focus</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">target</span><span class="pi">:</span> <span class="s">_blank</span>

<span class="pi">-</span> <span class="na">datetime</span><span class="pi">:</span>
    <span class="na">locale</span><span class="pi">:</span> <span class="s">nl</span>
    <span class="na">text_size</span><span class="pi">:</span> <span class="s">xs</span>
    <span class="na">format</span><span class="pi">:</span>
      <span class="na">dateStyle</span><span class="pi">:</span> <span class="s">short</span>
      <span class="na">timeStyle</span><span class="pi">:</span> <span class="s">short</span>
      <span class="na">hourCycle</span><span class="pi">:</span> <span class="s">h23</span>
</code></pre></div></div>
<h3 id="bookmarksyaml">bookmarks.yaml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">Blogs</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">Personal</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">github-light.png</span>
    <span class="pi">-</span> <span class="na">Desenvolupament</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">github-light.png</span>
    <span class="pi">-</span> <span class="na">Llibres</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">wordpress.png</span>
    <span class="pi">-</span> <span class="na">uGeek</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">blogger.png</span>
    <span class="pi">-</span> <span class="na">Lazaro</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">blogger.png</span>
    <span class="pi">-</span> <span class="na">Atareao</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">blogger.png</span>

<span class="pi">-</span> <span class="na">Compres</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">Amazon</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">amazon.png</span>

    <span class="pi">-</span> <span class="na">Aliexpress</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">aliexpress.png</span>

<span class="pi">-</span> <span class="na">Comunicacio</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">Mastodon</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">mastodon.png</span>
    <span class="pi">-</span> <span class="na">Telegram</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">telegram.png</span>
    <span class="pi">-</span> <span class="na">RiseUp</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">mailu.png</span>
    <span class="pi">-</span> <span class="na">EruenPlay</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">youtube.png</span>

<span class="pi">-</span> <span class="na">Videos</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">Hispamula</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
    <span class="pi">-</span> <span class="na">HDOlimpo</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
    <span class="pi">-</span> <span class="na">Xbytes</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
    <span class="pi">-</span> <span class="na">DonTorrent</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
    <span class="pi">-</span> <span class="na">YouTube</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">youtube.png</span>

<span class="pi">-</span> <span class="na">VPS</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">Contabo</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">contabo.png</span>
    <span class="pi">-</span> <span class="na">Google Cloud</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
    <span class="pi">-</span> <span class="na">GitHub</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">icon</span><span class="pi">:</span> <span class="s">github-light.png</span>
</code></pre></div></div>

<p>Espero que os pueda servir de ayuda esta informaci√≥n. A parte, asi la tengo tambien disponible para mi, cuando me explote el servidor üòÅ y pierda toda la configuraci√≥n que tengo ahora mismo.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://github.com/gethomepage/homepage/discussions/473" target="_blank">Github - Share your homepage</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="unRAID" /><category term="Docker" /><category term="unRAID" /><summary type="html"><![CDATA[Como ya comente en el anterior articulo donde hablaba de que estaba usando HomePage con una configuraci√≥n normal y muy simple, pero que a la vez era funcional, por no decir basica para cuando te inicias, pero me faltaba algo, en resumen, queria algo m√°s‚Ä¶]]></summary></entry><entry><title type="html">Cambios en el blog - 2</title><link href="https://vctrsnts.github.io/blog/2024/05/30/cambios-blog-2.html" rel="alternate" type="text/html" title="Cambios en el blog - 2" /><published>2024-05-30T00:00:00+00:00</published><updated>2024-05-30T00:00:00+00:00</updated><id>https://vctrsnts.github.io/blog/2024/05/30/cambios-blog-2</id><content type="html" xml:base="https://vctrsnts.github.io/blog/2024/05/30/cambios-blog-2.html"><![CDATA[<p>Como ya explique en el anterior <a href="/blog/2024/05/24/cambios-blog-1.html" target="_blank">articulo</a>, comentaba que habia actualizado mi <strong>Blog / Pagina Web</strong> con un nuevo tema gracias a <em>Jekyll</em> y al final hice el cambio, con unos cuantos problemas pero lo hice. Y aqui podeis ver el resultado‚Ä¶</p>

<!-- more -->

<p>Pero aun asi, habia cosas que no acababan de funcionar y eran:</p>
<ul>
  <li>El feed no se creaba correctamente porque las direcciones de los posts apuntaban a http://0.0.0.0:4000
    <ul>
      <li>Esta es la direcci√≥n por defecto del servidor de jekyll de desarrollo.</li>
    </ul>
  </li>
  <li>En los articulos salia la opci√≥n de <strong>SHARE</strong> y aun desactivando las redes sociales, esta opci√≥n no desaparecia.</li>
</ul>

<p>La parte m√°s facil fue la de hacer desaparecer la opci√≥n <strong>SHARE</strong> de los post. Hice una modificaci√≥n al codigo para que a partir de una variable <em>activase</em> la opci√≥n de <strong>SHARE</strong> o no.</p>

<p>La primera modificaci√≥n se tenia que hacer en el archivo <code class="language-plaintext highlighter-rouge">_data/social.yml</code> donde tenemos que a√±adir lo siguiente:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># add this new option:</span>
<span class="c1"># For share on general</span>
<span class="na">share_buttons</span><span class="pi">:</span> <span class="kc">false</span>
</code></pre></div></div>

<p>Una vez realizada esta modificaci√≥n, la siguiente modificaci√≥n se tenia que hacer en <code class="language-plaintext highlighter-rouge">_includes/social/share_buttons.liquid</code> donde teniamos que a√±adir el siguiente codigo:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">{</span><span class="sx">% if </span><span class="n">site</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">social</span><span class="p">.</span><span class="nf">share_buttons</span> <span class="sx">%}
...
{% endif %}</span></code></pre></figure>

<p>Y con esto se conseguia que los iconos de <strong>SHARE</strong> no se visualizaran.</p>

<p>Una vez realizada esta modificaci√≥n, hable con el creador del tema para plantearle esta modificaci√≥n y que se lo a√±adiera al tema. Despu√©s de un peque√±o problema de comunicaci√≥n, al final nos entendimos los dos con respecto a lo que le estaba proponiendo y le pareci√≥ una buena idea y que no habia ningun problema, que o yo hacia el <strong>PULL REQUEST</strong>, o sino tenia mucha prisa el se encargaria de hacer las modificaciones oportunas.</p>

<p>Le dije que mejor lo hiciera el, porque hacer los <strong>PR</strong> en codigo ajeno al mio no me hace mucha gracias, no vaya ser que la lie. Adem√°s no tenia prisa.</p>

<p>Y asi quedo la cosa, con esta modificaci√≥n a la espera, pero en mi caso, como ya la tenia, pues adelante. Pero pasado un dia, el desarrollador del tema, me respondiendo a mi petici√≥n, indicando que esto ya lo hacia por defecto. A mi me extra√±o mucho, porque yo lo habia probado y no habia pasado nada.</p>

<p>El me puntualizo, que para activar esta funcionalidad, en el fichero <code class="language-plaintext highlighter-rouge">_data/social.yml</code> tenia que poner a <code class="language-plaintext highlighter-rouge">false</code> todas las redes sociales y con esto ya funcionaba lo que yo queria:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># For the share button options at the bottom of the articles</span>
<span class="na">share</span><span class="pi">:</span>
  <span class="na">email</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">facebook</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">linkedin</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">pinterest</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">pocket</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">reddit</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">tumblr</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">twitter</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">wordpress</span><span class="pi">:</span>
</code></pre></div></div>
<p>Asi que lo probe y tenia razon. Lo que el decia funcionaba perfectamente.</p>

<p>Ahi fue cuando le pregunte, si ese fichero no es el que controla los iconos que aparecen en el <strong>footer</strong> de la web, y su respuesta fue, que no, ese fichero es el que controla la opci√≥n <strong>SHARE</strong>. El que controla el footer es <code class="language-plaintext highlighter-rouge">_data/icons.yml</code>. Entonces dije, <em>tierra tragame</em>.</p>

<p>Eso me pasa por no revisar concienzudamente el codigo para asi entender lo que esta haciendo, porque lo m√°s fuerte es que el codigo es muy facil de entender. Lo que hace estar fuera de este mundo durante un par de a√±os. Que todo avanza muy rapidamente.</p>

<p>Asi que deshice las modificaciones que habia hecho y todo funciono correctamente.</p>

<p>Pero ahora venia el problema m√°s grave, como solucionar el tema del <code class="language-plaintext highlighter-rouge">feed.yml</code> que no apuntaba correctamente a la direcci√≥n de los articulos cuando se subia a <strong>github.com</strong>. Me pase dias y dias intentando buscar la soluci√≥n al problema. Mucha gente decia que si ponias en el fichero <code class="language-plaintext highlighter-rouge">_config.yml</code>, en la opci√≥n <em>feed</em> la opci√≥n <em>url</em> de la siguiente manera:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">feed</span><span class="pi">:</span>
  <span class="na">url</span><span class="pi">:</span> <span class="s">https://tudominio.github.io</span>
</code></pre></div></div>
<p>Funcionaba sin ningun problema. Pero no era mi caso. Y era muy frustante no conseguir hacer funciona el <em>feed</em> correctamente. Asi que si no puedes con el, hazte uno propio y fue lo que hice, construir mi propio feed, para que a la hora de generar el sitio en <strong>github</strong> se creara automaticamente. El codigo que use era el siguiente:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="p">?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span><span class="p">?</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">rss</span> <span class="n">version</span><span class="o">=</span><span class="s2">"2.0"</span> <span class="n">xmlns</span><span class="ss">:atom</span><span class="o">=</span><span class="s2">"http://www.w3.org/2005/Atom"</span>
  <span class="n">xmlns</span><span class="ss">:dc</span><span class="o">=</span><span class="s2">"http://purl.org/dc/elements/1.1/"</span>
  <span class="n">xmlns</span><span class="ss">:sy</span><span class="o">=</span><span class="s2">"http://purl.org/rss/1.0/modules/syndication/"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="n">channel</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="p">{{</span> <span class="n">site</span><span class="p">.</span><span class="nf">name</span> <span class="o">|</span> <span class="n">xml_escape</span> <span class="p">}}</span><span class="o">&lt;</span><span class="sr">/title&gt;
    &lt;description&gt;{% if site.description %}{{ site.description | xml_escape }}{% endif %}&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">sy</span><span class="ss">:updatePeriod</span><span class="o">&gt;</span><span class="p">{{</span> <span class="n">site</span><span class="p">.</span><span class="nf">feed_update_period</span> <span class="o">|</span> <span class="ss">default: </span><span class="s2">"daily"</span> <span class="o">|</span> <span class="n">xml_escape</span> <span class="p">}}</span><span class="o">&lt;</span><span class="sr">/sy:updatePeriod&gt;
    &lt;sy:updateFrequency&gt;{{ site.feed_update_frequency | default: 1 | xml_escape }}&lt;/s</span><span class="n">y</span><span class="p">:</span><span class="n">updateFrequency</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">link</span><span class="o">&gt;</span><span class="p">{{</span> <span class="n">site</span><span class="p">.</span><span class="nf">url</span> <span class="p">}}</span><span class="o">&lt;</span><span class="sr">/link&gt;
    &lt;atom:link href="{{ site.url }}/</span><span class="p">{{</span> <span class="n">page</span><span class="p">.</span><span class="nf">path</span> <span class="p">}}</span><span class="s2">" rel="</span><span class="nb">self</span><span class="s2">" type="</span><span class="n">application</span><span class="o">/</span><span class="n">rss</span><span class="o">+</span><span class="n">xml</span><span class="s2">" /&gt;
    &lt;lastBuildDate&gt;{% for post in site.posts limit:1 %}{{ post.date | date_to_rfc822 }}{% endfor %}&lt;/lastBuildDate&gt;
    {% assign feed_items = site.feed_items | default: 10 %}
    {% for post in site.posts limit:feed_items %}
      &lt;item&gt;
        &lt;title&gt;{{ post.title | xml_escape }}&lt;/title&gt;
        {% if post.author.name %}
          &lt;dc:creator&gt;{{ post.author.name | xml_escape }}&lt;/dc:creator&gt;
        {% endif %}
        {% if post.excerpt %}
          &lt;description&gt;{{ post.excerpt | xml_escape }}&lt;/description&gt;
        {% else %}
          &lt;description&gt;{{ post.content | xml_escape }}&lt;/description&gt;
        {% endif %}
        &lt;pubDate&gt;{{ post.date | date_to_rfc822 }}&lt;/pubDate&gt;
        &lt;link&gt;{{ site.url }}{{ post.url }}&lt;/link&gt;
        &lt;guid isPermaLink="</span><span class="kp">true</span><span class="s2">"&gt;{{ site.url }}{{ post.url }}&lt;/guid&gt;
        &lt;/item&gt;
    {% endfor %}
  &lt;/channel&gt;
&lt;/rss&gt;</span></code></pre></figure>

<p>Y como cogia la informaci√≥n del fichero <code class="language-plaintext highlighter-rouge">_config.yml</code> para la creaci√≥n de los links, pues no habia problema.</p>

<p>Pero yo no queria esta chapuza, por llamarlo de alguna manera. Yo queria utilizar todo el potencial de <em>jekyll</em> y que fuera √©l, el que me creara el feed, porque sino, para eso, me hago yo el tema. Lo unico que me quedaba, era preguntar directamente a la <a href="https://talk.jekyllrb.com/t/jekyll-always-0-0-0-0-4000/9204" target="_blank">fuente</a>, donde explique el problema y como hacia para construir el sitio y despu√©s subirlo a <strong>GitHub</strong>.</p>

<p>Aqui fue donde explique que usaba un archivo sh, este en <a href="/debian%20gnu/linux/blog/docker/2023/08/01/como-funciona-esta-web.html" target="_blank">concreto</a> que hacia las siguientes funciones:</p>
<ul>
  <li>Construir el sitio a√±adiendo los nuevos posts, recordar que yo todo esto lo tengo en docker:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">docker exec jekyll bundle exec jekyll serve build</code></li>
    </ul>
  </li>
  <li>Subir los archivos <code class="language-plaintext highlighter-rouge">html</code> a <strong>GitHub</strong>.</li>
</ul>

<p>La primera respuesta que me dieron, que tienen mucha razon, fue, porque hacia eso, si eso lo podia hacer <strong>GitHub</strong> directamente y tienen toda la razon, pero les dije, que no me hacia mucha gracias subir todo el <code class="language-plaintext highlighter-rouge">codigo fuente</code> de mi web. Que preferia, en mi caso, tener el control del codigo fuente y subir solamente el codigo html final.</p>

<p>Y hay fue donde me dijeron que entonces, el problema lo tenia yo, porque no entendia bien como funcionaba <strong>jekyll</strong>, üò≠ lo que siempre me pasa por no leer y comprender el funcionamiento de las cosas, y en este caso de <em>jekyll</em>. Entonces me explicaron, que la instrucci√≥n que yo estaba usando, lo que hacia era:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">serve</code> es crear, m√°s o menos, con lo parametros del servidor de docker y mostrarme el resultado, pero sino ninguna modificaci√≥n.
    <ul>
      <li>O sea usando por defecto la direcci√≥n del servidor <code class="language-plaintext highlighter-rouge">http://0.0.0.0:4000</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">build</code> lo que hace es construir el sitio usando la configuraci√≥n del fichero <code class="language-plaintext highlighter-rouge">_config.yml</code>.</li>
</ul>

<p>Y lo que yo estaba haciendo a parte de no tener sentido era <em>crear</em> y <em>construir</em> el sitio con los valors por defecto del servidor y por eso, el feed no se creaba correctamente. Que lo correcto, era usar <code class="language-plaintext highlighter-rouge">jekyll build</code>. Y asi que me fue.</p>

<p>Lo que puede pasar por no entender lo que haces. Y funciono ü•≤. Al usar <em>build</em> el feed y todo el resto de ficheros, <em>sitemap.yml</em>, <em>robots.txt</em>, se creaban usando los valores de <code class="language-plaintext highlighter-rouge">_config.yml</code>.</p>

<p>Pues ya estaba todo. Por fin tenia todo el tema funcionando correctamente y lo mas impportante, sin necesidad de utilizar ninguna funcionalidad externa a <em>jekyll</em>, para que asi, en un futuro, espero que lejano, si quiero cambiar de nuevo de tema, no tener que volver a pelearme con el codigo para conseguir que funcione correctamente.</p>

<p>Aunque esto no es del todo cierto, porque cada tema, tiene su manera particular de crear los posts, pero bueno, eso es otro tema.</p>

<p>Y hasta aqui hemos llegado. Con mi sitio con un tema nuevo y a pleno rendimiento y con tiempo para decidar a otras cosas que tengo pendientes y sin tener que preocuparme por su funcionamiento. Lo unico que me queda, si, nunca se puede decir que todo esta perfecto, es, como el tema tiene esa posibilidad, la de a√±adir alguna imagen de cabecera de los articulos. Pero eso ya se vera.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://github.com/sylhare/Type-on-Strap/discussions/442" target="_blank">Modificar opci√≥n SHARE</a></li>
  <li><a href="https://talk.jekyllrb.com/t/jekyll-always-0-0-0-0-4000/9204" target="_blank">Jekyll always 0.0.0.0:4000</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Blog" /><category term="Blog" /><summary type="html"><![CDATA[Como ya explique en el anterior articulo, comentaba que habia actualizado mi Blog / Pagina Web con un nuevo tema gracias a Jekyll y al final hice el cambio, con unos cuantos problemas pero lo hice. Y aqui podeis ver el resultado‚Ä¶]]></summary></entry><entry><title type="html">Cambios en el blog - 1</title><link href="https://vctrsnts.github.io/blog/2024/05/24/cambios-blog-1.html" rel="alternate" type="text/html" title="Cambios en el blog - 1" /><published>2024-05-24T00:00:00+00:00</published><updated>2024-05-24T00:00:00+00:00</updated><id>https://vctrsnts.github.io/blog/2024/05/24/cambios-blog-1</id><content type="html" xml:base="https://vctrsnts.github.io/blog/2024/05/24/cambios-blog-1.html"><![CDATA[<p>Se que llevo un par de semanas sin escribir ningun articulo, pero he estado un poco liado dandole un poco chapa y pintura a este blog que se traduce en lo que estais viendo ahora.</p>

<!-- more -->

<p>Como ya sabreis, lo explico en este <a href="/blog/docker/2023/02/13/jekyll-muy-configurable.html" target="_blank">articulo</a>, esta web se hace gracias a <a href="https://github.com/BretFisher/jekyll-serve" target="_blank">Jekyll</a> y eso me facilita mucho los cambios, aunque no soy muy aficionado a ellos.</p>

<p>Tambien influye que ya me habia cansado del tema que estaba usando hasta el momento, me puse a buscar algo diferente diferente y m√°s actual y que adem√°s el proyecto estuviera vivo, no como el que antes usaba que hacia como unos 5 a√±os que no se hacia nada.</p>

<p>Y me puse a buscar por las diferentes paginas web que hay con temas de <strong>Jekyll</strong> e iba probando las que m√°s o menos me gustaban, pero sin llegar a encontrar ninguna que me convenciera, asi que como ultimo recurso, no me gusta nada, pero cuando no queda m√°s remedio, le hice la consulta a <strong>chatgpt</strong> para que me echara una mano para escoger un buen tema üòÇ</p>

<p>A la <em>IA</em> le di un par de pautas que tenia que cumplir en nuevo tema, esas pautas eran las siguientes:</p>
<ul>
  <li>El proyecto tenia que estar vivo.</li>
  <li>Facil configuraci√≥n de <em>Mastodon</em>.
    <ul>
      <li>Esto viene porque todos los temas que iba revisando o no tenian implementada esta nueva red social o hacer las modificaciones necesarias eran muy complicadas.</li>
    </ul>
  </li>
  <li>Que fuera facil de usar y de trabajar con el en caso de querer realizar alguna modificaci√≥n.</li>
  <li>Que trabajase con la fuente <a href="https://fontawesome.com" target="_blank">Font Awesome</a> lo m√°s actualizada posible.
    <ul>
      <li>Esto es debido a que todos los temas que me iba encontrando usaban la versi√≥n 4.7 que no incluye los iconos de <em>Mastodon</em> y para actualizar a una nueva versi√≥n, es muy dificil de hacer.</li>
    </ul>
  </li>
</ul>

<p><strong>ChatGpt</strong> me dio algunos temas que eran interesantes, pero no me acababan de convencer (para que luego digan que la <em>IA</em> puede sernos de ayuda, pues conmigo no funciono). Asi que segui buscando, hasta que un buen dia, no se si ya lo habia descartado, me volvi a encontrar este <a href="https://github.com/sylhare/Type-on-Strap" target="_blank">tema</a> y me decidi a probarlo.</p>

<p>Cada vez que lo usaba, lo iba viendo con otros ojos, porque contra m√°s lo usaba m√°s facil me resultaba. Adem√°s cumplia casi todos los requisitos de mi lista por no decir todos:</p>
<ul>
  <li>El proyecto esta vivo.</li>
  <li>Facil de usar y de trabajar con el por si quieres hacer modificaciones en el codigo.</li>
  <li>Facil configuraci√≥n de la red de <strong>Mastodon</strong>. Uno de los pocos que la incluyen.</li>
  <li>Usa una de las ultimas versiones de <strong>Font Awesome</strong>.</li>
  <li>Un mejor desempe√±o con las <strong>Categorias</strong> y con los <strong>TAGS</strong>.
    <ul>
      <li>Este mejor desempe√±o, me ha llevado a que he tenido que modificar todos los articulos pero creo que ha sido beneficioso, porque me he dado cuenta, que mientras estaba probando otros temas, todos iban en la misma direcci√≥n.</li>
    </ul>
  </li>
  <li>Tambien esta la opci√≥n de visualizar el archivo de la web con todos los articulos y el a√±o de su creaci√≥n que es una cosa que siempre me ha hecho gracia tener, pero que no sabia como se podia implementar.
    <ul>
      <li>Tendre que ponerme en serio con los temas de jekyll porque se pueden hacer muchas virguerias.</li>
    </ul>
  </li>
</ul>

<p>Asi que me puse a trabajar con el. Poco a poco me iba haciendo con el y entendiendo mucho mejor su funcionamiento hasta ahora, que ya lo he integrado completamente en el blog.</p>

<p>Eso si, le he hecho algunas modificaciones que creo que le hacian falta que son:</p>
<ul>
  <li>En el tema original tienes la posibilidad de compartir <em>si o si</em> el articulo, pero en mi caso, esa opci√≥n no me interesaba asi que puse un flag para que se pueda desactivar esa funcionalidad.
    <ul>
      <li>La he compartido con el creador del tema y le ha parecido interesante. Me ha pedido que haga un <strong>Pull Request</strong> o sino tengo mucha prisa, cuando el tenga tiempo a√±adira dicha modificaci√≥n. Con respecte al <strong>PR</strong> le he dicho, que mejor que lo haga el üòÇ, porque no me siento muy seguro, por no decir que nunca he hecho ninguno, con lo que implica. Miedo a que me cargue algo del codigo y no se realmente como se hace.</li>
    </ul>
  </li>
  <li>Tambien le he a√±adido el tema de las licencias. En mi caso la <strong>Creative Commons</strong> como podeis ver al final de la web.</li>
</ul>

<p>Y asi nos encontramos. Seguramente le hare un par m√°s de modificaciones, pero tengo que meditarlas mejor para ver si son utiles o no.</p>

<p>Ya os ire explicando como va todo.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://github.com/BretFisher/jekyll-serve" target="_blank">Jekyll-serve</a></li>
  <li><a href="https://github.com/sylhare/Type-on-Strap" target="_blank">Type-on-Strap</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Blog" /><category term="Blog" /><summary type="html"><![CDATA[Se que llevo un par de semanas sin escribir ningun articulo, pero he estado un poco liado dandole un poco chapa y pintura a este blog que se traduce en lo que estais viendo ahora.]]></summary></entry><entry><title type="html">Usando Traefik - 2</title><link href="https://vctrsnts.github.io/docker/vps/2024/05/13/usando-traefik-2.html" rel="alternate" type="text/html" title="Usando Traefik - 2" /><published>2024-05-13T00:00:00+00:00</published><updated>2024-05-13T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/vps/2024/05/13/usando-traefik-2</id><content type="html" xml:base="https://vctrsnts.github.io/docker/vps/2024/05/13/usando-traefik-2.html"><![CDATA[<p>De nuevo, con otro articulo de <strong>Traefik</strong>, en este caso, como se instala / activa el plugin <strong>GeoBlock</strong> para asi, tal como indica su nombre, <strong>Traefik</strong> en base al pais de origen de la <strong>IP</strong>, lo bloquea o no.</p>

<p>En este caso, igual que en el anterior articulo, partimos de la base de que tambien me encontre con problemas a la hora de poder usar este plugin, tanto en su instalaci√≥n, como en su configuraci√≥n. Pero como ya tenia la experiencia de instalar y activar toda la secci√≥n  de la redirecci√≥n, esta vez, me resulto un poco m√°s facil, solo un poco, todo porque ya entendia, m√°s o menos como funcionaba <strong>traefik</strong>.</p>

<p>Hay que tener en cuenta, que la informaci√≥n, o el hilo del que tirar lo encontre gracias a nuestro querido Lorenzo (<a href="https://atareao.es" target="_blank">atareao</a>) y en especial de este <a href="https://atareao.es/podcast/exprimiendo-tu-proxy-inverso-traefik" target="_blank">articulo</a>.</p>

<!-- more -->

<p>Para activar este plugin, lo primero es acceder a nuestra web de configuraci√≥n de <strong>traefik</strong> e iremos a la secci√≥n de <strong>plugins</strong> y buscamos el que queremos instalar, que en este caso es <strong>GeoBlock</strong>. Aqui hay que tener una cosa en mente, si buscamos, nos apareceran 2 plugins pero con una peque√±a diferencia. La versi√≥n de cada uno:</p>
<ul>
  <li>GeoBlock v0.2.2</li>
  <li>GeoBlock v0.2.8</li>
</ul>

<p>En nuestro caso, iremos a por la documentaci√≥n de la versi√≥n <strong>v0.2.8</strong>, pero utilizaremos una version anterior para que nuestro sistema sea m√°s estable (en mi caso, he usado la versi√≥n v0.2.5). Lo que si que podemos hacer, es cuando veamos que todo funciona correctamente, es pasar a una versi√≥n superior (v0.2.6 - 7).</p>

<p>Y ahora es cuando viene la parte m√°s importante, como <strong>instalar</strong> este plugin. Para ello, nos tenemos que ir al archivo de configuraci√≥n de <code class="language-plaintext highlighter-rouge">traefik.yml</code>:</p>
<h3 id="traefikyml">traefik.yml</h3>
<p>A√±adimos las lineas que <strong>instalan</strong> y <strong>activan</strong> este plugin:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">experimental</span><span class="pi">:</span>
  <span class="na">plugins</span><span class="pi">:</span>
    <span class="na">geoBlock</span><span class="pi">:</span>
      <span class="na">moduleName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">github.com/PascalMinder/geoblock"</span>
      <span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">v0.2.5"</span>
</code></pre></div></div>
<p>Con esto indicamos lo siguiente:</p>
<ul>
  <li>Queremos que use el plugin que se encuentra en <strong>github.com/PascalMinder</strong>
    <ul>
      <li>Esto es asi, porque tambien tenemos la posibilidad de instalar este plugin desde local.</li>
    </ul>
  </li>
  <li>La versi√≥n que usaremos, que en este caso es la versi√≥n <strong>v0.2.5</strong></li>
</ul>

<p>Aqui lo importante es el nombre que le hemos dado en la configuraci√≥n de <code class="language-plaintext highlighter-rouge">GeoBlock</code>, porque m√°s adelante lo usaremos y si no ponemos el mismo, tendremos problemas.</p>

<p>Una vez, ya tenemos hecho esto, pasamos a la configuraci√≥n del plugin en si, que se hace desde el archivo <code class="language-plaintext highlighter-rouge">dynamic.yml</code>:</p>

<h3 id="dynamicyml">dynamic.yml</h3>

<blockquote>
  <p>üí° Recordar que ya habiamos a√±adido la configuraci√≥n del usuario y password para los servicios que nos interesan, la configuraci√≥n de <strong>GeoBlock</strong> se a√±ade a continuaci√≥n:</p>
</blockquote>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">http</span><span class="pi">:</span>
  <span class="c1"># EL NOMBRE DE LA SECCI√ìN DE CONFIGURACI√ìN DE GEOBLOCK</span>
  <span class="na">myGeoBlock</span><span class="pi">:</span>
    <span class="na">plugin</span><span class="pi">:</span>
      <span class="c1"># EL MISMO NOMBRE QUE TENEMOS EN EL ARCHIVO TRAEFIK.YML</span>
      <span class="na">geoBlock</span><span class="pi">:</span>
        <span class="na">silentStartUp</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">allowLocalRequests</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">logLocalRequests</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">logAllowedRequests</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">logApiRequests</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">api</span><span class="pi">:</span> <span class="s2">"</span><span class="s">https://get.geojs.io/v1/ip/country/{ip}"</span>
        <span class="na">cacheSize</span><span class="pi">:</span> <span class="m">15</span>
        <span class="na">forceMonthlyUpdate</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">allowUnknownCountries</span><span class="pi">:</span> <span class="kc">false</span>
        <span class="na">unknownCountryApiResponse</span><span class="pi">:</span> <span class="s2">"</span><span class="s">nil"</span>
        <span class="na">countries</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">PAISES QUE TIENEN ACCESO A NUESTROS SERVICIOS</span>
</code></pre></div></div>
<p>Esta secci√≥n tiene muchas posibilidades para a√±adir, pero en mi caso, siguiendo las pautas de <strong>Lorenzo</strong> he usado las siguientes:</p>
<ul>
  <li><strong>Countries</strong>: Los paises que tienen acceso a este proxy.</li>
  <li><strong>API</strong>: Con esta opci√≥n, es desde donde a partir de la IP que accede a nuestro proxy, saber de que pais es y bloquear en caso de que no sea de uno de los paises escogidos üòâ</li>
</ul>

<p>Estan son en grandres rasgos las m√°s importantes, las otras opciones podeis buscar para que sirven.</p>

<p>Una vez, que ya tenemos <strong>GeoBlock</strong> configurado, en principio, ya esta todo listo para funcionar. Pero os recomiendo que detengais el docker de <strong>traefik</strong> y lo volvais a iniciar para asegurar de que coge la nueva configuraci√≥n.</p>

<blockquote>
  <p>‚ö†Ô∏è Antes de nada, voy a hacer un inciso porque, para ver si todo el sistema funciona correctamente, tenemos que acceder a los logs de <strong>traefik</strong> para ver que hace. En este caso, tenemos 2 opciones:</p>
  <ul>
    <li>Acceder directamente al contenedor de traefik y monitorizar los archivos de configuraci√≥n <code class="language-plaintext highlighter-rouge">access.log</code>, <code class="language-plaintext highlighter-rouge">traefik.log</code>.</li>
    <li>Usar un peque√±o script que, de nuevo tengo que darle las gracias a <strong>Lorenzo</strong> nos permite visualizar los logs mediante una peque√±a instrucci√≥n y de un contenedor</li>
  </ul>
</blockquote>

<p>El script es cuesti√≥n se llama <code class="language-plaintext highlighter-rouge">dless</code> que es una variante del <code class="language-plaintext highlighter-rouge">less</code> original.</p>
<h3 id="localbindless">./local/bin/dless</h3>
<p>Que contiene lo siguiente:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">command</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$command</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="s2">"</span><span class="nv">$command</span><span class="s2">"</span> <span class="o">==</span> <span class="k">*</span><span class="s2">":"</span><span class="k">*</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
        </span><span class="nv">container</span><span class="o">=</span><span class="k">${</span><span class="nv">command</span><span class="p">%</span>:<span class="p">*</span><span class="k">}</span>
        <span class="nv">filepath</span><span class="o">=</span><span class="k">${</span><span class="nv">command</span><span class="p">##*</span>:<span class="k">}</span>

        docker <span class="nb">exec</span> <span class="nt">-it</span> <span class="s2">"</span><span class="nv">$container</span><span class="s2">"</span> <span class="nb">tail</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$filepath</span><span class="s2">"</span>
    <span class="k">fi</span>
</code></pre></div></div>
<p>En mi caso, lo he configurado para que haga un <strong>tail -f</strong> del archivo en cuesti√≥n, tu puedes poner la instrucci√≥n que m√°s te guste. Yo tengo <strong>tail</strong>, porque asi puedo hacer un seguimiento del archivo en cuesti√≥n.</p>

<p>Para poderlo usar, antes tenemos que modificar nuestro fichero <code class="language-plaintext highlighter-rouge">.bashrc</code> para a√±adir la ubicaci√≥n del script de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>AFEGIM DLESS
<span class="gp">export PATH=~/.local/bin:$</span>PATH
</code></pre></div></div>
<p>Y para usarlo hacemos lo siguiente:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">usuari@debian:~dless traefik:/var/log/traefik/access.log
</span></code></pre></div></div>
<p>Donde:</p>
<ul>
  <li><strong>traefik</strong>: Es el contenedor al que queremos acceder</li>
  <li><strong>/var/log/traefik/access.log</strong>: La ruta y el archivo que queremos controlar.</li>
</ul>

<p>Yo, en mi caso, hice unas cuantas pruebas para ver si funcionaba correctamente. Como tengo una VPN (plugin) en el navegador, lo que hice fue activarla y indicar que a partir de ese momento, salia desde un pais no permitido para ver que pasaba. Y funcionaba correctamente, porque me denegaba el acceso, despu√©s, desconectaba la VPN o indicaba que salia de uno de los <strong>paises permitidos</strong> no tenia ningun problema y podia acceder a los servicios que tengo en este servidor.</p>

<p>Pues ya tenemos un nivel m√°s de protecci√≥n para nuestro servidor.</p>

<p>Ahora solo me falta poder <strong>activar</strong> el plugin de <strong>crowdsec</strong> para traefik, pero eso ya es otro cantar. Es para el niveles avanzados y yo ahora mismo estoy en nivel intermedio, pero buscando la informaci√≥n necesaria para llegar a ese nivel üòâ</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://atareao.es/podcast/exprimiendo-tu-proxy-inverso-traefik" target="_blank">532 - Exprimiendo tu proxy inverso Traefik</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="VPS" /><category term="Docker" /><category term="VPS" /><summary type="html"><![CDATA[De nuevo, con otro articulo de Traefik, en este caso, como se instala / activa el plugin GeoBlock para asi, tal como indica su nombre, Traefik en base al pais de origen de la IP, lo bloquea o no. En este caso, igual que en el anterior articulo, partimos de la base de que tambien me encontre con problemas a la hora de poder usar este plugin, tanto en su instalaci√≥n, como en su configuraci√≥n. Pero como ya tenia la experiencia de instalar y activar toda la secci√≥n de la redirecci√≥n, esta vez, me resulto un poco m√°s facil, solo un poco, todo porque ya entendia, m√°s o menos como funcionaba traefik. Hay que tener en cuenta, que la informaci√≥n, o el hilo del que tirar lo encontre gracias a nuestro querido Lorenzo (atareao) y en especial de este articulo.]]></summary></entry><entry><title type="html">Usando Traefik - 1</title><link href="https://vctrsnts.github.io/docker/vps/2024/05/06/usando-traefik-1.html" rel="alternate" type="text/html" title="Usando Traefik - 1" /><published>2024-05-06T00:00:00+00:00</published><updated>2024-05-06T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/vps/2024/05/06/usando-traefik-1</id><content type="html" xml:base="https://vctrsnts.github.io/docker/vps/2024/05/06/usando-traefik-1.html"><![CDATA[<p>Como os explique en este <a href="/docker/vps/2024/04/19/traefik.html" target="_blank">articulo</a>, aprovechando que tenia nuevo VPS, queria sacarle el maximo partido y despu√©s de haber instalado <strong>traefik</strong> aun tenia m√°s ganas.</p>

<p>Y aqui es donde os aviso, he estado 3 dias intentando hacerlo funcionar correctamente y hasta que al final, me vino una <strong>inspiraci√≥n</strong> y pude conseguir que funcionara correctamente.</p>

<!-- more -->

<p>Lo m√°s importante es que como base, sigo los articulos que ha posteado <a href="https://atareao.es/podcast/exprimiendo-tu-proxy-inverso-traefik" target="_blank">atareao</a> que podeis encontrar en su pagina web y la informaci√≥n que tiene en <a href="https://github.com/atareao/self-hosted/tree/main/searxng" target="_blank">gitHub searxNG</a> que explica con un ejemplo muy claro, aunque hay que remarcar que cuesta de seguirle el ritmo, como usar <strong>traefik</strong> pero ya junto con los contenedores de docker.</p>

<p>En mi caso, os pondre la configuraci√≥n que he usado, que puede seros de mucha ayuda asi como el problema que tuve y que me volvio loco.</p>

<p>Partiendo de la base, que el archivo <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> y los archivos <code class="language-plaintext highlighter-rouge">traefik.yml</code>, <code class="language-plaintext highlighter-rouge">dynamic.yml</code>, <code class="language-plaintext highlighter-rouge">users.txt</code> y <code class="language-plaintext highlighter-rouge">acme.json</code> que estais utilizando son los mismo que puse en el anterior <a href="/docker/vps/2024/04/19/traefik.html" target="_blank">articulo</a> donde hablaba de <strong>traefik</strong>, ahora, lo m√°s normal seria poder sacarle todo el potencial que tiene traefik y para eso, os voy a explicar como lo uso, para el servicio <a href="/docker/vps/2024/04/13/uno-juntarlos-todos.html" target="_blank">rssFunnel</a> que tengo activo.</p>

<p>Todo empieza en la configuraci√≥ del <strong>docker-compose</strong> de dicho servici√≥ y para ello, se tiene que hacer a√±adir las siguientes lineas:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">rssFunnel</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/shouya/rss-funnel:latest</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">rssFunnel</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
  <span class="na">networks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">proxy</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">33333:4080</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/rss-funnel/funnel.yaml:/funnel.yaml</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">RSS_FUNNEL_CONFIG</span><span class="pi">:</span> <span class="s">/funnel.yaml</span>
    <span class="na">RSS_FUNNEL_BIND</span><span class="pi">:</span> <span class="s">0.0.0.0:PORT</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">traefik.enable=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.services.rssFunnel.loadbalancer.server.port=4080</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.entrypoints=web</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.rule=Host(`${PODCAST_SERVER}`)</span>
    <span class="pi">-</span> <span class="s">traefik.http.middlewares.rssFunnel-https-redirect.redirectscheme.scheme=websecure</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.middlewares=rssFunnel-https-redirect</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.entrypoints=websecure</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.rule=Host(`${PODCAST_SERVER}`)</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.tls=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.tls.certresolver=letsencrypt</span>
</code></pre></div></div>
<p>Partimos de la base, de que este servici√≥ lo tenemos configurado para el puerto <strong>33333</strong> que lo redirigira hacia el puerto <strong>4080</strong> por defecto de <strong>rssFunnel</strong>.</p>

<p>Lo que tambien tenemos que tener en cuenta, es que tenemos que configurar este servicio para que use la misma red que <strong>traefik</strong>, que en este caso es <strong>proxy</strong>. Despu√©s de esto vienen las 9 lineas magicas que hace que todo funcione correctamente y que me volvio loco durante 3 dias, y estas lineas son las siguientes:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">labels</span><span class="pi">:</span>
    <span class="c1"># INDICAMOS A TRAEFIK QUE CONTROLE ESTE SERVICIO</span>
    <span class="pi">-</span> <span class="s">traefik.enable=true</span>
    <span class="c1"># AQUI ES DONDE ESTA LA MADRE DEL CORDERO. LO MAS IMPORTANTE DE TODO Y QUE SI NO LO TENEMOS BIEN</span>
    <span class="c1"># NO VA A FUNCIONAR</span>
    <span class="c1"># INDICAMOS A TRAEFIK, QUE TODO LO QUE VENGA A ESTE SERVICIO LO REDIRIGA DIRECTAMENTE AL PUERTO POR DEFECTO 4080</span>
    <span class="c1"># NO AL 33333 QUE TENEMOS CONFIGURADO NOSOTROS.</span>
    <span class="pi">-</span> <span class="s">traefik.http.services.rssFunnel.loadbalancer.server.port=4080</span>
    <span class="c1"># QUE TIPO DE ACCESO TENDRA (WEB - 80, WEBSECURE - 443)</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.entrypoints=web</span>
    <span class="c1"># NOMBRE DEL DOMINIO QUE LO TENEMOS DEFINIDO EN UN FICHERO .ENV</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.rule=Host(`${PODCAST_SERVER}`)</span>
    <span class="c1"># QUE ACCI√ìN TIENE QUE REALIZAR. EN ESTE CASO, TIENE QUE REDIRIGIR A WEBSECURE</span>
    <span class="pi">-</span> <span class="s">traefik.http.middlewares.rssFunnel-https-redirect.redirectscheme.scheme=websecure</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel.middlewares=rssFunnel-https-redirect</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.entrypoints=websecure</span>
    <span class="c1"># NOMBRE DE DOMINIO EN EL CASO DE WEBSECURE</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.rule=Host(`${PODCAST_SERVER}`)</span>
    <span class="c1"># ACTIVAMOS EL CERTIFCADO SSL</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.tls=true</span>
    <span class="c1"># CREAMOS EL CERTIFICADO SSL</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.rssFunnel-secure.tls.certresolver=letsencrypt</span>
</code></pre></div></div>
<p>En el fichero <code class="language-plaintext highlighter-rouge">.env</code>, en mi caso, lo tengo de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>ADRECES PER A SERVIDOR TRAEFIK
<span class="go">PODCAST_SERVER=dominio.duckdns.org
</span></code></pre></div></div>
<p>Y con esto, solamente tendremos que hacer un:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker compose up <span class="nt">-d</span> traefik rssfunnel
</code></pre></div></div>
<p>Para actualizar / reconstruir el servicio de <strong>traefik</strong> y de <strong>rssfunnel</strong> si es que ya lo teniamos instalado.</p>

<p>Proximamente ire subiendo m√°s articulos con mis avances sobre <strong>traefik</strong>.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://atareao.es/podcast/exprimiendo-tu-proxy-inverso-traefik" target="_blank">532 - Exprimiendo tu proxy inverso Traefik</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="VPS" /><category term="Docker" /><category term="VPS" /><summary type="html"><![CDATA[Como os explique en este articulo, aprovechando que tenia nuevo VPS, queria sacarle el maximo partido y despu√©s de haber instalado traefik aun tenia m√°s ganas. Y aqui es donde os aviso, he estado 3 dias intentando hacerlo funcionar correctamente y hasta que al final, me vino una inspiraci√≥n y pude conseguir que funcionara correctamente.]]></summary></entry><entry><title type="html">Instalaci√≥n de docker. Annexo</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/docker/2024/04/20/instalacion-docker-anexo.html" rel="alternate" type="text/html" title="Instalaci√≥n de docker. Annexo" /><published>2024-04-20T00:00:00+00:00</published><updated>2024-04-20T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/docker/2024/04/20/instalacion-docker-anexo</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/docker/2024/04/20/instalacion-docker-anexo.html"><![CDATA[<p>Ya habia escrito un <a href="/docker/raspberry%20pi/2020/03/08/rpi-usando-docker.html" target="_blank">articulo</a> sobre la instalaci√≥n de docker, pero en este caso lo explicaba para hacerlo en una Raspberry, pero en este caso, lo voy a explicar para hacer la instalaci√≥n en un PC normal y corriente. Pero en este caso en <strong>Debian GNU/Linux</strong> y asi, lo tengo m√°s a mano y no tengo que volverme loco buscando esta informaci√≥n en internet, porque si sigo el de la Raspberry, al final no funciona correctamente.</p>

<!-- more -->

<p>Antes nada tenemos que validar si tenemos las aplicaciones necesarias para poder, al menos, instalar <strong>docker</strong>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="nb">sudo </span>apt-get update
<span class="gp">usuari@debian:~$</span><span class="nb">sudo </span>apt-get <span class="nb">install </span>ca-certificates curl
<span class="gp">usuari@debian:~$</span><span class="nb">sudo install</span> <span class="nt">-m</span> 0755 <span class="nt">-d</span> /etc/apt/keyrings
<span class="gp">usuari@debian:~$</span><span class="nb">sudo </span>curl <span class="nt">-fsSL</span> https://download.docker.com/linux/debian/gpg <span class="nt">-o</span> /etc/apt/keyrings/docker.asc
<span class="gp">usuari@debian:~$</span><span class="nb">sudo chmod </span>a+r /etc/apt/keyrings/docker.asc
<span class="go">
</span><span class="gp">#</span><span class="w"> </span>AFEGIM EL REPOSITORI A LES FONTS
<span class="gp">usuari@debian:~$</span><span class="nb">echo</span> <span class="se">\</span>
<span class="gp">  "deb [arch=$</span><span class="o">(</span>dpkg <span class="nt">--print-architecture</span><span class="o">)</span> signed-by<span class="o">=</span>/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian <span class="se">\</span>
<span class="gp">  $</span><span class="o">(</span><span class="nb">.</span> /etc/os-release <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"</span><span class="nv">$VERSION_CODENAME</span><span class="s2">"</span><span class="o">)</span> stable<span class="s2">" | </span><span class="se">\</span><span class="s2">
</span><span class="gp">  sudo tee /etc/apt/sources.list.d/docker.list &gt;</span><span class="w"> </span><span class="s2">/dev/null
</span><span class="gp">#</span><span class="w"> </span><span class="s2">ACTUALITZEM EL SISTEMA
</span><span class="gp">usuari@debian:~$</span><span class="s2">sudo apt-get update
</span></code></pre></div></div>
<p>Procedemos, ahora si, a la instalaci√≥n de <strong>docker</strong>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="nb">sudo </span>apt-get <span class="nb">install </span>docker-ce docker-ce-cli containerd.io docker-compose-plugin
</code></pre></div></div>
<p>Ahora solamente, yo siempre lo hago, seguramente no se tendria que hacer pero, es a√±adir mi usuario al grupo de docker:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>
</code></pre></div></div>
<p>Y con esto, ya tenemos instalado <strong>docker</strong> en nuestro sistema.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://docs.docker.com/engine/install/debian" target="_blank">Install docker on Debian</a></li>
  <li><a href="/docker/raspberry%20pi/2020/03/08/rpi-usando-docker.html" target="_blank">Raspberry Pi. Pasos para instalar Docker en Raspbian</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Docker" /><category term="Debian GNU/Linux" /><category term="Docker" /><summary type="html"><![CDATA[Ya habia escrito un articulo sobre la instalaci√≥n de docker, pero en este caso lo explicaba para hacerlo en una Raspberry, pero en este caso, lo voy a explicar para hacer la instalaci√≥n en un PC normal y corriente. Pero en este caso en Debian GNU/Linux y asi, lo tengo m√°s a mano y no tengo que volverme loco buscando esta informaci√≥n en internet, porque si sigo el de la Raspberry, al final no funciona correctamente.]]></summary></entry><entry><title type="html">Instalando y configurando Traefik</title><link href="https://vctrsnts.github.io/docker/vps/2024/04/19/traefik.html" rel="alternate" type="text/html" title="Instalando y configurando Traefik" /><published>2024-04-19T00:00:00+00:00</published><updated>2024-04-19T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/vps/2024/04/19/traefik</id><content type="html" xml:base="https://vctrsnts.github.io/docker/vps/2024/04/19/traefik.html"><![CDATA[<p>Aprovenchando que tengo el <a href="/docker/vps/2024/04/17/nuevo-VPS.html" target="_blank">nuevo VPS</a>queria ponerle <a href="/docker/vps/2024/04/19/traefik.html" target="_blank">traefik</a> y que adem√°s se puede hacer a traves de docker y asi poder aprovechar todas las posibilidades que nos da. Al final (cuando estoy escribiendo esto) lo tengo todo en funcionamiento, pero me ha costado horrores y aqui os explico mi odisea.</p>

<!-- more -->

<p>Lo que primero que hice, fue empaparme muy bien de los videos de <a href="https://atareao.es" target="_blank">atareao</a> donde explica el proceso que uso el para su instalaci√≥n. Os aconsejo que empeceis con estos 2:</p>
<ul>
  <li><a href="https://atareao.es/podcast/exprimiendo-tu-proxy-inverso-traefik" target="_blank">Video 1</a></li>
  <li><a href="https://atareao.es/tutorial/self-hosted/mil-servicios-con-traefik" target="_blank">Video 2</a></li>
</ul>

<p>Tiene unos cuantos m√°s, pero lo mejor es ir directamente a la fuente, yo he puesto los que m√°s han hecho servicio.</p>

<p>Lo primero de todo es crear el fichero de <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> que en mi caso, es el siguiente:</p>

<h3 id="docker-composeyml">docker-compose.yml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">traefik</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">traefik:v2.11.2</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">traefik</span>
  <span class="na">init</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
  <span class="na">security_opt</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">no-new-privileges:true</span>
  <span class="c1"># ES LA RED QUE FARA SERVI TRAEFIK I QUE UTILIZAREM PER A LA RESTA DE SERVEIS</span>
  <span class="c1"># QUE VULGUEM CONECTAR AMB TRAEFIK</span>
  <span class="na">networks</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">proxy</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">80:80</span>
    <span class="pi">-</span> <span class="s">443:443</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">TZ=Europe/Madrid</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/var/run/docker.sock:/var/run/docker.sock:ro</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/traefik/traefik.yml:/traefik.yml:ro</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/traefik/dynamic.yml:/dynamic.yml:ro</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/traefik/users.txt:/users.txt:ro</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/traefik/acme.json:/acme.json</span>
    <span class="pi">-</span> <span class="s">logs:/var/log/traefik</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">traefik.enable=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.services.traefik.loadbalancer.server.port=80</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.traefik-secure.entrypoints=websecure</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.traefik-secure.rule=Host(`${TRAEFIK_SERVER}`)</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.traefik-secure.middlewares=myauth@file</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.traefik-secure.service=api@internal</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.traefik-secure.tls=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.traefik-secure.tls.certresolver=letsencrypt</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">logs</span><span class="pi">:</span> <span class="pi">{}</span>
<span class="c1"># XARXA PER A TRAEFIK</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">internal</span><span class="pi">:</span> <span class="pi">{}</span>
  <span class="na">proxy</span><span class="pi">:</span>
    <span class="na">external</span><span class="pi">:</span> <span class="kc">true</span>
</code></pre></div></div>
<blockquote>
  <p>‚ö†Ô∏è Antes de lanzarnos a la piscina con la instalaci√≥n, tenemos que tener en cuenta 2 cosas, en mi caso estoy usando un fichero <code class="language-plaintext highlighter-rouge">.env</code> donde tengo las variables, los passwords y las URL que utilizo:</p>
  <ul>
    <li><code class="language-plaintext highlighter-rouge">${HOME}</code> que es el directorio <em>HOME</em> de mi usuario</li>
    <li><code class="language-plaintext highlighter-rouge">${TRAEFIK_SERVER}</code> que es la <em>URL</em> de acceso a este servicio.</li>
  </ul>
</blockquote>

<p>Una vez tenemos el fichero, lo siguiente y antes de ponerlo en marcha es mejor crear los 4 ficheros que necesita para su correcto funcionamiento que son los siguientes:</p>

<h3 id="traefikyml">traefik.yml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">api</span><span class="pi">:</span>
  <span class="na">dashboard</span><span class="pi">:</span> <span class="kc">true</span>

<span class="na">entryPoints</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">address</span><span class="pi">:</span> <span class="s2">"</span><span class="s">:80"</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">redirections</span><span class="pi">:</span>
        <span class="na">entryPoint</span><span class="pi">:</span>
          <span class="na">to</span><span class="pi">:</span> <span class="s">websecure</span>
          <span class="na">scheme</span><span class="pi">:</span> <span class="s">https</span>
          <span class="na">permanent</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">websecure</span><span class="pi">:</span>
    <span class="na">address</span><span class="pi">:</span> <span class="s2">"</span><span class="s">:443"</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="na">tls</span><span class="pi">:</span>
        <span class="na">certresolver</span><span class="pi">:</span> <span class="s">letsencrypt</span>

<span class="na">serversTransport</span><span class="pi">:</span>
  <span class="na">maxIdleConnsPerHost</span><span class="pi">:</span> <span class="m">1</span>

<span class="na">providers</span><span class="pi">:</span>
  <span class="na">docker</span><span class="pi">:</span>
    <span class="na">endpoint</span><span class="pi">:</span> <span class="s2">"</span><span class="s">unix:///var/run/docker.sock"</span>
    <span class="na">exposedByDefault</span><span class="pi">:</span> <span class="kc">false</span>
    <span class="na">watch</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">network</span><span class="pi">:</span> <span class="s">proxy</span>
  <span class="na">file</span><span class="pi">:</span>
    <span class="na">filename</span><span class="pi">:</span> <span class="s">/dynamic.yml</span>

<span class="na">log</span><span class="pi">:</span>
  <span class="na">level</span><span class="pi">:</span> <span class="s">INFO</span>
  <span class="na">filePath</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/var/log/traefik/traefik.log"</span>
<span class="na">accessLog</span><span class="pi">:</span>
  <span class="na">filePath</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/var/log/traefik/access.log"</span>
  <span class="na">bufferingSize</span><span class="pi">:</span> <span class="m">100</span>
  <span class="na">fields</span><span class="pi">:</span>
    <span class="na">defaultMode</span><span class="pi">:</span> <span class="s">keep</span>
    <span class="na">names</span><span class="pi">:</span>
      <span class="na">ClientUsername</span><span class="pi">:</span> <span class="s">keep</span>
    <span class="na">headers</span><span class="pi">:</span>
      <span class="na">defaultMode</span><span class="pi">:</span> <span class="s">keep</span>
      <span class="na">names</span><span class="pi">:</span>
        <span class="na">Content-Type</span><span class="pi">:</span> <span class="s">keep</span>
        <span class="na">X-Forwarded-For</span><span class="pi">:</span> <span class="s">keep</span>
  <span class="na">filters</span><span class="pi">:</span>
    <span class="na">statusCodes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">300-302"</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">400-409"</span>
    <span class="na">retryAttempts</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">minDuration</span><span class="pi">:</span> <span class="s2">"</span><span class="s">10ms"</span>
    
<span class="na">certificatesResolvers</span><span class="pi">:</span>
  <span class="na">letsencrypt</span><span class="pi">:</span>
    <span class="na">acme</span><span class="pi">:</span>
      <span class="na">email</span><span class="pi">:</span> <span class="s">elteu@email.com</span>
      <span class="na">storage</span><span class="pi">:</span> <span class="s">acme.json</span>
      <span class="na">httpChallenge</span><span class="pi">:</span>
        <span class="na">entryPoint</span><span class="pi">:</span> <span class="s">web</span>
<span class="c1"># ESTIC FEN PROVES PER VEURE COM FUNCIONA</span>
<span class="c1"># PERO DE MOMENT NO TINC SORT</span>
<span class="c1">#experimental:</span>
<span class="c1">#  plugins:</span>
<span class="c1">#    GeoBlock:</span>
<span class="c1">#      moduleName: "github.com/PascalMinder/geoblock"</span>
<span class="c1">#      version: "v0.2.5"</span>
</code></pre></div></div>

<h3 id="dynamicyml">dynamic.yml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># FITXER ON ESTAN, EN AQUEST CAS LA CONFIGURACI√ì DE LA SEGURETAT PER ACCEDIR ALS LLOCS</span>
<span class="na">http</span><span class="pi">:</span>
  <span class="na">middlewares</span><span class="pi">:</span>
    <span class="na">myauth</span><span class="pi">:</span>
      <span class="na">basicAuth</span><span class="pi">:</span>
        <span class="na">usersfile</span><span class="pi">:</span> <span class="s">/users.txt</span>
</code></pre></div></div>
<p>Ahora en el caso de querer securizar (pedir usuario y password) para acceder a los servicios que tenemos detras de <em>traefik</em>, se puede hacer a traves del archivo:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="nb">ls</span> <span class="nt">-l</span> users.txt
</code></pre></div></div>
<p>Y para a√±adir los usuarios que tienen acceso, se realiza con la siguiente orden:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="nb">sudo </span>apt <span class="nb">install </span>apache2-utils
<span class="gp">usuari@debina:~$</span>htpasswd <span class="nt">-nb</span> usuario contrase√±a <span class="o">&gt;&gt;</span> users.txt
</code></pre></div></div>
<p>Ahora el archivo que contendra los certificados:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="nb">ls</span> <span class="nt">-l</span> acme.json
</code></pre></div></div>
<p>Pero antes de nada, tenemos que crear la <code class="language-plaintext highlighter-rouge">red proxy</code>, porque sino, luego a la hora de hacer el <em>docker compose</em> no dara error. Esto se hace de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker network create proxy
</code></pre></div></div>
<p>Una vez que ya tenemos todo preparado solamente nos falta decir las palabras magicas</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker compose up <span class="nt">-d</span> traefik
</code></pre></div></div>
<p>Como podeis observar, estoy haciendo uso de <code class="language-plaintext highlighter-rouge">docker compose</code> y no de <code class="language-plaintext highlighter-rouge">docker-compose</code>. Esto se debe, creo, que con las nuevas versiones, se ha unificado, lo que antes era un paquete solo <code class="language-plaintext highlighter-rouge">docker-compose</code> y lo han convertido en una opci√≥n m√°s de <em>docker</em>.</p>

<p>Y si todo va bien, ya lo tenemos en funcionamiento y adem√°s, con el certificado SSL para conectarnos al <strong>dashboard</strong> y si hemos activado la seguridad de acceso a traves de usuarios, antes del acceso, nos pedira el usuario y password.</p>

<p>Con esto, ya tenemos la instalaci√≥n de traefik en marcha. Ahora viene lo m√°s dificil, que es configurar el resto de servicios para que hagan uso de <strong>traefik</strong> y poder usarlo.</p>

<blockquote>
  <p>‚ö†Ô∏è Aqui tengo que informar que el fichero <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> de <em>traefik</em> ha sufrido algunas modificaciones como consecuencia de lo que podeis leer en este <a href="/docker/vps/2024/06/06/usando-traefik-3.html">articulo</a>, quedando de la siguiente manera:</p>
  <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">labels</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">traefik.enable=true</span>
    <span class="pi">-</span> <span class="s">traefik.http.services.traefik.loadbalancer.server.port=80</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.traefik-secure.entrypoints=websecure</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.traefik-secure.rule=Host(`${TRAEFIK_SERVER}`)</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.traefik-secure.middlewares=myauth@file</span>
    <span class="pi">-</span> <span class="s">traefik.http.routers.traefik-secure.service=api@internal</span>
<span class="c1">#    - traefik.http.routers.traefik-secure.tls=true</span>
<span class="c1">#    - traefik.http.routers.traefik-secure.tls.certresolver=letsencrypt</span>
</code></pre></div>  </div>
</blockquote>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://atareao.es/podcast/exprimiendo-tu-proxy-inverso-traefik" target="_blank">532 - Exprimiendo tu proxy inverso Traefik</a></li>
  <li><a href="https://atareao.es/tutorial/self-hosted/mil-servicios-con-traefik" target="_blank">Mil servicios con Traefik</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="VPS" /><category term="Docker" /><category term="VPS" /><summary type="html"><![CDATA[Aprovenchando que tengo el nuevo VPSqueria ponerle traefik y que adem√°s se puede hacer a traves de docker y asi poder aprovechar todas las posibilidades que nos da. Al final (cuando estoy escribiendo esto) lo tengo todo en funcionamiento, pero me ha costado horrores y aqui os explico mi odisea.]]></summary></entry><entry><title type="html">Hemos encontrado la soluci√≥n al desastre el siglo??</title><link href="https://vctrsnts.github.io/docker/vps/2024/04/17/nuevo-VPS.html" rel="alternate" type="text/html" title="Hemos encontrado la soluci√≥n al desastre el siglo??" /><published>2024-04-17T00:00:00+00:00</published><updated>2024-04-17T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/vps/2024/04/17/nuevo-VPS</id><content type="html" xml:base="https://vctrsnts.github.io/docker/vps/2024/04/17/nuevo-VPS.html"><![CDATA[<p>Tal como escribi en este <a href="/vps/2024/04/10/desastre-siglo.html" target="_blank">articulo</a> donde explicaba que, seguramente por error mio, al detener la instancia, esta se perdio y luego fue imposible remontarla, porque no <strong>habia recursos disponibles</strong>.</p>

<!-- more -->

<p>Entonces, recordando que tenia una instancia en Google Cloud, la volvi a activar y hasta hace un par de dias era lo que usaba. Pero claro, con todos los servicions que le habia puesto:</p>
<ul>
  <li><a href="/docker/vps/2024/01/10/searxng-uno-todo.html" target="_blank">Searxng</a></li>
  <li><a href="/docker/raspberry%20pi%20os/2021/04/08/rpi-caddy-proxy-manager.html" target="_blank">duckdns y Caddy</a></li>
  <li><a href="/docker/vps/2024/04/13/uno-juntarlos-todos.html" target="_blank">rss-funnel</a></li>
  <li><a href="{}" target="_blank">Sock5</a></li>
  <li><a href="{}" target="_blank">Glances</a></li>
</ul>

<p>La maquina de Google se me quedaba peque√±a, sobre todo en memoria, quedaban libres unos 150Mb, se que muchos direis, que eso es una barbaridad, pero me gusta ir sobre-seguro y que el dia de ma√±ana cuando necesite un poco m√°s no tenga problemas. Si teneis razon, es para uso personal, pero ‚Ä¶ y m√°s cuando habia pensado traspasar una secci√≥n del contendor de <a href="/docker/raspberry%20pi%20os/2021/05/30/flexget-podcast.html" target="_blank">flexget</a> (la secci√≥n que se encarga de los podcast), que tengo ahora mismo en mi servidor personal a Google. Ante esto, me veia en la necesidad de disponer de un VPS un poco m√°s completo que el de Google.</p>

<p>Y gracias al articulo que escribi explicando que me habia sucedido con la instancia de Oracle, se puso en contacto conmigo, <a href="https://atareao.es" target="_blank">atareao</a> para aconsejarme (se necesita mucha m√°s gente como el), que el tenia un par de VPS en <a href="https://www.contabo.com" target="_blank">contabo</a> y que a parte de ser economico, nunca habia tenido ningun problema, asi que me puse a buscar informaci√≥n sobre ese VPS.</p>

<p>Lo que encontre, al principio me asusto un poco, porque, eso si, habia mucha gente que decia que estaba muy contenta con ellos y muy economicos, pero que cuidado si tienes algun problema porque tardaran mucho en solucionartelo, si es que lo hacen.</p>

<p>Aqui es donde pense para mi mismo, como cualquier otra empresa, cuando todo va bien, no tienes ninguna queja, pero como tengas un problema, te las veras y te las desearas para que te lo solucionen, sino, que se lo pregunten a las personas que tienen cualquier empresa de telecomunicaci√≥n si estan contentos con ellos. Pasara lo mismo, mucha gente diciendo que estan supercontentos, y otros estaran echando pestes sobre esas empresas, porque cada 2x3 tienen problemas.</p>

<p>Asi que me puse de nuevo en contacto con <strong>atareao</strong>, gracias a mastodon, para comentar ese tema y el me comento, que nunca habia tenido ningun problema y que estaba muy contento con ellos, y que adem√°s, habia tenido un problema y se lo habian solucionado inmediantamente.</p>

<p>Pues nada, me lance a la piscina y contrate con ellos el siguiente VPS:</p>
<ul>
  <li>4 vCPU Cores</li>
  <li>6 GB RAM</li>
  <li>100 GB NVMe or 400 GB SSD
    <ul>
      <li>En mi caso seleccione los 400Gb SSD, porque prefiero tener 400Gb que 100Gb. Si a lo mejor con los 100Gb ire m√°s deprisa, pero cuanto m√°s.</li>
    </ul>
  </li>
  <li>1 Snapshot
    <ul>
      <li>Aun tengo que investigar como sacarle provecho</li>
    </ul>
  </li>
  <li>32 TB Traffic
    <ul>
      <li>M√°s que de sobras para lo que lo utilizo yo</li>
    </ul>
  </li>
</ul>

<p>Como eran unos requisitos que estaban muy bien, pues nada, me di de alta y ya tengo un nuevo VPS para substituir a mis antiguos VPS (Oracle y Google).</p>

<p>De momento, estoy con todo el tema de la configuraci√≥n de la maquina, <a href="/raspberry%20pi/ssh/2016/04/04/rpi-acceso-traves-ssh.html" target="_blank">acceso SSH</a>, firewall, <a href="/raspberry%20pi%20os/seguridad/2020/11/08/rpi-usando-fail2ban.html" target="_blank">fail2ban</a>, etc‚Ä¶</p>

<p>Y despu√©s lo primero es realizar la instalaci√≥n (a traves de mi querido docker) de traefik para poder securizar aun m√°s la maquina.</p>

<p>Espero conseguirlo gracias a los videos de <a href="https://atareao.es" target="_blank">atareo</a>, los que m√°s me han ayudado, pero podeis encontrar muchos m√°s si vais a su pagina web, que cuando habla de traefik, los ojos le brillan :)</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://atareao.es/podcast/exprimiendo-tu-proxy-inverso-traefik" target="_blank">Exprimiendo Traefink</a></li>
  <li><a href="https://atareao.es/tutorial/self-hosted/mil-servicios-con-traefik" target="_blank">Mil servicios con Traefik</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="VPS" /><category term="Docker" /><category term="VPS" /><summary type="html"><![CDATA[Tal como escribi en este articulo donde explicaba que, seguramente por error mio, al detener la instancia, esta se perdio y luego fue imposible remontarla, porque no habia recursos disponibles.]]></summary></entry><entry><title type="html">RSS-Funnel. Y uno para controlarlos a todos</title><link href="https://vctrsnts.github.io/docker/vps/2024/04/13/uno-juntarlos-todos.html" rel="alternate" type="text/html" title="RSS-Funnel. Y uno para controlarlos a todos" /><published>2024-04-13T00:00:00+00:00</published><updated>2024-04-13T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/vps/2024/04/13/uno-juntarlos-todos</id><content type="html" xml:base="https://vctrsnts.github.io/docker/vps/2024/04/13/uno-juntarlos-todos.html"><![CDATA[<p>No se si lo habreis notado vosotros, pero escuchar podcast sobre tecnologia, informatica y dockers puede ser perjudicial para la salud y por extensi√≥n para vuestros servidores, o es solo una cosa que me pasa a mi solo?</p>

<p>Si os preguntareis a que viene esta afirmaci√≥n, podeis seguir leyendo y todo quedara aclarado.</p>

<!-- more -->

<p>Uno de mis podcast favoritos, es el de <a href="https://ugeek.github.io/list.html" target="_blank">uGeek</a>, si leeis mis articulos, os dareis cuenta, porque muchas de las ideas y modificaciones que hago en mi servidor salen de escuchar sus podcast. Adem√°s, da a conocer smuchas aplicaciones que seguramente para el resto de los mortales son desconocidas, pero que cuando las conoces, pues no estan tan mal y te pueden servir de ayuda como ha sido con la que explicaba √©l en este <a href="https://ugeek.github.io/post/2024-03-06-rss-funnel-gestionando-y-optimizando-mis-feeds.html">podcast</a>.</p>

<p>Dicha aplicacion es <a href="https://github.com/shouya/rss-funnel" target="_blank">rss-funnel</a>, que se la puede definir como un concentrador de podcas y asi tener todos los feeds en uno solo y que puedes, primero tener en tu propio servidor y segundo, lo puedes controlar tu.</p>

<p>Si solo escuchas un solo podcast, pues no te ayudara mucho, pero si sigues unos 10, como es mi caso, <em>pero si eso no es nada</em>, para mi ya son muchos üòâ pues no viene nada mal la aplicaci√≥n que nos aconseja <em>uGeek</em>, y lo mejor de todo, es que puedes disponer de ella en docker. Que m√°s se puede pedir.</p>

<p>Asi que me lance a por su instalacion en el VPS que tenia (Google Cloud). La instalaci√≥n es muy facil, como todo en docker, aunque la configuraci√≥n es un poco rebuscada, pero nada del otro mundo:</p>

<h3 id="docker-composeyml">docker-compose.yml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">rssFunnel</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/shouya/rss-funnel:latest</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">rssFunnel</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">4080:4080</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">${HOME}/config/rss-funnel/funnel.yaml:/funnel.yaml</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">RSS_FUNNEL_CONFIG</span><span class="pi">:</span> <span class="s">/funnel.yaml</span>
    <span class="na">RSS_FUNNEL_BIND</span><span class="pi">:</span> <span class="s">0.0.0.0:4080</span>
</code></pre></div></div>
<p>En mi caso, he cambiado el nombre del <em>servicio</em> y el nombre del contenedor, esto es porque lo voy a utilizar con <em>traefik</em> y asi es m√°s facil a la hora de a√±adir los labels que afectan a <em>traefik</em>.</p>

<p>Una vez tienes el <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>, solamente hacen falta las palabras magicas:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span>docker compose up <span class="nt">-d</span> rssFunnel <span class="o">&amp;&amp;</span> docker logs <span class="nt">-f</span> rssFunnel
</code></pre></div></div>

<p>La segunda instrucci√≥n siempre la pongo, porque asi, puedo ver si el docker me da algun error. Que normalmente siempre me pasa, porque como nunca creo los ficheros que el contenedor necesita, pues. En este caso, el fichero que me faltaba era el <code class="language-plaintext highlighter-rouge">funnel.yaml</code> con toda la configuraci√≥n de los podcast a seguir.</p>

<p>En mi caso, es la siguiente (que te puede servir de base a ti):</p>

<h3 id="funnelyaml">funnel.yaml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">endpoints</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/rss_feed.xml</span>
    <span class="na">source</span><span class="pi">:</span>
      <span class="na">format</span><span class="pi">:</span> <span class="s">rss</span>
      <span class="na">title</span><span class="pi">:</span> <span class="s">Mi Feed de Podcasts que sigo.</span>
    <span class="na">filters</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">merge</span><span class="pi">:</span>
          <span class="na">source</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">https://anchor.fm/s/5a5b39c/podcast/rss</span>
            <span class="pi">-</span> <span class="s">https://anchor.fm/s/81022ad4/podcast/rss</span>
            <span class="pi">-</span> <span class="s">https://anchor.fm/s/1218850/podcast/rss</span>
            <span class="pi">-</span> <span class="s">https://feeds.redcircle.com/610e9ea8-edf0-407f-9e6c-72375a0e17db</span>
            <span class="pi">-</span> <span class="s">https://anchor.fm/s/115eb3dc/podcast/rss</span>
            <span class="pi">-</span> <span class="s">http://feeds.feedburner.com/papafriki</span>
            <span class="c1"># se que ya no existe, pero tiene algunos podcast que son geniales</span>
            <span class="pi">-</span> <span class="s">https://podcastlinux.com/feed</span>
            <span class="pi">-</span> <span class="s">https://anchor.fm/s/baa8920/podcast/rss</span>
            <span class="pi">-</span> <span class="s">https://ugeek.github.io/podcast.xml</span>
      <span class="c1"># aqui indico los campos que no quiero que se carguen en el RSS para asi aligerar el peso del XML</span>
      <span class="pi">-</span> <span class="na">js</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">function modify_post(feed, post) {</span>
            <span class="s">post.description = null;</span>
            <span class="s">post.content = null;</span>
            <span class="s">post.author = null;</span>
            <span class="s">post.categories = [];</span>
            <span class="s">post.comments = null;</span>
            <span class="s">post.link = null;</span>
            <span class="s">post.guid = null;</span>
            <span class="s">post.source = null;</span>
            <span class="s">post.extensions = {};</span>
            <span class="s">post.itunes_ext = null;</span>
            <span class="s">post.namespaces = {};</span>
            <span class="s">post.dublin_core_ext = null;</span>

            <span class="s">return  post;</span>
          <span class="s">}</span>
      <span class="c1"># lo que intento aqui, es que como maximo me cargue 100 episodios de cada podcast, pero que no funciona</span>
      <span class="pi">-</span> <span class="na">modify_feed</span><span class="pi">:</span> <span class="s">feed.items = feed.items.slice(0, 100);</span>
</code></pre></div></div>
<p>En mi caso, a√±adi una opci√≥n para limitar los podcast que <em>rss-funnel</em> iba a a√±adir en el <em>feed</em>. Queria que fueran solamente 100, porque como a√±ada los 550 que tiene atareao, el <em>feed</em> ocuparia 10Mb.</p>

<p>Habia a√±adido, segun la documentaci√≥n era la que se tiene que usar <code class="language-plaintext highlighter-rouge">modify_feed: feed.items = feed.idtems.slice(0, 100);</code> pero como podia comprobrar, no funcionaba correctamente. Asi que, siguiendo el consejo de <em>uGeek</em> fui a preguntar directamente a la fuente para saber, como se tenia que hacer, me respondio y me a√±adio una modificaci√≥n, que le agradezco mucho, la modificaci√≥n para el fichero <code class="language-plaintext highlighter-rouge">funnel.yaml</code> adem√°s de otras modificaciones:</p>

<h3 id="funnelyaml-modificado">funnel.yaml (modificado)</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">endpoints</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">path</span><span class="pi">:</span> <span class="s">/rss_feed.xml</span>
    <span class="na">source</span><span class="pi">:</span>
      <span class="na">format</span><span class="pi">:</span> <span class="s">rss</span>
      <span class="na">title</span><span class="pi">:</span> <span class="s">Mi Feed de Podcasts que sigo.</span>
    <span class="na">filters</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">merge</span><span class="pi">:</span>
          <span class="na">source</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">https://anchor.fm/s/5a5b39c/podcast/rss</span>
            <span class="pi">-</span> <span class="s">https://anchor.fm/s/81022ad4/podcast/rss</span>
            <span class="pi">-</span> <span class="s">https://anchor.fm/s/1218850/podcast/rss</span>
            <span class="pi">-</span> <span class="s">https://feeds.redcircle.com/610e9ea8-edf0-407f-9e6c-72375a0e17db</span>
            <span class="pi">-</span> <span class="s">https://anchor.fm/s/115eb3dc/podcast/rss</span>
            <span class="pi">-</span> <span class="s">http://feeds.feedburner.com/papafriki</span>
            <span class="pi">-</span> <span class="s">https://podcastlinux.com/feed</span>
            <span class="pi">-</span> <span class="s">https://anchor.fm/s/baa8920/podcast/rss</span>
            <span class="pi">-</span> <span class="s">https://ugeek.github.io/podcast.xml</span>
          <span class="c1"># MODIFICACI√ì PER A LIMITAR A 100 EPISODIS A CADA PODCAST</span>
          <span class="na">filters</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">modify_feed</span><span class="pi">:</span> <span class="s">feed.items = feed.items.slice(0, 100);</span>
      <span class="c1"># MODIFICACI√ì PER ELIMINA INFORMACIO NO NECESSARIA A VISUALITZAR AL FEED</span>
      <span class="c1"># AMB AIXO ACONSEGUIM UN FEED AMB POC PES</span>
      <span class="c1"># QUE SI FAS SERVIR DES DE UN MOVIL, SEMPRE VA BE</span>
      <span class="pi">-</span> <span class="na">modify_post</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">post.description = null;</span>
          <span class="s">post.content = null;</span>
          <span class="s">post.author = null;</span>
          <span class="s">post.categories = [];</span>
          <span class="s">post.comments = null;</span>
          <span class="s">post.link = null;</span>
          <span class="s">post.guid = null;</span>
          <span class="s">post.source = null;</span>
          <span class="s">post.extensions = {};</span>
          <span class="s">post.itunes_ext = null;</span>
          <span class="s">post.namespaces = {};</span>
          <span class="s">post.dublin_core_ext = null;</span>
</code></pre></div></div>

<p>Y con esta peque√±a modificaci√≥n, ya tengo el servicio en funcionamiento.</p>

<p>Lo unico que me quedaba por hacer era decidir como acceder al feed. Si a traves de un proxy <strong>Cadddy</strong> o a traves de una VPN <strong>WireGuard</strong>. Al final me decidi por el proxy a traves de <em>Caddy</em> y de momento me funciona perfectamente. Y adem√°s, el fichero <code class="language-plaintext highlighter-rouge">XML</code> que me descarga es de menos de 1Mb. No se puede pedir nada m√°s.</p>

<p>Estoy contento con este servicio, porque es inmejorable. Y como bien dice el titulo, <strong>y uno para controlarlos a todos</strong>, porque en un unico <em>feed</em> tengo todos los podcast que sigo actualmente. Y en el caso de que quiera a√±adir uno m√°s, solo lo tengo que a√±adir en el fichero <em>YAML</em> y a funcionar.</p>

<p>Aun le falta alguna mejoras, pero creo que creador esta con ello y eso si, si tienes cualquier duda te ayuda siempre (fue mi caso).</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://github.com/shouya/rss-funnel" target="_blank">RSS-Funnel</a></li>
  <li><a href="https://ugeek.github.io/post/2024-03-06-rss-funnel-gestionando-y-optimizando-mis-feeds.html" target="_blank">RSS-Funnel. Gestionando y optimizando mis feeds</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="VPS" /><category term="Docker" /><category term="VPS" /><summary type="html"><![CDATA[No se si lo habreis notado vosotros, pero escuchar podcast sobre tecnologia, informatica y dockers puede ser perjudicial para la salud y por extensi√≥n para vuestros servidores, o es solo una cosa que me pasa a mi solo? Si os preguntareis a que viene esta afirmaci√≥n, podeis seguir leyendo y todo quedara aclarado.]]></summary></entry><entry><title type="html">El desastre del siglo</title><link href="https://vctrsnts.github.io/vps/2024/04/10/desastre-siglo.html" rel="alternate" type="text/html" title="El desastre del siglo" /><published>2024-04-10T00:00:00+00:00</published><updated>2024-04-10T00:00:00+00:00</updated><id>https://vctrsnts.github.io/vps/2024/04/10/desastre-siglo</id><content type="html" xml:base="https://vctrsnts.github.io/vps/2024/04/10/desastre-siglo.html"><![CDATA[<p>Si recordais este articulo <a href="/docker/vps/2023/09/24/VPS-pruebas.html" target="_blank">Por fin VPS para hacer pruebas</a> y luego leeis lo que me ha pasado, entedereis porque titulo este articulo como lo titulo.</p>

<p><strong>Porque no es para menos</strong>.</p>

<!-- more -->

<p>Como dije en el articulo que os he comentado, desde hace un tiempo, consegui, al fin, una instancia gratuita de <em>Oracle Cloud</em> que me servia para hacer pruebas y tener algun docker activado (proxy, searxng, umani, etc‚Ä¶) y que siempre va bien que este en otro sitio, porque nunca se sabe y m√°s si a alguien se le ocurre la idea de <strong>bloquear Telegram en Espanya</strong>.</p>

<p>Esta instancia aunque era de <strong>ARM</strong> pero estaba muy bien equipada:</p>
<ul>
  <li>24Gb de RAM</li>
  <li>50Gb de HDD</li>
  <li>SO. Ubuntu</li>
</ul>

<p>Lo tenia todo, pero un buen dia, se me ocurrio la brillante idea, que tal como lo tenia montado en ese momento, todo en una sola maquina, era tirar los recursos en 4 contenedores que nunca iban a saturar al equipo. Entonces dije, <strong>porque no hacer 2 maquinas</strong> y tenemos m√°s posibilidades. Y fue lo que hice, pero antes de todo ello, apague la maquina que tenia activa y la borre, para asi poder crear otra nueva a mi gusto. Que estupidez hice en ese momento, si lo llego a saber‚Ä¶</p>

<p>Y cuando ya lo tenia todo preparado para crear una nueva instancia pero m√°s reducida, aqui vino el desastre, era imposible crear una nueva. No habia manera, ni dejando que pasara unas horas ni unos dias. Siempre obtenia el mismo mensaje, <strong>No hay recursos</strong>, lo que si que podia hacer, era crear una instancia en AMD64, pero claro con la limitaci√≥n de <strong>1Gb de RAM</strong>.</p>

<p>En ese momento, fue cuando saltaron todas mis alarmas. Con otra email que tengo, intente crear una nueva cuenta, pero esta vez en otro sitio, porque no hay posibilidad de cambiar de sitio las instancias gratuitas, pero me encontre en el mismo problema, <strong>no hay recursos</strong>. Asi que ahora mismo, me encuentro sin poder usar ninguna instancia de Oracle.</p>

<p>Por ese motivo me he dado de baja (con lo que me costo conseguirlo), para ver si cuando haya pasado unos meses, puedo volver a intentar darme de alta de nuevo.</p>

<p>Pero de momento, ahora estoy usando una instancia de <strong>Google Cloud</strong>, se que no es lo mismo, porque solo tengo a mi disposici√≥n:</p>
<ul>
  <li>1Gb de RAM</li>
  <li>30Gb de HDD</li>
</ul>

<p>Pero bueno, menos es nada.</p>

<p>Lo que si que estoy pensando, es en un futuro, alquilar un VPS un poco decente, y no tener que preocuparme de cualquier problema. Pero claro, lo que me gustaria seria un VPS que no fuera muy caro, porque no quiero nada por el estilo de Oracle (RAM, CPU, HDD), pero tampoco quiero tan limitado como tengo ahora mismo con Google. Pero a ver donde encuentro algo asi y que esa economico.</p>

<p>Si alguien me lees y puede aconsejarme algun VPS, le estare muy agradecido.</p>]]></content><author><name>VSANTOS</name></author><category term="VPS" /><category term="VPS" /><summary type="html"><![CDATA[Si recordais este articulo Por fin VPS para hacer pruebas y luego leeis lo que me ha pasado, entedereis porque titulo este articulo como lo titulo. Porque no es para menos.]]></summary></entry><entry><title type="html">Cambiando a UnRAID</title><link href="https://vctrsnts.github.io/unraid/2024/03/07/cambiando-unraid.html" rel="alternate" type="text/html" title="Cambiando a UnRAID" /><published>2024-03-07T00:00:00+00:00</published><updated>2024-03-07T00:00:00+00:00</updated><id>https://vctrsnts.github.io/unraid/2024/03/07/cambiando-unraid</id><content type="html" xml:base="https://vctrsnts.github.io/unraid/2024/03/07/cambiando-unraid.html"><![CDATA[<p>Este mes de marzo ha traido un cambio inesperado en mi servidor.</p>

<p>Lo primero de todo, vi una oferta de un Lenovo m910x (el que dispone de una ranura para puerto PCI) en Wallapop que venia completo (tarjeta grafica, SSD, RAM, transformador de 135w), o sea, una perita en dulce. Asi que me lance de cabeza a el. Y junto con los 2 HDD que ya tenia en funcionamiento (18Tb y otro de 12Tb) en mi <a href="/thinkcenter/2023/08/01/de-nuevo-cambiando-servidor.html" target="_blank">antiguo servidor</a> m√°s otro que estaba en stand-by de 16Tb, y aprovechando el <a href="https://homelabs.club/cambios-y-modificaciones-compatibles-con-los-tinys-m910q-m710q-m910x" target="_blank">mod</a> que se le puede hacer a los Tiny (sobre todo a los m910x), pense en aprovechar los 3 HDD y tener un <strong>peazo</strong> servidor que no se lo saltase un galgo.</p>

<!-- more -->

<p>La unica duda que tenia, era como sacarle partido a todo el hard que tengo a mi disposici√≥n?</p>

<p>Pero antes de pensar en sacarle provecho al hard, tenia que hacer una operaci√≥n quirurgica al nuevo servidor, para aprovechar las ventajas del m910x. Y esta modificaci√≥n, consiste en:</p>
<ul>
  <li>Soldar 3 cables a la placa base, para sacar la alimentaci√≥n para los HDD.
    <ul>
      <li>Los puntos que tienes que soldar, los puedes encontrar en esta <a href="https://media.printables.com/media/prints/571792/images/4573825_5c9533df-9369-43f3-adfb-a8e3ec3e6bcc/thumbs/inside/1280x960/jpeg/noard-pinout-voltages.webp" target="_blank">image</a> del mod donde indica donde se tienen que hacer las soldaduras. El problema es si no tienes mucha experiencia o ninguna, entonces la cosa se complica. Yo he tenido de recordar los 5 a√±os que me pase soldando cuando estaba haciendo el FP. de electronica industrial, asi que‚Ä¶</li>
    </ul>
  </li>
  <li>Encontrar todo el material necesario para poder conectar los cables SATA a la PCI del Tiny. En la web de <strong>homelabs.club</strong> los encontraras.</li>
  <li>He ampliado la RAM del Tiny a 32Gb</li>
  <li>He cambiado la CPU que venia por defecto, <strong>Intel i5 - 6500T</strong> por una un poco mejor <strong>Intel i5 - 6600T</strong>.
    <ul>
      <li>Tengo en el almacen una <strong>Intel i5 - 7500T</strong>, pero no se si seria mucho hablando en terminos de consumo electrico.</li>
    </ul>
  </li>
</ul>

<p>Una vez realizada la parte m√°s dificil, ahora solamente toca decidir que <strong>Sistema Operativo</strong> ponerle. En principio queria volver a poner <strong>Debian GNU/Linux</strong> tal como tenia antes en mi anterior servidor. Pero en el canal de telegram de <strong>HomeLabs.club</strong> todo el mundo comentaba las bondades de <a href="https://unraid.net" target="_blank">UnRAID</a> y me decidi a probarlo a ver que tal era y si era tan bueno como decian.</p>

<p>Antes de nada, tenia que conseguir una licencia. Lo bueno que tiene <strong>UnRAID</strong>, es que tiene una licencia de prueba de <code class="language-plaintext highlighter-rouge">30 dias</code>. El <strong>Sistema Operativo</strong> tiene muy bien. Todo esta bien cuidado y bien ordenado, aunque al principio cuesta encontrar las cosas, pero eso es como todo.</p>

<p>Pero por mi experiencia, antes de nada y para que no te lleves ningun susto o te encuentres perdido, te recomiendo que le des un vistado a los siguientes videos:</p>
<ul>
  <li><a href="https://www.youtube.com/watch?v=00zfs3U21GY" target="_blank">Gu√≠a de Primeros Pasos en UnRAID (parte1)</a></li>
  <li><a href="https://www.youtube.com/watch?v=Aq6ssRuMQVo" target="_blank">Gu√≠a de Primeros Pasos en UnRAID (parte2)</a></li>
  <li><a href="https://www.youtube.com/watch?v=B5jpsmV1Mjg" target="_blank">Gu√≠a de Primeros Pasos en UnRAID (parte3)</a></li>
  <li><a href="https://www.youtube.com/watch?v=GRjWusI3fj8" target="_blank">Gu√≠a de Primeros Pasos en UnRAID (parte4)</a></li>
</ul>

<p>Estos videos van muy bien, porque te pone en situaci√≥n y te ayudan en la primera instalaci√≥n y configuraci√≥n del sistema. Es muy sencillo, pero como siempre pasa, el principio cuesta todo.</p>

<blockquote>
  <p>‚ö†Ô∏è Cuando llegues a la secci√≥n de configuraci√≥n del Array o vayas a instalar los HDD (<code class="language-plaintext highlighter-rouge">PreClear</code>) al sistema, y si antes ya has visto los videos, no es todo tan bonito como parece, piensa antes lo que vas a hacer, porque yo me lance al huerto con el <strong>PreClear</strong> de un HDD de 18Tb y tarde <strong>90 horas</strong>, se dice pronto, en tenerlo disponible para a√±adirlo al sistema. Pero bueno, me sirvio como aprendizaje para saber lo que es aconsejable y lo que no.</p>
</blockquote>

<p>Otra cosa que tambien me aconsejaron, fue que me apuntara al canal de <strong>Discord de UnRAID_ES</strong>, porque ya pedir ayuda, consejo, etc‚Ä¶ siempre estan disponibles. Son mis angeles de la guardia.</p>

<p>Con todo esto, ya podia a empezar a hacer las pruebas con el sistema, probando configuraciones, plugins, dockers, etc‚Ä¶ Y es hay, cuando en el canal de Discord, salta la noticia de que las licencias que hay en ese momento disponibles en <strong>UnRAID</strong> van a cambiar a subscripci√≥nes anuales. Todo el mundo, en el canal de <strong>Discord</strong> se volvio loco,  y recomendaron, que lo mejor, era comprar ya, una licencia tal como estan ahora (de por vida) para asi, al menos quedar cubierto para lo que pueda suceder en un futuro, y viendo que el sistema me empezaba a interesar y que tenia posibilidades, pues me decidi a comprar una licencia <strong>basica</strong>. Eso si, lo que recomiendan, es que vayas directamente a la licencia <strong>PRO</strong> porque con eso te <code class="language-plaintext highlighter-rouge">aseguras</code> de que no tengas problemas en un futuro, a parte de que puedes conectar dispositivos (entendemos como HDD) ilimitados.</p>

<p>Hay que puntualizar una cosa con referencia a lo de dispositivos <strong>ilimitados</strong> que salio en el mismo podcast donde se hablo de las licencias. 
El tema es que los famosos ilimitados queda muy bonito, pero que ahora mismo, <strong>UnRAID</strong> solo soporta 24 dispositivos, si son muchos, pero no es ilimitado. En mi caso, yo con 3 HDD, para que os hagais una idea, tengo unos 50Tb disponibles. M√°s que suficiente para mi servidor.</p>

<blockquote>
  <p>‚ö†Ô∏è Tambien, hay que tener en cuenta, esto es una opinion mia y personal, es que puedes tener la <code class="language-plaintext highlighter-rouge">m√°s mejor</code> de las licencias, que si la empresa que hay detras de UnRAID dice que anula todas las licencias anteriores, no servira de nada decir que tenias una <strong>PRO</strong> y que <strong>era para toda la vida</strong>, a parte de que cuestan una pasta.</p>
</blockquote>

<blockquote>
  <p>‚ö†Ô∏è Mucha gente opina, que si la empresa que hay detras de <strong>UnRAID</strong> hiciera eso, la comunidad entera se les echaria encima y abandonarian el barco en masa, con las consecuencias que eso podria tener para la empresa.</p>
</blockquote>

<p>Despu√©s de haber resuelto el tema de la licencia me puse a instalar todo lo que tenia en el anterior servidor, que es lo siguiente:</p>
<ul>
  <li>Jellyfin</li>
  <li>Flexget</li>
  <li>Transmission</li>
  <li>aMule</li>
  <li>Gotify
    <ul>
      <li>Tengo que hacer un articulo sobre esto.</li>
    </ul>
  </li>
  <li>Caddy</li>
  <li>DuckDns</li>
  <li>Jackett</li>
  <li>Scruttiny
    <ul>
      <li>Tengo que hacer un articulo sobre esto.</li>
    </ul>
  </li>
  <li>Wireguard
    <ul>
      <li>No hace falta instalar nada, porque ya va instalado en el propio UnRAID</li>
    </ul>
  </li>
  <li>Navidrome</li>
  <li>Glances</li>
  <li>HomePage</li>
  <li>PiHole</li>
</ul>

<p>Aun me faltan algunas cosas para estar al 100%, pero hay andamos.</p>

<p>Si nos ponemos a hablar de las pegas que, en mi caso, le encuentro, serian las siguientes:</p>
<ul>
  <li>Consume muchos recursos, a mi modo de ver, y si encima vienes de una <strong>Debian GNU/Linux</strong> con 16Gb, pues.
    <ul>
      <li>Esto viene porque segun para que cosas, sobre todo copiar archivos, y eso que no tengo el HDD de paridad (que daria para hablar otro articulo), lo veo como un proceso que requiere mucha CPU, y esto lo digo con conocimiento de causa, porque antes tenia los HDD conectados a traves de USB y no notaba tanto consumo de CPU como ahora, que estan conectados a traves de SATA.</li>
    </ul>
  </li>
  <li>Al consumir tantos recursos, hace, en mi caso, que la CPU se caliente m√°s de lo que me gustaria, llega hasta unos agradables 65¬∫. Una temperatura que no es de mi agrado.</li>
</ul>

<p>Como veis, son unicamente 2, pero seguramente, si es que me lee alguien, dira que soy un exagerado y que a ellos, eso no les pasa. Pero claro, por lo que he visto en el canal de <strong>Discord</strong> mi servidor parece de pobre, porque segun parece todos en el canal, tienen servidores industriales üòâ</p>

<p>Y hasta aqui hemos llegado, ya seguire explicando como va mi experiencia y sensaciones con UnRAID.</p>

<blockquote>
  <p>‚ö†Ô∏è Si llegase el momento de que <strong>UnRAID</strong> cambiase su politica de licencias, que opci√≥n escogerias tu.</p>
</blockquote>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://homelabs.club/cambios-y-modificaciones-compatibles-con-los-tinys-m910q-m710q-m910x" target="_blank">Cambios y modificaciones compatibles con los tiny‚Äôs M910Q/M710Q/M910X</a></li>
  <li><a href="https://unraid.net" target="_blank">UnRAID</a></li>
  <li><a href="https://www.youtube.com/playlist?list=PLVJ0-m0_zw1iM5w6oDHrEwMW87JnC_2pR" target="_blank">Tutoriales UnRAID_ES</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="unRAID" /><category term="unRAID" /><summary type="html"><![CDATA[Este mes de marzo ha traido un cambio inesperado en mi servidor. Lo primero de todo, vi una oferta de un Lenovo m910x (el que dispone de una ranura para puerto PCI) en Wallapop que venia completo (tarjeta grafica, SSD, RAM, transformador de 135w), o sea, una perita en dulce. Asi que me lance de cabeza a el. Y junto con los 2 HDD que ya tenia en funcionamiento (18Tb y otro de 12Tb) en mi antiguo servidor m√°s otro que estaba en stand-by de 16Tb, y aprovechando el mod que se le puede hacer a los Tiny (sobre todo a los m910x), pense en aprovechar los 3 HDD y tener un peazo servidor que no se lo saltase un galgo.]]></summary></entry><entry><title type="html">Usando HomePage. El Dashboard</title><link href="https://vctrsnts.github.io/docker/unraid/2024/02/12/usando-homepage-1.html" rel="alternate" type="text/html" title="Usando HomePage. El Dashboard" /><published>2024-02-12T00:00:00+00:00</published><updated>2024-02-12T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/unraid/2024/02/12/usando-homepage-1</id><content type="html" xml:base="https://vctrsnts.github.io/docker/unraid/2024/02/12/usando-homepage-1.html"><![CDATA[<p>Desp√∫es de escuchar el <a href="https://ugeek.github.io/post/2021-05-24-homer-mi-dashboard-favorito.html" target="_blank">podcast</a> de <strong>uGeek</strong> donde hablaba de los <strong>dashboard</strong> y en especial del que el usaba, <strong>Homer</strong>, me decidi a probarlo a ver que tal funcionaba la cosa, porque la idea de tener todo lo que m√°s utilizo al alcance de la mano o la informaci√≥n m√°s importante de tu servidor siempre disponible, pues es interesante. Asi que me decidi a instalar y probar <strong>Homer</strong>.</p>

<!-- more -->

<p>Al principio, no necesitaba nada m√°s, pero poco a poco, cuanto m√°s te adentras en el mundo de los <strong>dashboards</strong>, ves las infinitas posibilidades que tienes a tu alcance y que en el caso de <strong>Homer</strong> no me lo daba. Asi que, me decibi a buscar otros que pudieran ampliar la informaci√≥n que me podian mostrar y no encontraba el m√°s adecuado hasta que lei el <a href="https://elblogdelazaro.org/posts/2023-06-21-docker-homepage-dashboard/" target="_blank">articulo</a> de <strong>Lazaro</strong> donde hablaba de <a href="https://github.com/gethomepage/homepage" target="_blank">HomePage</a> y de las multiples opciones que tenia. Y puedo decir que si, tiene muchas opciones de configuraci√≥n que te pueden ayudar a visualizar toda la informaci√≥n que puedas necesitar.</p>

<p>Y como adem√°s, <strong>Homer</strong> tambien tiene esta posibilidad, se podia usar a traves de <strong>docker</strong> que m√°s se podia pedir. Asi que me dispuse a crear el container de <strong>HomePage</strong>. En mi caso, todo lo tengo concentrado en un fichero <code class="language-plaintext highlighter-rouge">yaml</code> que contine todos los dockers que uso:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">homepage</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/gethomepage/homepage:latest</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">homepage</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">2000:3000</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">PUID</span><span class="pi">:</span> <span class="m">1000</span>
    <span class="na">PGID</span><span class="pi">:</span> <span class="m">1000</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">${STORAGE}/config/homepage:/app/config</span>
    <span class="pi">-</span> <span class="s">/var/run/docker.sock:/var/run/docker.sock</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">diun.enable=true</span>
</code></pre></div></div>
<p>Y asi se quedo, con un par de opciones m√°s, <code class="language-plaintext highlighter-rouge">transmission</code>, <code class="language-plaintext highlighter-rouge">navidrome</code>, <code class="language-plaintext highlighter-rouge">jellyfin</code> y el uso de <strong>CPU</strong>, <strong>Memoria</strong> y <strong>HDD</strong> del servidor. Con esto ya lo tenia todo. Pero como dice el refran, siempre deseas lo que tienen los otros‚Ä¶ Y asi sucedio‚Ä¶</p>

<p>Aqui tengo que hacer un inciso, porque a parte de tener el <strong>dashboard</strong> de <strong>HomePage</strong> otra de las muchas cosas que siempre quiero controlar, es el estado de los 2 servidores que tengo ahora mismo (el servidor local y el servidor de Oracle) y esto lo podia controlar a traves del docker <strong>Glances</strong> que conoci despu√©s de leer el <a href="https://atareao.es/software/utilidades/glances-una-potente-alternativa-al-monitor-del-sistema/" target="_blank">articulo</a> que hizo <a href="https://atareao.es" target="_blank">Lorenzo</a> donde hablaba de el. Una versi√≥n resumida de este articulo, es que <strong>Glances</strong> es una especi√≥ de <strong>htop</strong> pero vitaminado. 
Asi que tambien lo instale, porque con el podia obtener toda la informaci√≥ (accediendo a ella a traves de la web) de los 2 servidores.</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">glances</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">nicolargo/glances:latest-full</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">glances</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
  <span class="na">pid</span><span class="pi">:</span> <span class="s">host</span>
  <span class="na">privileged</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/var/run/docker.sock:/var/run/docker.sock</span>
    <span class="pi">-</span> <span class="s">/run/user/1000/podman/podman.sock:/run/user/1000/podman/podman.sock</span>
    <span class="pi">-</span> <span class="s">${STORAGE}/config/glances/glances.conf:/glances/conf/glances.conf</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">TZ='Europe/Madrid'</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">GLANCES_OPT=-C</span><span class="nv"> </span><span class="s">/glances/conf/glances.conf</span><span class="nv"> </span><span class="s">-w"</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">61208:61208</span>
</code></pre></div></div>
<p>Y sin saberlo tenia todo lo necesari√≥ para obtener mucha m√°s informaci√≥n de la que me estaba facilitando <strong>HomePage</strong> hasta el momento y que yo desconocia que se podia obtener, hasta que en el canal de Telegram de <a href="https://homelabs.club" target="_blank">HomeLabs.club</a> empezaron a hablar de ello y de las multiples posibilidades que habia, junto con una captura de pantalla de toda la informaci√≥n que se podia obtener. Y yo, tenia a mi disposici√≥n toda esa informaci√≥n, pero desconocia como obtenerla.</p>

<p>Despu√©s de pedir ayuda o si me podian facilitar los archivos de configuraci√≥n que usaban, me podian servir como base para asi yo poder hacer mi configuraci√≥n. Hay que remarcar, que para configurar <strong>HomePage</strong> se necesitan de 5 archivos <strong>yaml</strong> donde:</p>

<h3 id="settingsyaml">settings.yaml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#</span>
<span class="c1"># La configuraci√≥ basica del dashboard (color de fons, idioma, disposici√≥ de la informaci√≥, etc...)</span>
<span class="c1">#</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">HomePage</span>
<span class="na">language</span><span class="pi">:</span> <span class="s">ca</span>

<span class="na">color</span><span class="pi">:</span> <span class="s">slate</span>
<span class="na">headerStyle</span><span class="pi">:</span> <span class="s">boxed</span>
<span class="na">hideVersion</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">useEqualHeights</span><span class="pi">:</span> <span class="kc">true</span>

<span class="na">layout</span><span class="pi">:</span>
 <span class="na">servidoLocal</span><span class="pi">:</span>
   <span class="na">header</span><span class="pi">:</span> <span class="kc">false</span>
   <span class="na">style</span><span class="pi">:</span> <span class="s">columns</span>
   <span class="na">columns</span><span class="pi">:</span> <span class="m">3</span>

 <span class="na">Oracle</span><span class="pi">:</span>
   <span class="na">header</span><span class="pi">:</span> <span class="kc">false</span>
   <span class="na">style</span><span class="pi">:</span> <span class="s">columns</span>
   <span class="na">columns</span><span class="pi">:</span> <span class="m">3</span>

 <span class="na">Dockers</span><span class="pi">:</span>
   <span class="na">header</span><span class="pi">:</span> <span class="kc">false</span>
   <span class="na">style</span><span class="pi">:</span> <span class="s">row</span>
   <span class="na">columns</span><span class="pi">:</span> <span class="m">3</span>

 <span class="na">Media</span><span class="pi">:</span>
   <span class="na">header</span><span class="pi">:</span> <span class="kc">false</span>
   <span class="na">style</span><span class="pi">:</span> <span class="s">row</span>
   <span class="na">columns</span><span class="pi">:</span> <span class="m">2</span>
</code></pre></div></div>
<h3 id="servicesyaml">services.yaml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#</span>
<span class="c1"># Es configuran els serveis que volem visualitzar per pantalla</span>
<span class="c1">#</span>
<span class="pi">-</span> <span class="na">servidorLocal</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Network</span><span class="pi">:</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">glances</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">metric</span><span class="pi">:</span> <span class="s">network:eth0</span>
        <span class="na">chart</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="pi">-</span> <span class="na">Memory</span><span class="pi">:</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">glances</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">metric</span><span class="pi">:</span> <span class="s">memory</span>
        <span class="na">chart</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="pi">-</span> <span class="na">Process</span><span class="pi">:</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">glances</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">metric</span><span class="pi">:</span> <span class="s">process</span>
        
<span class="pi">-</span> <span class="na">Oracle</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Network</span><span class="pi">:</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">glances</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">metric</span><span class="pi">:</span> <span class="s">network:eth0</span>
        <span class="na">chart</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="pi">-</span> <span class="na">Memory</span><span class="pi">:</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">glances</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">metric</span><span class="pi">:</span> <span class="s">memory</span>
        <span class="na">chart</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="pi">-</span> <span class="na">Process</span><span class="pi">:</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">glances</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">metric</span><span class="pi">:</span> <span class="s">process</span>
        
<span class="pi">-</span> <span class="na">Dockers</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Transmission</span><span class="pi">:</span>
      <span class="na">icon</span><span class="pi">:</span> <span class="s">transmission</span>
      <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Servidor Transmission</span>
      <span class="na">container</span><span class="pi">:</span> <span class="s">transmission</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">transmission</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">username</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">usuari</span><span class="pi">]</span>
        <span class="na">password</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">password</span><span class="pi">]</span>
  <span class="pi">-</span> <span class="na">aMule</span><span class="pi">:</span>
      <span class="na">icon</span><span class="pi">:</span> <span class="s">https://raw.githubusercontent.com/amule-project/amule/master/amule.png</span>
      <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Servidor aMule</span>
      <span class="na">container</span><span class="pi">:</span> <span class="s">amule</span>
  <span class="pi">-</span> <span class="na">Jackett</span><span class="pi">:</span>
      <span class="na">icon</span><span class="pi">:</span> <span class="s">jackett.png</span>
      <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Servidor Indexers</span>
      <span class="na">container</span><span class="pi">:</span> <span class="s">jackett</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">jackett</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
  <span class="pi">-</span> <span class="na">PiHole</span><span class="pi">:</span>
      <span class="na">icon</span><span class="pi">:</span> <span class="s">pi-hole.png</span>
      <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Servidor PiHole</span>
      <span class="na">container</span><span class="pi">:</span> <span class="s">pihole</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">pihole</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">key</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">key</span><span class="pi">]</span>
  <span class="pi">-</span> <span class="na">SpeedTest</span><span class="pi">:</span>
      <span class="na">icon</span><span class="pi">:</span> <span class="s">https://cdn.icon-icons.com/icons2/3053/PNG/512/speedtest_macos_bigsur_icon_189707.png</span>
      <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
      <span class="na">container</span><span class="pi">:</span> <span class="s">speedtest</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">speedtest</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
  <span class="pi">-</span> <span class="na">Scrutiny</span><span class="pi">:</span>
      <span class="na">icon</span><span class="pi">:</span> <span class="s">https://repository-images.githubusercontent.com/289524449/fc01e480-e6ab-11ea-9e20-53257df6f326</span>
      <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
      <span class="na">container</span><span class="pi">:</span> <span class="s">scrutiny</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">scrutiny</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        
<span class="pi">-</span> <span class="na">Media</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Jellyfin</span><span class="pi">:</span>
      <span class="na">icon</span><span class="pi">:</span> <span class="s">jellyfin.png</span>
      <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Servidor Multimedia</span>
      <span class="na">container</span><span class="pi">:</span> <span class="s">jellyfin</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">jellyfin</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">key</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">key</span><span class="pi">]</span>
  <span class="pi">-</span> <span class="na">Navidrome</span><span class="pi">:</span>
      <span class="na">icon</span><span class="pi">:</span> <span class="s">navidrome</span>
      <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Servidor Musica</span>
      <span class="na">container</span><span class="pi">:</span> <span class="s">navidrome</span>
      <span class="na">widget</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">navidrome</span>
        <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">user</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">usuari</span><span class="pi">]</span>
        <span class="na">token</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">token</span><span class="pi">]</span>
        <span class="na">salt</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">salt</span><span class="pi">]</span>
</code></pre></div></div>
<p>Lo que podeis hacer, yo lo tengo montado, m√°s informaci√≥n en este <a href="/docker/vps/2024/01/10/searxng-uno-todo.html" target="_blank">articulo</a>, es tener montado vuestro propio buscador y hacer todas las busquedas en el y asi confundirr en todo lo posible al <strong>Gran Hermano</strong>.</p>

<h3 id="widgetsyaml">widgets.yaml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#</span>
<span class="c1"># On es pot configurar el teu buscador preferit o visualitzar diverses informacions del teu servidor</span>
<span class="c1"># En el meu cas, visualitzar la informaci√≥ (CPU, MEMORIA, UPTIME) de 2 servidores diferents (servidor local i Oracle)</span>
<span class="c1">#</span>
<span class="pi">-</span> <span class="na">glances</span><span class="pi">:</span>
  <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
  <span class="na">label</span><span class="pi">:</span> <span class="s">servidorLocal</span>
  <span class="na">cpu</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">mem</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">uptime</span><span class="pi">:</span> <span class="kc">true</span>

<span class="pi">-</span> <span class="na">glances</span><span class="pi">:</span>
  <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
  <span class="na">label</span><span class="pi">:</span> <span class="s">Oracle</span>
  <span class="na">cpu</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">mem</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">uptime</span><span class="pi">:</span> <span class="kc">true</span>

<span class="pi">-</span> <span class="na">search</span><span class="pi">:</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">custom</span>
  <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
  <span class="na">focus</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">target</span><span class="pi">:</span> <span class="s">_blank</span>

<span class="pi">-</span> <span class="na">datetime</span><span class="pi">:</span>
  <span class="na">locale</span><span class="pi">:</span> <span class="s">nl</span>
  <span class="na">text_size</span><span class="pi">:</span> <span class="s">xs</span>
  <span class="na">format</span><span class="pi">:</span>
    <span class="na">dateStyle</span><span class="pi">:</span> <span class="s">short</span>
    <span class="na">timeStyle</span><span class="pi">:</span> <span class="s">short</span>
    <span class="na">hourCycle</span><span class="pi">:</span> <span class="s">h23</span>
</code></pre></div></div>

<h3 id="bookmarksyaml">bookmarks.yaml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#</span>
<span class="c1"># links a les pagines web m√©s utilizades en el meu cas</span>
<span class="c1">#</span>
<span class="pi">-</span> <span class="na">Blogs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Personal</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">github-light.png</span>
  <span class="pi">-</span> <span class="na">uGeek</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">blogger.png</span>
  <span class="pi">-</span> <span class="na">Lazaro</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">blogger.png</span>
  <span class="pi">-</span> <span class="na">EruenPlay</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">youtube.png</span>

<span class="pi">-</span> <span class="na">Social</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Mastodon</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">mastodon.png</span>
  <span class="pi">-</span> <span class="na">Telegram</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">telegram.png</span>
  <span class="pi">-</span> <span class="na">RiseUp</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">mailu.png</span>
</code></pre></div></div>
<p>Teoricamente, con esta configuraci√≥n tendria que funcionar todo correctamente y realizar la integraci√≥n correctamente con docker, pero no era asi. En mi caso, no veia ningun tipo de informaci√≥n relacionada con los dockers. Y todo lo que encontraba, es que esto tenia que funcionar si o si.</p>

<p>Entonces me puse a buscar informaci√≥n del motivo por el cual en mi caso no me funcionaba, tambien lo pregunte en el canal, pero todo el mundo me decia que tenia que funcionar correctamente y sin ningun problema, hay que tener en cuenta una cosa, en el canal de Telegram cuando exponia mi problema, todos los que me decian que tenia que funcionar correctamente, lo tenian instalado en <a href="https://unraid.net/" target="_blank">Unraid</a> y seguramente <strong>UnRaid</strong> hace alguna cosa para que funcione automaticamente, cosa que si tu lo haces manualmente y sin <strong>UnRaid</strong> no funciona.</p>

<p>Despues de buscar, encontre en la documentaci√≥n que hacia referencia a <a href="https://gethomepage.dev/v0.7.4/configs/docker/#using-docker-socket-proxy" target="_blank">docker</a> en <strong>HomePage</strong> que para que la integraci√≥n funcionase correctamente se tenia que instalar un <strong>proxy</strong> que es el que realiza la comunicaci√≥n entre <strong>docker</strong> y <strong>HomePage</strong>.</p>

<p>Para ello, se necesitaba el siguiente container:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">dockerproxy</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/tecnativa/docker-socket-proxy:latest</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">dockerproxy</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">CONTAINERS=1</span> <span class="c1"># Allow access to viewing containers</span>
    <span class="pi">-</span> <span class="s">SERVICES=1</span> <span class="c1"># Allow access to viewing services (necessary when using Docker Swarm)</span>
    <span class="pi">-</span> <span class="s">TASKS=1</span> <span class="c1"># Allow access to viewing tasks (necessary when using Docker Swarm)</span>
    <span class="pi">-</span> <span class="s">POST=0</span> <span class="c1"># Disallow any POST operations (effectively read-only)</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">127.0.0.1:2375:2375</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/var/run/docker.sock:/var/run/docker.sock:ro</span> <span class="c1"># Mounted as read-only</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
</code></pre></div></div>
<p>Y una vez que ya lo tienes en funcionamiento, solamente tienes que configurar en el archivo <code class="language-plaintext highlighter-rouge">docker.yaml</code> de la siguiente manera:</p>

<h3 id="dockeryaml">docker.yaml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#</span>
<span class="c1"># Per a realitzar la integraci√≥ de docker amb HomePage i visualitzar tota la informaci√≥ dels contenidors</span>
<span class="c1">#</span>
<span class="na">my-docker</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">dockerproxy</span>
  <span class="na">port</span><span class="pi">:</span> <span class="m">2375</span>
</code></pre></div></div>
<p>Y una vez esto, solamente tenemos que a√±adir en el archivo <code class="language-plaintext highlighter-rouge">services.yaml</code> la opci√≥n <code class="language-plaintext highlighter-rouge">server</code> de la siguiente manera:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">Dockers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">Transmission</span><span class="pi">:</span>
        <span class="na">icon</span><span class="pi">:</span> <span class="s">transmission</span>
        <span class="na">href</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s">Servidor Transmission</span>
        <span class="c1"># AQUI VA LA MODIFICACI√ì NECESSARIA PER A LA COMUNICACI√ì AMB DOCKER</span>
        <span class="na">server</span><span class="pi">:</span> <span class="s">my-docker</span>
        <span class="c1"># I EL NOM DEL CONTAINER</span>
        <span class="na">container</span><span class="pi">:</span> <span class="s">transmission</span>
        <span class="na">widget</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">transmission</span>
          <span class="na">url</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">url</span><span class="pi">]</span>
          <span class="na">username</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">usuari</span><span class="pi">]</span>
          <span class="na">password</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">password</span><span class="pi">]</span>
</code></pre></div></div>
<p>Y al final si, ya lo tenia todo funcionando correctamente. Pero cuando comente de la soluci√≥n que habia tomado en el canal de Telegram, me dijeron que no hacia falta tener un contener m√°s para que todo funcionase correctamente, sino que solamente hacia falta crear el siguiente fichero <code class="language-plaintext highlighter-rouge">override.conf</code> de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">usuari@debian:/sudo mkdir /etc/systemd/system/docker.service.d
</span></code></pre></div></div>

<h3 id="etcsystemdsystemdockerservicedoverrideconf">/etc/systemd/system/docker.service.d/override.conf</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">[</span><span class="nv">Service</span><span class="pi">]</span>
<span class="s">ExecStart=</span>
<span class="s">ExecStart=/usr/bin/dockerd -H fd:// -H tcp://0.0.0.0:2375 --containerd=/run/containerd/containerd.sock</span>
</code></pre></div></div>
<p>Y luego, solamente nos queda reiniciar el servicio del <code class="language-plaintext highlighter-rouge">daemon</code> y <code class="language-plaintext highlighter-rouge">docker</code>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">usuari@debian:/sudo systemctl daemon-reload
usuari@debian:/sudo systemctl restart docker.service
</span><span class="gp">#</span><span class="w"> </span>CON LA SIGUIENTE INSTRUCCION PODEMOS COMPROBAR QUE EL DEMONIO DE DOCKER ESTA FUNCIONANDO CORRECTAMENTE Y EL PUERTO ASIGNADO
<span class="go">usuari@debian:/sudo netstat -lntp | grep dockerd
</span></code></pre></div></div>
<p>Y si todo ha ido bien, ya podemos detener el container <code class="language-plaintext highlighter-rouge">dockerproxy</code> y proceder a modificar ya por ultima vez el archivo <code class="language-plaintext highlighter-rouge">docker.yaml</code> de <strong>HomePage</strong> de la siguiente manera:</p>

<h3 id="dockeryaml-1">docker.yaml</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">my-docker</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">IP SERVIDOR</span><span class="pi">]</span>
  <span class="na">port</span><span class="pi">:</span> <span class="m">2375</span>
</code></pre></div></div>
<p>Y con esto ya lo tendriamos todo en funcionamiento y para que veais como lo tengo en mi caso:</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/screenshot_003.png" alt="screenshot_003.png" />
    </div>
    
</div>

<p>Pero eso si, como dice el refran <strong>para gustos, colores</strong>. Vosotros podeis hacerlo a vuestro gusto.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://ugeek.github.io/blog/post/2021-05-24-homer-mi-dashboard.html" target="_blank">Homer. Mi Dashboard</a></li>
  <li><a href="https://elblogdelazaro.org/posts/2023-06-21-docker-homepage-dashboard/" target="_blank">Docker: Homepage dashboard</a></li>
  <li><a href="https://atareao.es/software/utilidades/glances-una-potente-alternativa-al-monitor-del-sistema/" target="_blank">Glances una potente alternativa al Monitor del Sistema</a></li>
  <li><a href="https://gethomepage.dev/v0.7.4/configs/docker/#using-docker-socket-proxy" target="_blank">HomePage - Docker</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="unRAID" /><category term="Docker" /><category term="unRAID" /><summary type="html"><![CDATA[Desp√∫es de escuchar el podcast de uGeek donde hablaba de los dashboard y en especial del que el usaba, Homer, me decidi a probarlo a ver que tal funcionaba la cosa, porque la idea de tener todo lo que m√°s utilizo al alcance de la mano o la informaci√≥n m√°s importante de tu servidor siempre disponible, pues es interesante. Asi que me decidi a instalar y probar Homer.]]></summary></entry><entry><title type="html">Copias de Seguridad. Annexo</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/docker/2024/02/06/copias-seguridad-annexo.html" rel="alternate" type="text/html" title="Copias de Seguridad. Annexo" /><published>2024-02-06T00:00:00+00:00</published><updated>2024-02-06T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/docker/2024/02/06/copias-seguridad-annexo</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/docker/2024/02/06/copias-seguridad-annexo.html"><![CDATA[<p>Se que ha pasado 1 mes desde la ultima vez que publique algo, pero he estado un poco liado con todo, pero ahora vuelvo al ruedo y a ver, si me pongo las pilas con el <strong>Blog</strong>.</p>

<p>Tal como se puede ver en estos 2 articulos que ya habia escrito:</p>
<ul>
  <li><a href="/docker/raspberry%20pi%20os/2021/01/17/rpi-copias-seguridad.html" target="_blank">Raspberry Pi. Haciendo copias de seguridad</a></li>
  <li><a href="/docker/raspberry%20pi%20os/2021/01/18/rpi-externalizando-copias-seguridad.html" target="_blank">Raspberry Pi. Externalizando copias de seguridad</a></li>
</ul>

<!-- more -->

<p>Donde explicaba, en el primer articulo, que mediante el docker de <strong>rsnapshot</strong> realizaba las copia de seguridad de los ficheros m√°s importantes de  mi servidor y, en el segundo articulo, explicaba, que a traves, tambien al docker de <strong>megacmd</strong> pasaba estas copias de seguridad a <a href="https://mega.nz" target="_blank">Mega</a> para tener una doble seguridad, una copia en el servidor y otra copia fuera de el. Todo funcionaba correctamente, pero la segunda parte no era de mi agrado, porque tenia un docker muy desactualizado y que no me daba mucha confianza.</p>

<p>Pero todo cambio cuando escuche este <a href="https://www.ivoox.com/google-stadia-copias-seguridad-revision-del-audios-mp3_rf_96963743_1.html" target="_blank">podcast</a> de <strong>Desahogo Geek</strong> donde explicaba la manera que el hacia sus copias de seguridad de sus servidores. Y me intereso, asi que me puse a ver como se podia hacer.</p>

<p>La manera que lo hacia <strong>AlexPro</strong> se basaba en 2 funcionalidades, 3 en mi caso, que son las siguientes:</p>
<ul>
  <li>Usar <strong>rsnapshot</strong> que ya lo estoy utilizando y me funciona correctamente.</li>
  <li>Usar <strong>rclone</strong> para <strong>montar</strong> como una unidad m√°s del sistema en el servidor del espacio que tengo en <strong>Mega</strong> (50Gb) que hasta ese momento, no estaba dandole mucho uso.</li>
  <li>Automatizar mediante un script en <strong>bash</strong> las copias de seguridad, que en mi caso, serian las que hago mediante <strong>rsnapshot</strong>.</li>
</ul>

<p>Con respecto a las 2 primeras, <strong>rsnapshot</strong> no lo voy a volver a explicar, porque podeis ir al <a href="/docker/raspberry%20pi%20os/2021/01/17/rpi-copias-seguridad.html" target="_blank">articulo</a> que tengo publicado donde lo explico detalladamente, con respecto a como se tiene que configurar <strong>rclone</strong>, en vez de explicarlo yo aqui, que seguramente no contemplaria todas las opciones posibles, recomiendo que mireis estos <a href="https://alexpro.sytes.net/rclone" target="_blank">articulos</a> que a escrito <strong>AlexPro</strong> que explica todas las opciones posibles y en el que yo me he basado para configurar mi <strong>rclone</strong>.</p>

<p>Lo que si que voy a explicar, es el script en <strong>bash</strong> (modificando el que habian hecho anteriormente <a href="https://juncotic.com/megafuse-realizando-backups-mega-linux" target="_blank">Diego Cordoba</a> y que a su vez, fue modificado por <a href="https://github.com/luisurbinanet/megafuse-backup-script" target="_blank">Luis Urbina</a> y que modifique a mis necesidades para hacer las copias de seguridad a <strong>Mega</strong>. El script es el siguiente:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c"># Victor Santos Garcia / https://vctrsnts.github.io</span>
<span class="c"># Creado Diego Cordoba, modificat per Luis Urbina</span>
<span class="c">#</span>
<span class="c">#</span>
<span class="c"># DADES DEL SERVIDOR I NECESSARIES</span>
<span class="nv">SERVER</span><span class="o">=</span><span class="s2">"nomEquip"</span>
<span class="c"># PER VISUALITZAR ELS MISSATGES (TRUE ES VISUALIZEN, FALSE NO)</span>
<span class="nv">DEBUG</span><span class="o">=</span><span class="s2">"true"</span>
<span class="c"># ON ESTA EL FITXER DE CONFIGURACI√ì DE RCLONE (JO LAGAFO DEL DOCKER DE RCLONE)</span>
<span class="nv">RCLONE_CONFIG</span><span class="o">=</span><span class="s2">"/config/rclone.conf"</span>
<span class="c">#</span>
<span class="c"># DIES QUE MANTENIM LES COPIES</span>
<span class="c">#</span>
<span class="nv">TMP_DIR</span><span class="o">=</span><span class="s2">"/tmp"</span>
<span class="c"># DIES PER OBTINDRE ELS BACKUPS, AMB EL VALOR 0, SAGAFA LULTIM BACKUP</span>
<span class="nv">DAYS_TO_BACKUP</span><span class="o">=</span>0
<span class="c"># DIES QUE ES MANTENEN ELS BACKUPS A MEGA ABANS DESBORRAR</span>
<span class="nv">DAYS_TO_DELETE</span><span class="o">=</span>7
<span class="c">#</span>
<span class="c"># TEMPS DESPERA PER A QUE FINALITZI LA COPIA ENTRE EL SERVIDOR I MEGA</span>
<span class="c"># SI EL SERVIDOR ESTA A INTERNET, AMB 120 SEGONS (2 MINUTS) ES M√âS QUE SUFICIENT</span>
<span class="c">#</span>
<span class="nv">STANDBY_SECONDS</span><span class="o">=</span>120
<span class="c">#</span>
<span class="c"># ESPECIFIQUEM EL DIRECTORI ON ESTAN ELS BACKUPS DE RSNAPSHOT</span>
<span class="c"># I EL DIRECTORI DE MEGA</span>
<span class="c">#</span>
<span class="nv">ORIGEN_DIR</span><span class="o">=</span><span class="s2">"/mnt/backup"</span>
<span class="nv">MEGA_DIR</span><span class="o">=</span><span class="s2">"/mnt/mediaefs"</span>
<span class="c">#</span>
<span class="c"># OBTENIM LA DATA DEL SISTEMA</span>
<span class="nv">DATE</span><span class="o">=</span><span class="s2">"</span><span class="si">$(</span><span class="nb">date</span> +%Y%m%d<span class="si">)</span><span class="s2">"</span>
<span class="c">#</span>
<span class="c"># ES COMEN√áA A REALITZAR EL BACKUP</span>
<span class="c">#</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">DEBUG</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"true"</span> <span class="o">]</span> 
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">""</span>
    <span class="nb">echo</span> <span class="s2">"</span><span class="se">\_</span><span class="s2"> Inici del Backup a Mega"</span>
<span class="k">fi</span>
<span class="c">#</span>
<span class="c"># BACKUP DE LES COPIES DE SEGURETAT</span>
<span class="c"># EN AQUESTA CAS, SEMPRE BUSQUEM EL DAILY.0 GENERAT PER RSNAPSHOT</span>
<span class="c">#</span>
<span class="k">for </span><span class="nb">dir </span><span class="k">in</span> <span class="si">$(</span>find <span class="k">${</span><span class="nv">ORIGEN_DIR</span><span class="k">}</span> <span class="nt">-mindepth</span> 1 <span class="nt">-maxdepth</span> 1 <span class="nt">-type</span> d <span class="nt">-daystart</span> <span class="nt">-mtime</span> <span class="k">${</span><span class="nv">DAYS_TO_BACKUP</span><span class="k">}</span><span class="si">)</span>
<span class="k">do

    </span><span class="nb">cd</span> <span class="si">$(</span><span class="nb">dirname</span> <span class="k">${</span><span class="nv">dir</span><span class="k">}</span><span class="si">)</span>

    <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">DEBUG</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"true"</span> <span class="o">]</span>
    <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">""</span>
      <span class="nb">echo</span> <span class="s2">"  </span><span class="se">\_</span><span class="s2">_: Iniciem la creaci√≥ del fitxer comprimit"</span>
    <span class="k">fi

    if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">DEBUG</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"true"</span> <span class="o">]</span>
    <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"  </span><span class="se">\_</span><span class="s2">__: </span><span class="k">${</span><span class="nv">dir</span><span class="k">}</span><span class="s2">"</span>
    <span class="k">fi</span>
    <span class="c"># ES CREAR EL FITXER COMPRIMIT (TAR.GZ) DE LA COPIA DE RSNAPSHOT</span>
    <span class="nb">tar </span>czf <span class="k">${</span><span class="nv">TMP_DIR</span><span class="k">}</span>/<span class="si">$(</span><span class="nb">basename</span> <span class="k">${</span><span class="nv">dir</span><span class="k">}</span><span class="si">)</span>_<span class="k">${</span><span class="nv">DATE</span><span class="k">}</span>.tar.gz <span class="si">$(</span><span class="nb">basename</span> <span class="k">${</span><span class="nv">dir</span><span class="k">}</span><span class="si">)</span>

    <span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">DEBUG</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"true"</span> <span class="o">]</span>
    <span class="k">then
      </span><span class="nb">echo</span> <span class="s2">"  </span><span class="se">\_</span><span class="s2">_: Finalitzaci√≥ de la creaci√≥ del fitxer comprimit"</span>
    <span class="k">fi

    </span><span class="nb">cd</span> - <span class="o">&gt;</span> /dev/null
<span class="k">done</span>
<span class="c">#</span>
<span class="c"># ESBORROR LES COPIES DE SEGURETAT QUE TENEN M√âS DE 7 DIES DANTIGUITAT A MEGA</span>
<span class="c">#</span>
rclone <span class="nt">--config</span> <span class="k">${</span><span class="nv">RCLONE_CONFIG</span><span class="k">}</span> delete <span class="nt">--min-age</span> <span class="k">${</span><span class="nv">DAYS_TO_DELETE</span><span class="k">}</span>d dmega_cifrado:

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">DEBUG</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"true"</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">""</span>
  <span class="nb">echo</span> <span class="s2">"</span><span class="se">\_</span><span class="s2"> Busquem els arxius amb m√©s de 7 dies dantiguitat per esborrar"</span>
<span class="k">fi</span>
<span class="c">#</span>
<span class="c"># INICEM LA COPIA DELS FITXERS DE SEGURETAT COMPRIMITS A LA UNITAT XIFRADA DE MEGA</span>
<span class="c">#</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">DEBUG</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"true"</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">""</span>
  <span class="nb">echo</span> <span class="s2">"</span><span class="se">\_</span><span class="s2"> Iniciem la copia dels fitxers de seguretat (comprimits) a DMEGA_CIFRADO"</span>
<span class="k">fi
</span>rclone <span class="nt">--config</span> <span class="k">${</span><span class="nv">RCLONE_CONFIG</span><span class="k">}</span> move <span class="k">${</span><span class="nv">TMP_DIR</span><span class="k">}</span>/<span class="k">*</span> dmega_cifrado:
<span class="c">#</span>
<span class="c"># ESPEREM UN TEMPS PERQUE ES REALITZI CORRECTAMENT LA COPIA</span>
<span class="c">#</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">DEBUG</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"true"</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"  </span><span class="se">\_</span><span class="s2">: Temps despera de </span><span class="nv">$STANDBY_SECONDS</span><span class="s2"> segons"</span>
<span class="k">fi
</span><span class="nb">sleep</span> <span class="nv">$STANDBY_SECONDS</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">DEBUG</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"true"</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"</span><span class="se">\_</span><span class="s2"> Es realitza neteja de fitxers i ja finalitzem"</span>
<span class="k">fi</span>
<span class="c"># ESBORREM EL FITXER TAR.GZ CREAT PER PUJAR A MEGA</span>
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="k">${</span><span class="nv">TMP_DIR</span><span class="k">}</span>/<span class="k">*</span>
<span class="c"># ES NETEJA LA PAPERERA DE MEGA</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="k">${</span><span class="nv">DEBUG</span><span class="k">}</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"true"</span> <span class="o">]</span>
<span class="k">then
  </span><span class="nb">echo</span> <span class="s2">"</span><span class="se">\_</span><span class="s2"> Es neteja la paperera de Mega"</span>
<span class="k">fi
</span>rclone <span class="nt">--config</span> <span class="k">${</span><span class="nv">RCLONE_CONFIG</span><span class="k">}</span> cleanup dmega_cifrado:
</code></pre></div></div>

<p>Con este script, que tengo que dar las gracias a <strong>Diego Cordoba</strong> y a <strong>Luis Urbina</strong>, porque me dieron la base, para luego, yo poder hacer este script, consigo, que:</p>
<ul>
  <li>Se localize la copia m√°s actual realizada por <strong>rsnapshot</strong>, que en este caso, siempre sera <code class="language-plaintext highlighter-rouge">daily.0</code>.</li>
  <li>Luego, se crea un fichero comprimir en <code class="language-plaintext highlighter-rouge">tar.gz</code> con la fecha de la copia.</li>
  <li>Se muevo este fichero a la unidad cifrada de <strong>Mega</strong> donde se pierde cualquier posibilidad de saber que contiene dicho fichero.</li>
  <li>Borramos de la papelera de <strong>Mega</strong> las copias m√°s antiguas, porque solamente conservamos las ultimas 7.</li>
</ul>

<p>Y con esto, he explicado, como en mi caso, gracias a diferentes personas, realizo yo las copias de seguridad de mi servidor local. Faltaria implementarlo en el servidor de Oracle que tengo, pero como de momento, no tengo mucha cosa en el, pues no me merece la pena.</p>

<p>Aunque, como ahora, tiene mi sitio web, donde pongo los libros que he ido leyendo, no se si merece la pensa ya pensar en ello. Es una cosa que estoy estudiando.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.ivoox.com/google-stadia-copias-seguridad-revision-del-audios-mp3_rf_96963743_1.html" target="_blank">Google Stadia, copias de seguridad y revisi√≥n del coche</a></li>
  <li><a href="https://juncotic.com/megafuse-realizando-backups-mega-linux" target="_blank">MegaFuse: realizando backups en MEGA desde Linux</a></li>
  <li><a href="https://github.com/luisurbinanet/megafuse-backup-script" target="_blank">megafuse-backup-script</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Docker" /><category term="Debian GNU/Linux" /><category term="Docker" /><summary type="html"><![CDATA[Se que ha pasado 1 mes desde la ultima vez que publique algo, pero he estado un poco liado con todo, pero ahora vuelvo al ruedo y a ver, si me pongo las pilas con el Blog. Tal como se puede ver en estos 2 articulos que ya habia escrito: Raspberry Pi. Haciendo copias de seguridad Raspberry Pi. Externalizando copias de seguridad]]></summary></entry><entry><title type="html">Searxng. Y uno para controlarlos a todos</title><link href="https://vctrsnts.github.io/docker/vps/2024/01/10/searxng-uno-todo.html" rel="alternate" type="text/html" title="Searxng. Y uno para controlarlos a todos" /><published>2024-01-10T00:00:00+00:00</published><updated>2024-01-10T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/vps/2024/01/10/searxng-uno-todo</id><content type="html" xml:base="https://vctrsnts.github.io/docker/vps/2024/01/10/searxng-uno-todo.html"><![CDATA[<p>Como ha he dicho muchas veces, docker te abre un mundo de infinitas posibilidades y entre una de estas posibilidades es tener tu propio buscador web y esto se consegui gracias a <strong>SearxNG</strong>.</p>

<!-- more -->

<p>Aunque esto no es del todo cierto, lo que ocurre, es que <strong>Searxng</strong> es un concentrador de buscadores que lo unifica todo en un unico buscador, para mostrate todos los resultados posibles de todos los buscadores que hay actualmente (DuckDuckgo, Google, Bing, etc‚Ä¶) para asi evitar que tengas que hacer la busqueda en todos ellos. Y como adem√°s lo puedes usar a traves de docker, pues mejor que mejor.</p>

<p>La unica pega que tiene, es que si lo usas a nivel personal, los diferentes buscadores conoceran tu IP, porque siempre es la misma y nunca cambio, lo bueno, seria que lo abrieras a todo el mundo asi, seria dificil que los diferentes buscandores te relacionases con las posibles busquedas y todo seria m√°s anonimo, pero claro, tienes que abrirlo a toda la web, con el peligro que ello conlleva.</p>

<p>En mi caso, como tengo el servidor de Oracle, lo tengo montado hay, para dentro de lo que cabe, asi les cueste un poco m√°s relacionar mis busquedas con mi IP, ayuda un poco, pero no es la panacea. Y repito, como lo puedes usar a traves de <strong>docker</strong> que m√°s se puede pedir.</p>

<p>En mi caso, el <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code> que estoy usando yo es el siguiente:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">searxng</span><span class="pi">:</span>
   <span class="na">image</span><span class="pi">:</span> <span class="s">searxng/searxng:latest</span>
   <span class="na">container_name</span><span class="pi">:</span> <span class="s">searxng</span>
   <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
   <span class="na">networks</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">searxng</span>
   <span class="na">ports</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s2">"</span><span class="s">8111:8080"</span>
   <span class="na">volumes</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">${STORAGE}/config/searx:/etc/searxng:rw</span>
   <span class="na">environment</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">SEARXNG_BASE_URL=https://${SEARXNG_HOSTNAME:-localhost}/</span>
   <span class="na">cap_drop</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">ALL</span>
   <span class="na">cap_add</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">CHOWN</span>
     <span class="pi">-</span> <span class="s">SETGID</span>
     <span class="pi">-</span> <span class="s">SETUID</span>
   <span class="na">logging</span><span class="pi">:</span>
     <span class="na">driver</span><span class="pi">:</span> <span class="s2">"</span><span class="s">json-file"</span>
     <span class="na">options</span><span class="pi">:</span>
       <span class="na">max-size</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1m"</span>
       <span class="na">max-file</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1"</span>

<span class="na">networks</span><span class="pi">:</span>
  <span class="na">searxng</span><span class="pi">:</span>
    <span class="na">ipam</span><span class="pi">:</span>
      <span class="na">driver</span><span class="pi">:</span> <span class="s">default</span>
</code></pre></div></div>

<p>Con esto, ya tienes en funcionamiento nuestro buscador <strong>Searxng</strong>, pero claro, en mi caso, lo tengo en el servidor de Oracle, si quiero acceder a el, o lo hago a traves de una VPN o lo abro al mundo a traves de un proxy invero, en mi caso <a href="/docker/raspberry%20pi%20os/2022/12/25/rpi-caddy-proxy-manager.html" target="_blank">Caddy</a> y asi poder acceder a el desde cualquier parte del mundo. Yo ahora mismo lo estoy usando tanto en mi ordenador personal, como en mi movil.</p>

<p>Despu√©s de configurar <strong>Caddy</strong> para que nos de acceso al contenedor y accedamos a el por primera vez, tenemos que configurar el buscador (orden de prioridad de los buscadores, selecci√≥n de imagenes, etc‚Ä¶). Tienes mil opciones con las que jugar.</p>

<p>En mi caso, fui a lo facil, modifique alguna cosas, active otras y ya me puse a usarlo. Y si que tengo que decir, que desde ese momento, no he vueltro a usar ningun otro buscador.</p>

<p>Como digo <strong>Y uno para controlarlos a todos</strong>.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://ugeek.github.io/blog/post/2023-03-20-searxng-buscador-privado.html" target="_blank">SEARXNG. BUSCADOR PRIVADO</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="VPS" /><category term="Docker" /><category term="VPS" /><summary type="html"><![CDATA[Como ha he dicho muchas veces, docker te abre un mundo de infinitas posibilidades y entre una de estas posibilidades es tener tu propio buscador web y esto se consegui gracias a SearxNG.]]></summary></entry><entry><title type="html">Que nos depara este a√±o 2024??</title><link href="https://vctrsnts.github.io/blog/2024/01/05/que-nos-depara-2024.html" rel="alternate" type="text/html" title="Que nos depara este a√±o 2024??" /><published>2024-01-05T00:00:00+00:00</published><updated>2024-01-05T00:00:00+00:00</updated><id>https://vctrsnts.github.io/blog/2024/01/05/que-nos-depara-2024</id><content type="html" xml:base="https://vctrsnts.github.io/blog/2024/01/05/que-nos-depara-2024.html"><![CDATA[<p>Pues ya tenemos el 2024 encima.</p>

<p>Ya os puedo decir, que este a√±o, a nivel de salud, no ha empezado tal como me hubiera gustado, pero espero que todo se solucione con el tiempo.</p>

<p>Ahora falta saber que nos deparara tanto a nivel de soft como a nivel de hard.</p>

<!-- more -->

<p>Con respecto al <strong>hard</strong>, este primer semestre me gustaria modificar el server que tengo ahora mismo. En vez de tener los HDD conectados a traves de un USB, me gustaria que se conectasen a traves de SATA.</p>

<p>Esta modificaci√≥n se la quiero realizar a una Tiny M910q con un par de cables por aqui y un poco de silicona por haya üòâ</p>

<p>En principio suena peor de lo que es, pero la idea la he conseguido del canal de <strong>Homelabs.club</strong> de telegram donde a quien m√°s loco. Ya tengo todo el material para hacer la modificaci√≥n, asi como unas cuantas dudas que tengo que aclarar y un soldador, que tengo, pero en estos momentos, no lo tengo disponible. Es lo que siempre pasa, cuando m√°s necesitas una cosa, no esta disponible.</p>

<p>Me hubiera gustado tener un homeserver m√°s estandart utilizando una placa micro-atx que tengo de un antiguo HTC, pero es que todas las cajas que veo que me irian bien, se van de presupuesto o no tengo espaci√≥ donde ubicarlo.</p>

<p>Asi que de momento, a conformarse con lo que tengo que no es poco. Lo unico el bricolage que hay que hacer, que como ya he dicho, espero que los compa√±eros de <strong>HomeLabs.club</strong> me echen una mano para aclarar las dudas que me puedan surgir.</p>

<p>Y sobre el <strong>soft</strong> pues haciendo pruebas de diferentes dockers que tenia ganas de probar o que aconsejan algunos de los podcasters que escucho (uGeek, Atareao, Lazaro, etc‚Ä¶), como por ejemplo:</p>
<ul>
  <li><strong>Dockge</strong>: gestionar tu fichero <code class="language-plaintext highlighter-rouge">compose.yaml</code> a traves de la web</li>
  <li><strong>Dozzle</strong>: visualizar los logs de docker a traves de la web</li>
  <li><strong>Vaultwarden</strong>: Para tener guardadas todas las contrase√±as que utilizar. Una especie de caja fuerte.</li>
</ul>

<p>Los 2 primeros ya los he probado, pero no les veo mucha utilidad. Para mi, me resulta m√°s facil ir directamente a la terminal y hacerlo tu mismo, <strong>uGeek</strong> opina lo mismo. En mi caso, estoy acostumbrado a todo lo referente a docker a hacerlo en la terminal, asi que no le veo ninguna utilidad. Pero ahi esta.</p>

<p>Con respecto a <strong>Vaultwarden</strong> me gustaria tenerlo, porque asi, tendria en mi servidor el docker y no (ahora uso bitwarden) dejar la responsabilidad a una empresa. Pero claro, si lo tienes tu, tienes que estar pendiente de la seguridad y que no tengas ninguna brecha de seguridad, porque sino, se puede liar una‚Ä¶</p>

<p>Pero es lo que no entiendo, la gente que tiene <strong>Vaultwarden / Bitwarden</strong> en su propio servidor, como lo tienen configurado.</p>

<p>Si no es molestia y alguien me lee, me lo podria explicar? Como sabeis, podeis contactar conmigo a traves de Mastodon</p>

<p>Pues asi se presenta este nuevo y solo llevamos 5 dias. Cuando lleve 160, no se como estare üòâ</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://ugeek.github.io/blog/post/2023-11-19-docker-dockge-gestionando-mis-docker-compose-de-forma-grafica.html" target="_blank">Dockge</a></li>
  <li><a href="https://www.youtube.com/watch?v=QP-Bl3lBVZI" target="_blank">Dozzle</a></li>
  <li><a href="https://www.youtube.com/watch?v=vMzsBbrSMPA" target="_blank">Vaultwarden</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Blog" /><category term="Blog" /><summary type="html"><![CDATA[Pues ya tenemos el 2024 encima. Ya os puedo decir, que este a√±o, a nivel de salud, no ha empezado tal como me hubiera gustado, pero espero que todo se solucione con el tiempo. Ahora falta saber que nos deparara tanto a nivel de soft como a nivel de hard.]]></summary></entry><entry><title type="html">Por fin. VPS para hacer pruebas</title><link href="https://vctrsnts.github.io/docker/vps/2023/09/24/VPS-pruebas.html" rel="alternate" type="text/html" title="Por fin. VPS para hacer pruebas" /><published>2023-09-24T00:00:00+00:00</published><updated>2023-09-24T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/vps/2023/09/24/VPS-pruebas</id><content type="html" xml:base="https://vctrsnts.github.io/docker/vps/2023/09/24/VPS-pruebas.html"><![CDATA[<p>Hacia mucho tiempo (minimo 2 a√±os), que habia escuchado que Oracle te daba <code class="language-plaintext highlighter-rouge">gratuitamente</code> la posibilidad de tener un VPS para poderlo usar, eso si, con unas ciertas limitaciones:</p>
<ul>
  <li>1 vCPUs x86 - 1Gb Ram</li>
  <li>4 vCPUs ARM - 24Gb Ram</li>
</ul>

<p>Asi que si anteriormente, en un RaspberryPi con 1Gb de Ram y una unica CPU podia tener amule, transmission las 24 horas del dia y el sistema iba sobrado, la elecci√≥n seria facil.</p>

<p>La elecci√≥n era lo m√°s facil, lo dificil fue conseguir darse de alta. Y cuando digo dificil, me refiero a dificil.</p>

<!-- more -->

<p>Tarde como unos 2 a√±os a conseguir darme de alta en el servicio. No se porque, pero me era imposible conseguir darme de alta, probe con todo tipo de emails (que tengo), tambien probe con emails ficticios (de los que duran 10 minutos), tambien probe con diferentes tipos de tarjetas de debito / credito, pero no habia ninguna manera de conseguir acceder al servicio, tambi√©n probe de preguntar al <em>servici√≥ de ayuda</em> que habia disponible, pero como todos los servicios de ayuda, era como darse cabezazos contra una pared. No servian para nada.</p>

<p>Pero no se porque, antes de vacaciones, lo volvi a intentar y por fin lo consegui, no se como, pero funciono. Porque volvi a hacer lo mismo que habia echo las anteriores veces. A lo mejor fue porque el sistema estaba menos saturado, no se, pero me funciono.</p>

<p>Y asi fue como consegui mi VPS, limitado eso si, pero no necesitaba nada m√°s para hacer mis pruebas y usarlo como yo queria, pues me venia de perlas. Para que necesitar m√°s.</p>

<p>Lo primero era crear la maquina virtual con las necesidades maximas (dentro del <code class="language-plaintext highlighter-rouge">Free Tier</code>):</p>
<ul>
  <li>Arquitectura ARM (4 vCPUs)</li>
  <li>24Gb de Ram</li>
  <li>SO. Ubuntu ARM (muy parecido a Raspbian <strong>Debian GNU/Linux</strong>, etc‚Ä¶)</li>
</ul>

<p>Ahora solamente faltaba crear la maquina y configurarla, pero de eso no voy a explicar nada, porque hay miles de videos por internet donde lo explican mejor de lo que yo lo podria explicar.</p>

<p>Eso si, cuando tuve el sistema apunto y actualizado y minimamente <a href="/raspberry%20pi%20os/seguridad/2020/11/08/rpi-usando-fail2ban.html" target="_blank">securizado</a>, le instale <strong>Docker</strong> siguiendo mi propia <a href="/docker/raspberry%20pi/2020/03/08/rpi-usando-docker.html" target="_blank">guia de instalaci√≥n</a> y ya lo tengo todo preparado para hacer mis cosas :)</p>

<p>Y le instale los siguientes contenedores:</p>
<ul>
  <li><a href="/docker/raspberry%20pi%20os/2021/04/08/rpi-caddy-proxy-manager.html" target="_blank">Caddy</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2023-03-20-searxng-buscador-privado.html" target="_blank">Searxng</a>
    <ul>
      <li>Este ultimo lo estoy usando como mi buscador principal y pasa por delante de <strong>duckduckGo</strong> y a <strong>Google</strong>.</li>
    </ul>
  </li>
  <li><a href="https://elblogdelazaro.org/posts/2020-02-03-monitorix-monitoriza-tu-sistema" target="_blank">Monitorix</a>
    <ul>
      <li>Lo tengo para tener una monitorizaci√≥n del servidor por los puntos mas importantes a tener en cuenta.</li>
    </ul>
  </li>
  <li><a href="/hardware/raspberry%20pi/2020/10/30/rpi-cambiando-equipo.html" target="_blank">DuckDns</a>
    <ul>
      <li>No voy a explicar como se instala, porque usando docker es superfacil. Adem√°s a traves de este <a href="https://www.youtube.com/watch?v=MLjKbake8HM" target="_blank">video</a> de mi argentino preferido esta mejor explicado. Eso si, ultimamente ha decaido mucho (en mi opinion) en la tematica de los videos y ya no es como antes.</li>
    </ul>
  </li>
  <li><a href="https://llibres.ahnenerbe.duckdns.org" target="_blank">Jekyll</a>
    <ul>
      <li>Aqui es donde tengo otra pagina web (diferente a la que tengo en GitHub), pero que ya hablare en otro articulo.</li>
    </ul>
  </li>
</ul>

<p>Si os dais cuenta, estoy poniendo muchos de mis articulos donde comento en como se instalan diferentes aplicaciones / programas / containers en una <strong>RaspberryPi</strong>, pero como todo es <strong><em>ARM</em></strong> y los sistemas operativos que uso, son derivados de <strong>Debian GNU/Linux</strong>, pues no hay ningun problema en la instalaci√≥n.</p>

<p>A parte de lo instalado, tambi√©n tengo puesto este <a href="https://ugeek.github.io/blog/post/2023-04-10-neveridle-vps-de-oracle-nunca-inactivo.html" target="_blank">script</a> que en pocas palabras (para m√°s informaci√≥n leer en completo articulo de uGeek) explica que si las maquinas virtuales estan sin utilizar Oracle las desactiva y las borra. El <strong>script</strong> lo que hace, es consumir recursos (lo que tu hayas marcado en el fichero de configuraci√≥n) para asi dar la sensaci√≥n, de que el servidor se esta usando y evitar cualquier problema de que te lo desactiven o borren.</p>

<p>Y esto es mi odisea para tener un VPS, seguramente muchos direis que se le puede sacar m√°s partido. Tengo ideas que me gustaria probar en el servidor, servidor de musica, de podcast, etc‚Ä¶, pero no se si es aconsejable porque a lo mejor podria tener problemas y me podrian cerrar el chiringuito.</p>

<p>En el caso de que alguno de los que me lee lo tenga, que usos le dais al VPS de Oracle. Es para conseguir nuevas ideas.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://ugeek.github.io/blog/post/2023-04-10-neveridle-vps-de-oracle-nunca-inactivo.html" target="_blank">uGeek - NeverIdle</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2023-03-20-searxng-buscador-privado.html" target="_blank">Searxng</a></li>
  <li><a href="https://elblogdelazaro.org/posts/2020-02-03-monitorix-monitoriza-tu-sistema" target="_blank">El Blog de Lazaro - Monitorix</a></li>
  <li><a href="https://www.youtube.com/watch?v=MLjKbake8HM" target="_blank">PeladoNerd - DuckDns</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="VPS" /><category term="Docker" /><category term="VPS" /><summary type="html"><![CDATA[Hacia mucho tiempo (minimo 2 a√±os), que habia escuchado que Oracle te daba gratuitamente la posibilidad de tener un VPS para poderlo usar, eso si, con unas ciertas limitaciones: 1 vCPUs x86 - 1Gb Ram 4 vCPUs ARM - 24Gb Ram Asi que si anteriormente, en un RaspberryPi con 1Gb de Ram y una unica CPU podia tener amule, transmission las 24 horas del dia y el sistema iba sobrado, la elecci√≥n seria facil. La elecci√≥n era lo m√°s facil, lo dificil fue conseguir darse de alta. Y cuando digo dificil, me refiero a dificil.]]></summary></entry><entry><title type="html">Pc en la recamara (m910x)</title><link href="https://vctrsnts.github.io/thinkcenter/2023/09/11/substitutos-portatil.html" rel="alternate" type="text/html" title="Pc en la recamara (m910x)" /><published>2023-09-11T00:00:00+00:00</published><updated>2023-09-11T00:00:00+00:00</updated><id>https://vctrsnts.github.io/thinkcenter/2023/09/11/substitutos-portatil</id><content type="html" xml:base="https://vctrsnts.github.io/thinkcenter/2023/09/11/substitutos-portatil.html"><![CDATA[<p>Como ya decia en el anterior <a href="/thinkcenter/2023/08/01/de-nuevo-cambiando-servidor.html" target="_blank">articulo</a>, donde hablaba sobre el  nuevo cambio de servidor que habia hecho, el canal de <a href="https://homelabs.club" target="_blank">HomeLabs.Club</a> es una mala influencia, teneis que hacerme caso y ahora lo entendereis mejor.</p>

<!-- more -->

<p>Muchas de las personas, despu√©s de comprar el <strong>m910x</strong> le hacen un <strong>mod</strong>, que consiste en sobreescribir la BIOS del <strong>Thinkcenter</strong>. Con esta modificaci√≥n de la BIOS, a parte de permitir m√°s memoria RAM, tambien te permite a√±adir CPU‚Äôs de otras generaciones, para obtener m√°s informaci√≥n puedes visualizar este <a href="https://www.youtube.com/watch?v=ZDUWrwq1PXE" target="_blank">video</a> creado por uno de los miembros del canal.</p>

<p>Una vez que has realizado la modificaci√≥n, entre las diferentes opciones que tienes a tu disposici√≥n, despu√©s de modificar la BIOS, es poder usar un Xeon en el Thinkcenter. Si lo has leido bien, un <strong>Xeon</strong>. La unica pega es que lo compras a vendedores de China (Aliexpress), o tambien conocidos como los <strong>Xeon chinos</strong>, (muchos seguramente vendran de Datacenters que los han cambiado por nuevas versiones) pero aun as√≠, es un <strong><em>Xeon</em></strong>. Y es lo que hice, realize la modificaci√≥n de la BIOS y compre este <a href="https://es.aliexpress.com/item/1005003228035285.html" target="_blank">Xeon</a> que tiene <strong>6 nucleos</strong> y <strong>12 hilos</strong>. O sea una barbaridad.</p>

<p>Y ya que estabamos puestos, tambien me compre una nueva tarjeta grafica:</p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/P1000.jpg" alt="P1000.jpg" />
    </div>
    
</div>

<p>Si una tarjeta grafica <strong>Nvidia Quadro P1000</strong> y que junto a esta <a href="https://www.thingiverse.com/thing:6249227" target="_blank">tapa</a>, la versi√≥n que accepta un ventilador, tengo un Tiny que seguramente nunca me lo voy a acabar. Es resumen el Tiny que me espera en la recamara tiene las siguientes caracteristicas:</p>
<ul>
  <li>Thinkcenter m910x</li>
  <li>Intel Xeon E-2176M
    <ul>
      <li>Tener presente que el Xeon se calienta m√°s que una CPU normal y se aconseja poner metal liquido entre la CPU y el headpipe (necesariamente de cobre) porque el ventilador se pone en modo reactor cuando la CPU coge temperatura</li>
    </ul>
  </li>
  <li>32Gb de memoria RAM</li>
  <li>Tarjeta Grafica Quadro P1000
    <ul>
      <li>4 salidas disponibles</li>
      <li>Al poner este tipo de tarjetas, se anula la opci√≥n de poner un SSD y se tiene que ir por un nvme</li>
    </ul>
  </li>
</ul>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/m910x.jpg" alt="m910x.jpg" />
    </div>
    
</div>

<p>A y me olvido una cosa importante, es que para este tipo de modificaciones necesitas si o si un transformador de como minimo 90w, porque sino, puedes tener problemas.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.youtube.com/watch?v=ZDUWrwq1PXE" target="_blank">Mod Bios</a></li>
  <li><a href="https://es.aliexpress.com/item/1005003228035285.html" target="_blank">Intel Xeon E-2176M</a></li>
  <li><a href="https://podcastlinux.com/posts/podcastlinux/178-Podcast-Linux" target="_blank">Xeon y Kits Chinos</a></li>
  <li><a href="https://podcastlinux.com/posts/podcastlinux/179-Podcast-Linux" target="_blank">Xeon Chinos</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Thinkcenter" /><category term="Thinkcenter" /><summary type="html"><![CDATA[Como ya decia en el anterior articulo, donde hablaba sobre el nuevo cambio de servidor que habia hecho, el canal de HomeLabs.Club es una mala influencia, teneis que hacerme caso y ahora lo entendereis mejor.]]></summary></entry><entry><title type="html">De nuevo, cambiando de servidor local</title><link href="https://vctrsnts.github.io/thinkcenter/2023/08/01/de-nuevo-cambiando-servidor.html" rel="alternate" type="text/html" title="De nuevo, cambiando de servidor local" /><published>2023-08-01T00:00:00+00:00</published><updated>2023-08-01T00:00:00+00:00</updated><id>https://vctrsnts.github.io/thinkcenter/2023/08/01/de-nuevo-cambiando-servidor</id><content type="html" xml:base="https://vctrsnts.github.io/thinkcenter/2023/08/01/de-nuevo-cambiando-servidor.html"><![CDATA[<p>Tal como avise en este <a href="/thinkpads/2023/01/23/mis-nuevos-juguetes.html" target="_blank">articulo</a> o en este otro <a href="/debian%20gnu/linux/docker/2022/05/26/nuevo-servidor.html" target="_blank">articulo</a>, decia de que habia cambiado de servidor y que, a parte, tenia unos juguetes nuevos. Pero quereis un consejo, alejaros de los canales de telegram, en especial de <a href="https://homelabs.club" target="_blank">este</a>.</p>

<!-- more -->

<p>Que conste que estoy dentro del canal y es un grupo muy querido por mi, porque aconsejan, te ayudan en todo lo que pueden, pero son como el diablo, te llevan por el mal camino.</p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/lucifer.jpg" alt="lucifer.jpg" />
    </div>
    
</div>

<p>Porque cuando te meten el gusanito de las compras conjuntas, de los benecifios de los <strong><em>Thinkcenter</em></strong> de Lenovo (que son increbles) ya no quieres salir y, porque no, uno m√°s, si ocupan poco espaci√≥. Seguro que no se nota.</p>

<p>Al principio, empeze con mi antiguo <a href="/debian%20gnu/linux/docker/2022/05/26/nuevo-servidor.html" target="_blank">servidor</a> y el nuevo <a href="/hardware/raspberry%20pi/thinkcenter/2022/11/08/cambiando-mediacenter.html" target="_blank">mediacenter</a>, pero luego volvi a caer y me compre, fueron ellos, la culpa de es ellos y solamente de ellos:</p>
<ul>
  <li><strong>Un Thinkcenter m910q</strong></li>
  <li><strong>Un Thinkcenter m910x</strong>
    <ul>
      <li>Este Thinkcenter lleva una mejora con respecto a la versi√≥n m910q, se le puede poner una tarjeta <strong><em>pci</em></strong> que permiter a√±adir cualquier tarjeta (ethernet, grafica, etc‚Ä¶) con todas las posibilidades que ello te da.</li>
    </ul>
  </li>
</ul>

<p>Y ya me veis, a mi, con 2 ordenadores nuevos y a ver que hacemos con ellos.</p>

<p>Lo que si tenia claro, era usar el <strong>m910q</strong>, tiene m√°s posibilidades de ampliaci√≥n y de mejoras, usarlo como servidor local junto (insisto, son como el diablo) con un HDD de 18TB comprado en una de las compras conjuntas que se hacen a veces junto con otro m√°s que venia utilizando de antes (12Tb). Y de nuevo a reinstalar todo el servidor.</p>

<p>Esto no es una cosa que me preocupe mucho, porque como lo tengo todo en docker junto con sus correspondientes copias de seguridad, pues al dia siguiente de ponerme, ya tenia de nuevo, el servidor en funcionamiento al 100%.</p>

<p>El antiguo servidor (Dell) lo tengo en la banqueta, por si en algun momento lo necesito.</p>

<p>Seguramente, muchos os preguntareis que voy a hacer con el m910x que tambien me compre. Pues la idea que tengo con este es mucho m√°s heavy. Ni yo  mismo me lo habia planteado, mejor leer este <a href="/thinkpads/2023/01/23/mis-nuevos-juguetes.html" target="_blank">articulo</a> y entendereis por donde voy. Pero no es ni la mitad de lo que quiero hacer en realidad y que esta todo preparado para su proximo despliegue.</p>

<p>Pero eso lo explicare en otro articulo.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://homelabs.club" target="_blank">HomeLabs</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Thinkcenter" /><category term="Thinkcenter" /><summary type="html"><![CDATA[Tal como avise en este articulo o en este otro articulo, decia de que habia cambiado de servidor y que, a parte, tenia unos juguetes nuevos. Pero quereis un consejo, alejaros de los canales de telegram, en especial de este.]]></summary></entry><entry><title type="html">Como funciona esta web y su creaci√≥n</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/blog/docker/2023/08/01/como-funciona-esta-web.html" rel="alternate" type="text/html" title="Como funciona esta web y su creaci√≥n" /><published>2023-08-01T00:00:00+00:00</published><updated>2023-08-01T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/blog/docker/2023/08/01/como-funciona-esta-web</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/blog/docker/2023/08/01/como-funciona-esta-web.html"><![CDATA[<p>Despu√©s de leer el <a href="https://elblogdelazaro.org/posts/2023-05-08-como-publico-este-blog" target="_blank">articulo</a> que habia publicado <code class="language-plaintext highlighter-rouge">Lazaro</code> en su blog, pense, que porque no hacer lo mismo con el mio.</p>

<!-- more -->

<p>Eso si, tengo que indicar antes, que su articulo, es mucho mejor que el mio, porque el funcionamiento de mi pagina web es muy parecido a la suya, pero con alguna diferencias. La primera y m√°s importante, es que yo no uso <strong>Emacs</strong> ni <strong>Org-Mode</strong>.</p>

<p>Mi web es mucho m√°s simple, pero eso si, intentaremos seguir un poco la guia que usa <code class="language-plaintext highlighter-rouge">Lazaro</code>, para que sea facil seguir la mia.</p>

<h3 id="hardware">Hardware</h3>
<p>Es un poco subjetivo, en mi caso decir <code class="language-plaintext highlighter-rouge">Hardware</code>, porque en mi caso, todo depende de 2 ordenadores. El primero es mi portatil de uso normal (personal) que es desde donde escribo los articulos gracias a <code class="language-plaintext highlighter-rouge">markdown</code> y esto lo hago a traves de <a href="https://www.geany.org" target="_blank">Geany</a>, si ahora es cuando todos me vais a echar en cara que habia dicho en este <a href="/debian%20gnu/linux/neovim/2022/12/19/cambiando-de-editor-neovim.html" target="_blank">articulo</a> que estaba usando <code class="language-plaintext highlighter-rouge">nvim</code> y que esta decisi√≥n, habia venido despu√©s de ver el video de <a href="https://www.youtube.com/watch?v=SoDjVPr5_Go&amp;list=PL3lTiK2rXrUEL52KOZcTBsoLMndfFBV2Q" target="_blank">Atareao</a> donde explicaba que habia echo el cambio de <code class="language-plaintext highlighter-rouge">vim</code> a <code class="language-plaintext highlighter-rouge">neovim</code> para mejorar su productividad.</p>

<p>Y yo hice lo mismo, pero despu√©s de unos meses de usarlo, me he dado cuenta, que en mi caso, para el uso que le doy a <code class="language-plaintext highlighter-rouge">neovim</code>, que es solo para los articulos de mi blog, me resultaba todo m√°s lento y esto es porque aun me falta mucho por aprender de <code class="language-plaintext highlighter-rouge">vim</code> y de <code class="language-plaintext highlighter-rouge">neovim</code> y como no le voy a dar todo el uso que tendria que darle, pues la curva de aprendizaje seria muy lenta y sobretodo, tediosa porque como digo, no voy a sacarle todo el partido, por ese motivo, me he tirado a <code class="language-plaintext highlighter-rouge">Geany</code> que es lo m√°s parecido a <code class="language-plaintext highlighter-rouge">notepad++</code> que era el que usaba cuando estaba programando y con el que estuve m√°s comodo.</p>

<p>Pero no nos vayamos por las ramas y volvamos al <code class="language-plaintext highlighter-rouge">hardware</code>, como he dicho antes, para escribir los articulos uso mi portatil personal y que gracias a las ideas que saque del articulo de Lazaro, lo sincronizo con mi <a href="/thinkcenter/2023/08/01/de-nuevo-cambiando-servidor.html" target="_blank">servidor</a> que junto con el container, docker, de Jekyll veo el resultado de como quedara todo.</p>

<p>Una vez, hechas todas las comprobaciones y validaciones, uso otro script, tambien en bash, que actualiza mi arbol del projecto de <strong><em>GitHub</em></strong> que es donde tengo alojada mi web.</p>

<p>Como veis, uso 2 ordenadores, seguramente podria usar uso solo, pero de momento, estoy comodo con este funcionamiento.</p>

<h3 id="scripts">Scripts</h3>
<p>Como he dicho antes, tengo 2 scripts para la sincronizaci√≥n de los articulos con el servidor y luego otro para sincronizar con el arbol de GitHub.</p>

<p>El primero de estos scripts, el de sincronizar con el servidor funciona a traves <code class="language-plaintext highlighter-rouge">rsync</code> de la siguiente manera:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c">#!/bin/bash</span>
   rsync <span class="nt">-azvhP</span> <span class="nt">--rsh</span><span class="o">=</span><span class="s1">'ssh -pPORT'</span> <span class="nt">--exclude</span><span class="o">=</span><span class="s1">'draff'</span> DIRECTORI_ORIGEN USUARI@IP_SERVIDOR:/DIRECTORI_DESTI
</code></pre></div></div>

<p>Usando este script, hay que tener en cuentas unas cosas (como yo lo tengo configurado):</p>
<ul>
  <li><strong>PORT</strong>: Es el puerto que uses para comunicarte con el servidor, en mi caso, no uso el por defecto de <code class="language-plaintext highlighter-rouge">SSH</code></li>
  <li><strong>exclude</strong>: el / los directorios que quieres excluir a la hora de sincronizar los directorios.</li>
  <li><strong>DIRECTORI_ORIGEN</strong>: Es el directorio donde tenemos los ficheros <code class="language-plaintext highlighter-rouge">origen</code></li>
  <li><strong>USUARI@IP_SERVIDOR</strong>: El usuario y ip del servidor al que nos tenemos que conectar</li>
  <li><strong>DIRECTORI_DESTI</strong>: Directorio de destino, es el que <code class="language-plaintext highlighter-rouge">rsync</code> actualizara los archivos que esten en el directorio de origen.</li>
</ul>

<p>El segundo script, tambien en bash, sirve para sincronizar el projecto que tengo en local con el projecto que tengo en GitHub.</p>

<p>Lo primero que hay que tener en cuenta, es que para usarlo, lo que se tiene que hacer, tal como yo lo tengo, es que el servidor tenga las claves <code class="language-plaintext highlighter-rouge">SSH</code> dadas de alta en GitHub para que asi, no tengas que estar insertando todo el rato el usuario y el password.</p>

<p>Si esto ya lo tienes, ahora solo falta el script:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/bin/bash</span>

  <span class="c"># UpToGit 0.1</span>
  <span class="c"># Actualiza facilmente tu repositorio Git</span>
  <span class="c"># (CC) 2011 Alfonso Saavedra "Son Link"</span>
  <span class="c"># http://sonlinkblog.blogspot.com</span>
  <span class="c"># Bajo licencia GNU/GPL</span>

  <span class="c"># Modo de uso: copia o mueve este script a /usr/bin o /usr/local/bin y desde el directorio donde se encuentre la copia de un repo git, ejec√∫talo de esta manera:</span>
  <span class="c"># uptogit &lt;ficheros&gt;</span>

  <span class="c"># Comprobamos si el directorio en el que estamos es de un repositorio git</span>
  <span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-d</span> <span class="s1">'.git'</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
	  </span><span class="nb">echo</span> <span class="s1">'Esta carpeta no contiene un repositorio Git'</span>
	  <span class="nb">exit</span> <span class="nt">-1</span>
  <span class="k">fi</span>

  <span class="c"># Ahora comprobamos si se le paso algun parametro</span>
  <span class="k">if</span> <span class="o">[</span> <span class="nv">$# </span><span class="o">==</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
	  </span><span class="nb">echo</span> <span class="s2">"UpToGit: ¬°Error! No se le a pasado ning√∫n par√°metro"</span>
	  <span class="nb">echo</span> <span class="s2">"uptogit fichero1 fichero2 ... ficheroN"</span>
	  <span class="nb">exit</span> <span class="nt">-1</span>
  <span class="k">else</span>
	  <span class="c"># Recorremos los parametros para comprobar si son ficheros o directorios</span>
	  <span class="k">for </span>file <span class="k">in</span> <span class="nv">$*</span><span class="p">;</span> <span class="k">do
		  if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-e</span> <span class="nv">$file</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
			  </span><span class="nb">echo</span> <span class="s2">"UpToGit: El archivo o directorio </span><span class="nv">$file</span><span class="s2"> no existe"</span>
			  <span class="nb">exit</span> <span class="nt">-1</span>
		  <span class="k">fi
	  done</span>
	
	  <span class="c"># Si llegamos hasta aqu√≠, indicamos a Git los archivos a subir</span>
	  git add <span class="nv">$*</span>
	
	  <span class="c"># Esto nos pedira el mensaje del commit</span>
	  <span class="nb">echo</span> <span class="s2">"Introduce el mensaje del commit:"</span>
	  <span class="nb">read </span>TXT
	  git commit <span class="nt">-m</span> <span class="s2">"</span><span class="nv">$TXT</span><span class="s2">"</span>

	  <span class="c"># Y terminamos subiendo los archivos</span>
	  git push <span class="nt">--force</span> origin master

  <span class="k">fi</span>
</code></pre></div></div>
<p>Este script, tal como he dicho antes, actualiza nuestro repositorio de GitHub. Para su uso se ejecuta de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">  usuari@debian:~$</span>sh up2Git.sh arxiu1, arxiu2, etc...
</code></pre></div></div>

<p>Donde:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">arxiu1, arxiu2, etc...</code>: Son los archivos que quieres sincronizar. Si pones el <code class="language-plaintext highlighter-rouge">.</code> estas indicando que quieres sincronizar todo el directorio.</li>
  <li><code class="language-plaintext highlighter-rouge">Introduce el mensaje del commit</code>: Nos esta pindiendo un mensaje para describir la acci√≥n que vamos a llevar a cabo (yo lo entiendo asi).</li>
</ul>

<p>Y con esto, ya tenemos actualizado nuestro repositorio con GitHub.</p>

<h3 id="publicaci√≥n">Publicaci√≥n</h3>
<p>Para la publicaci√≥n, se puede decir, que ya se ha hecho con el segundo de los scripts que antes he puesto.</p>

<p>Lo unico que falta, es otro script, esta vez hecho en <code class="language-plaintext highlighter-rouge">python</code>, de factoria tambien de <a href="https://elblogdelazaro.org/posts/2021-08-16-bot-en-python-para-publicar-un-feed-de-forma-aleatorios-en-twitter-y-mastodom" target="_blank">Lazaro</a> que lo que hace es crear un toot en <strong>Mastodon</strong> con el ultimo articulo publicado en nuestro blog.</p>

<p>En el articulo, puedes ver como se hace tanto para <code class="language-plaintext highlighter-rouge">Twitter</code> como para <code class="language-plaintext highlighter-rouge">Mastodon</code>, pero en mi caso yo solo uso <code class="language-plaintext highlighter-rouge">Mastodon</code>.</p>

<p>El script es el siguiente:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">#!/usr/bin/env python
</span>  <span class="c1"># -*- coding: utf-8 -*-
</span>
  <span class="c1"># script que lee el feed rss de un blog y publica el ultimo articulo creado en Mastodon
</span>
  <span class="c1"># Tienes que tener instaladas las librerias feedparser, Twython, Mastodon
</span>
  <span class="c1"># Autor: Carlos M.
</span>  <span class="c1"># https://elblogdelazaro.org
</span>
  <span class="c1"># Llama los modulos Python
</span>  <span class="kn">import</span> <span class="n">feedparser</span>
  <span class="kn">from</span> <span class="n">twython</span> <span class="kn">import</span> <span class="n">Twython</span>
  <span class="kn">from</span> <span class="n">mastodon</span> <span class="kn">import</span> <span class="n">Mastodon</span>

  <span class="c1"># Llamando a las llaves del Diccionario (Twitter)
</span>  <span class="n">CONSUMER_KEY</span> <span class="o">=</span> <span class="sh">"</span><span class="s">xxxxxxxxx</span><span class="sh">"</span>
  <span class="n">CONSUMER_SECRET</span> <span class="o">=</span> <span class="sh">"</span><span class="s">xxxxxxxxx</span><span class="sh">"</span>
  <span class="n">ACCESS_KEY</span> <span class="o">=</span> <span class="sh">"</span><span class="s">xxxxxxxxx</span><span class="sh">"</span>
  <span class="n">ACCESS_SECRET</span> <span class="o">=</span><span class="sh">"</span><span class="s">xxxxxxxxx</span><span class="sh">"</span>

  <span class="c1"># Seleccionamos el Feed
</span>  <span class="n">feed</span> <span class="o">=</span> <span class="sh">'</span><span class="s">ADRE√áA DEL FEED</span><span class="sh">'</span>

  <span class="c1"># Parseamos el Feed
</span>  <span class="n">d</span> <span class="o">=</span> <span class="n">feedparser</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">feed</span><span class="p">)</span>

  <span class="c1"># Inicializa la API de Twitter, escribe el nuevo estado y salimos d['entries'][0] es el √∫ltimo articulo publicado
</span>  <span class="n">status_text</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="sh">'</span><span class="s">title</span><span class="sh">'</span><span class="p">]</span> <span class="o">+</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span> <span class="o">+</span> <span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="sh">'</span><span class="s">link</span><span class="sh">'</span><span class="p">]</span>
  <span class="n">articulo</span> <span class="o">=</span> <span class="p">(</span><span class="sh">"</span><span class="s">Ultimo articulo publicado:</span><span class="sh">"</span> <span class="o">+</span><span class="sh">'</span><span class="se">\n</span><span class="sh">'</span> <span class="o">+</span> <span class="n">status_text</span><span class="p">)</span>

  <span class="c1"># Publica en mastodon
</span>
  <span class="c1"># Token y url de la Instancia
</span>  <span class="n">mastodon</span> <span class="o">=</span> <span class="nc">Mastodon</span><span class="p">(</span>
    <span class="n">access_token</span> <span class="o">=</span> <span class="sh">'</span><span class="s">TOKEN_MASTODON</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">api_base_url</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://URL_TU_MASTODON/</span><span class="sh">'</span>
  <span class="p">)</span>

  <span class="n">mastodon</span><span class="p">.</span><span class="nf">status_post</span><span class="p">(</span><span class="n">articulo</span><span class="p">)</span>
</code></pre></div></div>

<p>Y con esto, esta explicado todo el funcionamiento desde la creaci√≥n del articulo hasta la publicitaci√≥n de dicho articulo en Mastodon. Seguramente, el articulo de <code class="language-plaintext highlighter-rouge">Lazaro</code> le da mil vueltas al mio, pero‚Ä¶</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elblogdelazaro.org/posts/2023-05-08-como-publico-este-blog" target="_blank">Como publico este blog - el blob de lazaro</a></li>
  <li><a href="https://www.geany.org" target="_blank">Geany</a></li>
  <li><a href="http://sonlinkblog.blogspot.com" target="_blank">Actualiza facilmente tu repositorio de GitHub</a></li>
  <li><a href="https://elblogdelazaro.org/posts/2021-08-16-bot-en-python-para-publicar-un-feed-de-forma-aleatorios-en-twitter-y-mastodom" target="_blank">Script para publicar el ultimo articulo en Mastodon</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Blog" /><category term="Docker" /><category term="Debian GNU/Linux" /><category term="Blog" /><category term="Docker" /><summary type="html"><![CDATA[Despu√©s de leer el articulo que habia publicado Lazaro en su blog, pense, que porque no hacer lo mismo con el mio.]]></summary></entry><entry><title type="html">Crear RSS de los podcast que sigo</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/docker/python/2023/07/23/crear-rss-podcast.html" rel="alternate" type="text/html" title="Crear RSS de los podcast que sigo" /><published>2023-07-23T00:00:00+00:00</published><updated>2023-07-23T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/docker/python/2023/07/23/crear-rss-podcast</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/docker/python/2023/07/23/crear-rss-podcast.html"><![CDATA[<p>No se vosotros, pero no os habeis fijado que estos ultimos meses ha habido un auge con respecto a los podcast? No se si es porque la calidad ha subido o porque hay m√°s, pero‚Ä¶</p>

<!-- more -->

<p>Yo siempre he escuchado un programa de radio de <strong><em>Catalunya Radio</em></strong> que trata sobre la historia en general y como soy un entusiasta de la historia, pues este programa no podia faltar, pero claro, me lo programan a unas horas, que es imposible seguirlo. Asi que decidi mirar si tenian la opcion de descargar los programas en formato podcast, y resulto que si era posible.</p>

<p>Asi mismo, tambien empece a seguir a unos podcaster que hablan sobre tecnologia (<a href="https://ugeek.github.io" target="_blank">uGeek</a>, <a href="https://atareao.es" target="_blank">Atareao</a>, <a href="https://papafriki.gitlab.io/podcast" target="_blank">PapaFriki</a>, etc‚Ä¶) y me he aficionado a ellos, asi que tambien los puse en la lista de seguimiento. Pero claro, yo los puedo escuchar cuando puedo y este a√±o (2023) ha sido un poco dificil, porque he tenido un a√±o muy complicado.</p>

<p>Entonces empece a investigar la manera de descargar los podcast automaticamente y si que existe, m√°s informaci√≥n en este <a href="/docker/raspberry%20pi%20os/2021/05/30/flexget-podcast.html" target="_blank">articulo</a>. Y que adem√°s, tambien se puede hacer lo mismo con los otros podcast, mientras tengan un fichero <strong><em>RSS</em></strong>, se puede descargar. Asi que lo m√°s importante, conseguir los podcast ya estaba echo. Pero claro, ahora faltaba la parte de poderlos escuchar.</p>

<blockquote>
  <p>‚ö†Ô∏è Antes un peque√±o inciso sobre mi manera de tratar los ficheros de podcast. Al principio, los podcast los trataba como si fueran ficheros de musica normales y corrientes, pero siempre intentaba tenerlos separados de la musica, en un directorio los podcast y en otro la musica, pero a la hora de escuchar, siempre acababan juntandose en la aplicaci√≥n del movil que usaba (<strong>D-Sub</strong>, <strong>Tempo</strong>, etc‚Ä¶), asi que me puse a investigar y gracias a unos de los podcast, valga la redundancia, de <a href="https://ugeek.github.io/post/2022-12-07-charla-con-atareao-sobre-servicios-y-mucho-mas.html" target="_blank">uGeek</a>, donde explicaba que el estaba intentando crear su propio feed de los podcast que seguia, para que asi, a traves del movil o cualquier otra aplicacion, poderlos escuchar cuando fuera posible.</p>
</blockquote>

<p>Y esa idea me gusto mucho y me puse a investigar, porque los conocimientos que tengo yo de bash son muy pocos y llegar al nivel para hacer lo que estaba explicando <strong>uGeek</strong> seria muy complicado.</p>

<p>Despues de mucho buscar y probar, encontre este <a href="https://github.com/amsehili/genRSS" target="_blank">proyecto</a> en github, que a traves de un fichero python, se crea automaticament el fichero RSS del directorio que tu le indicabas junto con el titulo y descripci√≥n y despu√©s, este mismo fichero RSS, lo puedes exponer a internet, para que cualquier aplicacion lectora de RSS (sobre todo las aplicaciones de podcast que funcionan a traves de ellos) pudiera tener acceso a estos podcast.</p>

<p>Aqui pongo un ejemplo de como uso yo este fichero:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span>python3 /home/usuari/genRSS/genRSS.py <span class="nt">-e</span> mp3 <span class="nt">-d</span> directorio_podcast <span class="nt">-H</span> http://ip_servidor:puerto <span class="nt">-i</span> https://imagen_de_la_caratula.jpg <span class="nt">-t</span> <span class="s2">"Titulo_del_Podcast"</span> <span class="nt">-p</span> <span class="s2">"Descripci√≥n del Podcast"</span> <span class="nt">-C</span> <span class="nt">-r</span> <span class="nt">-o</span> fichero.rss.rss
</code></pre></div></div>

<p>Hay que tener un par de cosas a la hora de usar este fichero:</p>
<ul>
  <li>Las caratulas de los podcast tiene que ser externa. No puedes tener la imagen en el servidor. Al menos en mi caso, yo no he conseguido que funcionen con imagenes de dentro del servidor.</li>
  <li>Yo tengo varias lineas (una por cada podcast que sigo) y asi me generar un RSS, y todo lo tengo en un fichero bash que cada dia se ejecuta para actualizar los RSS con los nuevos podcast que se han descargado.</li>
</ul>

<p>Ahora, solo faltaba elegir un buen podcaster, creo que se llaman asi, para poder escuchar mis podcast, y me decidi por <strong><em>AntennaPod</em></strong> donde se podia a√±adir los RSS creados por mi mismo y poderlos escuchar.</p>

<p>Tengo que a√±adir, que para tener acceso a los ficheros RSS que habia creado en mi servidor, tenia que tener acceso a ellos y, en mi caso, esto lo hacia a traves de <strong><em>WEBDAV</em></strong> (como contenedor de docker), si quereis saber como se puede configurar, <strong><em>uGeek</em></strong> tiener un buen <a href="https://ugeek.github.io/blog/post/2019-10-22-docker-servidor-webdav.html" target="_blank">articulo</a> donde explica como se hace y como hacerlo, especificamente en docker.</p>

<p>Y tengo que decir que funcionaba todo perfectamente, pero eso si, abierto al peligroso mundo de internet y m√°s, despu√©s de escuchar este <a href="https://ugeek.github.io/post/2023-07-31-seguridad-en-mis-servicios.html" target="_blank">episodio</a> de <strong>uGeek</strong> que habla sobre la seguridad de nuestros servidores abiertos al mundo y se te ponen los pelos de punta.</p>

<p>La soluci√≥n que daba, era usar una VPN (wireguard que ya tengo montada), en este <a href="https://ugeek.github.io/blog/post/2021-05-28-el-modo-mas-facil-de-instalar-administrar-wireguard.html" target="_blank">articulo</a> podeis encontrar como se puede hacer y asi poder conectar a nuestro servidor y simular como si estuvieramos en nuestra propia red pero sin estarlo.</p>

<p>Y tengo que decir que, ahora mismo, es como lo tengo funcionando y funciona a la perfecci√≥n. Sin ningun corte ni nada, todo perfecto. Y para m√°s inri, tambien tengo la musica en mi servidor y accedo a ella a traves de la VPN y sin problemas.</p>

<p>O sea, todo perfecto y funcionando a las mil maravillas, pero como ya se sabe, nunca se puede decir que todo esta perfecto, porque no es asi. Ahora estoy buscando informaci√≥n de como unificar las 2 aplicaciones (AntennaPOD y Tempo) para asi, poder escuchar todo (aunque sea por separado) pero en una sola aplicacion.</p>

<p>Asi que ya os explicare como acaba la cosa.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://ugeek.github.io/blog/post/2019-10-22-docker-servidor-webdav.html" target="_blank">WebDav - uGeek</a></li>
  <li><a href="https://ugeek.github.io/post/2023-07-31-seguridad-en-mis-servicios.html" target="_blank">Seguridad en mis servicios - uGeek</a></li>
  <li><a href="https://ugeek.github.io/post/2022-12-07-charla-con-atareao-sobre-servicios-y-mucho-mas.html" target="_blank">Charla con Atareao y algo m√°s - uGeek</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2021-05-28-el-modo-mas-facil-de-instalar-administrar-wireguard.html" target="_blank">El modo m√°s facil de instalar y administrar Wireguard - uGeek</a></li>
  <li><a href="https://github.com/amsehili/genRSS" target="_blank">genRSS</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Docker" /><category term="Python" /><category term="Debian GNU/Linux" /><category term="Docker" /><category term="Python" /><summary type="html"><![CDATA[No se vosotros, pero no os habeis fijado que estos ultimos meses ha habido un auge con respecto a los podcast? No se si es porque la calidad ha subido o porque hay m√°s, pero‚Ä¶]]></summary></entry><entry><title type="html">Recuperando Grub</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2023/05/05/recuperando-grub.html" rel="alternate" type="text/html" title="Recuperando Grub" /><published>2023-05-05T00:00:00+00:00</published><updated>2023-05-05T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2023/05/05/recuperando-grub</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2023/05/05/recuperando-grub.html"><![CDATA[<p>No se si os ha pasado muchas veces eso de perder el arranque de GNU/Linux <strong><em>GRUB</em></strong>, pero a mi, me esta pasando muchas veces ultimamente y no se si es porque tengo mala suerte o porque tengo mal configurado el inicio entre Linux y Windows, asi que al final, me he tenido que buscar la vida, para saber como se puede solucionar, porque sino, tengo que volver a reinstalarlo todo y ahora que el sistema lo tengo como yo quiero, pues ‚Ä¶</p>

<!-- more -->

<p>Las instrucciones las uso, desde <strong><em>Grub Rescue</em></strong> que es donde siempre acabo si algo me falla en el inicio del sistema y hago lo siguiente. Pero antes, mejor explicar como tengo mi sistema de archivos, para que se vea, el porque de algunas instrucciones:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">sda1 --&gt;</span><span class="w"> </span>partici√≥n EFI
<span class="gp">sda2 --&gt;</span><span class="w"> </span>partici√≥n del sistema Linux
<span class="gp">sda3 --&gt;</span><span class="w"> </span>particion HOME
<span class="gp">sda5 --&gt;</span><span class="w"> </span>partici√≥n Windows
</code></pre></div></div>
<p>Pues eso, que a continuaci√≥n pongo las instrucciones que yo uso en mi caso, para poder recuperar el sistema (espero que os puedan servir de ayuda):</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>uso gpt2, porque es donde tengo la partici√≥n del sistema de Linux
<span class="gp">grub:&gt;</span><span class="w"> </span><span class="nb">set </span><span class="nv">root</span><span class="o">=(</span>hd0,gpt2<span class="o">)</span>
<span class="gp">#</span><span class="w"> </span>ahora se indica donde se encuentra la imagen de Linux y donde la puede encontrar
<span class="gp">grub:&gt;</span><span class="w"> </span>linux /vmlinuz <span class="nv">root</span><span class="o">=</span>/dev/sda2
<span class="gp">#</span><span class="w"> </span>ahora se indica donde se encuentra la imagen de initrd
<span class="gp">grub:&gt;</span><span class="w"> </span>initrd /initrd.img
<span class="gp">#</span><span class="w"> </span>ahora iniciamos el sistema
<span class="gp">grub:&gt;</span><span class="w"> </span>boot
</code></pre></div></div>

<p>Una vez iniciado el sistema, solamente tenemos que acceder a la consola y volver a reconfigurar <strong><em>grub</em></strong> de la siguiente manera (en este caso lo hacemos suponiendo que tienes <strong><em>EFI</em></strong>):</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="nb">sudo </span>dpkg-reconfigure grub-efi-amd64
</code></pre></div></div>

<p>Cuando haces esto, hay que tener en cuenta, que como en mi caso, si tienes otro Sistema Operativo instalado, y quieres que <strong><em>GRUB</em></strong> te lo detecte, tienes que tener esta opci√≥n desactivada:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="nb">sudo </span>vi /etc/default/grub
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">GRUB_DISABLE_OS_PROBER</span><span class="o">=</span><span class="nb">false</span>
</code></pre></div></div>

<p>Con esta opci√≥n obligas a <strong><em>grub</em></strong> a detectar otros SO y me ahorre, volver a reinstalar todo mi sistema.</p>

<p>A veces puede pasar que no funcione. Me ha pasado alguna vez, no se el motivo de esto, pero entonces he ejecutado las siguientes instrucciones y he podido resolver el problema:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">usuari@debian:~sudo grub-install
usuari@debian:~sudo update-grub
</span></code></pre></div></div>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.baeldung.com/linux/grub-efi-reinstall">How to Re-Install GRUB EFI</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[No se si os ha pasado muchas veces eso de perder el arranque de GNU/Linux GRUB, pero a mi, me esta pasando muchas veces ultimamente y no se si es porque tengo mala suerte o porque tengo mal configurado el inicio entre Linux y Windows, asi que al final, me he tenido que buscar la vida, para saber como se puede solucionar, porque sino, tengo que volver a reinstalarlo todo y ahora que el sistema lo tengo como yo quiero, pues ‚Ä¶]]></summary></entry><entry><title type="html">Donde digo dije, digo Diego</title><link href="https://vctrsnts.github.io/docker/2023/04/29/donde-dije-digo-digo-diego.html" rel="alternate" type="text/html" title="Donde digo dije, digo Diego" /><published>2023-04-29T00:00:00+00:00</published><updated>2023-04-29T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/2023/04/29/donde-dije-digo-digo-diego</id><content type="html" xml:base="https://vctrsnts.github.io/docker/2023/04/29/donde-dije-digo-digo-diego.html"><![CDATA[<p>Mucha gente pensara que me he vuelto loco al poner este titulo a este articulo y m√°s siendo un blog de tecnologia, pero cuando llegueis al final lo entendereis.</p>

<!-- more -->

<p>Todo empieza, si leeis este <a href="/docker/2023/02/19/actualizacion-watchtower.html" target="_blank">articulo</a> donde comentaba que habia probado <strong>watchtower</strong> para mantenerlos actualizados sin mi supervisi√≥n y que solo me avisara cuando se hubiera actualizado uno.</p>

<p>Tambi√©n comentaba como que resultada un poco lioso su configuraci√≥n (fichero docker) y que volvia a <strong>diun</strong> para luego volver a <strong>watchtower</strong> para quedarme en el.</p>

<p>Pues ahora resulta, por eso el titulo de este articulo, donde dije <strong>watchtower</strong> ahora digo <strong>diun</strong>. Y el motivo es muy simple.</p>

<p>Tan simple que fue, porque despu√©s una actualizaci√≥n, algunos de los <code class="language-plaintext highlighter-rouge">dockers/containers</code> que uso dejaron de funcionar. Los contenedores tenian errores, que como se actualizaron sin mi supervisi√≥n, dejaron de funcionar. Y menos mal que lo descubri pronto, porque sino, no se lo que hubiera pasado. Se que estoy exagerando un poco, mi servidor no es la NASA, pero bueno, es mi servidor.</p>

<p>Y eso que ya estaba prevenido con ello, porque todos los articulos que lei sobre <strong>watchtower</strong> te avisan que hay que tener un control sobre las actualizaciones, porque pueden ocasionar un desastre y sino estas atento no te daras cuenta hasta que sea muy tarde.</p>

<p>Descubri que la ultima actualizaci√≥n no habia ido correctamente, porque normalmente recibo mensajes de las acciones que hace el docker y ese dia no recibi ninguna alerta a traves de Telegram, y aqui es donde me puse a investigar, para descubrir porque no estaba recibiendo las alertas y todo era culpa de que el container no estaba funcionando correctamente, este tenia un error que hacia que se reiniciase todo el rato con todo lo que ello provoca. Y ya me veis anulando la actualizaci√≥n y volviendo a la versi√≥n anterior.</p>

<p>Despu√©s de esta mala experiencia, aunque ya la sabia, porque el podcaster <strong>Atareao</strong> la habia comentado en su articulo donde el explicaba que estaba usando <strong>watchtower</strong>, pero yo pensaba, iluso de mi, que para los dockers tan simples que uso, no tendria que pasar nada. Pues no veas si no paso.</p>

<p>Me puse a buscar a ver que decia la gente cual era la mejor opci√≥n para substituir a <strong>watchtower</strong>. Muchos decian que el mejor era <strong>diun</strong> y si adem√°s, los creadores de muchas de las imagenes que uso <strong>linuxservers</strong> te aconsejan no usar <strong>watchtower</strong> sino que usar <strong>diun</strong>, pues me fui a por ello.</p>

<p>La instalaci√≥n es muy simple, como siempre en docker:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">diun</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">crazymax/diun:latest</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">diun</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
    <span class="na">hostname</span><span class="pi">:</span> <span class="s">nomDelTeuServidor</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">${STORAGE}/config/diun:/data</span>
      <span class="c1"># FITXER ON ESTA LA CONFIGURACI√ì AMB TELEGRAM</span>
      <span class="c1"># I ELS MISSATGES D'ALERTA QUE ENVIA QUANT TE DOCKER PER ACTUALIZAR</span>
      <span class="pi">-</span> <span class="s">${STORAGE}/config/diun/diun.yml:/diun.yml:ro</span>
      <span class="pi">-</span> <span class="s">/var/run/docker.sock:/var/run/docker.sock:ro</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">TZ=Europe/Madrid"</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">LOG_LEVEL=info"</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">LOG_JSON=false"</span>
</code></pre></div></div>

<p>El problema viene luego en la configuraci√≥n de las alertas, que en mi caso las recibo a traves de <strong>Telegram</strong> aunque tienes m√°s opciones donde recibirlas, no es complicado si sigues el manual que tienen para ello, tienes que configurar las alertas que vas a recibir (que esta todo en un fichero <strong>yaml</strong>):</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1"># LA BBDD DE DIUN</span>
  <span class="na">db</span><span class="pi">:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">diun.db</span>
  <span class="c1"># EL CRON DE DIUN</span>
  <span class="na">watch</span><span class="pi">:</span>
    <span class="na">workers</span><span class="pi">:</span> <span class="m">20</span>
<span class="c1">#    schedule: "*/1 * * * *"</span>
    <span class="na">schedule</span><span class="pi">:</span> <span class="s2">"</span><span class="s">@weekly"</span>
    <span class="na">firstCheckNotif</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="c1"># QUE QUIN SERVIDOR (ES POT DIR AIXI) OBTING ELS DOCKERS</span>
  <span class="na">providers</span><span class="pi">:</span>
    <span class="na">docker</span><span class="pi">:</span>
      <span class="na">watchByDefault</span><span class="pi">:</span> <span class="kc">false</span>
      <span class="na">watchStopped</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="c1"># CONFIGURACIO DE TELEGRAM</span>
  <span class="c1"># I DEL MISSATGE QUE S'ENVIA</span>
  <span class="na">notif</span><span class="pi">:</span>
    <span class="na">telegram</span><span class="pi">:</span>
      <span class="na">token</span><span class="pi">:</span> <span class="s">TOKEN_TELEGRAM</span>
      <span class="na">chatIDs</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">ID_DEL_CHAT_DE_TELEGRAM</span>
      <span class="na">templateBody</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="s"># AQUI TEORICAMENT HAURIA D'ENVIAR EL LOGO DE DIUN, PERO NO HO FA</span>
        <span class="s">[Image]()</span>
        <span class="s"># AQUI ES ON TINC EL PROBLEMA I DE MOMENT NO HO POSSO PERQUE NO PORTI A PROBLEMES</span>
</code></pre></div></div>
<p>Con esto, solamente te falta hacer un:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~#</span><span class="w"> </span>docker-compose up <span class="nt">-d</span> diun
</code></pre></div></div>

<p>Y ya lo tenemos todo funcionando.</p>

<p>Esto no es del todo cierto, porque aun falta por indicar/se√±alar que contenedores quieres que <strong>diun</strong> controle/vigile por si ha habido actualizaci√≥n y esto se hace a√±adiendo el siguiente codigo en tu <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>.</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">labels</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">diun.enable=true</span>
</code></pre></div></div>

<p>Aunque en mi caso, no es asi. Ahora mismo lo tengo a un 80% de funcionamiento, porque segun el manual, por lo que yo he podido entender, puedes enviar imagenes, para que las alertas sean m√°s amigables y te indiquen de que container es.</p>

<p>Pero parece ser que esto no funciona del todo correctamente, aunque se que es posible enviar imagenes a Telegram, porque en las notificaciones que tengo en <a href="/docker/raspberry%20pi%20os/2021/05/30/flexget-podcast.html" target="_blank">flexget</a> lo tengo puesto y las recibo sin ningun problema, pero en cambio con <strong>diun</strong> no funciona. Tendre que seguir investigando el motivo por el que no funciona.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://atareao.es/podcast/como-actualizar-imagenes-docker-automaticamente" target="_blank">Como actualizar imagenes docker automaticamente</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Docker" /><summary type="html"><![CDATA[Mucha gente pensara que me he vuelto loco al poner este titulo a este articulo y m√°s siendo un blog de tecnologia, pero cuando llegueis al final lo entendereis.]]></summary></entry><entry><title type="html">Cambiando watchtower por diun y vuelta a watchtower</title><link href="https://vctrsnts.github.io/docker/2023/02/19/actualizacion-watchtower.html" rel="alternate" type="text/html" title="Cambiando watchtower por diun y vuelta a watchtower" /><published>2023-02-19T00:00:00+00:00</published><updated>2023-02-19T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/2023/02/19/actualizacion-watchtower</id><content type="html" xml:base="https://vctrsnts.github.io/docker/2023/02/19/actualizacion-watchtower.html"><![CDATA[<p>Tal como habia indicado en este <a href="/debian%20gnu/linux/docker/2023/01/25/usando-watchtower.html" target="_blank">post</a>, explica como empece usar <strong>watchtower</strong> pero con resultados muy extra√±os.</p>

<!-- more -->

<p>En principio, parecia que funciona la primera despu√©s de indicarle que trabajara en el <strong>modo bridge</strong> con respecto a la red, o lo que es lo mismo, que se conecte a la red donde estan el resto de contenedores.</p>

<p>Pero despu√©s de esa primera vez, no habia vuelto a funcionar de ninguna manera.</p>

<p>Me puse a investigar a ver que era lo que estaba pasando, porque si revisaba el <code class="language-plaintext highlighter-rouge">log</code> de watchtower veia todo el rato que <em>escaneados=0; actualizados=0; fallos=0</em> o sea, que no encontraba ning√∫n contenedor y eso que estaba en la misma red.</p>

<p>Pregunte en el canal de <strong>atareao.es</strong> a ver si me podian dar alguna pista, pero no sabian de donde podia venir el problema.</p>

<p>Al final, cansado, desisti de usarlo porque no conseguia mi proposito y estaba gastando recursos del servidor inutilmente.</p>

<p>Asi mismo, vi, que en <a href="https://hub.docker.com" target="_blank">docker-hub</a> te aconsejaban que mejor que <strong>watchtower</strong> era usar <strong>diun</strong>. Y me puse con ello.</p>

<p>Despu√©s de la configuraci√≥n y lanzamiento parecia que me encontraba los contenedores y que buscaba (hay que matizar, que <strong>diun</strong> solamente te informa de los contenedores que tendrias que actualizar, no actualiza).</p>

<p>Todo parecia que iba bien, y lo unico que me faltaba era la parte de la notificaci√≥n. Lo configure a traves de <strong>telegram</strong>, pero sin ningun resultado. Y eso que habia encontrado sitios donde te indicaban como hacerlo.</p>

<p>En todos los sitios, te aconsejaban que lo mejor, era tener un fichero dentro del directorio de configuraci√≥n de <strong>diun</strong> con todas las opciones importates incluido el <em>token</em> y el <em>chat_id</em> de tu canal de telegram. Pero en mi caso, sin ning√∫n resultado.</p>

<p>Ya no sabia que hacer, <strong>watchtower</strong> que no me funciona y ahora <strong>diun</strong> tampoco. O soy yo que tengo un problema o mi servidor tiene el problema. Y vuelta a empezar.</p>

<p>Hasta que he encontrado una pagina <a href="https://www.marcodaleo.com/posts/watchtower-telegram" target="_blank">web</a> con una configuraci√≥n de <strong>watchtower</strong> que tenia buena pinta y la probe. Que podia salir mal:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">watchtower</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">containrrr/watchtower</span>
    <span class="na">hostname</span><span class="pi">:</span> <span class="s">SERVER_NAME</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">watchtower</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s1">'</span><span class="s">/var/run/docker.sock:/var/run/docker.sock'</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">TZ=Europe/Andorra</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_LIFECYCLE_HOOKS=True</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_NOTIFICATIONS=shoutrrr</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_NOTIFICATION_URL=telegram://BOT_TOKEN@telegram/?channels=CHAT_ID</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_DEBUG=true</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_CLEANUP=true</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_SCHEDULE=@daily</span>
</code></pre></div></div>

<p>Entonces me he llevado una sorpresa, porque todo empezo a funcionar correctamente. Me actualizo todos los contenedores que tenian el <em>label</em> de <strong>watchtower</strong> activado.</p>

<p>Y volvemos a estar como en el principio, parece que todo funciona correctamente, pero esta vez, tiene mejor pinta.</p>

<p>Como siempre, seguiremos investigando a ver si esta vez es la definitiva.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.marcodaleo.com/posts/watchtower-telegram" target="_blank">Watchtower and Telegram notifications</a></li>
  <li><a href="https://razinj.dev/docker-images-and-containers-update-notifications" target="_blank">Get Docker Images and Containers Updates Notifications</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Docker" /><summary type="html"><![CDATA[Tal como habia indicado en este post, explica como empece usar watchtower pero con resultados muy extra√±os.]]></summary></entry><entry><title type="html">Mastodon, Jekyll y Github. Una combinaci√≥n perfecta.</title><link href="https://vctrsnts.github.io/blog/docker/2023/02/13/jekyll-muy-configurable.html" rel="alternate" type="text/html" title="Mastodon, Jekyll y Github. Una combinaci√≥n perfecta." /><published>2023-02-13T00:00:00+00:00</published><updated>2023-02-13T00:00:00+00:00</updated><id>https://vctrsnts.github.io/blog/docker/2023/02/13/jekyll-muy-configurable</id><content type="html" xml:base="https://vctrsnts.github.io/blog/docker/2023/02/13/jekyll-muy-configurable.html"><![CDATA[<p>Desde que di el salto de <strong>wordpress</strong> a <strong>Github</strong>, lo m√°s logico, si mi profesion, pasion hace referencia a la tecnologia y que tambien influyo que <strong>wordpress</strong> empezaba a tener muchos problemas con la creaci√≥n y gesti√≥n del blog.</p>

<!--more--->

<p>Todo empezo a mediados del 2021 cuando cada vez tenia m√°s problemas a la hora de crear articulos y subirlos a <strong>wordpress</strong>, aunque ahora le estoy dado otro <a href="https://vsantos.wordpress.com" target="_blank">uso</a>, asi que me puse a investigar y la mayoria de personas a las que sigo, lo tienen alojado en <strong>Github</strong> o <strong>Gitlab</strong>.</p>

<p>Investigue que diferencia habia entre los dos, pero no encontre ninguna a nivel de uso personal, asi que lance la moneda al aire y salio <strong>Github</strong>, podria haber salido <strong>Gitlab</strong>, y me puse a ello. Despu√©s de investigar me cree mi repositorio.</p>

<p>Al principio me costo mucho entender como funciona <strong>Github</strong>, para que os hagais una idea, me las tuve y desee para crear mi primer repositorio, ha sido un pasito hacia adelante y dos hacia atras, si lo reconozco, no he leido la documentaci√≥n del funcionamiento y uso de <strong>Github</strong>, pero bueno, creo que asi he aprendido mucho m√°s. Porque he tenido que aprender a lo bestia y descubrir las cosas que te puede ofrecer <strong>Github</strong> poco a poco. Y no me ha parecido mal.</p>

<p>Mis progresos han sido lentos, porque todo lo que hacia era la primera vez, e iba m√°s a prueba y error y volver a repetir hasta que entendia lo que pasaba. Despu√©s de tener mi repositorio <strong>personal</strong>, fue tener en mi repositorio todos los ficheros del tema que iba a usar e ir subiendo o creando los ficheros <code class="language-plaintext highlighter-rouge">markdown</code> y ponerlos en donde indicaba la documentaci√≥n del tema si entender bien que pasaba.</p>

<p>Despu√©s entendi lo que hacia <strong>Github</strong>, que era <code class="language-plaintext highlighter-rouge">compilar</code> (si se le puede decir asi) los archivos <code class="language-plaintext highlighter-rouge">markdown</code> y generar automaticamente el fichero <code class="language-plaintext highlighter-rouge">html</code>, segui investigando a ver si eso se podia hacer en local y resulto que si que se podia hacer, pero claro, para hacer eso, necesitabas tener un servidor <strong>Jekyll</strong> para que se realizase la compilaci√≥n y solamente tener que subir los ficheros <code class="language-plaintext highlighter-rouge">compilados</code> y tener en mi poder, el codigo fuente del blog.</p>

<p>Y sigo pensando que no me equivoque, porque gracias a ello, aprendi como crear un docker (mi primer docker). Era un <a href="https://hub.docker.com/r/vctrsnts/jekyll-git" target="_blank">Docker</a> que tiene un servidor jekyll para poder realizar las compilaciones de los <code class="language-plaintext highlighter-rouge">markdown</code>. Tambien tengo que decir que no funciona muy bien, pero bueno, como primera experiencia en crear un docker, no me fue mal, porque entiendi mejor como funcionan los docker.</p>

<p>Cuando vi que la cosa no funcionaba correctamente, la idea era interesante, pero el resultado no era muy satisfactorio, me puse a buscar un docker ya creado y que fuera mejor que el mio. Y di con el.</p>

<p>Su autor es <a href="https://github.com/BretFisher/jekyll-serve" target="_blank">bretfisher</a>, tengo que informar que es un poco lioso de usar, porque tiene 2 contenedores:</p>
<ul>
  <li><a href="https://hub.docker.com/r/bretfisher/jekyll" target="_blank">Jekyll</a></li>
  <li><a href="https://github.com/BretFisher/jekyll-serve" target="_blank">Jekyll-serve</a></li>
</ul>

<p>El unico que te tiene que importar es es el contenedor que hacer de <strong>jekyll-serve</strong>.</p>

<p>La configuraci√≥n que tengo para usar la imagen de docker es la siguiente:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">jekyll</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">bretfisher/jekyll-serve</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">jekyll</span>
    <span class="c1"># port d'access a traves de la web</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">4000:4000</span>
    <span class="c1"># on esta el codi font del blog</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">../blog:/site</span>
</code></pre></div></div>
<p>Cuando ya tenia este contenedor en marcha, ya pude empezar con la creaci√≥n de mis articulos y es aqui, despu√©s de esta peque√±a historia, donde explico la idea principal de este articulo. Unir <strong>Jekyll</strong>, <strong>Mastodon</strong> y <strong>Github</strong> y todo lo que me podia ofrecer este ultimo y una de estas posibilidades es la de publicar mis articulos a traves de un <a href="/debian%20gnu/linux/python/2022/11/14/publicar-feed-mastodon.html" target="_blank">bot</a>.</p>

<p>Pero lo que echaba de menos, porque no se veia ninguna imagen en la publicaci√≥n en <strong>Mastodon</strong>, cuando lei uno de los toots de <a href="https://mastodon.online/@elblogdelazaro@mastodon.social" target="_blank">elBlogdeLazaro</a>, que sigo y que me ha dado el punto de inicio por donde empezar, se podia visualizar una imagen, o mejor dicho, el logo de su web.</p>

<p>Yo queria hacer lo mismo, pero no encontraba ninguna informaci√≥n donde se explicase como se tenia que hacer o como configurar <strong>Mastodon</strong>, despu√©s descubri que las modificaciones necesarias las tenia que hacer en los archivos de mi blog, y gracias a una pista que, como ya he dicho, me dio <em>Carlos. M</em> conseguir descubrir como hacerlo.</p>

<p>La pista fue (<em>Lazaro</em> usa Hugo, otra alternativa a Jekyll), me comento, que en su caso, esto es automatico y que a traves de <code class="language-plaintext highlighter-rouge">:EXPORT_hugo_custom_front_matter+: :image /images/......</code> es la manera que se muestra el logo en las publicaciones de <strong>Mastodon</strong>, pero ya era algo.</p>

<p>Me puse a buscar todo lo referente a la pista que me habia dado y que se podia hacer en <strong>Hugo</strong> y al final la encontre en esta <a href="https://sherblog.pro/compartiendo-contenido-de-hugo-en-mastodon" target="_blank">pagina</a>, encontre la gran pista que me llevaria hacia mi objetivo.</p>

<p>Todo consiste, en que <strong>Mastodon</strong> utiliza <strong>OpenGraph</strong> para todo el tratamiento de las publicaciones (seguramente es m√°s complicado que esto), pero en mi caso me dio la pista definitiva que necesitaba. Lo que tenia que hacer, es buscar como poner en mi blog una imagen del tipo <code class="language-plaintext highlighter-rouge">og:image</code> en la pantilla. La soluci√≥n la encontre en la siguiente <a href="https://gist.github.com/davidensinger/5431869" target="_blank">pagina</a>, donde se puede ver, el codigo necesario para usar <code class="language-plaintext highlighter-rouge">imagenes og</code>:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">content</span><span class="o">=</span><span class="dl">"</span><span class="s2">site.url/assets/img/posts/page.image</span><span class="dl">"</span> <span class="nx">property</span><span class="o">=</span><span class="dl">"</span><span class="s2">og:image</span><span class="dl">"</span><span class="o">&gt;</span>
</code></pre></div></div>
<p>Gracias a este codigo y despu√©s de modificarlo para poderlo usar en mi plantilla, la modificaci√≥n la he hecho en <code class="language-plaintext highlighter-rouge">_layouts/default.html</code>:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">if</span> <span class="nx">site</span><span class="p">.</span><span class="nx">lightavatar</span>
    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">content</span><span class="o">=</span><span class="dl">"</span><span class="s2">site.lightavatar | relative_url</span><span class="dl">"</span> <span class="nx">property</span><span class="o">=</span><span class="dl">"</span><span class="s2">og:image</span><span class="dl">"</span><span class="o">&gt;</span>
  <span class="k">else</span>
    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">content</span><span class="o">=</span><span class="dl">"</span><span class="s2">site.darkavatar | relative_url</span><span class="dl">"</span> <span class="nx">property</span><span class="o">=</span><span class="dl">"</span><span class="s2">og:image</span><span class="dl">"</span><span class="o">&gt;</span>
  <span class="nx">endif</span>
</code></pre></div></div>
<p>Consegui hacer lo que yo queria, porque ahora, a falta de m√°s pruebas, he conseguido que cada vez, que se envia una publicaci√≥n a <strong>Mastodon</strong> a traves del <strong>bot automatico</strong> se puede ver el logo de mi pagina web. Un logo simple, pero es el que m√°s me gusta, porque mezcla mis 2 grandes pasiones.</p>

<p><strong>Egipto y GNU/Linux</strong></p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://gist.github.com/davidensinger/5431869" target="_blank">Opciones og:image</a></li>
  <li><a href="https://stackoverflow.com/questions/57493239/opengraph-link-previews-in-jekyll" target="_blank">Opengraph link previews in Jekyll</a></li>
  <li><a href="https://brianbunke.com/blog/2017/09/06/twitter-cards-on-jekyll" target="_blank">Twitter Cards on Jekyll</a></li>
  <li><a href="https://sherblog.pro/compartiendo-contenido-de-hugo-en-mastodon" target="_blank">Compartiendo contenido de Hugo en Mastodon</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Blog" /><category term="Docker" /><category term="Blog" /><category term="Docker" /><summary type="html"><![CDATA[Desde que di el salto de wordpress a Github, lo m√°s logico, si mi profesion, pasion hace referencia a la tecnologia y que tambien influyo que wordpress empezaba a tener muchos problemas con la creaci√≥n y gesti√≥n del blog. Todo empezo a mediados del 2021 cuando cada vez tenia m√°s problemas a la hora de crear articulos y subirlos a wordpress, aunque ahora le estoy dado otro uso, asi que me puse a investigar y la mayoria de personas a las que sigo, lo tienen alojado en Github o Gitlab. Investigue que diferencia habia entre los dos, pero no encontre ninguna a nivel de uso personal, asi que lance la moneda al aire y salio Github, podria haber salido Gitlab, y me puse a ello. Despu√©s de investigar me cree mi repositorio. Al principio me costo mucho entender como funciona Github, para que os hagais una idea, me las tuve y desee para crear mi primer repositorio, ha sido un pasito hacia adelante y dos hacia atras, si lo reconozco, no he leido la documentaci√≥n del funcionamiento y uso de Github, pero bueno, creo que asi he aprendido mucho m√°s. Porque he tenido que aprender a lo bestia y descubrir las cosas que te puede ofrecer Github poco a poco. Y no me ha parecido mal. Mis progresos han sido lentos, porque todo lo que hacia era la primera vez, e iba m√°s a prueba y error y volver a repetir hasta que entendia lo que pasaba. Despu√©s de tener mi repositorio personal, fue tener en mi repositorio todos los ficheros del tema que iba a usar e ir subiendo o creando los ficheros markdown y ponerlos en donde indicaba la documentaci√≥n del tema si entender bien que pasaba. Despu√©s entendi lo que hacia Github, que era compilar (si se le puede decir asi) los archivos markdown y generar automaticamente el fichero html, segui investigando a ver si eso se podia hacer en local y resulto que si que se podia hacer, pero claro, para hacer eso, necesitabas tener un servidor Jekyll para que se realizase la compilaci√≥n y solamente tener que subir los ficheros compilados y tener en mi poder, el codigo fuente del blog. Y sigo pensando que no me equivoque, porque gracias a ello, aprendi como crear un docker (mi primer docker). Era un Docker que tiene un servidor jekyll para poder realizar las compilaciones de los markdown. Tambien tengo que decir que no funciona muy bien, pero bueno, como primera experiencia en crear un docker, no me fue mal, porque entiendi mejor como funcionan los docker. Cuando vi que la cosa no funcionaba correctamente, la idea era interesante, pero el resultado no era muy satisfactorio, me puse a buscar un docker ya creado y que fuera mejor que el mio. Y di con el. Su autor es bretfisher, tengo que informar que es un poco lioso de usar, porque tiene 2 contenedores: Jekyll Jekyll-serve El unico que te tiene que importar es es el contenedor que hacer de jekyll-serve. La configuraci√≥n que tengo para usar la imagen de docker es la siguiente: jekyll: image: bretfisher/jekyll-serve container_name: jekyll # port d'access a traves de la web ports: - 4000:4000 # on esta el codi font del blog volumes: - ../blog:/site Cuando ya tenia este contenedor en marcha, ya pude empezar con la creaci√≥n de mis articulos y es aqui, despu√©s de esta peque√±a historia, donde explico la idea principal de este articulo. Unir Jekyll, Mastodon y Github y todo lo que me podia ofrecer este ultimo y una de estas posibilidades es la de publicar mis articulos a traves de un bot. Pero lo que echaba de menos, porque no se veia ninguna imagen en la publicaci√≥n en Mastodon, cuando lei uno de los toots de elBlogdeLazaro, que sigo y que me ha dado el punto de inicio por donde empezar, se podia visualizar una imagen, o mejor dicho, el logo de su web. Yo queria hacer lo mismo, pero no encontraba ninguna informaci√≥n donde se explicase como se tenia que hacer o como configurar Mastodon, despu√©s descubri que las modificaciones necesarias las tenia que hacer en los archivos de mi blog, y gracias a una pista que, como ya he dicho, me dio Carlos. M conseguir descubrir como hacerlo. La pista fue (Lazaro usa Hugo, otra alternativa a Jekyll), me comento, que en su caso, esto es automatico y que a traves de :EXPORT_hugo_custom_front_matter+: :image /images/...... es la manera que se muestra el logo en las publicaciones de Mastodon, pero ya era algo. Me puse a buscar todo lo referente a la pista que me habia dado y que se podia hacer en Hugo y al final la encontre en esta pagina, encontre la gran pista que me llevaria hacia mi objetivo. Todo consiste, en que Mastodon utiliza OpenGraph para todo el tratamiento de las publicaciones (seguramente es m√°s complicado que esto), pero en mi caso me dio la pista definitiva que necesitaba. Lo que tenia que hacer, es buscar como poner en mi blog una imagen del tipo og:image en la pantilla. La soluci√≥n la encontre en la siguiente pagina, donde se puede ver, el codigo necesario para usar imagenes og: &lt;meta content="site.url/assets/img/posts/page.image" property="og:image"&gt; Gracias a este codigo y despu√©s de modificarlo para poderlo usar en mi plantilla, la modificaci√≥n la he hecho en _layouts/default.html: if site.lightavatar &lt;meta content="site.lightavatar | relative_url" property="og:image"&gt; else &lt;meta content="site.darkavatar | relative_url" property="og:image"&gt; endif Consegui hacer lo que yo queria, porque ahora, a falta de m√°s pruebas, he conseguido que cada vez, que se envia una publicaci√≥n a Mastodon a traves del bot automatico se puede ver el logo de mi pagina web. Un logo simple, pero es el que m√°s me gusta, porque mezcla mis 2 grandes pasiones. Egipto y GNU/Linux Referencia Opciones og:image Opengraph link previews in Jekyll Twitter Cards on Jekyll Compartiendo contenido de Hugo en Mastodon]]></summary></entry><entry><title type="html">Usando Watchtower</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/docker/2023/01/25/usando-watchtower.html" rel="alternate" type="text/html" title="Usando Watchtower" /><published>2023-01-25T00:00:00+00:00</published><updated>2023-01-25T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/docker/2023/01/25/usando-watchtower</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/docker/2023/01/25/usando-watchtower.html"><![CDATA[<p>Si quieres echarle la culpa tendreis que mirar a <a href="https://ugeek.github.io/blog/post/2019-07-26-actualizaci%C3%B3n-autom%C3%A1tica-de-tus-dockers.html" target="_blank">Angel de uGeek</a>, a <a href="https://atareao.es/podcast/como-actualizar-imagenes-docker-automaticamente" target="_blank">Lorenzo de Atareao.es</a> y por ultimo a <a href="https://elblogdelazaro.org/posts/2018-09-12-actualiza-automaticamente-tus-contenedores-docker" target="_blank">ElBlogdeLazaro</a> porque ellos son los culpables de todas las mejoras o modificaciones que le estoy haciendo a mi servidor y esta que voy a explicar a continuaci√≥n <strong>watchtower</strong> es una de ellas üòâ</p>

<!-- more -->

<p>No voy a explicar que hace esta aplicaci√≥n, porque si leeis los articulos que <em>uGeek</em>, <em>Lorenzo</em> o <em>Lazaro</em>, estaran mejor explicadas, pero en pocas palabras, te mantiene actualizado todos los contenedores de docker, siempre que le actives el <strong>label</strong> para que <strong>watchtower</strong> los tenga en cuenta.</p>

<p>Eso si, hay que tener en cuenta que si no piensas bien que contenedores quieres que te actualize puedes liar un caos en tu servidor que puede ser de ordago.</p>

<p>Un ejemplo de este caos (yo de momento no tengo activada su auto-actualizaci√≥) es el proxy inverso (caddy), porque imaginate que se actualiza, pero da un error y ya no puedes acceder a tus servicios desde el exterior. Por eso, en mi caso pienso bien que contenedores quiero que se actualizen automaticamente.</p>

<p>Eso si, os voy a poner mi <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> que uso para la instalaci√≥n de <strong>watchtower</strong>. Tener en cuenta que es una recopilaci√≥n de todos los ficheros de configuraci√≥n que he visto para su instalaci√≥n.</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">watchtower</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">containrrr/watchtower:latest</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">watchtower</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">/var/run/docker.sock:/var/run/docker.sock</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_LABEL_ENABLE=true</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_CLEANUP=true</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_INCLUDE_RESTARTING=true</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_INCLUDE_STOPPED=true</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_REVIVE_STOPPED=false</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_NO_RESTART=false</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_TIMEOUT="30s"</span>
      <span class="c1"># AQUESTA OPCI√ì LA TINC DESACTIVADA, PERQUE TINC DUBTES DE QUE FUNCIONI CORRECTAMENT, ENCARA QUE EL LOG DONAR CONSTANCIA DE QUE SI</span>
      <span class="c1">#- WATCHTOWER_SCHEDULE=0 0 4 * * *</span>
      <span class="c1"># L'HE SUBSTITUIT PER AQUESTA</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_POLL_INTERVAL=86400</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_NOTIFICATION_URL=telegram://token_telegram@telegram/?channels=id_canal</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_NOTIFICATIONS_HOSTNAME=nombreServidor</span>
      <span class="c1">#WATCHTOWER_NOTIFICATIONS: gotify</span>
      <span class="c1">#WATCHTOWER_NOTIFICATION_GOTIFY_URL: https://gotify.tuservidor.es</span>
      <span class="c1">#WATCHTOWER_NOTIFICATION_GOTIFY_TOKEN: AAAAAAAAAAAAAAA</span>
      <span class="pi">-</span> <span class="s">WATCHTOWER_DEBUG=true</span>
      <span class="pi">-</span> <span class="s">TZ=Europe/Madrid</span>
</code></pre></div></div>

<p>Al principio, <strong>watchtower</strong> no me funcionaba correctamente, en pocas palabras no funcionaba ni hacia nada.</p>

<p>As√≠ que me toco investigar que podia ser y al final despu√©s de mucho buscar, vi que me faltaba informar de en que red iba a trabajar el contenedor. Esto se configura de la siguiente manera:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">network_mode</span><span class="pi">:</span> <span class="s">bridge</span>
</code></pre></div></div>

<p>Tambien hay que tener en cuenta, que para informar a <strong>watchtower</strong> de los contenedores que queremos que vigile por si tiene alguna actualizaci√≥n es de la siguiente manera (tener en cuenta, que tiene que estar en todos los contenedores que queremos sean controlados):</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="na">labels</span><span class="pi">:</span>
   <span class="pi">-</span> <span class="s">com.centurylinklabs.watchtower.enable="true"</span>
</code></pre></div></div>

<p>Y en teoria ya tendria que funcionar. Al principio no parece que funcionaba y estaba con la mosca detras de la oreja, porque no me actualizada nada. Asi que le puse que se ejecutara cada minuto y al final, a partir de que configure correctamente la red empezo a funcionar, me actualizo un par de contenedores y asi quedo.</p>

<p>Se actualizo y desde entonces, no ha vuelto a actualizar ning√∫n contenedor m√°s. Y es la duda que tengo, no se si es porque no hay ninguna actualizaci√≥n o porque no esta funcionando correctamente.</p>

<p>Seguire observando si funciona correctamente.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://atareao.es/podcast/como-actualizar-imagenes-docker-automaticamente/" target="_blank">Atareao.es - Watchtower</a></li>
  <li><a href="https://elblogdelazaro.org/posts/2018-09-12-actualiza-automaticamente-tus-contenedores-docker" target="_blank">ElBlogdeLazaro - Watchtower, 1 parte</a></li>
  <li><a href="https://elblogdelazaro.org/posts/2022-10-17-actualiza-automaticamente-tus-contenedores-docker-ii/https://elblogdelazaro.org/posts/2022-10-17-actualiza-automaticamente-tus-contenedores-docker-ii/https://elblogdelazaro.org/posts/2022-10-17-actualiza-automaticamente-tus-contenedores-docker-ii" target="_blank">ElBlogdeLazaro - Watchtower, 2 parte</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2019-07-26-actualizaci%C3%B3n-autom%C3%A1tica-de-tus-dockers.html" target="_blank">uGeek - Watchtower</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Docker" /><category term="Debian GNU/Linux" /><category term="Docker" /><summary type="html"><![CDATA[Si quieres echarle la culpa tendreis que mirar a Angel de uGeek, a Lorenzo de Atareao.es y por ultimo a ElBlogdeLazaro porque ellos son los culpables de todas las mejoras o modificaciones que le estoy haciendo a mi servidor y esta que voy a explicar a continuaci√≥n watchtower es una de ellas üòâ]]></summary></entry><entry><title type="html">Mis nuevos juguetes</title><link href="https://vctrsnts.github.io/thinkpads/2023/01/23/mis-nuevos-juguetes.html" rel="alternate" type="text/html" title="Mis nuevos juguetes" /><published>2023-01-23T00:00:00+00:00</published><updated>2023-01-23T00:00:00+00:00</updated><id>https://vctrsnts.github.io/thinkpads/2023/01/23/mis-nuevos-juguetes</id><content type="html" xml:base="https://vctrsnts.github.io/thinkpads/2023/01/23/mis-nuevos-juguetes.html"><![CDATA[<p>A trav√©s de este <a href="https://podcastlinux.com/posts/podcastlinux/129-Podcast-Linux" target="_blank">podcast</a> que escuche hace alg√∫n tiempo, siempre me quedo el gusanito de tener uno, y eso que estoy muy contento con mi <code class="language-plaintext highlighter-rouge">Lenovo Ideapad Y700</code>, pero siempre me quedo esa espina clavada‚Ä¶</p>

<!-- more -->

<p>A parte de que tambi√©n me apunte a este canal de <a href="https://t.me/Thinkpad_es" target="_blank">Thinkpads</a> de telegram y eso ya fue lo definitivo. Te tengo que avisar de que si a mi me llaman friki, los que forman parte de este canal lo son a un nivel que no te lo puedes imaginar, para que ve√≠ais que nivel tienen, hay miembros de este canal que tienen casi todos los modelos de Thinkpads habidos y por haber solo por el mero hecho de tenerlos üò≤ Algunos si que los utilizan, pero no todos.</p>

<p>Y ya me veis a leyendo todo lo que van diciendo y con unas ganas cada vez m√°s grandes de tener uno, aunque solo fuera para tenerlo. Y aqu√≠ es donde empez√≥ todo‚Ä¶</p>

<p>Pregunte, cual era el modelo <code class="language-plaintext highlighter-rouge">m√°s famoso, el m√°s llamativo o el m√°s iconico</code> de los que hab√≠a disponibles y me dijeron que si lo que te gusta es cacharrear, el mejor era el <code class="language-plaintext highlighter-rouge">Thinkpad T440p</code></p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/t440p.jpg" alt="t440p.jpg" />
    </div>
    
</div>

<p>Y ah√≠ me ten√©is, comprando a un compa√±ero del canal un <code class="language-plaintext highlighter-rouge">T440p</code> con las siguientes caracter√≠sticas:</p>
<ul>
  <li>CPU: i7 4700mq</li>
  <li>RAM: 16Gb (2x8Gb)</li>
  <li>SSD 256Gb</li>
  <li>El panel no le funciona</li>
  <li>Con el cargador</li>
  <li>Sin bater√≠a</li>
  <li>Y le faltaba una tecla.</li>
</ul>

<p>La pantalla estaba rota y sin bater√≠a, pero como hay tanto material para este port√°til, pues no hab√≠a problema y a el que me fui.</p>

<p>Cuando me llego, la sensaci√≥n fue impresionante, unos acabados, no se, un todo. Lo conecte a un monitor y funcionaba perfectamente y con identificativo logo de <code class="language-plaintext highlighter-rouge">Thinkpad</code> al inicio.</p>

<p>Ahora solamente faltaba solucionar el problema de la pantalla, donde pensaba que ser√≠a lo m√°s dif√≠cil. Pero la realidad es que fue m√°s facil de lo que yo me pensaba. Es muy f√°cil cambiar cualquier cosa en este port√°til. Para que os hag√°is una idea, nada m√°s llegar, le desmonte el SSD, la CPU (para su limpieza y nueva pasta t√©rmica, limpieza del ventilador, limpieza del teclado.</p>

<p>Este ordenador parece un mecano. Se puede desmontar todo, pero todo.</p>

<p>Con respecto al panel que no me funcionaba, volv√≠ a pedir ayuda en el canal y me aconsejaron que ya que lo ten√≠a, pod√≠a hacerle un par m√°s de modificaciones que son:</p>
<ul>
  <li><a href="https://es.aliexpress.com/i/4001063911066.html" target="_blank">Panel T440p</a></li>
  <li><a href="https://es.aliexpress.com/item/32717498840.html" target="_blank">Panel t√°ctil T440p</a> aunque a la hora de su instalaci√≥n, con Windows hay muchos problemas, porque no coge el driver correctamente, pero como le iba a instalar GNU/Linux, pues no me preocupaba.</li>
</ul>

<p>Cuando me llego todo el material, como digo, el port√°til, se puede desmontar f√°cilmente, le substitui la pantalla sin ning√∫n problema y eso que al principio te da un poco de respeto, pero cuando ves que la construcci√≥n del equipo est√° hecha para que todo sea f√°cil de cambiar y substituir pues, el nerviosismo desaparece.</p>

<p>Despu√©s de todo est√° substituci√≥n, ya ten√≠a un nuevo <code class="language-plaintext highlighter-rouge">Thinkpad T440p</code> como nuevo (aun me falta la bater√≠a), pero como iba a estar conectado a la corriente, pues, aunque me gustar√≠a conseguir una bateria para tener el modelo completo‚Ä¶</p>

<p>Adem√°s, en el canal, un compa√±ero que hab√≠a comprado un teclado para este modelo, porque ten√≠a un par de teclas rotas en su portatil y como le sobraban el resto, pues le ped√≠ si me podia facilitar la que me faltaba a mi, y no hubo ning√∫n problema y adem√°s, como ya he comentado antes, todo en este port√°til es f√°cilmente desmontable, incluidas las teclas y el teclado.</p>

<p>Y si buscas informaci√≥n de este modelo, mucha gente aun lo usa, 2023, porque es muy vers√°til y se le pueden hacer muchas modificaciones. Una de ellas y la que me ha dejado m√°s sorprendido ha sido la que se puede ver <a href="https://www.youtube.com/watch?v=2SWw_Tx_iwM" target="_blank">aqu√≠</a> donde le ponen una <strong>CPU</strong> que con solo ver las especificaciones te tira para atras. Tambi√©n he visto gente, que ha llegado a decir que le hab√≠a puesto un <em>Xeon</em> a este port√°til, cambio de la BIOS por una BIOS libre (<a href="https://www.youtube.com/watch?v=pqjsM18pKCE" target="_blank">Coreboot</a>), o se la <a href="https://www.youtube.com/watch?v=ce7kqUEccUM" target="_blank">modifican</a>, para <strong>liberarla</strong> y que puedan usar diferente hardware (sobre todo tarjetas Wi-Fi), que por defecto estan bloqueadas.</p>

<p>Lo que yo digo, lo que no se puede hacer con este portatil, es que no se puede. No lo intentes porque a lo mejor lo estropeas.</p>

<p>Y hasta aqu√≠ hemos llegado con mi nuevo juguete‚Ä¶ <strong>o no!!</strong></p>

<p>Pues ser√° que no, porque como dicen en el canal, cuando empiezas ya no puedes parar y esto es lo que me paso. Y m√°s cuando dicen que el modelo que va a tener m√°s <em>hype</em> estos pr√≥ximos a√±os, ser√° el <strong>T480</strong>, porque seg√∫n parece, la garant√≠a que tienen est√° a punto de finalizar y por esa misma cuesti√≥n, las empresas van a hacer el cambio y el mercado se satura. Y doy fe de ello <strong>in-situ</strong>.</p>

<p>Pero est√° vez, en el canal no hab√≠a nadie que le sobrara este modelo y me fui a revisar <a href="https://www.ebay.es" target="_blank">eBay</a> donde hay un mundo con respecto a los Thinkpads. As√≠ que pregunte y me aconsejaron un par de vendedores que tienen modelos a buen precio (pero en subasta, que como sabes) el port√°til o lo puedes conseguir o muy barato o muy caro.</p>

<p>Al final, pude conseguir uno a buen precio con las siguientes caracter√≠sticas:</p>
<ul>
  <li>CPU: i5 8350U</li>
  <li>RAM: 8Gb (1x8)</li>
  <li>M2.SSD: 256Gb</li>
  <li>Con el cargado</li>
  <li>Sin bater√≠a</li>
  <li>Panel t√°ctil, pero con algunos problemas de funcionamiento</li>
</ul>

<p>Y de nuevo, a la espera de mi nuevo juguete (que est√° vez y gracias a UPS Parcel, que empresa üò§ llego una semana m√°s tarde, pero ya lo ten√≠a. Y tuve la misma sensaci√≥n que cuando recibi el T440p. Una sensaci√≥n de como un ni√±o con zapatos nuevos y de vuelta a las modificaciones.</p>

<p>En el canal me aconsejaron la primera y m√°s b√°sica, el cambio de <a href="https://es.aliexpress.com/item/4001153042037.html" target="_blank">panel</a> por uno que es muy aconsejado en <a href="https://www.reddit.com/r/thinkpad/comments/9wfq9p/thinkpad_t480s_fhd_to_qhd_upgrade_log_applies_to/?utm_source=share&amp;utm_medium=android_app&amp;utm_name=androidcss&amp;utm_term=1&amp;utm_content=share_button" target="_blank">reddit</a> porque reduce el consumo de energ√≠a de la bater√≠a con la mejora que ello conlleva. Y adem√°s si tu quieres, este modelo (siempre que hagas las modificaciones pertinentes, panel y cable) se le puede poner una pantalla de <em>2K</em>, pero eso gastar√≠a mucha bater√≠a y visualmente, no se ver√≠a ninguna mejora apreciable.</p>

<p>A parte del panel, tambi√©n le cambio las siguientes piezas (no es tan modificable como el T440p) pero‚Ä¶</p>
<ul>
  <li><a href="https://a.aliexpress.com/_EuR0Zu1" target="_blank">Cable para el nuevo panel</a></li>
  <li><a href="https://a.aliexpress.com/_EHFew6h" target="_blank">Cable para el nuevo SSD</a></li>
</ul>

<p>El nuevo cable para el <strong>SSD</strong> lo he hecho, porque hab√≠a comprado uno nuevo que lo quer√≠a utilizar en el port√°til y el <em>M.2</em> lo quer√≠a hacer servir para el servidor y utilizarlo para las copias de seguridad de este (que ya explicare en otro articulo).</p>

<p>Despu√©s de todo lo que le he hecho (que tambi√©n me ha resultado muy f√°cil de cambiar) y eso que dicen que es uno de los √∫ltimos que tiene est√° facilidad, porque los nuevos no la tienen, tengo un <strong>Thinkpad T480</strong> nuevecito a falta de una bater√≠a y un teclado en castella√±o, aunque esto ultimo no es muy importante, porque si le conectas un teclado externo, ya no usaras el teclado del port√°til.</p>

<p>Y aqu√≠ estamos con mis nuevos juguetes, aunque este ultimo (T480) estoy pensando en usarlo cuando se me muera el Lenovo Y700 que tengo √∫ltimamente y tenerlo con un dock.</p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/dock-lenovo.jpg" alt="dock-lenovo.jpg" />
    </div>
    
</div>

<p>Para as√≠ tenerlo con una pantalla m√≠nimamente grande o algo parecido al setup que nos muestra <strong>Lorenzo</strong> de <a href="https://atareao.es/podcast/sobre-mi-setup-o-configuracion-de-escritorio" target="_blank">atareao.es</a>:</p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/setup.jpg" alt="setup.jpg" />
    </div>
    
</div>

<p>Pero todo esto son planes de futuro que dios dir√°‚Ä¶</p>

<p>Y hasta aqu√≠ la historia de los 2 nuevos juguetes que han llegado a casa. Espero que no me se me crucen los cables y compre uno m√°s, porque sino me veo durmiendo en la calle.</p>

<blockquote>
  <p>üí° Quereis un consejo, no escucheis ningun podcast de los que segueis que hable del cambio de equipo. Porque sino os empezaran a surgir ideas contrarias a las que, en un principio, habiais tomado. Hacerme caso.</p>
</blockquote>

<blockquote>
  <p>Yo ya tenia la idea de cambiar (cuando se me muera el portatil que tengo ahora) por el <strong>T480</strong> que he conseguido junto con un dock y va <a href="https://atareao.es/podcast/slimbook-one-con-amd-ryzen-9/" target="_blank">Lorenzo - Atareao.es</a> y me suelta que se ha cambio el portatil que tenia por un <code class="language-plaintext highlighter-rouge">Slimbook One</code>, en pocas palabras, un Tiny y solo falta escuchar eso y los motivos por lo que lo ha hecho, muy logicos todos ellos, para empezar mis dudas si la decisi√≥n que tenia pensado hacer es la correcta o mejor ir a por un Tiny acoplado a un monitor, menos espaci√≥ si que ocuparia y menos enchufes necesitaria. Gracias <strong>Lorenzo</strong>. ‚òπÔ∏è</p>
</blockquote>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://podcastlinux.com/posts/podcastlinux/129-Podcast-Linux" target="_blank">Linux Podcast</a></li>
  <li><a href="https://t.me/Thinkpad_es" target="_blank">Canal Telegram</a></li>
  <li><a href="https://www.youtube.com/@WolfgangsChannel" target="_blank">Canal Youtube T440p</a></li>
  <li><a href="https://atareao.es/podcast/sobre-mi-setup-o-configuracion-de-escritorio/" target="_blank">Imagen de Setup</a></li>
  <li><a href="https://www.youtube.com/watch?v=ce7kqUEccUM" target="_blank">Quitanto Wi-Fi Whitelist</a></li>
  <li><a href="https://www.youtube.com/watch?v=pqjsM18pKCE" target="_blank">Instalar Coreboot</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Thinkpads" /><category term="Thinkpads" /><summary type="html"><![CDATA[A trav√©s de este podcast que escuche hace alg√∫n tiempo, siempre me quedo el gusanito de tener uno, y eso que estoy muy contento con mi Lenovo Ideapad Y700, pero siempre me quedo esa espina clavada‚Ä¶]]></summary></entry><entry><title type="html">Mejoras en mi escritorio (i3-wm)</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/i3/2023/01/13/mejoras-i3.html" rel="alternate" type="text/html" title="Mejoras en mi escritorio (i3-wm)" /><published>2023-01-13T00:00:00+00:00</published><updated>2023-01-13T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/i3/2023/01/13/mejoras-i3</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/i3/2023/01/13/mejoras-i3.html"><![CDATA[<p>Despu√©s de mucho tiempo usando <a href="/debian%20gnu/linux/i3/2020/08/06/usando-i3-wm.html" target="_blank">i3-wm</a>, estaba constantemente, cambiando de wallpaper (seguramente ha m√°s de uno le pasa), pense que habria alguna manera de hacer que cada X tiempo, el wallpaper que estoy utilizando cambiara automaticamente, de los que tengo en el directorio donde los guardo.</p>

<p>As√≠ que me puse a la busqueda de como se puede hacer.</p>

<!-- more -->

<p>Encontre unas cuantas maneras de hacer lo que yo queria :</p>
<ul>
  <li>Primer <a href="https://forum.codeselfstudy.com/t/desktop-background-switcher-for-i3wm/1044" target="_blank">script</a></li>
  <li>Segundo <a href="https://github.com/levinit/i3wm-config/blob/master/i3/wallpaper.sh" target="_blank">script</a></li>
</ul>

<p>Yo me quede con la idea del segundo script, aunque le a√±adi la posibilidad de enviar notificaciones al escritorio de los cambios de fondos de pantalla a trav√©s del <code class="language-plaintext highlighter-rouge">notify-send</code>.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/bash</span>
<span class="nb">shopt</span> <span class="nt">-s</span> nullglob

<span class="k">if</span> <span class="o">[[</span> <span class="nt">-z</span> <span class="si">$(</span>which feh<span class="si">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"wallpaper err: Can not found command feh."</span> <span class="o">&gt;</span> ~/i3wm-wallpaper.err
    <span class="nb">exit </span>127
<span class="k">fi</span>
<span class="c"># DIRECTORI ON ESTAN ELS FONTS DE PANTALLA</span>
<span class="nv">path</span><span class="o">=</span>~/.config/wallpapers
<span class="c"># TEMPS / INTERVAL ENTRE ELS CANVIS DE FONS DE PANTALLA</span>
<span class="nv">interval</span><span class="o">=</span>59m
<span class="c"># INICI DE L'SCRIPT</span>
<span class="nb">cd</span> <span class="nv">$path</span>
<span class="c"># INICIEM EL BUCLE DE L'SCRIPT</span>
<span class="k">while </span><span class="nb">true
</span><span class="k">do
  </span><span class="nv">files</span><span class="o">=()</span>

  <span class="k">for </span>i <span class="k">in</span> <span class="k">*</span>.jpg <span class="k">*</span>.png<span class="p">;</span>
  <span class="k">do</span>
    <span class="o">[[</span> <span class="nt">-f</span> <span class="nv">$i</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> files+<span class="o">=(</span><span class="s2">"</span><span class="nv">$i</span><span class="s2">"</span><span class="o">)</span>
  <span class="k">done
  </span><span class="nv">range</span><span class="o">=</span><span class="k">${#</span><span class="nv">files</span><span class="p">[@]</span><span class="k">}</span>

  <span class="nv">CURRENT_WALLPAPER</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">files</span><span class="p">[RANDOM % range]</span><span class="k">}</span><span class="s2">"</span>

  <span class="nv">CURRENT_IMAGE</span><span class="o">=</span><span class="nv">$path</span><span class="s2">"/"</span><span class="nv">$CURRENT_WALLPAPER</span>

  <span class="o">((</span>range<span class="o">))</span> <span class="o">&amp;&amp;</span> feh <span class="nt">--bg-scale</span> <span class="nv">$CURRENT_WALLPAPER</span>
  <span class="c">#</span>
  <span class="c"># ENVIEM LA NOTIFICACI√ì AL SISTEMA, PERQUE ES VEGI PER PANTALLA</span>
  <span class="c">#</span>
  notify-send <span class="nt">-i</span> <span class="s2">"</span><span class="nv">$CURRENT_IMAGE</span><span class="s2">"</span> <span class="s1">'Desktop Changed'</span> <span class="si">$(</span><span class="nb">basename</span> <span class="nt">--</span> <span class="s2">"</span><span class="nv">$CURRENT_WALLPAPER</span><span class="s2">"</span><span class="si">)</span>

  <span class="nb">sleep</span> <span class="nv">$interval</span>
<span class="k">done</span>
</code></pre></div></div>
<p>El script en esencia es muy simple. Lo unico que hace, es poner en un <code class="language-plaintext highlighter-rouge">array</code> todos los archivos del directorio que le indicas donde estaran las imagenes (<code class="language-plaintext highlighter-rouge">wallpapers</code>) para que cada X minutos (<code class="language-plaintext highlighter-rouge">interval</code>) que le hayas configurado haga el cambio de fondo de pantalla y que te notifique (<code class="language-plaintext highlighter-rouge">notify-send</code>) de dicho cambio, se necesita el paquete <strong>libnotify-bin</strong> para que te avise del cambio.</p>

<p>Lo unico que queda, es configurar el fichero de configuraci√≥n de <code class="language-plaintext highlighter-rouge">i3-wm</code> para que :</p>
<ul>
  <li>Haga la carga inicial del wallpaper</li>
  <li>Inicie el script del cambio de wallpaper, que a su vez, tomara el control y que cada X tiempo (segun tengas configurado) ira realizando el cambio de fondo de pantalla.</li>
</ul>

<p>Para que funcione, tienes que a√±adir lo siguiente en el fichero de configuraci√≥n:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># PARA VISUALIZAR EL FONDO DE PANTALLA</span>
exec_always <span class="nt">--no-startup-id</span> feh <span class="nt">--bg-scale</span> <span class="nt">--no-fehbg</span> ~/.config/wallpapers/Wallpaper_10.jpg
<span class="c"># AQUI ES CONFIGURA EL CANVI AUTOMATIC DEL WALLPAPER</span>
<span class="nb">exec</span> <span class="nt">--no-startup-id</span>  ~/.config/i3/scripts/wallpaper.sh &amp;
</code></pre></div></div>

<p>La otra modificaci√≥n que he realizado, ha sido la de que en la barra de <code class="language-plaintext highlighter-rouge">i3-wm</code> (<code class="language-plaintext highlighter-rouge">i3block</code>) me informe de los paquetes que se tienen que actualizar, era una informaci√≥n que me gustaba tener y despu√©s de mucho buscar, encontr√© el <a href="https://github.com/vivien/i3blocks-contrib" target="_blank">comando / instrucci√≥n</a> que me daba lo que necesitada.</p>

<p>Lo primero, necesitas el script <code class="language-plaintext highlighter-rouge">apt-upgrades</code> y descargarlo en alg√∫n sitio desde donde puedas tener acceso. En mi caso, lo he dejado en el directorio del <code class="language-plaintext highlighter-rouge">i3-wm/script</code>, que es donde tengo todos los scripts que uso para <code class="language-plaintext highlighter-rouge">i3-wm</code>.</p>

<p>El script en cuesti√≥n (tener en cuenta que depende de <strong>aptitude</strong>) hace lo siguiente :</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="c">#</span>
<span class="c"># Copyright (C) 2015 James Murphy</span>
<span class="c"># Licensed under the terms of the GNU GPL v2 only.</span>
<span class="c">#</span>
<span class="c"># i3blocks blocklet script to display pending system upgrades</span>

<span class="c"># FontAwesome refresh symbol, change if you do not want to install FontAwesome</span>
<span class="c">#PENDING_SYMBOL=${PENDING_SYMBOL:-"\uf021 "}</span>
<span class="nv">PENDING_SYMBOL</span><span class="o">=</span><span class="k">${</span><span class="nv">PENDING_SYMBOL</span><span class="k">:-</span><span class="s2">""</span><span class="k">}</span>

<span class="c"># By default, show both the symbol and the numbers</span>
<span class="nv">SYMBOL_ONLY</span><span class="o">=</span><span class="k">${</span><span class="nv">SYMBOL_ONLY</span><span class="k">:-</span><span class="nv">0</span><span class="k">}</span>

<span class="c"># By default, show something when no upgrades are pending</span>
<span class="nv">ALWAYS_PRINT</span><span class="o">=</span><span class="k">${</span><span class="nv">ALWAYS_PRINT</span><span class="k">:-</span><span class="nv">1</span><span class="k">}</span>

<span class="c"># Colors for when there is/isn't a pending upgrade</span>
<span class="nv">PENDING_COLOR</span><span class="o">=</span><span class="k">${</span><span class="nv">PENDING_COLOR</span><span class="k">:-</span><span class="s2">"#FF0000"</span><span class="k">}</span>
<span class="nv">NONPENDING_COLOR</span><span class="o">=</span><span class="k">${</span><span class="nv">NONPENDING_COLOR</span><span class="k">:-</span><span class="s2">"#FFFFFF"</span><span class="k">}</span>

<span class="k">while </span><span class="nb">getopts </span>s:oc:n:Nh opt<span class="p">;</span> <span class="k">do
    case</span> <span class="s2">"</span><span class="nv">$opt</span><span class="s2">"</span> <span class="k">in
        </span>s<span class="p">)</span> <span class="nv">PENDING_SYMBOL</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span> <span class="p">;;</span>
        o<span class="p">)</span> <span class="nv">SYMBOL_ONLY</span><span class="o">=</span>1 <span class="p">;;</span>
        c<span class="p">)</span> <span class="nv">PENDING_COLOR</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span> <span class="p">;;</span>
        n<span class="p">)</span> <span class="nv">NONPENDING_COLOR</span><span class="o">=</span><span class="s2">"</span><span class="nv">$OPTARG</span><span class="s2">"</span> <span class="p">;;</span>
        N<span class="p">)</span> <span class="nv">ALWAYS_PRINT</span><span class="o">=</span>0 <span class="p">;;</span>
        h<span class="p">)</span> <span class="nb">printf</span> <span class="se">\</span>
<span class="s2">"Usage: apt-upgrades [-s pending_symbol] [-o] [-c pending_color] [-N|-n nonpending_color] [-h]
Options:
-s</span><span class="se">\t</span><span class="s2">Specify a refresh symbol. Default: </span><span class="se">\"\\\\</span><span class="s2">uf021 </span><span class="se">\"</span><span class="s2">
-o</span><span class="se">\t</span><span class="s2">Show refresh symbol only, but no numbers.
-c</span><span class="se">\t</span><span class="s2">Color when upgrade is pending. Default:  #00FF00
-n</span><span class="se">\t</span><span class="s2">Color when no upgrade is pending. Default: #FFFFFF
-N</span><span class="se">\t</span><span class="s2">Only display text if upgrade is pending (supercedes -n)
-h</span><span class="se">\t</span><span class="s2">Show this help text</span><span class="se">\n</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">exit </span>0<span class="p">;;</span>
    <span class="k">esac</span>
<span class="k">done

</span><span class="nb">read </span>upgraded new removed held &lt; &lt;<span class="o">(</span>
aptitude full-upgrade <span class="nt">--simulate</span> <span class="nt">--assume-yes</span> |<span class="se">\</span>
    <span class="nb">grep</span> <span class="nt">-m1</span> <span class="s1">'^[0-9]\+ packages upgraded,'</span> |<span class="se">\</span>
    <span class="nb">tr</span> <span class="nt">-cd</span> <span class="s1">'0-9 '</span> |<span class="se">\</span>
    <span class="nb">tr</span> <span class="s1">' '</span> <span class="s1">'\n'</span> |<span class="se">\</span>
    <span class="nb">grep</span> <span class="s1">'[0-9]\+'</span> |<span class="se">\</span>
    xargs <span class="nb">echo</span><span class="o">)</span>

<span class="k">if</span> <span class="o">[[</span> <span class="nv">$upgraded</span> <span class="o">!=</span> 0 <span class="o">]]</span> <span class="o">||</span> <span class="o">[[</span> <span class="nv">$new</span> <span class="o">!=</span> 0 <span class="o">]]</span> <span class="o">||</span> <span class="o">[[</span> <span class="nv">$removed</span> <span class="o">!=</span> 0 <span class="o">]]</span> <span class="o">||</span> <span class="o">[[</span> <span class="nv">$held</span> <span class="o">!=</span> 0 <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nv">color</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PENDING_COLOR</span><span class="s2">"</span>
    <span class="k">if</span> <span class="o">[[</span> <span class="nv">$SYMBOL_ONLY</span> <span class="o">==</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$PENDING_SYMBOL</span><span class="s2">"</span>
        <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$PENDING_SYMBOL</span><span class="s2">"</span>
    <span class="k">else
        </span><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$PENDING_SYMBOL$upgraded</span><span class="s2">/</span><span class="nv">$new</span><span class="s2">/</span><span class="nv">$removed</span><span class="s2">/</span><span class="nv">$held</span><span class="s2">"</span>
        <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$PENDING_SYMBOL$upgraded</span><span class="s2">/</span><span class="nv">$new</span><span class="s2">/</span><span class="nv">$removed</span><span class="s2">/</span><span class="nv">$held</span><span class="s2">"</span>
    <span class="k">fi
    </span><span class="nb">echo</span> <span class="nv">$color</span>
<span class="k">elif</span> <span class="o">[[</span> <span class="nv">$ALWAYS_PRINT</span> <span class="o">==</span> 1 <span class="o">]]</span><span class="p">;</span> <span class="k">then
    </span><span class="nv">color</span><span class="o">=</span><span class="s2">"</span><span class="nv">$NONPENDING_COLOR</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$PENDING_SYMBOL$upgraded</span><span class="s2">/</span><span class="nv">$new</span><span class="s2">/</span><span class="nv">$removed</span><span class="s2">/</span><span class="nv">$held</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$PENDING_SYMBOL$upgraded</span><span class="s2">/</span><span class="nv">$new</span><span class="s2">/</span><span class="nv">$removed</span><span class="s2">/</span><span class="nv">$held</span><span class="s2">"</span>
    <span class="nb">echo</span> <span class="nv">$color</span>
<span class="k">fi</span>
</code></pre></div></div>
<p>Una vez tengas el script, vamos a la configuraci√≥n del archivo de <code class="language-plaintext highlighter-rouge">i3block.conf</code>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>apt_upgrades]
<span class="nb">command</span><span class="o">=</span>/home/usuari/.config/i3/scripts/apt-upgrades
<span class="c"># l'script s'executara cada dia (el valor es refereix a minuts)</span>
<span class="nv">interval</span><span class="o">=</span>1440
<span class="nv">signal</span><span class="o">=</span>1
<span class="nv">label</span><span class="o">=</span>Ôçõ
</code></pre></div></div>
<p>Cuando ya tenemos configurado toda la parte del usuario, solamente nos queda configurar la parte de <strong>root</strong> (que es el encargado de realizar el <code class="language-plaintext highlighter-rouge">aptitude update</code> para actualizar los paquetes y que a su vez, hace que el script obtenga los paquetes a actualizar.</p>

<p>Para eso, tenemos que hacer lo siguiente (a trav√©s de <code class="language-plaintext highlighter-rouge">sudo</code>, en mi caso):</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>obtenim acces a nivell de root
<span class="gp">usuari@debian:~#</span><span class="nb">sudo</span> <span class="nt">-i</span>
</code></pre></div></div>
<p>Una vez, tenemos acceso a la consola de <code class="language-plaintext highlighter-rouge">root</code> pasamos a configurar el <code class="language-plaintext highlighter-rouge">cron</code> que lo puedes hacer de la siguiente manera para evitar al maximo cualquier error posible:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~#</span>crontab <span class="nt">-e</span>
</code></pre></div></div>
<p>Y ahora pasamos a la creaci√≥n de nuestro cron:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">@daily aptitude update
</span></code></pre></div></div>
<p>Y con este sencillo script obtenemos la siguiente informaci√≥n:</p>
<ul>
  <li>Los paquetes a actualizar.</li>
  <li>Los nuevos paquetes que se van a instalar.</li>
  <li>Los paquetes que se van a eliminar.</li>
  <li>Los paquetes que no se actualizar.</li>
</ul>

<p>Todo esto, claro esta, siempre que realices la actualizaci√≥n.</p>

<p>En pantalla quedar√≠a de la siguiente manera:</p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/apt-upgrades.png" alt="apt-upgrades.png" />
    </div>
    
</div>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://forum.codeselfstudy.com/t/desktop-background-switcher-for-i3wm/1044" target="_blank">Primera versi√≥n del script</a></li>
  <li><a href="https://github.com/levinit/i3wm-config/blob/master/i3/wallpaper.sh" target="_blank">Segunda versi√≥n del script</a></li>
  <li><a href="https://github.com/levinit/i3wm-config/blob/master/i3/config" target="_blank">Modificaci√≥n en el config</a></li>
  <li><a href="https://github.com/vivien/i3blocks-contrib" target="_blank">apt-upgrades</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="i3" /><category term="Debian GNU/Linux" /><category term="i3" /><summary type="html"><![CDATA[Despu√©s de mucho tiempo usando i3-wm, estaba constantemente, cambiando de wallpaper (seguramente ha m√°s de uno le pasa), pense que habria alguna manera de hacer que cada X tiempo, el wallpaper que estoy utilizando cambiara automaticamente, de los que tengo en el directorio donde los guardo. As√≠ que me puse a la busqueda de como se puede hacer.]]></summary></entry><entry><title type="html">Funcionamiento extra√±o con mi portatil (Ideapad Y700 - 17ISK)</title><link href="https://vctrsnts.github.io/hardware/2023/01/12/problemas-Y700-17ISK.html" rel="alternate" type="text/html" title="Funcionamiento extra√±o con mi portatil (Ideapad Y700 - 17ISK)" /><published>2023-01-12T00:00:00+00:00</published><updated>2023-01-12T00:00:00+00:00</updated><id>https://vctrsnts.github.io/hardware/2023/01/12/problemas-Y700-17ISK</id><content type="html" xml:base="https://vctrsnts.github.io/hardware/2023/01/12/problemas-Y700-17ISK.html"><![CDATA[<p>Desde hace un par de dias, no se si desde que actualize la BIOS al portatil (Lenovo Ideapad Y700 17ISK, versi√≥n <code class="language-plaintext highlighter-rouge">CDCN54WW</code>), y me ha pasado una cosa muy extra√±a. El teclado en el momento de iniciarse el sistema ha dejado de funcionar.</p>

<!-- more -->

<p>As√≠ de repente, el teclado ha dejado de funcionar, sin raz√≥n aparente, pero tambi√©n con un funcionamiento raro, porque las teclas de funci√≥n (F1, etc‚Ä¶) si que funcionaban o hacer un <code class="language-plaintext highlighter-rouge">ctrl+alt+sup</code> tambi√©n funcionaba.</p>

<p>Tambi√©n pod√≠a acceder a la BIOS (en mi caso con <code class="language-plaintext highlighter-rouge">F2</code>), pero luego no pod√≠a desplazarme por las diferentes secciones de la BIOS ni tampoco seleccionar en <code class="language-plaintext highlighter-rouge">GRUB</code> el otro sistema operativo que uso (Windows 10). Pero lo m√°s extra√±o (si es que puede haber algo extra√±o en todo esto) es que una vez que se cargaba el sistema operativo (tanto GNU/Linux como Windows) el teclado funcionaba correctamente y sin ning√∫n problema.</p>

<p>Buscando por internet, lo √∫nico que encontraba, eran mensajes que hac√≠an referencia a que una de las ultimas actualizaciones de la BIOS hab√≠a producido este fallo, aunque tambi√©n hab√≠an otros mensajes que dec√≠an, que el problema venia motivado por la <a href="https://forums.lenovo.com/t5/Serie-Z/Fallos-en-el-teclado-y-touchpad-Ideapad-700-15ISK/m-p/3656873" target="_blank">bater√≠a</a>, pero no tenia sentido, porque nunca hab√≠a tenido anteriormente este problema hasta la actualizaci√≥n de la BIOS a la ultima versi√≥n. As√≠ que lo √∫nico que, en mi caso, pod√≠a motivar este funcionamiento incorrecto del teclado, era la actualizaci√≥n de la BIOS.</p>

<p>Despu√©s de buscar versiones anteriores de la BIOS de mi portatil, Lenovo no lo pone nada f√°cil para encontrar los archivos, encontr√© una versi√≥n anterior a la que tenia instalada (CDCN53WW).</p>

<p>Lo √∫nico que me faltaba era poder acceder a Windows, pero tambi√©n era extra√±o, con un teclado USB pod√≠a desplazarme por la BIOS y seleccionar el otro SO que tengo instalado. Inicie el <code class="language-plaintext highlighter-rouge">downgrade</code> de mi versi√≥n de BIOS a una anterior.</p>

<p>Y parece que el problema se ha solucionado, porque de momento, no he vuelto a tener ningun problema con el teclado, puedo seleccionar correctamente el Sistema Operativo al que quiero acceder, as√≠ como puedo moverme por los diferentes apartados de la BIOS.</p>

<p>No se, una cosa muy extra√±a que me ha pasado, y no se si es un mensaje subliminal del portatil de que esta llegando a las ultimas.</p>

<p>Espero que no sea as√≠, porque lo he tenido durante muchos a√±os con un resultado excelente, pero no me gustar√≠a perderlo, aunque si llega el d√≠a que tenga que deshacerme de el, tengo un par de substitutos en la recamara (que de eso tengo que hacer otro articulo).</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://forums.lenovo.com/t5/Serie-Z/Fallos-en-el-teclado-y-touchpad-Ideapad-700-15ISK/m-p/3656873" target="_blank">Foro Lenovo</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Hardware" /><category term="Hardware" /><summary type="html"><![CDATA[Desde hace un par de dias, no se si desde que actualize la BIOS al portatil (Lenovo Ideapad Y700 17ISK, versi√≥n CDCN54WW), y me ha pasado una cosa muy extra√±a. El teclado en el momento de iniciarse el sistema ha dejado de funcionar.]]></summary></entry><entry><title type="html">Creando tu propi Spotify privado - Annexo</title><link href="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2022/12/31/rpi-spotity.html" rel="alternate" type="text/html" title="Creando tu propi Spotify privado - Annexo" /><published>2022-12-31T00:00:00+00:00</published><updated>2022-12-31T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/raspberry%20pi%20os/2022/12/31/rpi-spotity</id><content type="html" xml:base="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2022/12/31/rpi-spotity.html"><![CDATA[<p>Tal como explique en este articulo <a href="/docker/raspberry%20pi%20os/2021/05/08/rpi-spotify.html" target="_blank">Creando tu propio servidor de musica</a> cuando tienes un servidor en tu casa, empiezas a tener ideas locas de que podrias hacer con el.</p>

<!-- more -->

<p>Pero despu√©s de mucho probar (siguiente la estela de uGeek) creo que llegas al mismo punto (pero m√°s lento). Si ya venia usando (en mi caso) <code class="language-plaintext highlighter-rouge">Jellyfin</code> que te permite tambien tener ordenado y listado toda la musica, porque no usarlo tambien y asi substituir <code class="language-plaintext highlighter-rouge">Gonic</code> o <code class="language-plaintext highlighter-rouge">Navidrome</code>.</p>

<p>Y es lo que he hecho, a parte de a√±adir un plugin nuevo siguiendo el consejo de uGeek y asi poder cambiar el <a href="https://ugeek.github.io/blog/post/2020-11-15-jellyfin-skin-manager-repositorio-para-cambiar-el-tema-de-tu-jellyfin.html" target="_blank">tema</a> al que m√°s te guste y tambien puede a√±adir el plugin de <a href="https://ugeek.github.io/blog/post/2021-08-09-lista-de-repositorios-de-jellyfin-.html" target="_blank">LastFm</a> para que asi, tener m√°s informaci√≥n sobre la musica que estas escuchando, que no consigo que funcione correctamente y tampoco hay mucha informaci√≥n en inet para saber el motivo.</p>

<p>A parte, como es mi caso, escucho la musica en el movil y tenia que buscar una nueva aplicaci√≥n para ello, y como no, siempre uGeek viene en mi ayuda, <a href="https://ugeek.github.io/post/2022-12-23-notas-manjaro-jellyfin-podcast--.html" target="_blank">aqui</a> te aconseja una nueva aplicaci√≥n (que la verdad que tiene muy buena pinta) para asi conectar con el servidor de <code class="language-plaintext highlighter-rouge">Jellyfin</code> y poder escuchar tu  musica sin ningun problema.</p>

<p>Asi mismo, tambien escucho musica en mi portatil personal a traves de <a href="https://ugeek.github.io/blog/post/2021-12-29-sonixd-player-para-jellyfin-y-subsonic.html" target="_blank">Sonixd</a>, que es una aplicaci√≥n (en mi caso, como no esta nativa en <strong>Debian GNU/Linux</strong>, la uso como appImage) y que ya venia usando de antes del cambio, porque funcionaba correctamente con <code class="language-plaintext highlighter-rouge">Gonic</code> y cuando vi que tambien se podia usar con <code class="language-plaintext highlighter-rouge">Jellyfin</code> pues fue un punto m√°s a favor del cambio, y lo m√°s fuerte, es que luego, veo que uGeek tambien tiene un articulo explicando un poco el funcionamiento de esta aplicaci√≥n.</p>

<p>Asi que de momento, estoy en este punto, he quitado el servidor <code class="language-plaintext highlighter-rouge">Gonic</code> que venia usando y ahora estoy con <code class="language-plaintext highlighter-rouge">Jellyfin</code> para todo. Casi como si fuera una navaja suiza.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://ugeek.github.io/blog/post/2020-11-15-jellyfin-skin-manager-repositorio-para-cambiar-el-tema-de-tu-jellyfin.html" target="_blank">Jellyfin como servidor de musica</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2021-08-09-lista-de-repositorios-de-jellyfin-.html" target="_blank">A√±adir repositorios a Jellyfin</a></li>
  <li><a href="https://ugeek.github.io/post/2022-12-23-notas-manjaro-jellyfin-podcast--.html" target="_blank">Boum</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2021-12-29-sonixd-player-para-jellyfin-y-subsonic.html" target="_blank">Sonixd</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Raspberry Pi OS" /><category term="Docker" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Tal como explique en este articulo Creando tu propio servidor de musica cuando tienes un servidor en tu casa, empiezas a tener ideas locas de que podrias hacer con el.]]></summary></entry><entry><title type="html">Volviendo a Caddy desde Nginx Proxy Manager</title><link href="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2022/12/25/rpi-caddy-proxy-manager.html" rel="alternate" type="text/html" title="Volviendo a Caddy desde Nginx Proxy Manager" /><published>2022-12-25T00:00:00+00:00</published><updated>2022-12-25T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/raspberry%20pi%20os/2022/12/25/rpi-caddy-proxy-manager</id><content type="html" xml:base="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2022/12/25/rpi-caddy-proxy-manager.html"><![CDATA[<p>Como ya sabreis, <a href="/docker/raspberry%20pi%20os/2021/05/07/rpi-nginx-proxy-manager.html" target="_blank">anteriormente</a> usaba <code class="language-plaintext highlighter-rouge">Nginx Proxy Manager</code> porque habia tenido muchos problemas con <code class="language-plaintext highlighter-rouge">Caddy</code>, no se de donde venian estos problemas, si de <code class="language-plaintext highlighter-rouge">Caddy</code> o de <code class="language-plaintext highlighter-rouge">duckdns.org</code>, asi que hice el cambio a <code class="language-plaintext highlighter-rouge">npm</code> para los amigos.</p>

<!-- more -->

<p>Y aqui vuevlo a estar de nuevo.</p>

<p>Hice el cambio, pero habia una cosa que no me acababa de gustar, el tener la URL de mis servicios, no se como llamarlos, no <em>bonitos</em>, <em>no oficiales</em>?</p>

<p>Cuando me refiero a <em>URL no bonitas</em>, me refiero al tipo <code class="language-plaintext highlighter-rouge">https://music-miservidor.duckdns,.org</code>, como que no quedan muy legales, porque me gustan m√°s, las de toda la vida <code class="language-plaintext highlighter-rouge">https://music.miservidor.duckdns.org</code> que son las normalizadas.</p>

<p>Pero todo cambio, cuando vi un nuevo <a href="https://ugeek.github.io/blog/post/2022-12-23-caddy-crear-usuario-y-contrasena.html" target="_blank">articulo</a> de uGeek, donde comentaba, que se podian crear usuarios y passwords en <code class="language-plaintext highlighter-rouge">Caddy</code> decidi volver a probar a ver si esta vez tenia m√°s suerte.</p>

<p>Asi que me puse al lio, volvi a poner la configuraci√≥n recomendada de <code class="language-plaintext highlighter-rouge">Caddy</code> en mi servidor de Docker y a ver si esta vez teniamos m√°s suerte:</p>

<p>Y parece que si que tenemos suerte, porque de momento todo esta funcionando correctamente y encima con el certificado de <a href="https://letsencrypt.org/es/" target="_blank">Let‚Äôs Encrypt</a>.</p>

<p>Esperemos que esta vez dure m√°s mi aventura con <code class="language-plaintext highlighter-rouge">Caddy</code>.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://ugeek.github.io/blog/post/2021-02-19-proxy-inverso-con-caddy.html" target="_blank">Usando Caddy</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2022-12-23-caddy-crear-usuario-y-contrasena.html" target="_blank">Usuarios en Caddy</a></li>
  <li><a href="https://letsencrypt.org/es/" target="_blank">Let‚Äôs Encrypt</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Raspberry Pi OS" /><category term="Docker" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Como ya sabreis, anteriormente usaba Nginx Proxy Manager porque habia tenido muchos problemas con Caddy, no se de donde venian estos problemas, si de Caddy o de duckdns.org, asi que hice el cambio a npm para los amigos.]]></summary></entry><entry><title type="html">Cambiando de editor. Neovim</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/neovim/2022/12/19/cambiando-de-editor-neovim.html" rel="alternate" type="text/html" title="Cambiando de editor. Neovim" /><published>2022-12-19T00:00:00+00:00</published><updated>2022-12-19T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/neovim/2022/12/19/cambiando-de-editor-neovim</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/neovim/2022/12/19/cambiando-de-editor-neovim.html"><![CDATA[<p>Cansado un poco de tener que siempre usar editores faciles (estilo <code class="language-plaintext highlighter-rouge">mousepad</code>) o que dejaban de tener soporte (<code class="language-plaintext highlighter-rouge">Atom</code>) y que adem√°s no me hacian la vida facil para integrarse con GitHub, intente buscar un nuevo editor que lo tuviera todo y mirando los videos de <a href="https://atareao.es" target="_blank">Atareao</a> me fije en que tenia una guia de instalaci√≥n y de uso de <code class="language-plaintext highlighter-rouge">Neovim</code>, clonico de Vim, y me puse con ello.</p>

<!-- more -->

<p>Porque una de mis ilusiones, era saber utilizar y poder sacarle todo el partido a Vim, pero por falta de tiempo o ganas, nunca me habia puesto, pero gracias a los videos de <code class="language-plaintext highlighter-rouge">Atareao</code> me entro el gusanillo y ‚Ä¶</p>

<p>Para empezar, <a href="https://atareao.es" target="_blank">Lorenzo</a> tiene una excelente guia para iniciarse y usarlo donde todo esta muy bien explicado (aunque aun tengo algunas dudas para aclarar), pero para un uso sencillo y sin muchas complicaciones tienes m√°s que suficiente, si quieres m√°s, ahi es donde tu, tienes que ponerte a investigar con m√°s intensidad.</p>

<p>Para que te hagas una idea, todo lo podeis leer a partir del articulo de <a href="/debian%20gnu/linux/python/2022/11/14/publicar-feed-mastodon.html" target="_blank">Publicar feed en Mastodon</a> todo lo estoy escribiendo con <code class="language-plaintext highlighter-rouge">Neovim</code> y me parece que me voy a quedar en el, porque tal como lo tengo, y eso, que aun tengo algunas cosas que pulir, me parece perfecto la funcionalidad que tiene.</p>

<p>Yo no voy a explicar todos los pasos que tienes que hacer para instalarlo y su posterior configuraci√≥n, porque eso mirando los videos de <code class="language-plaintext highlighter-rouge">atareao.es</code> lo puede hacer tu solo, pero lo que si que voy a poner, son mis ficheros de configuraci√≥n que estoy utilizando actualmente (aunque tambien los podeis encontrar en mis dot_files), que a lo mejor te pueden servir de ayuda.</p>

<p>La estructura de ficheros para la configuraci√≥n de <code class="language-plaintext highlighter-rouge">Neovim</code> es de la siguiente manera:</p>
<ul>
  <li>nvim
    <ul>
      <li>lua
        <ul>
          <li>plugins ‚Äì&gt; Donde tenemos las configuraciones de todos los plugins que usamos
            <ul>
              <li>packer.lua ‚Äì&gt; Fichero donde se definen los plugins que se van a cargar (de donde los tiene que conseguir) asi como la configuraci√≥n que van a tener</li>
            </ul>
          </li>
          <li>settings.lua ‚Äì&gt; Opciones de configuraci√≥n general de neovim</li>
          <li>keymaps.lua ‚Äì&gt; Configuraci√≥n de las opciones de teclado de neovim</li>
        </ul>
      </li>
      <li>spell ‚Äì&gt; Donde tenemos todos los archivos de idiomas que usamos</li>
      <li>templates ‚Äì&gt; los templates / plantillas que usamos</li>
      <li>init.lua ‚Äì&gt; Fichero de inicio de neovim junto con los plugins que se van a utilizar:w</li>
    </ul>
  </li>
</ul>

<h3 id="initlua">init.lua</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="s">--[[</span>
   <span class="s">‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó     ‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó</span>
   <span class="s">‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó</span>
   <span class="s">‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë</span>
   <span class="s">‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë     ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë</span>
   <span class="s">‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë</span>
   <span class="s">‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïö‚ïê‚ïù  ‚ïö‚ïê‚ïù</span>
   <span class="s">Neovim init file</span>
   <span class="s">Version</span><span class="err">:</span> <span class="s">0.8.1 - 2022/11/14</span>
   <span class="s">Maintainer</span><span class="err">:</span> <span class="s">Vctrsnts</span>
   <span class="s">Website</span><span class="err">:</span> <span class="s">https://vctrsnts.github.io</span>
   <span class="s">Referencia</span><span class="err">:</span> <span class="s">https://github.com/brainfucksec/neovim-lua</span>
   <span class="s">--]]</span>
 
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">-- Import Lua Modules</span>
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">require('settings')                                   -- Fitxer dels Settings</span>
   <span class="s">require('keymaps')</span><span class="err">			</span><span class="s">                              -- Fitxer de la configuraci√≥ del teclat</span>
 
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">-- Comen√ßa la carrega de plugins</span>
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">require('plugins/packer')</span><span class="err">		</span><span class="s">                          -- Gestor de Plugins</span>
   <span class="s">require('plugins/autosave')                           -- Plugin per a realitzar el AutoSave</span>
   <span class="s">require('plugins/ayu')</span><span class="err">			</span><span class="s">                          -- Color Theme</span>
   <span class="s">require('plugins/neo-tree')                           -- filebrowser</span>
   <span class="s">require('plugins/feline')                             -- statusline</span>
</code></pre></div></div>

<h3 id="settingslua">settings.lua</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">-- Neovim API Aliases</span>
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">local cmd = vim.cmd</span>
   <span class="s">local exec = vim.api.nvim_exec</span>
   <span class="s">local fn = vim.fn</span>
   <span class="s">local g = vim.g</span>
   <span class="s">local opt = vim.opt</span>
 
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">-- Configuraci√≥ General</span>
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">g.mapleader = ';'</span><span class="err">					</span><span class="s">                            -- Canviar leader a coma</span>
   <span class="s">opt.swapfile = </span><span class="kc">false</span><span class="err">					</span><span class="s">                        -- No fe servir swapfile</span>
 
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">-- Neovim UI</span>
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">opt.number = </span><span class="kc">true</span><span class="err">					</span><span class="s">                            -- Es visualitzar els numeros de les linias</span>
   <span class="s">opt.relativenumber = </span><span class="kc">true</span><span class="err">				</span><span class="s">                      -- Es visualitzar el numero relatiu de la linia</span>
   <span class="s">opt.foldmethod = 'marker'</span><span class="err">				</span><span class="s">                      -- Activada folding (default 'foldmarker')</span>
   <span class="s">opt.splitright = </span><span class="kc">true</span><span class="err">					</span><span class="s">                        -- vertical split to the right</span>
   <span class="s">opt.splitbelow = </span><span class="kc">true</span><span class="err">					</span><span class="s">                        -- horizontal split to the bottom</span>
   <span class="s">opt.linebreak = </span><span class="kc">true</span><span class="err">					</span><span class="s">                        -- wrap on word boundary</span>
   <span class="s">opt.colorcolumn = '80'</span><span class="err">					</span><span class="s">                      -- Es visualitzar la linia que marca els 80 caracters</span>
   <span class="s">opt.termguicolors = </span><span class="kc">true</span> 
   <span class="s">opt.guifont = "Fira Code"</span>
   <span class="s">g.neovide_cursor_vfx_mode = "railgun"</span>
 
   <span class="s">opt.list = </span><span class="kc">true</span>
   <span class="s">opt.listchars = 'tab:‚ñ∏ ,space:¬∑,nbsp:‚ê£,trail:‚Ä¢,precedes:¬´,extends:¬ª'</span>
 
   <span class="s">---------------------------------------------------------------------------------------------------</span>
   <span class="s">-- Corrector ortografic per llenguatge</span>
   <span class="s">---------------------------------------------------------------------------------------------------</span>
   <span class="s">exec ([[</span>
 <span class="err">	</span><span class="s">  augroup markdownSpell</span>
 <span class="err">		</span><span class="s">  autocmd!</span>
 <span class="err">		</span><span class="s">  autocmd FileType mardown setlocal spell Spelllang=es</span>
 <span class="err">		</span><span class="s">  autocmd BufRead,BufNewFile *.md setlocal spell spelllang=es</span>
 <span class="err">	</span><span class="s">  augroup END</span>
   <span class="s">]], </span><span class="kc">false</span><span class="s">)</span>
 
   <span class="s">---------------------------------------------------------------------------------------------------</span>
   <span class="s">-- Tabs, indent</span>
   <span class="s">---------------------------------------------------------------------------------------------------</span>
   <span class="s">opt.expandtab = </span><span class="kc">true</span><span class="err">					</span><span class="s">                        -- use spaces instead of tabs</span>
   <span class="s">opt.shiftwidth = 2</span><span class="err">					</span><span class="s">                          -- shift 2 spaces when tab</span>
   <span class="s">opt.tabstop = 2</span><span class="err">						</span><span class="s">                            -- 1 tab == 2 spaces</span>
   <span class="s">opt.smartindent = </span><span class="kc">true</span><span class="err">					</span><span class="s">                      -- autoindent new lines</span>
 
   <span class="s">---------------------------------------------------------------------------------------------------</span>
   <span class="s">-- Memory, CPU</span>
   <span class="s">---------------------------------------------------------------------------------------------------</span>
   <span class="s">opt.hidden = </span><span class="kc">true</span><span class="s">                                     -- enable background buffers</span>
   <span class="s">opt.lazyredraw = </span><span class="kc">true</span><span class="s">                                 -- faster scrolling</span>
   <span class="s">opt.synmaxcol = 1000                                  -- max column for syntax highlight</span>
</code></pre></div></div>

<h3 id="keymapslua">keymaps.lua</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">-- VARIABLES / ALIASES</span>
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">local map = vim.api.nvim_set_keymap</span>
   <span class="s">local default_opts = {noremap = </span><span class="kc">true</span><span class="s">, silent = </span><span class="kc">true</span><span class="s">}</span>
   <span class="s">local cmd = vim.cmd</span>
 
   <span class="s">----------------------------------------------------------------------------------------------------</span>
   <span class="s">-- Applications &amp; Plugins shortcuts</span><span class="err">:</span>
   <span class="s">----------------------------------------------------------------------------------------------------</span>
 
   <span class="s">--</span>
   <span class="s">-- nvim-tree</span>
   <span class="s">--</span>
   <span class="s">map('n', '&lt;C-n&gt;', ':Neotree toggle&lt;CR&gt;', default_opts)       -- open/close</span>
</code></pre></div></div>

<h3 id="packerlua">packer.lua</h3>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="s">--[[</span>
    <span class="s">S'ENCARREGA DE TOTA LA CONFIGURACI√ì / CARREGA DE PLUGINS</span>

    <span class="s">Plugin manager</span><span class="err">:</span> <span class="s">packer.nvim</span>
    <span class="s">https://github.com/wbthomason/packer.nvim</span>

    <span class="s">For information about installed plugins see the README</span>
    <span class="s">neovim-lua/README.md</span>
    <span class="s">https://github.com/brainfucksec/neovim-lua#readme</span>
  <span class="s">--]]</span>

   <span class="s">local fn = vim.fn</span>
   <span class="s">local install_path = fn.stdpath('data')..'/site/pack/packer/start/packer.nvim'</span>
 
   <span class="s">if fn.empty(fn.glob(install_path)) &gt; 0 then</span>
     <span class="s">packer_bootstrap = fn.system({'git', 'clone', '--depth', '1', 'https://github.com/wbthomason/packer.nvim', install_path})</span>
   <span class="s">end</span>
   <span class="s">return require('packer').startup(function(use)</span>
     <span class="s">-- My plugins here</span>
     <span class="s">-- use 'foo1/bar1.nvim'</span>
     <span class="s">-- use 'foo2/bar2.nvim'</span>

     <span class="s">-- Automatically set up your configuration after cloning packer.nvim</span>
     <span class="s">-- Put this at the end after all plugins</span>
     <span class="s">use 'wbthomason/packer.nvim'</span>
   
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">-- colorschemes</span>
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">use 'Shatur/neovim-ayu'</span>
 
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">-- Activem Icones</span>
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">use 'kyazdani42/nvim-web-devicons'</span>
     <span class="s">use 'adelarsq/vim-devicons-emoji'</span>
 
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">-- Activem Explorer / Navegador de directoris</span>
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">use {</span>
       <span class="s">'nvim-neo-tree/neo-tree.nvim',</span>
       <span class="s">branch = "v2.x",</span>
       <span class="s">requires = {</span>
         <span class="s">"nvim-lua/plenary.nvim",</span>
         <span class="s">"kyazdani42/nvim-web-devicons", -- not strictly required, but recommended</span>
         <span class="s">"MunifTanjim/nui.nvim"</span>
       <span class="s">}</span>
     <span class="s">}</span>
 
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">-- Activem Status Line</span>
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">use ('Iron-E/nvim-highlite')</span>
     <span class="s">use {</span>
       <span class="s">'feline-nvim/feline.nvim',</span>
       <span class="s">requires = {</span>
        <span class="s">'nvim-web-devicons'</span>
       <span class="s">},</span>
     <span class="s">}</span>
 
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">-- Activem el AutoSave</span>
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">use "Pocco81/auto-save.nvim"</span>
 
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">-- Final del fitxer de configuraci√≥ de plugins</span>
     <span class="s">-------------------------------------------------------------------------------------------------</span>
     <span class="s">if packer_bootstrap then</span>
       <span class="s">require('packer').sync()</span>
     <span class="s">end</span>
   <span class="s">end)</span>
</code></pre></div></div>

<p>Pues, ya has podido comprobar como lo tengo yo configurado y a pleno rendimiento, pero tal como he dicho al principio, aun falta por pulir algunas cosas.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.youtube.com/watch?v=SoDjVPr5_Go&amp;list=PL3lTiK2rXrUEL52KOZcTBsoLMndfFBV2Q" target="_blank">Guia sobre Neovim - Atareao.es</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Neovim" /><category term="Debian GNU/Linux" /><category term="Neovim" /><summary type="html"><![CDATA[Cansado un poco de tener que siempre usar editores faciles (estilo mousepad) o que dejaban de tener soporte (Atom) y que adem√°s no me hacian la vida facil para integrarse con GitHub, intente buscar un nuevo editor que lo tuviera todo y mirando los videos de Atareao me fije en que tenia una guia de instalaci√≥n y de uso de Neovim, clonico de Vim, y me puse con ello.]]></summary></entry><entry><title type="html">Script para actualizar tu GitHub</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2022/11/22/script-update-git.html" rel="alternate" type="text/html" title="Script para actualizar tu GitHub" /><published>2022-11-22T00:00:00+00:00</published><updated>2022-11-22T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2022/11/22/script-update-git</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2022/11/22/script-update-git.html"><![CDATA[<p>Buscando maneras de facilitarme el trabajo con <a href="https://www.github.com" target="_blank">GitHub</a> que es donde tengo alojada mi web (m√°s bien son mis projectos, apuntes y cosas por es estilo) porque para subir cualquier cosa a <code class="language-plaintext highlighter-rouge">GitHub</code> era una tocada de huevos en mi caso.</p>

<!-- more -->

<p>As√≠ que me puse a buscar algun script para ayudarme a realizar las actualizaciones de mis repositorios en Git, y despu√©s de mucho buscar, al final lo encontre.</p>

<p>Es el siguiente que pongo a continuaci√≥n</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c">#!/bin/bash</span>
 
   <span class="c"># Actualitzar rapidament el teu repositori de Git</span>
   <span class="c"># (CC) 2011 Alfonso Saavedra "Son Link"</span>
   <span class="c"># http://sonlinkblog.blogspot.com</span>
   <span class="c"># Bajo licencia GNU/GPL</span>
 
   <span class="c"># up2Git.sh &lt;ficheros&gt;</span>
 
   <span class="c"># Comprovem si el directori en el que estem, es un repositori de Git</span>
   <span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-d</span> <span class="s1">'.git'</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
     </span><span class="nb">echo</span> <span class="s1">'Aquest directori no conte un repositori de Git'</span>
     <span class="nb">exit</span> <span class="nt">-1</span>
   <span class="k">fi</span>
 
   <span class="c"># Ara validem i l'hi hem passat algun parametre</span>
   <span class="k">if</span> <span class="o">[</span> <span class="nv">$# </span><span class="o">==</span> 0 <span class="o">]</span><span class="p">;</span> <span class="k">then
     </span><span class="nb">echo</span> <span class="s2">"Up2Git: ¬°Error! No l'hi has passat cap parametre"</span>
     <span class="nb">echo</span> <span class="s2">"up2Git fitxer_1 fitxer_2 ... fitxer_N"</span>
     <span class="nb">exit</span> <span class="nt">-1</span>
   <span class="k">else</span>
     <span class="c"># Revisem els parametres per validar si son fitxers o directori</span>
     <span class="k">for </span>file <span class="k">in</span> <span class="nv">$*</span><span class="p">;</span> <span class="k">do
       if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-e</span> <span class="nv">$file</span> <span class="o">]</span><span class="p">;</span> <span class="k">then
         </span><span class="nb">echo</span> <span class="s2">"Up2Git: L'arxiu o directori </span><span class="nv">$file</span><span class="s2"> no existeix"</span>
         <span class="nb">exit</span> <span class="nt">-1</span>
       <span class="k">fi
     done</span>
     
     <span class="c"># Si hem arribat fins aqui, informem a Git dels arxius a pujar</span>
     git add <span class="nv">$*</span>
     
     <span class="c"># Aixo ens demana el missatge del commit</span>
     <span class="nb">echo</span> <span class="s2">"Informi del missatge del commit:"</span>
     <span class="nb">read </span>TXT
     git commit <span class="nt">-m</span> <span class="s2">"</span><span class="nv">$TXT</span><span class="s2">"</span>
 
     <span class="c"># i finalitzem pujant els arxius</span>
     git push origin master
 
   <span class="k">fi</span>
</code></pre></div></div>

<p>Para usarlo, en mi caso, lo hago de la siguiente manera :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>bash up2Git.sh <span class="nb">.</span>
</code></pre></div></div>

<p>El script es de <code class="language-plaintext highlighter-rouge">Alfonso Saavedra</code> a el todo mi agradecimiento, por facilitarme el tener mis repositorios de GitHub actualizados.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="http://sonlinkblog.blogspot.com" target="_blank">Son Link</a></li>
  <li><a href="https://gist.github.com/son-link/890903" target="_blank">Script</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[Buscando maneras de facilitarme el trabajo con GitHub que es donde tengo alojada mi web (m√°s bien son mis projectos, apuntes y cosas por es estilo) porque para subir cualquier cosa a GitHub era una tocada de huevos en mi caso.]]></summary></entry><entry><title type="html">Publicar feed en Mastodon / Twitter</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/python/2022/11/14/publicar-feed-mastodon.html" rel="alternate" type="text/html" title="Publicar feed en Mastodon / Twitter" /><published>2022-11-14T00:00:00+00:00</published><updated>2022-11-14T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/python/2022/11/14/publicar-feed-mastodon</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/python/2022/11/14/publicar-feed-mastodon.html"><![CDATA[<p>Descubri a traves del <a href="https://elblogdelazaro.org" target="_blank">Blog de Lazaro</a>, que si tienes cuenta en <code class="language-plaintext highlighter-rouge">Mastodon</code>, quien no tiene cuenta ahora tal como van las cosas en <code class="language-plaintext highlighter-rouge">Twitter</code>,  que puedes enviar de forma aleatoria alguno de los articulos que tienes publicados en tu web.</p>

<!-- more -->

<p>Asi que despu√©s de leer su articulo y ver si yo podia hacer lo mismo, me lie la manta a la cabeza y al lio.</p>

<p>Lo primero, es tener una cuenta y despu√©s tienes que crear un aplicaci√≥n en <code class="language-plaintext highlighter-rouge">Mastodon</code> de igual forma que se puede crear en Twitter (explicaci√≥n m√°s adelante ).</p>

<p>Aprovechando que en el servidor ya tengo Python instalado, hare que se ejecute en el mismo servidor. Eso si, tambi√©n tienes que instalar:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>pip <span class="nb">install</span> <span class="nt">--user</span> feedparser mastodon
</code></pre></div></div>
<p>Para que Python pueda realizar el tratamiento del fichero <code class="language-plaintext highlighter-rouge">xml</code>.</p>

<p>Una vez que ya tienes la aplicaci√≥n creada, tienes que crear un fichero en <code class="language-plaintext highlighter-rouge">Python</code> que tiene que tener la siguiente estructura:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c1">#!/usr/bin/env python
</span>   <span class="c1"># -*- coding: utf-8 -*-
</span> 
   <span class="c1"># el fitxer original es de Carlos M. (https://elblogdelazaro.org )
</span> 
   <span class="c1"># Tens que tindre instalats les llibreries feedparser, Mastodon
</span> 
   <span class="c1"># Realitzem la crida als moduls de Python
</span>   <span class="kn">import</span> <span class="n">feedparser</span>
   <span class="kn">import</span> <span class="n">random</span>
   <span class="kn">from</span> <span class="n">mastodon</span> <span class="kn">import</span> <span class="n">Mastodon</span>
 
   <span class="c1"># Reallitzem la crida a les claus del Diccionari
</span>   <span class="n">CUSTOMER_KEY</span> <span class="o">=</span> <span class="sh">'</span><span class="s">xxxxxxxxxxxxxxx</span><span class="sh">'</span>
   <span class="n">CUSTOMER_SECRET</span> <span class="o">=</span> <span class="sh">'</span><span class="s">xxxxxxxxxxxxxxxxx</span><span class="sh">'</span>
   <span class="n">ACCESS_TOKEN</span> <span class="o">=</span> <span class="sh">'</span><span class="s">xxxxxxxxxxxx</span><span class="sh">'</span>
   <span class="n">ACCESS_TOKEN_SECRET</span> <span class="o">=</span> <span class="sh">'</span><span class="s">xxxxxxxxxxxxxxxxxxx</span><span class="sh">'</span>
 
   <span class="c1"># Informem de l'adre√ßa del feed
</span>   <span class="n">feed</span> <span class="o">=</span> <span class="sh">'</span><span class="s">tu direcci√≥n web hacia el feed.xml</span><span class="sh">'</span>
 
   <span class="c1"># Descodifiquem el feed (arxiu XML)
</span>   <span class="n">d</span> <span class="o">=</span> <span class="n">feedparser</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">feed</span><span class="p">)</span>
 
   <span class="c1"># Obtenim la longitud del feed i aleatoriament seleccionem un article
</span>   <span class="n">feedlen</span> <span class="o">=</span> <span class="nf">len</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">])</span>
   <span class="n">num</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">feedlen</span><span class="p">)</span>
 
   <span class="c1"># Iniciem l'API de Mastodon, i escribim l'estat
</span>   <span class="n">status_text</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">][</span><span class="n">num</span><span class="p">][</span><span class="sh">'</span><span class="s">title</span><span class="sh">'</span><span class="p">]</span> <span class="o">+</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span> <span class="o">+</span> <span class="n">d</span><span class="p">[</span><span class="sh">'</span><span class="s">entries</span><span class="sh">'</span><span class="p">][</span><span class="n">num</span><span class="p">][</span><span class="sh">'</span><span class="s">link</span><span class="sh">'</span><span class="p">]</span>
   <span class="n">articulo</span> <span class="o">=</span> <span class="p">(</span><span class="sh">"</span><span class="s">Recordando art√≠culos publicados:</span><span class="sh">"</span> <span class="o">+</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span> <span class="o">+</span> <span class="n">status_text</span><span class="p">)</span>

   <span class="c1"># Token y url de la Instancia
</span>   <span class="n">mastodon</span> <span class="o">=</span> <span class="nc">Mastodon</span><span class="p">(</span>
     <span class="n">access_token</span> <span class="o">=</span> <span class="sh">'</span><span class="s">XXXXXXXXXXXXXXXXXXXXXXX</span><span class="sh">'</span><span class="p">,</span>
     <span class="n">api_base_url</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://mastodon.online/</span><span class="sh">'</span>
   <span class="p">)</span>
   <span class="c1"># Publiquem a Mastodon
</span>   <span class="n">mastodon</span><span class="p">.</span><span class="nf">status_post</span><span class="p">(</span><span class="n">articulo</span><span class="p">)</span>
</code></pre></div></div>

<p>Lo que tienes que tener en cuenta, es informar correctamente de:</p>
<ul>
  <li><strong>CUSTOMER_KEY</strong></li>
  <li><strong>CUSTOMER_SECRET</strong></li>
  <li><strong>ACCESS_TOKEN</strong></li>
  <li><strong>ACCESS_TOKEN_SECRET</strong></li>
  <li><strong>feed</strong></li>
</ul>

<p>Una vez, tengas el fichero creado, si quieres hacer pruebas, tienes que hacerlo de la siguiente manera :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>python3 nombreDelArchivo.py
</code></pre></div></div>

<p>Entonces, si no has tenido ningun problema, a tu cuenta de Mastodon te llegara un articulo aleatorio de tu web.</p>

<p>Despu√©s de hacer las pruebas que creas oportunas, solo te quedara configurar el cron, para que se ejecute cuando tu quieras.</p>

<p>Yo lo tengo a que lo haga una vez a la semana, pero me estoy replanteando cambiarlo a que lo haga 3 veces por semana, porque a veces, a√±ado articulos, que a lo mejor cuestan mucho a que salgan. Se que hay otro script, que lo que hace es publicar los ultimos articulos creados. Pero eso lo tengo que estudiar.</p>

<p>Tambi√©n tengo en cuenta, que si lo hago 3 veces a la semana (publicar toot) creare muchos mensajes, pero lo que tambi√©n se puede hacer, es configurar Mastodon, para que elimine todos los toot con m√°s de 6 meses de antig√ºedad (o menos).</p>

<p>Para la configuraci√≥n del <code class="language-plaintext highlighter-rouge">CRON</code> lo tengo de la siguiente manera:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   @weekly /usr/bin/python3 /home/tu_usuario/lugar_donde_tengas_el_script/botMastodonPythonRss.py
</code></pre></div></div>

<p>En el caso de que lo quisieras hacer funcionar en <code class="language-plaintext highlighter-rouge">Twitter</code> tienes que tener en cuenta las siguientes modificaciones al archivo de <code class="language-plaintext highlighter-rouge">Python</code>:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c1"># En vez de usar la libreria "Mastodon" de Python, tienes que usar "Twython"
</span>   <span class="kn">from</span> <span class="n">twython</span> <span class="kn">import</span> <span class="n">Twython</span>

   <span class="n">api</span> <span class="o">=</span> <span class="nc">Twython</span><span class="p">(</span><span class="n">CONSUMER_KEY</span><span class="p">,</span><span class="n">CONSUMER_SECRET</span><span class="p">,</span><span class="n">ACCESS_KEY</span><span class="p">,</span><span class="n">ACCESS_SECRET</span><span class="p">)</span>

</code></pre></div></div>

<p>Y luego, solamente tienes que a√±adir la siguiente linea para publicar el articulo en <code class="language-plaintext highlighter-rouge">Twitter</code>:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="n">api</span><span class="p">.</span><span class="nf">update_status</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">articulo</span><span class="p">)</span>
</code></pre></div></div>

<p>Espero que te sirva tanto como me ha servido a mi. Y eso si, no se te olvide darle las gracias a <a href="http://elblogdelazaro.org" target="_blank">Carlos M</a> por el increible articulo en que me he basado yo.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elblogdelazaro.org/posts/2021-08-16-bot-en-python-para-publicar-un-feed-de-forma-aleatorios-en-twitter-y-mastodom/" target="_blank">Script de Python</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Python" /><category term="Debian GNU/Linux" /><category term="Python" /><summary type="html"><![CDATA[Descubri a traves del Blog de Lazaro, que si tienes cuenta en Mastodon, quien no tiene cuenta ahora tal como van las cosas en Twitter, que puedes enviar de forma aleatoria alguno de los articulos que tienes publicados en tu web.]]></summary></entry><entry><title type="html">Mi nuevo mediacenter - Thinkcenter m710q</title><link href="https://vctrsnts.github.io/hardware/raspberry%20pi/thinkcenter/2022/11/08/cambiando-mediacenter.html" rel="alternate" type="text/html" title="Mi nuevo mediacenter - Thinkcenter m710q" /><published>2022-11-08T00:00:00+00:00</published><updated>2022-11-08T00:00:00+00:00</updated><id>https://vctrsnts.github.io/hardware/raspberry%20pi/thinkcenter/2022/11/08/cambiando-mediacenter</id><content type="html" xml:base="https://vctrsnts.github.io/hardware/raspberry%20pi/thinkcenter/2022/11/08/cambiando-mediacenter.html"><![CDATA[<p>Como ya mencione en al articulo que hablaba sobre el cambio de servidor <a href="/debian%20gnu/linux/docker/2022/05/26/nuevo-servidor.html" target="_blank">Mi nuevo servidor</a>, me di cuenta que me quedaba con la RPI4 de 4Gb sin utilizar.</p>

<!-- more -->

<p>Asi que decidi cambiar la antigua RPI3 donde empezaba ya a tener problemas con los nuevos codecs con que venian las peliculas (HEVC 10b-AC3) y cambiarla por la RPI4 con soporte para estos nuevos 
codecs y que no usaba por haberla sustituido por el Dell.</p>

<p>Me puse manos a la obra con ello, pero ya os digo que me decepciono un monton la RPI4.</p>

<p>Lo primero fue bajarme la imagen compatible de Libreelec para mi RPI4 y su posterior instalaci√≥n. Todo esto conectado a un monitor que tengo en casa para estas pruebas / instalaciones.</p>

<p>No tuve ningun problema la la hora de la instalaci√≥n y de la configuraci√≥n (Wifi, pluguins, conexi√≥n a SAMBA, etc‚Ä¶) todo perfecto. Luego lo conecto al TV que tengo en el salon con un conversor 
de HDMI a micro-HDMI y no funcionaba. No se veia nada, todo en negro. Aqui es donde pienso que no he hecho bien la instalaci√≥n / configuraci√≥n, que no lee correctamente la resoluci√≥n, o sea las 
cosas m√°s normales que te puedas imaginar.</p>

<p>Busque informaci√≥n por inet, pregunte a uno de los canales de Telegram donde estoy que tratan sobre las RPI4 como mediacenter, etc‚Ä¶ y todos me decian, que tenia que forzar la resoluci√≥n a traves 
del fichero <strong>config.txt</strong>. Todo sin obtener ningun resultado.</p>

<p>Al final me canse de trastear con la RPI4, y eso que habia hecho miles de instalaciones pensado que hay es donde residia el problema. Al final ya me quedo claro, que el problema no era la 
instalaci√≥n, sino el conversor de HDMI a micro-HDMI que no funcionaba correctamente. Asi que el siguiente paso, fue comprar un cable de HDMI a micro-HDMI.</p>

<p>Una vez que me llego el cable correcto, vuelta a hacer una nueva instalaci√≥n conectando la RPI4 al monitor de pruebas. Todo funcionaba a las mil maravillas, la WIFI excelente, la imagen perfecta, hay 
es donde me dije, pues ya esta todo en marcha y listo para volver a funcionar. Hay infeliz de mi!!!</p>

<p>Me llevo la RPI4 al TV del comedor y la conecto y no me lo podria creer, todo funcionaba perfectamente. Pues ya esta, lo vuelvo a tener todo en perfecto estado y en marcha hasta que puse a usar
la RPI4 con la WIFI y aqui es donde se me cayo el mundo encima.</p>

<p>No me lo podia creer, la WIFI no funcionaba ni a patadas, la pelicula se quedaba congelada y no se veia nada!!! yo tirandome de los pelos porque no entendia nada, si hasta hace 5 minutos todo 
funcionaba correctamente y ahora de golpe y porrazo no funciona nada. Volvemos a estar como en el principio.</p>

<p>A partir de aqui todo fueron problemas. Pero vamos a explicar todo lo sucedido paso a paso.</p>

<p>Lo primero fue copiar la imagen de Libreelec en el SSD e iniciamos la instalaci√≥n / configuraci√≥n de Libreelec. Todo funciona perfectamente hasta llegar a la configuraci√≥n de la <code class="language-plaintext highlighter-rouge">WIFI</code> (y esto si que es para mear y no echar gota).</p>

<p>Despues de buscar informaci√≥n como un loco, veo que hay un error (validado y reportado) en el dise√±o de la Raspberry que es, cuando usas la WIFI esta se <code class="language-plaintext highlighter-rouge">acopla</code> a la se√±al del cable HDMI y hace que se anule la se√±al WIFI. Para solucionar este problema se puede hacer de 3 maneras:</p>
<ul>
  <li><strong>Soluci√≥n dificil</strong>, cambiar de canal en el que emite tu router por otro diferente para que no se acople a la se√±al del cable HDMI.</li>
  <li><strong>Soluci√≥n facil</strong>, desactivar la WIFI de la Raspberry y usar un conector USB-WIFI</li>
  <li><strong>Soluci√≥n ideal</strong>, esperar a que Raspberry saque un nuevo firmware que solucione este problema. Se comenta que hasta finales de a√±o no estara disponible.</li>
</ul>

<p>En mi caso, lo que hice fue escoger la soluci√≥n facil, me compre un usb-wifi y volvi de nuevo a configurar la RPI4B, esperando, por fin, poder usarla como HTC.</p>

<p>Volvemos a reiniciar la configuraci√≥n de la WIFI sin ningun problema, esta vez, ya tenemos la RPI4B conectada a la WIFI, pero parece ser que entre el SSD conectado a traves de USB, el mando a 
distancia conectado a traves de USB y el USB de la WIFI, la Raspberry no podia manejar correctamente toda la <code class="language-plaintext highlighter-rouge">informaci√≥n</code> que recibia.</p>

<p>Para que os hagais una idea, la RPI3B funcionaba mejor que la RPI4B y eso que esta ultima (siempre lo a√±ado a todos mis Libreelec) habia creado el fichero <code class="language-plaintext highlighter-rouge">advancedsettings.xml</code> donde le a√±ado lo 
siguiente:</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   &lt;advancedsettings version="1.0"&gt;
     &lt;cache&gt;
       &lt;buffermode&gt;4&lt;/buffermode&gt;
       &lt;memorysize&gt;0&lt;/memorysize&gt;
     &lt;/cache&gt;
   &lt;/advancedsettings&gt;
</code></pre></div></div>

<p>Donde:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">buffermode</code>: le indica a Kodi que tipo de buffer que se va a usar (en mi caso, selecciono el valor <code class="language-plaintext highlighter-rouge">4</code> para el tratamiento de ficheros a traves de samba, nfs).</li>
  <li><code class="language-plaintext highlighter-rouge">memorysize</code>: le indica a Kodi que de que manera va a usar la RAM (en mi caso, selecciono el valor <code class="language-plaintext highlighter-rouge">0</code> para que de preferencia al SSD/HDD en vez de a la RAM).</li>
</ul>

<p>De esta manera se consigue que mientras se visualiza la pelicula / serie, se descargue el fichero y no tener problemas a la hora de visualizaci√≥n.</p>

<p>Pero en mi caso, esto no pasa, para que os hagais una idea de como funciona, que habia veces (da igual que versi√≥n de mkv fuera, 264, 265) que Kodi se quedaba colgado, incluso usando un SSD.</p>

<p>Al final, cansado de ver que era imposible usar la RPI4B, empeza a investigar y a preguntar en un canal de Telegram sobre usar la Raspberry como HTC y se llego a la conclusi√≥n de que era el USB que 
se colapsaba y en cambio esto mismo (en la RPI3B) no pasa, porque como por defecto, uso la WIFI que ya lleva incorpada, pues‚Ä¶</p>

<p>Y asi estamos, usando la RPI4B como HTC, desilusionado ante el mal funcionamiento de lo que tendria que ser la mejor Raspeberry hasta el momento.</p>

<p>Por eso digo, que maldita el dia que se me ocurrio cambiar mi RPI3 (se que era un cambio necesario, la tecnologia siempre esta en constante evoluci√≥n y m√°s los codecs para ver las peliculas son los 
que mandan) a la RPI4, y ahora la tengo tirada en casa sin usar, por culpa de este problema, aunque üòâ podria haberla vendido y sacarme una pasta, porque tal como estan las RPI4, ganaria pasta 
seguro, pero me da pena venderla, porque nunca se sabe cuando te va hacer falta una.</p>

<p>Asi que despues (de nuevo, pregunte en otro canal de Telegram) me aconsejaron que lo mejor y que para ahorrarme futuros problemas, que lo mejor es tener un PC conectado a la TV del comedor y me 
ahorro todos los problemas derivados con los codecs y el soporte de estos, porque en un PC normal y corriente tiene m√°s recorrido que la RPI4.</p>

<p>Y fue lo que hice, volvi a mi canal favorito de Thinkpads de Telegram y pregunte si alguno le sobrava algun Tiny. Y ten por seguro que siempre hay alguien que le sobra un Tiny.</p>

<p>Como todo en este mundo, es mutable y ante la posibilidad de conseguir a buen precio un <a href="https://icecat.biz/es/p/lenovo/10mr0047us/thinkcentre-pcs-workstations-m710q-36768136.html" target="_blank">Lenovo Thinkcenter M710q</a>,
 asi que me lance de cabeza por el.</p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/lenovo-m710q.jpg" alt="lenovo-m710q.jpg" />
    </div>
    
</div>

<p>Y ya me veis, de tener 2 RPI (RPI4 con 4Gb como servidor y una RPI3 como mediacenter) a tener un Tiny Lenovo m710q con 8Gb y un i5-6500 como mediacenter y un Dell Optiplex 3050 con 8Gb y un i5-7500 
como servidor.</p>

<p>Por eso digo, que a veces no hay mal que por bien no venga.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://libreelec.tv" target="_blank">Libreelec</a></li>
  <li><a href="https://www.adslzone.net/2019/11/28/problemas-wifi-raspberry-pi-4/]" target="_blank">RPI4B pierde cobertura Wifi</a></li>
  <li><a href="https://www.enricozini.org/blog/2019/himblick/raspberry-pi-4-loses-wifi-at-2560x1440-screen-resolution/" target="_blank">Raspberry Pi 4 WiFi stops working at 2560x1440 screen resolution</a></li>
  <li><a href="https://kodi.wiki/view/Advancedsettings.xml" target="_blank">Cambiar el funcionamiento de la cache en Kodi</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Hardware" /><category term="Raspberry Pi" /><category term="Thinkcenter" /><category term="Hardware" /><category term="Raspberry Pi" /><category term="Thinkcenter" /><summary type="html"><![CDATA[Como ya mencione en al articulo que hablaba sobre el cambio de servidor Mi nuevo servidor, me di cuenta que me quedaba con la RPI4 de 4Gb sin utilizar.]]></summary></entry><entry><title type="html">Mi nuevo servidor</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/docker/2022/05/26/nuevo-servidor.html" rel="alternate" type="text/html" title="Mi nuevo servidor" /><published>2022-05-26T00:00:00+00:00</published><updated>2022-05-26T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/docker/2022/05/26/nuevo-servidor</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/docker/2022/05/26/nuevo-servidor.html"><![CDATA[<p>Se que llevo mucho tiempo si publicar nada, pero he estado liado haciendos cambios en el servidor (RPI4).</p>

<!-- more -->

<p>Como sabeis, antes tenia una Raspberry Pi 4 de 4Gb, pero para algunas cosas, se me quedaba pillado y pense que podia usarla como mediacenter, y cambiar la RPI3 que tenia por esta.</p>

<p>Como estoy en el grupo de Telegram de Thinkpads (unos frikis de cuidado) pues a un compa√±ero del canal, que tenia un Dell a la venta, se lo compre. Y como siempre, cuando me llego, me senti como un 
ni√±o con zapatos nuevos.</p>

<p>Asi que me lie la manta a la cabeza y el cambio lo hice a lo bestia, ya que hago un cambio, porque no la lio, y ahora tengo un Dell Optiplex 3050 con 8Gb con un i5-7500. O sea un maquinon que no me lo
 voy a acabar nunca.</p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/dell_3050.png" alt="dell_3050.png" />
    </div>
    
</div>

<p>Y junto con el Dell y algunas cosas que tenia en casa pues me he montado lo siguiente :</p>
<ul>
  <li>SDD crucial de 250Gb para el Sistema Operativo</li>
  <li><strong>Debian GNU/Linux STABLE</strong> para no tener ningun problema (cuando es un servidor, prefiero la estabilidad a la novedad)</li>
  <li>El HDD externo de 8Tb (Western Digital) que tenia conectado a la RPI4 que se lo he contectado al servidor</li>
</ul>

<p>Ahora solo queda hacer el cambio de la RPI4B que tenia haciendo las funciones de servidor y poner el Tiny y de paso, aprovechar (aqui no nada se tira), la RPI4 y ponerla en substituci√≥n de la RPI3B 
que tengo ahora.</p>

<p>Nos pusimos a ello junto mi inseparable <strong>Debian GNU/Linux STABLE</strong>, no quiero jugar a ser dios con <strong>UNSTABLE</strong> en un servidor, y previa actualizaci√≥n del HDD por un SSD Crucial de 250Gb nos 
pusimos con la instalaci√≥n.</p>

<p>La instalaci√≥n no cambia en <strong>Debian GNU/Linux</strong>, sin ningun problema, aunque tuve dudas de que manera particionar el SSD para sacarle el maximo rendimiento. Despu√©s de pensar lo deje de la siguiente manera 
(seguramente hay otra mejor, pero no se me ha ocurrido):</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   filesystem   mount point   size
   ----------   -----------   ----
   /dev/sdb1    /             200Gb
   /dev/sdb2    swap          4Gb
   /dev/sdb5    /home         40Gb
</span></code></pre></div></div>

<p>Se que en un PC con 8Gb de RAM, poner swap no tiene ningun sentido, pero, nunca se sabe‚Ä¶</p>

<p>Llegados a este punto y sin ningun problema a la hora de la instalaci√≥n, a√±adi todo lo que tenia en la RPI4B al Tiny (que no era poco):</p>
<ul>
  <li><a href="">Nginx Proxy Manager</a></li>
  <li><a href="https://hub.docker.com/r/deluan/navidrome" target="_blank">Navidrome</a></li>
  <li><a href="https://hub.docker.com/r/linuxserver/duckdns" target="_blank">Duckdns</a></li>
  <li><a href="https://hub.docker.com/r/flexget/flexget" target="_blank">Flexget</a></li>
  <li><a href="https://hub.docker.com/r/linuxserver/transmission" target="_blank">Transmission</a></li>
  <li><a href="https://hub.docker.com/r/ngosang/amule" target="_blank">aMule</a></li>
  <li><a href="https://hub.docker.com/r/linuxserver/jackett" target="_blank">Jackett</a></li>
  <li><a href="https://hub.docker.com/r/dperson/samba" target="_blank">Samba</a></li>
</ul>

<blockquote>
  <p>üí° <a href="https://www.github.com/Vctrsnts/dot_files" target="_blank">aqui</a> podreis encontrar los ficheros de configuraci√≥n que estoy usando.</p>
</blockquote>

<p>M√°s unos cosas nuevas que he ido aprendiendo por el camino (y todo a traves de Docker):</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Pi-Hole</code>: Bloquear toda la publicidad cuando navegas por cualquier sitio.</li>
  <li><code class="language-plaintext highlighter-rouge">Wireguard</code>: VPN para poder acceder a tu servidor desde cualquier sitio.</li>
  <li><code class="language-plaintext highlighter-rouge">Jellyfin</code>: Queria una especie de biblioteca para saber que tengo (peliculas y series) pero sin necesidad de tener que conectar el HTC. Se que a lo mejor es excesivo, pero no he encontrado nada 
parecido a lo que quiero,
  aunque sigo investigando a ver si encuentro algo igual pero m√°s liviano (no necesito todo lo que lleva consigo jellyfin).</li>
  <li><code class="language-plaintext highlighter-rouge">Jekyll</code>: Servidor jekyll (GitHub) para crear tu propio blog en local y luego transformar los archivos <code class="language-plaintext highlighter-rouge">markdown</code> en paginas html y subir a GitHub.</li>
</ul>

<p>Como no puede ser de otra manera, ya esta todo funcionando y sin ningun problema. No esperaba menos de <strong>Debian GNU/Linux</strong> y menos siendo <strong>STABLE</strong>.</p>

<p>Por eso digo, que tengo servidor para rato y que nunca me lo acabare. A parte de que quiero probar nuevas cosas que voy viendo en los blogs que sigo :</p>
<ul>
  <li><a href="https://atareao.es" target="_blank">Atareado</a></li>
  <li><a href="https://ugeek.github.io" target="_blank">uGeek</a></li>
  <li><a href="https://elblogdelazaro.org/" target="_blank">El Blog de L√°zaro</a></li>
</ul>

<p>Que sorpresas nos esperan con este nuevo servidor??</p>

<p>Como ya he dicho antes, aprovechando que teniamos a la RPI4B libre, hemos substituido el antiguo mediacenter (RPI3B) por esta m√°s nueva, porque como todo en la informatica, todo avanza, pero esto lo
 explicare en otro <a href="/hardware/raspberry%20pi/thinkcenter/2022/11/08/cambiando-mediacenter.html" target="_blank">articulo</a> que estoy preparando (y ya os digo que no son buenas noticias).</p>

<blockquote>
  <p>üí° Despu√©s de estos meses de uso, no me puedo quejar, porque el servidor es una maquinon en toda regla, pero ante el aumento de la luz y que a veces, pienso que lo estoy infrautilizando, que no le saco todo el partido y toda la potencia que el Dell me puede dar, me esta rondando por la cabeza, que no se si me he excedido utilizando este servidor. Que a lo mejor, con la RPI4 tendria m√°s que suficiente, para todo lo que tiene que hacer, que aun es poco, pero es la duda que tengo, no se si el Dell esta desaprovechado y derrochando el dinero y en cambio, si pongo la RPI4, no se quedara colgada por todas las cosas que quiero hacer ante la limitaci√≥n evidente de la Raspberry. Es una cosa que quiero estudiar a fondo, preguntar, ver mirar, etc‚Ä¶ y sacar conclusiones.</p>
</blockquote>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.youtube.com/watch?v=qc8mkWtwY9c" target="_blank">Configurar y usar Pi-Hole - PeladoNerd</a></li>
  <li><a href="https://www.youtube.com/watch?v=G_Pv9XEzfUY" target="_blank">Configurar y usar Wireguard - PeladoNerd</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Docker" /><category term="Debian GNU/Linux" /><category term="Docker" /><summary type="html"><![CDATA[Se que llevo mucho tiempo si publicar nada, pero he estado liado haciendos cambios en el servidor (RPI4).]]></summary></entry><entry><title type="html">Configurar el fichero .bashrc para descomprimir ficheros</title><link href="https://vctrsnts.github.io/bash/debian%20gnu/linux/2022/01/15/configurar-fichero-bashrc.html" rel="alternate" type="text/html" title="Configurar el fichero .bashrc para descomprimir ficheros" /><published>2022-01-15T00:00:00+00:00</published><updated>2022-01-15T00:00:00+00:00</updated><id>https://vctrsnts.github.io/bash/debian%20gnu/linux/2022/01/15/configurar-fichero-bashrc</id><content type="html" xml:base="https://vctrsnts.github.io/bash/debian%20gnu/linux/2022/01/15/configurar-fichero-bashrc.html"><![CDATA[<p>A continuaci√≥n, explicare como tengo configurado mi <code class="language-plaintext highlighter-rouge">.bashrc</code> para que a la hora de descomprimir archivos todo me sea m√°s facil y rapido.</p>

<p>Esto se consigue a√±adiendo un <strong>alias</strong> con las opciones / programas m√°s comunes para la compresi√≥n y descompresi√≥n de archivos.</p>

<!-- more -->

<p>Lo primero es editar nuestro fichero <code class="language-plaintext highlighter-rouge">.basrch</code> y hacerle las siguientes modificacions :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   #</span><span class="c">## EXTRACCI√ì DE FITXERS</span>
<span class="gp">   #</span><span class="w"> </span>usage: ex &lt;file&gt;
<span class="go">   ex ()
   {
</span><span class="gp">     if [ -f $</span>1 <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
<span class="gp">       case $</span>1 <span class="k">in</span>
<span class="gp">         *.tar.bz2)   tar xjf $</span>1   <span class="p">;;</span>
<span class="gp">         *.tar.gz)    tar xzf $</span>1   <span class="p">;;</span>
<span class="gp">         *.bz2)       bunzip2 $</span>1   <span class="p">;;</span>
<span class="gp">         *.rar)       unrar x $</span>1   <span class="p">;;</span>
<span class="gp">         *.gz)        gunzip $</span>1    <span class="p">;;</span>
<span class="gp">         *.tar)       tar xf $</span>1    <span class="p">;;</span>
<span class="gp">         *.tbz2)      tar xjf $</span>1   <span class="p">;;</span>
<span class="gp">         *.tgz)       tar xzf $</span>1   <span class="p">;;</span>
<span class="gp">         *.zip)       unzip $</span>1     <span class="p">;;</span>
<span class="gp">         *.Z)         uncompress $</span>1<span class="p">;;</span>
<span class="gp">         *.7z)        7z x $</span>1      <span class="p">;;</span>
<span class="gp">         *.deb)       ar x $</span>1      <span class="p">;;</span>
<span class="gp">         *.tar.xz)    tar xf $</span>1    <span class="p">;;</span>
<span class="gp">         *.tar.zst)   unzstd $</span>1    <span class="p">;;</span>
<span class="gp">         *)           echo "'$</span>1<span class="s1">' no es pot extreure via ex()" ;;
</span><span class="go">       esac
     else
</span><span class="gp">       echo "'$</span>1<span class="s1">' no es un fitxer valid"
</span><span class="go">     fi
   }
</span></code></pre></div></div>

<p>Con esto lo que conseguimos es que para descomprimir cualquier fichero lo podemos hacer de la siguiente manera :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>ex nombre_fichero_comprimido
</code></pre></div></div>]]></content><author><name>VSANTOS</name></author><category term="Bash" /><category term="Debian GNU/Linux" /><category term="Bash" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[A continuaci√≥n, explicare como tengo configurado mi .bashrc para que a la hora de descomprimir archivos todo me sea m√°s facil y rapido. Esto se consigue a√±adiendo un alias con las opciones / programas m√°s comunes para la compresi√≥n y descompresi√≥n de archivos.]]></summary></entry><entry><title type="html">Raspberry Pi. Instalar Debian GNU/Linux en la Raspberry Pi 4</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/raspberry%20pi/2022/01/07/debian-raspberrypi.html" rel="alternate" type="text/html" title="Raspberry Pi. Instalar Debian GNU/Linux en la Raspberry Pi 4" /><published>2022-01-07T00:00:00+00:00</published><updated>2022-01-07T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/raspberry%20pi/2022/01/07/debian-raspberrypi</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/raspberry%20pi/2022/01/07/debian-raspberrypi.html"><![CDATA[<p>Cuando tienes una Raspberry Pi y ves que el <strong>SO</strong> recomendado es Raspberry Pi OS (antigua Raspbian), siempre me queda la cosa de no poder instalar <strong>Debian GNU/Linux</strong> ARM64. Pero desde que actualizaron 
la versi√≥n del firmware y <strong>Debian GNU/Linux</strong> empezo a tener versiones m√°s estables, eso ya ha pasado a posible.</p>

<p>Asi que ahora voy a explicar los pasos que he hecho, en mi caso, para poder realizar y usar <strong>Debian GNU/Linux</strong> ARM64 en una Raspberry Pi 4 (4Gb).</p>

<!-- more -->

<p>Antes de empezar, lo que necesitas es lo siguiente:</p>
<ul>
  <li>Imagen ISO de <a href="https://cdimage.debian.org/debian-cd/current/arm64/iso-cd/" target="_blank">Debian GNU/Linux 11 ARM64</a></li>
  <li>La ultima versi√≥n del <a href="https://github.com/pftf/RPi4/releases" target="_blank">firmware UEFI para la Raspberry Pi 4</a></li>
  <li>Que la <strong>EEPROM</strong> de nuestra Raspberry Pi este a la ultima versi√≥n. Esto ultimo, se puede saber si al iniciar la Raspberry Pi, nos aparece un codigo <strong>QR</strong> a la derecha de la pantalla.</li>
</ul>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/last_eeprom.png" alt="last_eeprom.png" />
    </div>
    
</div>

<p>En el caso, del <strong>firmware UEFI</strong>, (100% libre) nos obliga a usar <strong>GPT</strong> en vez de <strong>MBR</strong> y tambien tenemos que usar <strong>ESP</strong> (EFI System Partition) en lugar de la <strong>msftdata</strong>.</p>

<p>Despu√©s de tener claro estos matices, vamos a realitzar el particionado de nuestro HDD, en mi caso, lo he realizado con GPARTED, donde todo lo que tenemos que hacer es m√°s facil.</p>

<p>Los pasos a realizar son los siguientes:</p>
<ul>
  <li>Asegurarnos que nuestra tabla de partici√≥n del HDD esta en GPT (con GPARTED, es facil realizar el cambio).</li>
  <li>Creamos una partici√≥n de como minimo 648Mb y la formateamos en FAT32 (m√°s adelante, explico como reducir esta partici√≥n al minimo necesario).</li>
  <li>En mi caso, cree otra partici√≥n del 20Gb que es donde instalare el sistema base de <strong>Debian GNU/Linux</strong></li>
  <li>Tambien, cree otra partici√≥n, en este caso, de 1Gb para la memoria SWAP.</li>
</ul>

<p>Una vez, tenemos esto echo, m√°s tarde volveremos para acabar, descomprimimos el <strong>firmware UEFI</strong> en la primera partici√≥n que hemos creado, la cual, sin tocar nada y sin crear ningun directorio.</p>

<p>Despu√©s de descomprimir el firmware, vamos a <strong>descomprimir</strong> la imagen ISO de <strong>Debian GNU/Linux</strong> en esta misma partici√≥n (por eso, hago una partici√≥n de 648Mb), para realizar podemos hacerlo de la 
siguiente manera:</p>

<p>Creamos un directorio donde montaremos nuestra imagen:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>mount <span class="nt">-o</span> loop /home/tuUsuario/imagen_debian.iso /directorio/destino
</code></pre></div></div>

<p>Una vez montado la imagen, tenemos que copiar todo el contenido de este directorio a la primera partici√≥n, incluido el directorio <strong>.disk</strong>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo cp</span> <span class="nt">-r</span> /directorio/destino /directorio/primera_particion
</code></pre></div></div>

<p>Una vez, hemos realizado esto, es lo que hice yo, porque sino, SO live (xubuntu) no me detectaba la primera partici√≥n, volvemos a nuestro GPARTED, seleccionamos la primera partici√≥n, seleccionamos los
 <strong>flags</strong> de la partici√≥n y marcamos <strong>boot</strong> y <strong>esp</strong>.</p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/gparted_flags.png" alt="gparted_flags.png" />
    </div>
    
</div>

<p>Y ahora, ya tenemos preparado nuestro HDD para instalar <strong>Debian GNU/Linux</strong>.</p>

<p>Procedemos a conectar el HDD a la Raspberry Pi y si todo ha ido bien, podemos ver, la pantalla de instalaci√≥n de <strong>Debian GNU/Linux</strong> de toda la vida.</p>

<p>Y una vez finalizada la instalaci√≥n, solamente nos queda disfrutar de nuestra <strong>Debian GNU/Linux</strong> de toda la vida.</p>

<blockquote>
  <p>üí°</p>
  <ul>
    <li>Una vez que hemos realizado la instalaci√≥n, lo que yo hice, fue reducir la partici√≥n de 648Mb a 260Mb para asi, despu√©s a√±adir ese espacio extra a a partici√≥n del sistema. Lo de 260Mb lo digo, porque es el minimo que (en mi caso) GPARTED no me transformaba la primera partici√≥n de <strong>FAT32</strong> a <strong>FAT16</strong>.</li>
    <li>Para llevar a cabo esto, en mi caso, borre todo lo que se habia a√±adido a la hora de <em>descomprimir</em> la ISO de <strong>Debian GNU/Linux</strong>. El <em>firmware UEFI</em> tambien lo dejo. En total todo el espacio ocupado (en mi caso) son 15.6Mb.</li>
    <li>En el caso de tener una Raspberry Pi de 4Gb o m√°s, el sistema esta configurado, para que solamente aproveche 3Gb de RAM, para usar toda la RAM que tenemos, tenemos que desactivar un parametro del <strong>boot</strong> de <strong>UEFI</strong>, se hace de la siguiente manera:
      <ul>
        <li>Reiniciamos la Raspberry
 	- Accedemos a las opciones de UEFI apretando la tecla <em>ESC</em>.
 	- Vamos a la opci√≥n <em>Device Manager &gt; Raspberry Pi Configuration &gt; Advanced Configuration</em>
 	- <strong>desactivamos</strong> la opci√≥n <em>Limit RAM to 3Gb</em>.</li>
      </ul>
    </li>
    <li>Y con esto ya tenemos a nuestra disposici√≥n, toda la RAM de nuestro dispositivo.</li>
  </ul>
</blockquote>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.wifi-libre.com/topic-1624-instalacion-debian-buster-vainilla-en-raspberry-pi-4.html" target="_blank">Instalaci√≥n Debian buster ‚Äúvainilla‚Äù en Raspberry Pi 4</a></li>
  <li><a href="https://forums.raspberrypi.com/viewtopic.php?t=282839" target="_blank">Guide: Installation of <em>VANILLA</em> Debian 11 (or later) on a Raspberry Pi 4</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Raspberry Pi" /><category term="Debian GNU/Linux" /><category term="Raspberry Pi" /><summary type="html"><![CDATA[Cuando tienes una Raspberry Pi y ves que el SO recomendado es Raspberry Pi OS (antigua Raspbian), siempre me queda la cosa de no poder instalar Debian GNU/Linux ARM64. Pero desde que actualizaron la versi√≥n del firmware y Debian GNU/Linux empezo a tener versiones m√°s estables, eso ya ha pasado a posible. Asi que ahora voy a explicar los pasos que he hecho, en mi caso, para poder realizar y usar Debian GNU/Linux ARM64 en una Raspberry Pi 4 (4Gb).]]></summary></entry><entry><title type="html">Crear fichero de logs en bash</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2021/06/09/crear-fichero-log-bash.html" rel="alternate" type="text/html" title="Crear fichero de logs en bash" /><published>2021-06-09T00:00:00+00:00</published><updated>2021-06-09T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2021/06/09/crear-fichero-log-bash</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2021/06/09/crear-fichero-log-bash.html"><![CDATA[<p>A veces tienes la necesidad de crear un fichero de log para saber cuando se ejecuta un proceso en un script que puedes haber creado, aqui pongo el que yo uso.</p>

<!-- more -->

<p>A traves del siguiente codigo de bash, podemos crear nuestro propio fichero de logs:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">tie</span><span class="o">=</span>/tmp/script_final.log<span class="k">*</span>
   <span class="c"># PER SAPIGUER LA DATA D'INICI*</span>
   <span class="nv">hi</span><span class="o">=</span><span class="sb">`</span><span class="nb">date</span><span class="sb">`</span><span class="k">*</span>
   <span class="c"># PER SAPIGUER LA DATA FINAL*</span>
   <span class="nv">hf</span><span class="o">=</span><span class="sb">`</span><span class="nb">date</span><span class="sb">`</span><span class="k">*</span>

   <span class="nb">echo</span> <span class="nv">$hf</span><span class="s2">" "</span> <span class="o">&gt;&gt;</span> <span class="nv">$tie</span><span class="k">*</span>
</code></pre></div></div>

<p>Y con esto ya tenemos nuestro log</p>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[A veces tienes la necesidad de crear un fichero de log para saber cuando se ejecuta un proceso en un script que puedes haber creado, aqui pongo el que yo uso.]]></summary></entry><entry><title type="html">Solucionar error i915 en grafica Intel</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2021/06/09/solucionar-error-i915.html" rel="alternate" type="text/html" title="Solucionar error i915 en grafica Intel" /><published>2021-06-09T00:00:00+00:00</published><updated>2021-06-09T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2021/06/09/solucionar-error-i915</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2021/06/09/solucionar-error-i915.html"><![CDATA[<p>Desde que <strong>Debian GNU/Linux</strong> saco la versi√≥n del kernel 5.4 en mi portatil fue recurrente los flashes en la pantalla y el siguiente error:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="o">[</span>drm:intel_cpu_fifo_underrun_irq_handler <span class="o">[</span>i915]] <span class="k">*</span>ERROR<span class="k">*</span> CPU pipe A FIFO underrun
</code></pre></div></div>

<p>La soluci√≥n que todo el mundo me decia era eliminar el paquete del driver de <em>xserver-xorg-video-intel</em> y usar el por defecto del kernel. Pero lo entendia que significaba eso (realmente era asi), no 
sabia como se tenia que hacer, porque si hacia eso perdia todo el <strong>XORG</strong>, al final en este <a href="http://forums.debian.net/viewtopic.php?f=7&amp;t=149472&amp;p=737807#p737807" target="_blank">hilo</a> me indicaron que si hacia esto, 
solo se borraba el metapaquete de <strong>xserver-xorg-video-all</strong> pero nada m√°s.</p>

<p>Al final di con la soluci√≥n en el foro de <a href="https://exdebian.org/foro/como-solucionar-drmi965irqhandler-i915-error-cpu-pipe-fifo-underrun-solucionado" target="_blank">exDebian.org</a>.</p>

<!-- more -->

<p>Lo que tienes que hacer es crear (en mi caso, funciona) el siguiente fichero <code class="language-plaintext highlighter-rouge">20-intel.conf</code> con el siguiente contenido:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">ls </span>etc/X11/
</code></pre></div></div>

<p>Si no aparece <code class="language-plaintext highlighter-rouge">xorg.conf.d</code> vas a tener que crear la carpeta</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>su
<span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">mkdir</span> /etc/X11/xorg.conf.d
</code></pre></div></div>

<p>Y luego crear el archivo <code class="language-plaintext highlighter-rouge">20-intel.conf</code></p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>su
<span class="gp">   usuari@debian:~$</span><span class="w"> </span>vi /etc/X11/xorg.conf.d/20-intel.conf
</code></pre></div></div>

<p>Dentro del mismo poner el siguiente texto</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   Section <span class="s2">"Device"</span>
        Identifier  <span class="s2">"Intel Graphics"</span>
        Driver      <span class="s2">"intel"</span>
        Option      <span class="s2">"AccelMethod"</span>  <span class="s2">"uxa"</span>
        <span class="c">#Option      "AccelMethod"  "sna"</span>
   EndSection
</code></pre></div></div>

<p>Si al hacer los cambios <strong>Debian GNU/Linux</strong> no inicia desde grub, seleccionar el <strong>recovery mode</strong> y eliminas el archivo</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   rm /etc/X11/xorg.conf.d/20-intel.conf
</span></code></pre></div></div>

<p>Donde indicas que siga usando el mismo driver que venia usando, lo unico que cambias es (en palabras del post):</p>

<blockquote>
  <p>üí° M√°s que eso, lo que has hecho es indicarle que use el mismo driver, modificando el m√©todo para la aceleraci√≥n 3d. Intel pas√≥ a usar el m√©todo <strong>sna</strong> por defecto en detrimento del m√©todo <strong>uxa</strong>, que es el que se ven√≠a usando. El problema est√° en que <strong>sna</strong>, no siempre va bien con todas las intel, con lo que se mantuvo la posibilidad de usar uno u otro. Si la gr√°fica es algo vieja, es normal que <strong>uxa</strong> te de buenos resultados. Por el contrario en gr√°ficas nuevas, <strong>sna</strong> es el que mejor funciona.</p>
</blockquote>

<p>Y con esta simple modificaci√≥n, que hice hace 2 semanas, no me han vuelto a aparecer los flashes en la pantalla del portatil.</p>

<p>Espero que os sea de utilidad</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://forums.unraid.net/topic/46910-simple-podcast-downloader-script/" target="_blank">Como solucionar <em>ERROR</em> CPU pipe A FIFO underrun?</a></li>
  <li><a href="http://forums.debian.net/viewtopic.php?f=7&amp;t=149472" target="_blank">Problems (flash on screen) with i915</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[Desde que Debian GNU/Linux saco la versi√≥n del kernel 5.4 en mi portatil fue recurrente los flashes en la pantalla y el siguiente error: [drm:intel_cpu_fifo_underrun_irq_handler [i915]] *ERROR* CPU pipe A FIFO underrun La soluci√≥n que todo el mundo me decia era eliminar el paquete del driver de xserver-xorg-video-intel y usar el por defecto del kernel. Pero lo entendia que significaba eso (realmente era asi), no sabia como se tenia que hacer, porque si hacia eso perdia todo el XORG, al final en este hilo me indicaron que si hacia esto, solo se borraba el metapaquete de xserver-xorg-video-all pero nada m√°s. Al final di con la soluci√≥n en el foro de exDebian.org.]]></summary></entry><entry><title type="html">Descargar Podcast a traves de Flexgetx - Annexo</title><link href="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/06/07/flexget-podcast-annexo.html" rel="alternate" type="text/html" title="Descargar Podcast a traves de Flexgetx - Annexo" /><published>2021-06-07T00:00:00+00:00</published><updated>2021-06-07T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/06/07/flexget-podcast-annexo</id><content type="html" xml:base="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/06/07/flexget-podcast-annexo.html"><![CDATA[<p>Como habia explicado en este <a href="/docker/2020/12/14/crear-imagen-docker.html" target="_blank">articulo</a> o en este otro <a href="/docker/raspberry%20pi%20os/2021/05/30/flexget-podcast.html" target="_blank">articulo</a>, explicaba como crear una imagen de <code class="language-plaintext highlighter-rouge">docker</code> o como usar dicha imagen, <strong>flexget</strong>, para descargar podcast a traves de los <code class="language-plaintext highlighter-rouge">RSS</code> que puedes conseguir.</p>

<!-- more -->

<p>Pero me di cuenta, que usar tus propias imagenes de docker, o estan muy bien echas y con cada nueva versi√≥n de la original, actualizas la tuya, o puedes acabar teniendo problemas, que era lo que me pasaba, decidi que era mejor usar la versi√≥n base del creador, en este caso de <code class="language-plaintext highlighter-rouge">flexget</code>, para asi evitarme futuros problemas y tener siempre, que me interese, la ultima versi√≥n de container.</p>

<p>Adem√°s, como desde las ultimas versiones, se le puede a√±adir un directorio <code class="language-plaintext highlighter-rouge">custom-cont-init.d</code> donde, en el caso que tu quieres, creas un fichero bash con el nombre <code class="language-plaintext highlighter-rouge">entrypoint.sh</code> con, en mi caso, las siguientes instrucciones:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c">#!/usr/bin/with-contenv bash</span>
  apk add <span class="nt">-q</span> <span class="nt">--no-cache</span> eye3d mediainfo ffmpeg wget
</code></pre></div></div>
<p>Para que una vez se cree y se ejecute por primera vez, se hara uso de este script para instalar, cada vez que lo crees de nuevo, las aplicaciones que tu quieras. En mi caso, son para el tratamiento de los podcasts que descargo. Y asi, me ahorro el tener que acordame de si esta instalado o no, cada nueva vez que creo dicho container, porque se hace automaticamente.</p>

<p>Es una gran mejora, que uso en varios de los containers, donde tengo aplicaciones que uso, pero que no estan dentro del propio container de origen.</p>

<p>Se que podria hacer una imagen especial para mi, pero entonces volveria a tener los mismo problemas que os estaba explicando al principio.</p>

<p>Y para mi, no merece la pena todo el trabajo y stress que me supondria.</p>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Raspberry Pi OS" /><category term="Docker" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Como habia explicado en este articulo o en este otro articulo, explicaba como crear una imagen de docker o como usar dicha imagen, flexget, para descargar podcast a traves de los RSS que puedes conseguir.]]></summary></entry><entry><title type="html">Descargar Podcast a traves de Flexget</title><link href="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/05/30/flexget-podcast.html" rel="alternate" type="text/html" title="Descargar Podcast a traves de Flexget" /><published>2021-05-30T00:00:00+00:00</published><updated>2021-05-30T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/05/30/flexget-podcast</id><content type="html" xml:base="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/05/30/flexget-podcast.html"><![CDATA[<p>Gracias que tengo docker puedo usar la imagen que he creado de <a href="https://flexget.com" target="_blank">Flexget</a>, una aplicaci√≥n que a traves de un fichero <strong>yaml</strong>, permite descargar lo que quieras incluidos podcast.</p>

<p>En principio me gustan los que tengas que ver con la tecnologia y sobre todo lo que tenga que ver con GNU/Linux. Pero a parte de estos tambien tengo un podcast de historia que me encanta mucho y cuando me acuerdo lo escucho. Este podcast se llama <a href="https://www.ccma.cat/catradio/en-guardia" target="_blank">En Gu√†rdia</a>.</p>

<p>Y buscando informaci√≥n al final consegui averiguar que a traves de <strong>Flexget</strong> se pueden descargar Podcast asi que me puse a ello y gracias a un script para dicho proposito ya puedo descargar los podcast de este programa sin preocuparme.</p>

<!-- more -->

<p>Este script esta compuesto por 2 secciones. Estas secciones son el <strong>template</strong>, que consiste en una plantilla con los filtros que se tiene que tener en cuenta a la hora de descargar los podcast.</p>

<p>Una vez definido el <strong>template</strong>, pasamos a definir la tarea <strong>task</strong> donde en base al <strong>template</strong> se encargara de descargar los podcast.</p>

<p>La primera parte del script <strong>template</strong> esta compuesto por los siguientes filtros (en mi caso):</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="na">templates</span><span class="pi">:</span>
     <span class="na">podcast</span><span class="pi">:</span>
       <span class="na">accept_all</span><span class="pi">:</span> <span class="s">yes</span>
       <span class="c1"># PER A QUE SOLAMENT DESCARREGUI ELS 5 ULTIMS PODCAST</span>
       <span class="na">limit_new</span><span class="pi">:</span> <span class="m">5</span>
       <span class="c1"># COM VOLEN QUE ES DIGUI EL FITXER DESCARREGAT</span>
       <span class="c1"># ABANS I DESPR√âS DE LA CONFIGURACI√ì DEL NOM PORTA DOBLES COMETES</span>
       <span class="na">set</span><span class="pi">:</span>
         <span class="na">filename</span><span class="pi">:</span> <span class="c1"># NOM AMB QUE ES DESCARREGARA EL FITXER MP3</span>
</code></pre></div></div>

<p>Y ahora vamos a poner el script que se encarga de descargar (en base al <strong>template</strong>) los podcast:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c1">#</span>
   <span class="c1"># DESCARREGA DE PODCAST</span>
   <span class="c1">#</span>
   <span class="na">tasks</span><span class="pi">:</span>
     <span class="c1"># PODCAST EN GUARDIA</span>
     <span class="na">podCastEnGuardia</span><span class="pi">:</span>
       <span class="na">template</span><span class="pi">:</span> <span class="s">podcast</span>
       <span class="c1"># RSS (XML) del programa</span>
       <span class="na">rss</span><span class="pi">:</span> <span class="s">https://dinamics.ccma.cat/public/podcast/catradio/xml/4/4/podprograma944.xml</span>
       <span class="c1"># DIRECTORI DE DESCARREGA</span>
       <span class="na">download</span><span class="pi">:</span> <span class="s">/media/podcast</span>
</code></pre></div></div>

<p>Por ultimo podriamos poner el <strong>calendario</strong> de ejecuci√≥n de este script, en mi caso, le indico que todas las tareas <strong>tasks</strong> que empiezen por <strong>podCast</strong> se ejecuten una vez al dia:</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c1">#</span>
   <span class="c1"># CALENDARI EXECUCI√ì DE LES TASQUES</span>
   <span class="c1">#</span>
   <span class="na">schedules</span><span class="pi">:</span>
     <span class="c1"># DESCARREGA PODCAST</span>
     <span class="pi">-</span> <span class="na">tasks</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">podCast*'</span><span class="pi">]</span>
       <span class="na">interval</span><span class="pi">:</span>
         <span class="na">days</span><span class="pi">:</span> <span class="m">1</span>
</code></pre></div></div>

<p>Este script tiene que estar en el fichero <strong>config.yml</strong> de flexget. Lo que se puede hacer antes, es probar que todo funciona correctamente a traves de la instrucci√≥n (dentro de docker):</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>flexget <span class="nt">--test</span> execute <span class="nt">--task</span> podCastEnGuardia <span class="nt">--dump</span>
</code></pre></div></div>

<p>Y ahora solamente nos queda disfrutar.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://forums.unraid.net/topic/46910-simple-podcast-downloader-script/" target="_blank">Script para descargar podcast con flexget</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Raspberry Pi OS" /><category term="Docker" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Gracias que tengo docker puedo usar la imagen que he creado de Flexget, una aplicaci√≥n que a traves de un fichero yaml, permite descargar lo que quieras incluidos podcast. En principio me gustan los que tengas que ver con la tecnologia y sobre todo lo que tenga que ver con GNU/Linux. Pero a parte de estos tambien tengo un podcast de historia que me encanta mucho y cuando me acuerdo lo escucho. Este podcast se llama En Gu√†rdia. Y buscando informaci√≥n al final consegui averiguar que a traves de Flexget se pueden descargar Podcast asi que me puse a ello y gracias a un script para dicho proposito ya puedo descargar los podcast de este programa sin preocuparme.]]></summary></entry><entry><title type="html">Creando tu propio Servidor de Musica privada</title><link href="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/05/08/rpi-spotify.html" rel="alternate" type="text/html" title="Creando tu propio Servidor de Musica privada" /><published>2021-05-08T00:00:00+00:00</published><updated>2021-05-08T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/05/08/rpi-spotify</id><content type="html" xml:base="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/05/08/rpi-spotify.html"><![CDATA[<p>Cuando tienes un servidor de bajo consumo como una Raspberry y empiezas a usar docker, a parte de descubrir un nuevo mundo (no me canso de decirlo), tambien descubres nuevas formas de torturar tu mente.</p>

<!-- more -->

<p>Porque digo eso, porque cuando piensas que ya has conseguido todo lo que necesitas, tu cabezita piensa ‚Äúaprovechate de tu servidor y escucha tu musica en el movil‚Äù.</p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/cerebro.jpg" alt="cerebro.jpg" />
    </div>
    
</div>

<p>Ahi es cuando te dices, porque no me pongo a investigar si existe esta posibilidad??</p>

<p>Y solamente falta que sigas a <a href="https://ugeek.github.io" target="_blank">uGeek Podcast</a> (increible todo lo que llega a hacer con su servidor) y ya te mete el gusanito en el cuerpo de <em>si el puedo, porque yo no</em> y 
ya la tenemos liada.</p>

<p>He seguido todos sus cambios de contenedores que el ha hecho y los he probado todos:</p>
<ul>
  <li><a href="https://github.com/spl0k/supysonic" target="_blank">Supysonic</a>: El primero que use y estuvo bien, hasta que‚Ä¶</li>
  <li><a href="https://github.com/sentriz/gonic" target="_blank">Gonic</a>: Uno de los mejores que he usado, pero no se, encuentro que le falta algo, pero no se que es‚Ä¶</li>
  <li><a href="https://github.com/navidrome/navidrome" target="_blank">Navidrome</a>: Junto a Gonic el mejor y este si que tiene un noseque que siempre vuelvo a el (sera la web, desde el que puedes escuchar musica)</li>
</ul>

<p>Y el mejor, en mi opinion, como he dicho antes <strong>navidrome</strong>, no se que es, pero me encanta, su simpleza, los pocos recursos que consume del servidor. Lo tiene todo. Eso si, no tiene nada que echarle 
en cara a <strong>Gonic</strong>, pero a este ultimo le falta algo que no se que es y eso que es igual de facil y consume tan pocos recursos como <strong>navidrome</strong>.</p>

<p>Desp√∫es de esta breve explicaci√≥n, pasamos a la instalaci√≥n y configuraci√≥n de mi <strong>Spotify</strong> privado.</p>

<p>Como todo en docker, solamente se tiene que a√±adir en tu fichero <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> la configuraci√≥n necesaria para instalar <strong>navidrome</strong> que en mi caso es la siguiente:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   navidrome:
     image: deluan/navidrome:latest
     container_name: navidrome
     user: 1000:1000 
     ports:
       - "4533:4533"
     restart: unless-stopped
     environment:
       ND_TRANSCODINGCACHESIZE: 100MB
       ND_SCANSCHEDULE: "@every 1h"
       ND_SESSIONTIMEOUT: 24h
       ND_LASTFM_ENABLED: "true"
       ND_LASTFM_APIKEY: "API DE LASTFM"
       ND_LASTFM_SECRET: "API DE LASTFM"
       ND_LASTFM_LANGUAGE: "es"
       ND_SPOTIFY_ID: "API DE SPOTIFY"
       ND_SPOTIFY_SECRET: "API DE SPOTIFY"
     volumes:
</span><span class="gp">       - $</span><span class="o">{</span>STORAGE<span class="o">}</span>/config/navidrome:/data
<span class="gp">       - $</span><span class="o">{</span>MEDIA<span class="o">}</span>/audio/Music:/music:ro
</code></pre></div></div>

<p>Yo he puesto las opciones de configuraci√≥n que uso o las que m√°s me interesan que son:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">ND_SCANSCHEDULE</code>: Cada cuando actualiza la biblioteca</li>
  <li><code class="language-plaintext highlighter-rouge">ND_LASTFM_ENABLED</code>: Si quiero usar la api de LastFM (para que me de una descripci√≥n de los artistas que tengo)</li>
  <li><code class="language-plaintext highlighter-rouge">ND_SPOTIFY_ID</code>: Si quiero usar la api de Spotify  (lo mismo que en el caso de LastFM)</li>
</ul>

<p>Y ahora solamente queda levantar el contenedor:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:/#</span><span class="w"> </span>docker-compose up <span class="nt">-d</span> navidrome
</code></pre></div></div>

<p>Y aqui es cuando se hace la magia. A lo mejor tarda un poco en estar disponible, porque esta escaneando toda la musica que tienes, pero cuando digo tardar, son un par de segundos. Porque lo escanea todo
a una velocidad increible.</p>

<p>Lo unico que te queda es instalar una app en tu movil, en mi caso <a href="https://substreamerapp.com" target="_blank">substreamer</a>, conectarte a tu servidor, que en este caso, te viene bien tener configurado un <a href="/docker/raspberry%20pi%20os/2021/05/07/rpi-nginx-proxy-manager.html">proxy server</a>
con su correspondiente certificado y disfrutar.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://ugeek.github.io/blog/post/2020-09-16-navidrome-la-alternativa-a-airsonic-desarrollada-en-go.html" target="_blank">Navidrome</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2020-05-06-gonic-el-mejor-y-mas-ligero-servidor-de-musica-con-api-subsonic.html" target="_blank">Gonic</a></li>
  <li><a href="https://ugeek.github.io/blog/post/2019-12-31-supysonic-0-5-0-total-compatibilidad-con-todos-los-clientes-subsonic.html" target="_blank">Supysonic</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Raspberry Pi OS" /><category term="Docker" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Cuando tienes un servidor de bajo consumo como una Raspberry y empiezas a usar docker, a parte de descubrir un nuevo mundo (no me canso de decirlo), tambien descubres nuevas formas de torturar tu mente.]]></summary></entry><entry><title type="html">Usando Nginx-Proxy-Manager en la Raspberry</title><link href="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/05/07/rpi-nginx-proxy-manager.html" rel="alternate" type="text/html" title="Usando Nginx-Proxy-Manager en la Raspberry" /><published>2021-05-07T00:00:00+00:00</published><updated>2021-05-07T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/05/07/rpi-nginx-proxy-manager</id><content type="html" xml:base="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/05/07/rpi-nginx-proxy-manager.html"><![CDATA[<p>Aqui tenemos otra entrada m√°s que hace referencia a mi RPI y a ese inmenso oceano que se ha abierto al descubrir Docker.</p>

<!-- more -->

<p>Una vez que tienes tu propio <strong>Spotify</strong>, el siguiente paso que quieres hacer, es acceder a el desde exterior y para hacer esto tienes 2 maneras de hacerlo :</p>

<ul>
  <li>Abrir directamente el puerto de tu <em>Spotify</em> con el riesgo que conlleva.</li>
  <li>Utilizar un <em>Proxy</em> para que a traves de <em>https</em>, junto a un certificado SSL para darle m√°s seguridad, acceder a este servicio sintiendote un poco m√°s seguro.</li>
</ul>

<p>Entonces, para hacer esto (segunda opci√≥n), no vayamos a ponerle las cosas faciles a los <strong>crackers</strong>, tenemos varias opciones (voy a poner las que he usado) y todas disponibles con Docker:</p>
<ul>
  <li><strong>Traefik</strong>: Muy buena opci√≥n, pero de dificil configuraci√≥n, a mi modo de ver.</li>
  <li><strong>Nginx-Proxy-Manager</strong>: El m√°s vistoso (incluye GUI) desde la que puedes hacerlo todo.</li>
  <li><strong>Caddy</strong>: El m√°s facil de usar.</li>
</ul>

<p>Al principio use <strong>Traefik</strong>, es muy poderoso y tiene muchas opciones de configuraci√≥n, pero por ese mismo motivo, porque tiene muchas opciones, lo hace m√°s dificil de usar.</p>

<p>Despu√©s me decante por <a href="/docker/raspberry%20pi%20os/2021/04/08/rpi-caddy-proxy-manager.html" target="_blank">Caddy</a> porque todo lo tenia al alcance de la mano, con un simple fichero de texto y era una maravilla su simpleza, pero todo cambio, cuando sacaron una nueva versi√≥n de Caddy que me arruino el chiringuito o fue <strong>duckdns</strong> no lo tengo aun del todo claro (tendre que seguir haciendo pruebas).</p>

<p>A lo que me vengo a referir es que en caddy (versiones antiguas) tenia una <code class="language-plaintext highlighter-rouge">url</code> parecida a esta <code class="language-plaintext highlighter-rouge">https://music.midominio.duckdns.org</code> pero algo cambio en caddy o en duckdns que que ya no acceptaba este tipo de url, y tuve que cambiar a una de este estilo <code class="language-plaintext highlighter-rouge">http://music-midominio.duckdns.org</code> a parte que tampoco me creaba los certificados (por eso digo, que no se si era culpa de Caddy o de duckdns).</p>

<p>Pero no podia estar si acceso a mi <strong>Spotify</strong> privado y despu√©s de investigar (aunque ya habia hecho un par de pruebas para ver como funcionaba) me decante por <strong>Nginx-Proxy-Manager</strong>, no iba a volver a <strong>traefik</strong> si me fui de el por su complejidad, asi que <strong>npm</strong> fue mi salvaci√≥n, por la ayuda que te da a la hora de toda la configuraci√≥n con sus diferentes pantallas que tienes a tu disposici√≥n (tanto para crear los dominios, como para crear los certificados).</p>

<p>Para usarlo en Docker utilice la siguiente configuraci√≥n:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   npm:
     image: jc21/nginx-proxy-manager:latest
     container_name: npm
     restart: unless-stopped
     ports:
       - '80:80'
       - '81:81'
       - '443:443'
     volumes:
</span><span class="gp">       - $</span><span class="o">{</span>STORAGE<span class="o">}</span>/config/npm/data:/data
<span class="gp">       - $</span><span class="o">{</span>STORAGE<span class="o">}</span>/config/npm/letsencrypt:/etc/letsencrypt
</code></pre></div></div>

<p>Hay que tener en cuenta una cosa, en algunos sitios, te indican que tienes que tener, a parte de <strong>npm</strong>, tienes que tener un <em>gestor de BBDD</em>, pero yo he podido comprobar, y es como lo tengo actualmente, que no hace falta tener ningun gestor de BBDD (a lo mejor las nuevas versiones de npm ya lo tengan incorporado).</p>

<p>Una vez, instalado, accedemos a traves (en mi caso) del puerto 81 y con las siguintes credenciales :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   Username: admin@example.com
   Password: changeme
</span></code></pre></div></div>

<p>Cuando accedemos al sistema, lo primero que hacemos es cambiar el usuario y el password de acceso y ya lo tenemos preparado para poderlo usar.</p>

<p>Con los videos que hay en la <strong>Referencia</strong> podras configurarlo sin ningun problema.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.youtube.com/watch?v=0n9DLj2ndo4" target="_blank">Certificados AUTOM√ÅTICOS y GRATIS para CUALQUIER SERVIDOR - Nginx Proxy Manager</a></li>
  <li><del><a href="https://www.youtube.com/watch?v=J7gpQYJ8bjU" target="_blank">Instalar NGINX PROXY MANAGER en una RASPBERRY Pi 4</a></del></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Raspberry Pi OS" /><category term="Docker" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Aqui tenemos otra entrada m√°s que hace referencia a mi RPI y a ese inmenso oceano que se ha abierto al descubrir Docker.]]></summary></entry><entry><title type="html">Cambiando Traefik por Caddy</title><link href="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/04/08/rpi-caddy-proxy-manager.html" rel="alternate" type="text/html" title="Cambiando Traefik por Caddy" /><published>2021-04-08T00:00:00+00:00</published><updated>2021-04-08T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/04/08/rpi-caddy-proxy-manager</id><content type="html" xml:base="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/04/08/rpi-caddy-proxy-manager.html"><![CDATA[<p>Anteriomente venia usando Traefik, pero como ya he comentado, era muy dificil de mantener y de configurar, a parte de las multiples opciones que tiene. Ante esto, me resultaba muy tedioso su uso, asi que
decidir buscar otra alternativa m√°s facil.</p>

<p>Despu√©s de buscar y leer a mis blogueros preferidos:</p>
<ul>
  <li><a href="https://ugeek.github.io" target="_blank">uGeek</a></li>
  <li><a href="https://elblogdelazaro.org" target="_blank">El Blog de Lazaro</a></li>
</ul>

<!-- more -->

<p>Vi que los dos recomendaban:</p>
<ul>
  <li><a href="https://caddyserver.com" target="_blank">Caddy</a></li>
  <li><a href="https://nginxproxymanager.com" target="_blank">Nginx Proxy Manager</a></li>
</ul>

<p>Cada uso con sus ventajas e inconvenientes, aunque me tiraba m√°s npm (para abreviar) por el gui que tenia, me decidi por caddy, porque una de sus virtudes es que podias tener url del siguiente estilo:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">music.tudominio.duckdns.org</code>.</li>
</ul>

<p>Adem√°s el poder tener todos tus servicios activos y con su correspondiente certificado solamente con un fichero de texto.</p>

<p>Y eso es una ventaja, porque se parece m√°s a una <code class="language-plaintext highlighter-rouge">URL</code> de verdad. Y por eso me decidi por <code class="language-plaintext highlighter-rouge">Caddy</code>, aunque al final tuve que tirar por npm, ya lo comentare en otro 
<a href="/docker/raspberry%20pi%20os/2021/05/07/rpi-nginx-proxy-manager.html" target="_blank">articulo</a>.</p>

<h3 id="qu√©-es-caddy">Qu√© es Caddy</h3>
<p>Caddy 2 es un potente servidor web de c√≥digo abierto desarrollado en go. Simplifica su infraestructura y se encarga de las renovaciones de certificados.</p>

<p>Funciona muy bien en contenedores porque no tiene dependencias.</p>

<p>Aunque la mayor√≠a de la gente lo usa como servidor web o proxy, es una excelente opci√≥n tambien para:</p>
<ul>
  <li>Servidor web</li>
  <li>proxy inverso</li>
  <li>proxy de sidecar</li>
  <li>equilibrador de carga</li>
  <li>Puerta de enlace API</li>
  <li>controlador de ingreso</li>
  <li>administrador de sistemas</li>
  <li>supervisor de proceso</li>
  <li>programador de tareas (cualquier proceso de larga duraci√≥n)</li>
</ul>

<h3 id="creando-el-docker">Creando el docker</h3>
<p>Caddy requiere acceso de escritura a dos ubicaciones: un directorio de datos y un directorio de configuraci√≥n.</p>

<p>Recuerda que para generar los certificados de Let‚Äôs Encrypt, Caddy necesita tener abiertos los puertos 80 y 443.</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.7"</span>
   <span class="na">services</span><span class="pi">:</span>
     <span class="na">caddy</span><span class="pi">:</span>
       <span class="na">image</span><span class="pi">:</span> <span class="s">caddy</span>
       <span class="na">ports</span><span class="pi">:</span>
         <span class="pi">-</span> <span class="s2">"</span><span class="s">80:80"</span>
         <span class="pi">-</span> <span class="s2">"</span><span class="s">443:443"</span>
       <span class="na">volumes</span><span class="pi">:</span>
         <span class="pi">-</span> <span class="s">./Caddyfile:/etc/caddy/Caddyfile:ro</span>
         <span class="pi">-</span> <span class="s">./data/caddy/data:/data</span>
         <span class="pi">-</span> <span class="s">./data/caddy/config:/config</span>
       <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
       <span class="na">container_name</span><span class="pi">:</span> <span class="s">caddy</span>  
</code></pre></div></div>

<p>Creamos el archivo <code class="language-plaintext highlighter-rouge">Caddyfile</code>, donde ir√° la configuraci√≥n de nuestro proxy inverso.</p>

<p>Voy a exponer mi docker de <strong>Spotify</strong> personal al mundo para asi a traves del movil poder escuchar la musica que tengo en el servidor, en concreto, <strong>Navidrome</strong> (ya explicare en otro 
<a href="/docker/raspberry%20pi%20os/2021/05/08/rpi-spotify.html" target="_blank">articulo</a> como tener tu propio <strong>Spotify</strong> en funcionamiento).</p>

<p>Caddy se encargar√° de exponer este servicio a la red generando el certificado con Let‚Äôs Encrypt, que en mi caso, como ya he dicho, es mi Spotify privado y asi no tener que depender de nadie.</p>
<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="s">music.midominio.duckdns.org {</span>
    <span class="s">reverse_proxy http://192.168.1.100:4533</span>
  <span class="s">}</span>
</code></pre></div></div>

<p>Asi de rapido y de sencillo tengo mi proxy inverso en funcionamiento junto con mi certificado SSL. Y lo m√°s interesante, es que cuando llegue el momento de que el certificado vaya a caducar, el mismo
caddy se encargara de actualizarlo.</p>

<h4 id="referencia">Referencia:</h4>
<ul>
  <li><a href="https://ugeek.github.io/blog/post/2021-02-19-proxy-inverso-con-caddy.html" target="_blank">Proxy Inverso con Caddy</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Raspberry Pi OS" /><category term="Docker" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Anteriomente venia usando Traefik, pero como ya he comentado, era muy dificil de mantener y de configurar, a parte de las multiples opciones que tiene. Ante esto, me resultaba muy tedioso su uso, asi que decidir buscar otra alternativa m√°s facil. Despu√©s de buscar y leer a mis blogueros preferidos: uGeek El Blog de Lazaro]]></summary></entry><entry><title type="html">Montar imagen ISO desde consola en GNU/Linux</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2021/03/25/montar-imagen-iso-consola.html" rel="alternate" type="text/html" title="Montar imagen ISO desde consola en GNU/Linux" /><published>2021-03-25T00:00:00+00:00</published><updated>2021-03-25T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2021/03/25/montar-imagen-iso-consola</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2021/03/25/montar-imagen-iso-consola.html"><![CDATA[<p>Vamos a explicar como a traves de la consola de GNU/Linux se puede montar una imagen / archivo ISO.</p>

<p>No se si os ha pasado alguna vez a vosotros, pero llega un dia, que teneis una <strong>ISO</strong> y os encontrais sin CD para gravar y el lector y no sabeis que hacer en ese momento (me ha pasado m√°s de una vez),
 hasta que he encontrado este sencillo metodo para resolver el problema.</p>

<!-- more -->

<p>Lo primero es acceder a la consola y ejecutamos el siguiente comando:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">sudo mkdir</span> /media/cdrom
</code></pre></div></div>

<p>Estamos creando el directorio donde vamos a montar la imagen <strong>ISO</strong>, en mi caso, como ya tengo este directorio me puedo saltar este paso.</p>

<p>Ahora pasamos a montar la imagen directamente:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">sudo </span>mount <span class="nt">-o</span> loop <span class="nt">-t</span> iso9660 /ruta_imagen.iso /media/cdrom
</code></pre></div></div>

<p>Vamos a explicar un poco que significa cada parametro:</p>
<ul>
  <li>El parametro <strong>-o</strong> es un indicador de opciones genericas para asi poder usar <strong>loop</strong>. Esta opci√≥n de bucle le indica a GNU/Linux que use la interfaz de bucle invertido en lugar de un dispositivo 
fisico, ya que la imagen ISO no es un dispositivo real con una lista en el directorio <strong>/dev</strong>.</li>
  <li>El parametro <strong>-t</strong> hace referencia al tipo de sistema de archivos a montar, en este caso es <strong>iso9660</strong> o lo que es lo mismo, usa <strong>ISO</strong>.</li>
</ul>

<p>Cuando tenemos montada la <strong>ISO</strong>, ya podemos acceder a ella como si fuera un CD/DVD normal.</p>

<p>Para finalizar, nos quedara desmontar la imagen <strong>ISO</strong> de la misma manera como se haria con un dispositivo fisico:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">sudo </span>umount /media/cdrom
</code></pre></div></div>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.solvetic.com/tutoriales/article/5805-como-montar-iso-en-linux/" target="_blank">C√≥mo montar imagen ISO en Linux</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[Vamos a explicar como a traves de la consola de GNU/Linux se puede montar una imagen / archivo ISO. No se si os ha pasado alguna vez a vosotros, pero llega un dia, que teneis una ISO y os encontrais sin CD para gravar y el lector y no sabeis que hacer en ese momento (me ha pasado m√°s de una vez), hasta que he encontrado este sencillo metodo para resolver el problema.]]></summary></entry><entry><title type="html">Raspberry Pi. Externalizando copias de seguridad</title><link href="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/01/18/rpi-externalizando-copias-seguridad.html" rel="alternate" type="text/html" title="Raspberry Pi. Externalizando copias de seguridad" /><published>2021-01-18T00:00:00+00:00</published><updated>2021-01-18T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/01/18/rpi-externalizando-copias-seguridad</id><content type="html" xml:base="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/01/18/rpi-externalizando-copias-seguridad.html"><![CDATA[<p>Este articulo es una continuaci√≥n al que hice hace un par de dias con respecto a realizar copias de seguridad en mi RPI4 con <a href="/docker/raspberry%20pi%20os/2021/01/17/rpi-copias-seguridad.html" target="_blank">rsnapshot</a>.</p>

<!-- more -->

<p>Esta bien hacer copias de seguridad de los ficheros m√°s importantes del sistema, pero hay un problema, que si estas copias estan en el mismo HDD que el resto del sistema, en caso de que el HDD falle, 
pierdes todas las copias de seguridad que habias hecho.</p>

<p>Pero para esto, tenemos a <strong>Docker</strong> que viene en nuestra ayuda. En este caso, si tienes una cuenta de <strong>MEGA</strong>, la puedes utilizar, para una vez que has hecho las copias de seguridad de tu sistema 
con <strong>rsnapshot</strong>, las guardas en tu cuenta, para en caso de fallo, poder recuperar toda la informaci√≥n sin ningun problema.</p>

<p>Esto se puede hacer a traves de la imagen <a href="https://hub.docker.com/r/melsonlai/docker-megacmd" target="_blank">MegaCmd</a> que nos provee de un sistema automatico, para que al copiar ficheros que nosotros pongamos en 
dicho directorio, los copia automaticamente en nuestra cuenta de <strong>Mega</strong>.</p>

<p>Lo que necesitamos primero es hacer nuestro <strong>docker-compose</strong> de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   megacmd:
     image: melsonlai/docker-megacmd:arm
     container_name: megacmd
     restart: unless-stopped
     environment:
       - PUID=1000
       - PGID=1000
     volumes:
</span><span class="gp">       #</span><span class="w"> </span>DIRECTORIO DONDE ESTA LA CONFIGURACI√ìN DE MEGA
<span class="go">       - /mnt/config/megacmd:/home/d_user
</span><span class="gp">       #</span><span class="w"> </span>DIRECTORIO DONDE ESTA LAS COPIAS DE SEGURIDAD DE RSNAPSHOT Y QUE QUEREMOS
<span class="gp">       #</span><span class="w"> </span>COPIAR EN MEGA
<span class="go">       - /mnt/seguretat:/mnt/sync
</span></code></pre></div></div>

<p>Una vez tenemos nuestro fichero <strong>docker-compose</strong>, solamente nos queda usar nuestro comando favorito <code class="language-plaintext highlighter-rouge">docker-compose up -d megacmd</code></p>

<p>Cuando se ha finalizado la descarga de la imagen, tenemos que ejecutar el siguiente comando para entrar en el container y finalizar la configuraci√≥n del sistema:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker <span class="nb">exec</span> <span class="nt">-it</span> megacmd su - d_user
<span class="go">
</span><span class="gp">   ~$</span><span class="w"> </span>mega-login &lt;account-email&gt; &lt;password&gt;
<span class="gp">   ~$</span><span class="w"> </span>mega-sync &lt;localpath&gt; &lt;dstremotepath&gt;
<span class="go">
</span><span class="gp">   #</span><span class="w"> </span>EN MI CASO, ESTA INSTRUCCI√ìN SERIA LA SIGUIENTE
<span class="gp">   ~$</span><span class="w"> </span>mega-sync /mnt/sync /backup
</code></pre></div></div>

<p>Y con esta se da por finalizada la configuraci√≥n de <strong>MegaCmd</strong> que automaticamente sincronizara el contenido del directorio <code class="language-plaintext highlighter-rouge">/mnt/seguretat</code> con el directorio que 
hayais seleccionado en vuestra cuenta de <strong>Mega</strong>.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://hub.docker.com/r/melsonlai/docker-megacmd" target="_blank">MEGA - cmd</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Raspberry Pi OS" /><category term="Docker" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Este articulo es una continuaci√≥n al que hice hace un par de dias con respecto a realizar copias de seguridad en mi RPI4 con rsnapshot.]]></summary></entry><entry><title type="html">Raspberry Pi. Haciendo copias de seguridad</title><link href="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/01/17/rpi-copias-seguridad.html" rel="alternate" type="text/html" title="Raspberry Pi. Haciendo copias de seguridad" /><published>2021-01-17T00:00:00+00:00</published><updated>2021-01-17T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/01/17/rpi-copias-seguridad</id><content type="html" xml:base="https://vctrsnts.github.io/docker/raspberry%20pi%20os/2021/01/17/rpi-copias-seguridad.html"><![CDATA[<p>Otro capitulo m√°s con respecto a la configuraci√≥n de de mi RPI4, en este caso son las copias de seguridad de la informaci√≥n m√°s importante.</p>

<!-- more -->

<p>Tal como he dicho en otros articulos, desde que conoci Docker, se abrio un nuevo mundo y para esto, no iba a ser menos.</p>

<p>Para realizar las copias de seguridad queria usar esta imagen <a href="https://hub.docker.com/r/pablokbs/rsnapshot-cron/tags?page=1&amp;ordering=last_updated" target="_blank">rsnapshot</a>, hecha por PeladoNerd, pero no funciona. 
No esta compilada para ARM, le di un toque por octubre, pero supongo que por trabajo, no ha podido solucionar el problema, asi que tuve que buscarme otras opciones. Y como no, salio al rescate 
<a href="https://hub.docker.com/r/linuxserver/rsnapshot" target="_blank">linuxserver</a>.</p>

<p>Lo bueno que tiene <strong>rsnapshot</strong> es que solamente te copia los ficheros que se modifican. Al principio, si que hace una copia de todo, porque no tiene nada con que comprarar, pero a partir de ese 
momento, solo hace las copias de los ficheros que se modifican.</p>

<p>Asi, que nos pusimos a ello. Lo primero fue decidir que informaci√≥n es la importante, luego como la vamos a estructurar (donde estara el directorio). En mi caso, la cosa quedo de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   #</span><span class="c">## DIRECTORIO DONDE SE ALMACENAN LAS COPIAS DE SEGURIDAD</span>
<span class="go">   /mnt/seguretat

</span><span class="gp">   #</span><span class="c">## DIRECTORIOS DE LOS QUE QUIERO COPIAS DE SEGURIDAD</span>
<span class="gp">   #</span><span class="w"> </span>el directorio de mi usuario <span class="o">(</span>junto con el docker-compose de docker<span class="o">)</span>
<span class="go">   /home
</span><span class="gp">   #</span><span class="w"> </span>el directorio donde estan las configuraciones del servidor que son importantes
<span class="go">   /etc
</span><span class="gp">   #</span><span class="w"> </span>el directorio donde tengo las configuraciones de las imagenes de docker
<span class="go">   /mnt/config
</span></code></pre></div></div>

<p>Una vez ya tenemos decido la informaci√≥n a salvaguardar, pasamos a la creaci√≥n del <strong>docker-compose</strong>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   rsnapshot:
    image: ghcr.io/linuxserver/rsnapshot
     container_name: rsnapshot
     restart: unless-stopped
     volumes:
      - /mnt/config/rsnapshot:/config
      - /mnt/seguretat:/snapshots
      - /etc:/data/etc
      - /home/pi:/data/home/pi
      - /mnt/config:/data/config
     environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Madrid
</span></code></pre></div></div>

<p>Despu√©s de crear el docker, solamente nos quedar ejecutar la magica instruccion que nos lo pondra en marcha todo:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker-compose up <span class="nt">-d</span> rsnapshot
</code></pre></div></div>

<p>Ahora nos queda la ultima parte, que es configurar los ficheros de configuraci√≥n de rsnapshot. En mi caso lo hago dentro del mismo docker. Es posible que se pudiera hacer a traves de los ficheros de 
configuraci√≥n que estan en el host del docker, pero prefiero acceder para hacer la configuraci√≥n. Que en mi caso estan en <code class="language-plaintext highlighter-rouge">/mnt/config/rsnapshot</code> y a configuraci√≥n la
 tengo de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">cd </span>dockerCompose
<span class="gp">   usuari@raspberry:~/dockerCompose $</span><span class="w"> </span>docker-compose <span class="nb">exec </span>rsnapshot sh
<span class="go">
</span><span class="gp">   #</span><span class="c">## EDITO LOS FICHEROS RSNAPSHOT.CONF DE LA SIGUIENTE MANERA</span>
<span class="gp">   #</span><span class="w"> </span>DIRECTORIO QUE CONTIENE LAS COPIAS <span class="o">(</span>QUE LO HABRAS CONFIGURADO EN EL
<span class="gp">   #</span><span class="w"> </span>DOCKER-COMPOSE<span class="o">)</span>
<span class="go">   rsnapshpot_root   /snapshots

</span><span class="gp">   #</span><span class="c">## SON LOS INTERVALOS QUE SE SALVAN</span>
<span class="gp">   #</span><span class="w"> </span>SE MANTIENEN 7 COPIAS DIARIAS
<span class="go">   retain    daily   7
</span><span class="gp">   #</span><span class="w"> </span>SE MANTIENEN 4 COPIAS SEMANALES
<span class="go">   retain    weekly  4
</span><span class="gp">   #</span><span class="w"> </span>SE MANTIENEN 3 COPIAS MENSUALES
<span class="go">   retain    monthly 3
  
</span><span class="gp">   #</span><span class="w"> </span>FICHERO DE LOGS  
<span class="go">   logfile   /config/rsnapshot.log
</span><span class="gp">   #</span><span class="w"> </span>DIRECTORIO A COPIAR - EN MI CASO, DENTRO DE DATA, TENGO LOS DIRECTORIOS
<span class="gp">   #</span><span class="w"> </span>A SALVAGUARDAR
<span class="go">   backup    /data/    localhost/
</span></code></pre></div></div>

<p>El siguiente fichero que hay que configurar, es el de cron (propio de rsnapshot), que se encarga de ejecutar las copias:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   #</span><span class="w"> </span>AUN SIGO DENTRO DEL CONTAINER
<span class="go">   cd crontabs
   vi root
</span></code></pre></div></div>

<p>Y ahora modificamos el archivo</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   #</span><span class="w"> </span>AHORA PASAMOS A LA EDICI√ìN DEL FICHERO
<span class="gp">   #</span><span class="w"> </span>min   hour    day   month   weekday   <span class="nb">command</span>
<span class="gp">   #</span><span class="w"> </span>SE EJECUTA CADA DIA A LAS 2 DE LA MA√ëANA
<span class="go">   0       2       *     *       *         rsnapshot daily
</span><span class="gp">   #</span><span class="w"> </span>SE EJECUTA CADA LUNES <span class="o">(</span>WEEKDAY - 1<span class="o">)</span> A LAS 4 DE LA MA√ëANA
<span class="go">   0       4       *     *       1         rsnapshot weekly
</span><span class="gp">   #</span><span class="w"> </span>SE EJECUTA CADA DIA 1 DE CADA MES A LAS 6 DE LA MA√ëANA
<span class="go">   0       6       1     *       *         rsnapshot monthly
</span></code></pre></div></div>

<p>Y con esto, ya tenemos configurado <strong>rsnapshot</strong>, ahora solamente hay que dejarlo que funcione y listo.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.youtube.com/watch?v=gxJqpBsPseM" target="_blank">Backups faciles con Docker! - V2M / Rsnapshot</a></li>
  <li><a href="https://hub.docker.com/r/pablokbs/rsnapshot-cron/tags?page=1&amp;ordering=last_updated" target="_blank">PabloKbs - Rsnapshot</a></li>
  <li><a href="https://hub.docker.com/r/linuxserver/rsnapshot" target="_blank">LinuxServer - Rsnapshot</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Raspberry Pi OS" /><category term="Docker" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Otro capitulo m√°s con respecto a la configuraci√≥n de de mi RPI4, en este caso son las copias de seguridad de la informaci√≥n m√°s importante.]]></summary></entry><entry><title type="html">Crear imagenes en docker</title><link href="https://vctrsnts.github.io/docker/2020/12/14/crear-imagen-docker.html" rel="alternate" type="text/html" title="Crear imagenes en docker" /><published>2020-12-14T00:00:00+00:00</published><updated>2020-12-14T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/2020/12/14/crear-imagen-docker</id><content type="html" xml:base="https://vctrsnts.github.io/docker/2020/12/14/crear-imagen-docker.html"><![CDATA[<p>Esto es una cosa que queria hacer desde que he empezado a utilizar <code class="language-plaintext highlighter-rouge">docker</code> porque siempre va bien tenerlos apuntado por si algun momento hace falta y si adem√°s te has hecho algun par de containers 
propios, pues nunca esta de m√°s.</p>

<p>La parte m√°s dificil de crear una imagen docker, es el <code class="language-plaintext highlighter-rouge">Dockerfile</code>, este fichero es todo lo que contendra y hara la imagen docker cuando se cree (sobre que base funciona, que puertos, volumenes, 
etc‚Ä¶).</p>

<!-- more -->

<p>Un ejemplo de fichero <code class="language-plaintext highlighter-rouge">Dockerfile</code> puede ser este que utilice para crear la imagen de flexget :</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   FROM alpine:3.11
   LABEL maintainer <span class="s2">"wiserain"</span>

   RUN <span class="se">\</span>
     <span class="nb">echo</span> <span class="s2">"**** install frolvlad/alpine-python3 ****"</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
     apk add <span class="nt">--no-cache</span> python3 <span class="o">&amp;&amp;</span> <span class="se">\</span>
     python3 <span class="nt">-m</span> ensurepip <span class="o">&amp;&amp;</span> <span class="se">\</span>
     <span class="nb">rm</span> <span class="nt">-r</span> /usr/lib/python<span class="k">*</span>/ensurepip <span class="o">&amp;&amp;</span> <span class="se">\</span>
     pip3 <span class="nb">install</span> <span class="nt">--no-cache</span> <span class="nt">--upgrade</span> pip setuptools wheel <span class="o">&amp;&amp;</span> <span class="se">\</span>
     <span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="nt">-e</span> /usr/bin/pip <span class="o">]</span><span class="p">;</span> <span class="k">then </span><span class="nb">ln</span> <span class="nt">-s</span> pip3 /usr/bin/pip<span class="p">;</span> <span class="k">fi</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
     <span class="nb">echo</span> <span class="s2">"**** install dependencies for plugin: telegram ****"</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
     apk add <span class="nt">--no-cache</span> py3-cryptography <span class="o">&amp;&amp;</span> <span class="se">\</span>
     pip <span class="nb">install</span> <span class="nt">--upgrade</span> PySocks <span class="o">&amp;&amp;</span> <span class="se">\</span>
     pip <span class="nb">install</span> <span class="nt">--upgrade</span> python-telegram-bot <span class="o">&amp;&amp;</span> <span class="se">\</span>
     <span class="nb">echo</span> <span class="s2">"**** install dependencies for plugin: cfscraper ****"</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
     pip <span class="nb">install</span> <span class="nt">--upgrade</span> cloudscraper <span class="o">&amp;&amp;</span> <span class="se">\</span>
     apk del <span class="nt">--purge</span> <span class="nt">--no-cache</span> build-deps <span class="o">&amp;&amp;</span> <span class="se">\</span>
     <span class="nb">echo</span> <span class="s2">"**** install dependencies for plugin: convert_magnet ****"</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
     apk add <span class="nt">--no-cache</span> boost-python3 libstdc++ <span class="o">&amp;&amp;</span> <span class="se">\</span>
     <span class="nb">echo</span> <span class="s2">"**** install dependencies for plugin: misc ****"</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
     pip <span class="nb">install</span> <span class="nt">--upgrade</span> <span class="se">\</span>
       transmissionrpc <span class="se">\</span>
       irc_bot <span class="o">&amp;&amp;</span> <span class="se">\</span>
     <span class="nb">echo</span> <span class="s2">"**** install dependencies for plugin: rar ****"</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
     apk add <span class="nt">--no-cache</span> unrar <span class="o">&amp;&amp;</span> <span class="se">\</span>
     pip <span class="nb">install</span> <span class="nt">--upgrade</span> rarfile <span class="o">&amp;&amp;</span> <span class="se">\</span>
     <span class="nb">echo</span> <span class="s2">"**** install flexget ****"</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
     pip <span class="nb">install</span> <span class="nt">--upgrade</span> <span class="nt">--force-reinstall</span> flexget <span class="o">&amp;&amp;</span> <span class="se">\</span>
     <span class="c"># add default volumes</span>
     VOLUME /config /data
     WORKDIR /config
 
     <span class="c"># expose port for flexget webui</span>
     EXPOSE 3539 3539/tcp
 
     <span class="c"># run init.sh to set uid, gid, permissions and to launch flexget</span>
     RUN <span class="nb">chmod</span> +x /scripts/init.sh
     CMD <span class="o">[</span><span class="s2">"/scripts/init.sh"</span><span class="o">]</span>
</code></pre></div></div>

<p>Como se puede ver, en este caso, la base de mi imagen es <code class="language-plaintext highlighter-rouge">alpine:3.11</code> y se basa en una imagen ya creada por wiserain. Lo que yo hice fue quitar un par de cosas que no necesitaba y a√±adir otras porque
 a la hora de funcionar me daban error.</p>

<p>Luego viene, todo el resto de programas que tiene que hacer para que la imagen docker funcione correctamente. En este caso, el <code class="language-plaintext highlighter-rouge">Dockerfile</code> que estoy usando, es el que se usa para crear la imagen de 
<code class="language-plaintext highlighter-rouge">flexget</code>.</p>

<p>Esta, en principio es la parte m√°s dificil de crear una imagen docker, ahora solamente nos queda subirlo a algun almacen de imagenes docker. En este caso, yo estoy dado de alta en 
<a href="https://hub.docker.com/" target="_blank">docker hub</a> es que donde muchas personas han colgado las imagenes que ellos han creado, para que el resto pueda utilizarla.</p>

<p>Para crear la imagen en si y luego subirla, lo primero es crear dicha imagen. Esto se hace a traves del siguiente comando (lo mejor es ejecutar esta imagen dentro del directorio donde tenemos el <code class="language-plaintext highlighter-rouge">Dockerfile</code>):</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>docker build <span class="nt">-t</span> usuario/nombre_imagen:version <span class="nb">.</span>
</code></pre></div></div>

<p>Con esto ya hemos creado la imagen, ahora tenemos que subir la imagen, pero antes tenemos que hacer login en nuestra cuenta de <code class="language-plaintext highlighter-rouge">dockerhub</code>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>docker login
</code></pre></div></div>

<p>Una vez ya tenemos acceso procedemos a subir la imagen :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>docker push usuario/nombre_imagen:latest
</code></pre></div></div>

<p>Y ya tenemos  nuestra imagen de docker creada y subida en dockerhub.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.atareao.es/tutorial/docker/crear-una-imagen-docker-desde-cero-y-paso-a-paso/" target="_blank">Crear imagen Docker</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Docker" /><summary type="html"><![CDATA[Esto es una cosa que queria hacer desde que he empezado a utilizar docker porque siempre va bien tenerlos apuntado por si algun momento hace falta y si adem√°s te has hecho algun par de containers propios, pues nunca esta de m√°s. La parte m√°s dificil de crear una imagen docker, es el Dockerfile, este fichero es todo lo que contendra y hara la imagen docker cuando se cree (sobre que base funciona, que puertos, volumenes, etc‚Ä¶).]]></summary></entry><entry><title type="html">Raspberry Pi. Instalar y configurar fail2ban</title><link href="https://vctrsnts.github.io/raspberry%20pi%20os/seguridad/2020/11/08/rpi-usando-fail2ban.html" rel="alternate" type="text/html" title="Raspberry Pi. Instalar y configurar fail2ban" /><published>2020-11-08T00:00:00+00:00</published><updated>2020-11-08T00:00:00+00:00</updated><id>https://vctrsnts.github.io/raspberry%20pi%20os/seguridad/2020/11/08/rpi-usando-fail2ban</id><content type="html" xml:base="https://vctrsnts.github.io/raspberry%20pi%20os/seguridad/2020/11/08/rpi-usando-fail2ban.html"><![CDATA[<p>Siguiendo con mis capitulos con respecto a la configuraci√≥n y uso de mi RPI4 (tambien explicado en este otro <a href="/hardware/raspberry%20pi/2020/10/30/rpi-cambiando-equipo.html" target="_blank">articulo</a>, pues ahora 
pasamos a a√±adir una protecci√≥n m√°s y que en  todos los sitios donde explican su configuraci√≥n, se preguntan, porque no esta instalada por defecto en todos los sistemas GNU/Linux.</p>

<!-- more -->

<p>Esta protecci√≥n es <strong>fail2ban</strong>.</p>

<p>Su funcionalidad es la de monitorizar todos los intentos de conexi√≥n a los servicios que hayas indicado en el fichero de configuraci√≥n,  <code class="language-plaintext highlighter-rouge">jail.local</code> y cuando ve que una <code class="language-plaintext highlighter-rouge">IP</code> intenta hacer m√°s de un 
intento fallido, <em>bloquea - banea</em> durante el tiempo que tu hayas indicado.</p>

<p>Ahora, pasamos a explicar unos cuantos conceptos del fichero de configuraci√≥n :</p>
<ul>
  <li><strong>maxretry</strong>: Cuantos intentos de conexi√≥n se aceptan antes del bloqueo / baneo.</li>
  <li><strong>fintime</strong>: Es durante cuanto tiempo se monitoriza una IP antes de activarse la opcion <strong>maxretry</strong></li>
  <li><strong>bantime</strong>: Cuanto tiempo permanecera baneada la ip de donde ha venido el intento de conexi√≥n. En el caso de que quieras ser agresivo, puedes poner m√°s tiempo. En mi caso lo tengo con que el baneo
sea de 1 dia (86.400 segundos).</li>
  <li><strong>ignoreip</strong>: Para ignorar los intentos de conexi√≥n fallidos que vienen de nuestra propia red.</li>
</ul>

<p>Ahora pasamos a su modificaci√≥n.</p>

<p>Lo que he leido en todos sitios con respecto a <strong>fail2ban</strong>, es que lo mejor es copiar el fichero <code class="language-plaintext highlighter-rouge">jail.conf</code> a <code class="language-plaintext highlighter-rouge">jail.local</code>.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">cd</span> /etc
<span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo cp </span>jail.conf jail.local
</code></pre></div></div>

<p>Una vez hecho esto, ya lo podemos editar con las opciones que m√°s nos interesan que en mi caso son las siguiente :</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c"># descomentar la opci√≥n ignoreip para que no tenga en cuenta los accesos</span>
   <span class="c"># que vienen de nuestra propia red</span>
   ignoreip <span class="o">=</span> 127.0.0.1/8 ::1
   <span class="c"># descomentamos la opci√≥n bantime y en mi caso he puesto 86400</span>
   bantime <span class="o">=</span> 86400
   <span class="c"># descomentamos la opcion fintime y yo he dejado el valor por defeccto</span>
   fintime <span class="o">=</span> 10m
</code></pre></div></div>

<p>Ahora pasamos a activar los modulos que nos interesa que en mi caso es el modulo de <code class="language-plaintext highlighter-rouge">sshd</code>. Los modulos se encuentran a partir de la opci√≥n <code class="language-plaintext highlighter-rouge">JAILS</code>.</p>

<p>Se activan con la opci√≥n <code class="language-plaintext highlighter-rouge">enabled = true</code>. Y en mi caso el modulo de <code class="language-plaintext highlighter-rouge">SSHD</code> queda de la siguiente manera :</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   enabled <span class="o">=</span> <span class="nb">true
   </span>filter <span class="o">=</span> sshd
   <span class="c"># Aqui es donde ponemos los puertos a controlar. Si ponemos ssh,</span>
   <span class="c"># se monitoriza el puerto por defecto de ssh (22), pero</span>
   <span class="c"># tambien podemos poner otros puertos.</span>
   port <span class="o">=</span> ssh, xxxx
</code></pre></div></div>

<p>Si revisas los modulos disponibles, ves que hay un monto, por ejemplo <code class="language-plaintext highlighter-rouge">dropbear</code>, <code class="language-plaintext highlighter-rouge">apache</code>, <code class="language-plaintext highlighter-rouge">nginx</code>, <code class="language-plaintext highlighter-rouge">lighttpd</code> y unos cuantos m√°s.</p>

<p>De esta manera ya tenemos configurado <strong>fail2ban</strong>, ahora solamente falta activarlo :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo</span> /etc/init.d/fail2ban start
</code></pre></div></div>

<p>Y disfrutar de los baneos, que puedes ver, en el fichero de los :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo tail</span> <span class="nt">-f</span> /var/log/fail2ban.log
</code></pre></div></div>

<blockquote>
  <p>üí° Que como dice un youtuber famoso <a href="https://www.youtube.com/channel/UCrBzBOMcUVV8ryyAU_c6P5g" target="_blank">PeladoNerd</a>, es un ejercicio muy saludable.</p>
</blockquote>

<p>Asi mismo, tambien pongo el codigo necesario para poder <code class="language-plaintext highlighter-rouge">desbanear</code> nuestra ip de acceso a la raspberry (me ha pasado m√°s de una vez), lo que se tiene que hacer es lo siguiente:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>fail2ban-client <span class="nb">set </span>sshd unbanip x.x.x.x
<span class="gp">   #</span><span class="w"> </span>Donde x.x.x.x es la ip
</code></pre></div></div>

<p>Ten en cuenta, que esto lo tienes que hacer desde otro PC, porque desde el que tienes acceso normalmente no te dejara acceder, si es que no le cambias la ip</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elblogdelazaro.gitlab.io/2017-10-05-fail2ban-raspberry" target="_blank">fail2ban en una Raspberry Pi</a></li>
  <li><a href="https://www.youtube.com/watch?v=PAK7I1cKwzA" target="_blank">ESTO TENDRIA QUE VENIR POR DEFECTO EN LINUX - V2M / fail2ban</a></li>
  <li><a href="http://support.moonpoint.com/os/unix/linux/fail2ban-unban.php" target="_blank">Desbanear IP</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Raspberry Pi OS" /><category term="Seguridad" /><category term="Raspberry Pi OS" /><category term="Seguridad" /><summary type="html"><![CDATA[Siguiendo con mis capitulos con respecto a la configuraci√≥n y uso de mi RPI4 (tambien explicado en este otro articulo, pues ahora pasamos a a√±adir una protecci√≥n m√°s y que en todos los sitios donde explican su configuraci√≥n, se preguntan, porque no esta instalada por defecto en todos los sistemas GNU/Linux.]]></summary></entry><entry><title type="html">Raspberry Pi. Cambiando el equipo</title><link href="https://vctrsnts.github.io/hardware/raspberry%20pi/2020/10/30/rpi-cambiando-equipo.html" rel="alternate" type="text/html" title="Raspberry Pi. Cambiando el equipo" /><published>2020-10-30T00:00:00+00:00</published><updated>2020-10-30T00:00:00+00:00</updated><id>https://vctrsnts.github.io/hardware/raspberry%20pi/2020/10/30/rpi-cambiando-equipo</id><content type="html" xml:base="https://vctrsnts.github.io/hardware/raspberry%20pi/2020/10/30/rpi-cambiando-equipo.html"><![CDATA[<p>Ante la noticia de que iban a sacar una nueva <a href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/?resellerType=home" target="_blank">Raspberry Pi</a> con varias mejores (m√°s vale tarde que nunca que ya 
hablaremos m√°s adelante) y pense si ya era hora de cambiar mi Raspberry Pi 3b por la nueva versi√≥n.</p>

<!-- more -->

<p>Pero cual, porque la fundaci√≥n se ha echado la manta a la cabeza y ha sacado unas cuantas versiones interesantes:</p>
<ul>
  <li>Raspberry Pi4 con 1Gb de RAM aunque esta desaparecio rapidamente. No tenia sentido</li>
  <li>Raspberry Pi4 con 2Gb de RAM que ahora es el nivel inicial de la familia</li>
  <li>Raspberry Pi4 con 4Gb de RAM, esto ya son palabras mayores</li>
  <li>Raspberry Pi4 con 8Gb de RAM, pero se han vuelto locos</li>
</ul>

<p>A parte de las mejoras que han introducido, que no entrare a fondo, porque todo el mundo las sabe, pero:</p>
<ul>
  <li>Ethernet Gigabyte. Ya era hora.</li>
  <li>USB3 (2 salidas)</li>
  <li>USB2 (2 salidas). Que no le encuentro ningun sentido, si pones USB3, pon todo igual</li>
  <li>2 mini-HDMI. Si con uno hay m√°s que suficiente, pero bueno‚Ä¶</li>
  <li>Alimentaci√≥n por USB-C y una nueva fuente de alimentaci√≥n con m√°s amperaje</li>
</ul>

<p>A parte de estas mejores (necesarias) cometieron algunos fallos de novato que no tiene perdon. No estan empezando. Llevan a√±os con esto. Pero bueno, <strong>errar es humano</strong>.</p>

<p>Antes estas mejoras no sabia que hacer si dar el salto a por una nueva RPI o quedarme con la que tenia, aunque fuera un poco apurada con el docker (que da√±o ha hecho).</p>

<p>Pero al final me decidi a dar el salto. Y me fui a por la de 4Gb, porque asi, podria estar seguro de que no tendria problemas de rendimiento (pero con docker nunca se sabe), pero eso si, me fui a por 
la Raspberry Pi4 Rev 1.2, porque era la que tenia los errores de alimentaci√≥n solucionados asi como una reducci√≥n en la temperatura considerable (a parte de la mejora en la firmware nueva).</p>

<p>Y asi estamos, con una nueva RPI 4 con 4Gb de RAM y un nuevo HDD de 4Tb y los siguientes contenedores de Docker y sin despeinarse:</p>
<ul>
  <li><a href="https://hub.docker.com/r/linuxserver/transmission" target="_blank">transmission</a></li>
  <li><a href="https://hub.docker.com/r/linuxserver/medusa" target="_blank">Medusa</a></li>
  <li><a href="https://hub.docker.com/r/linuxserver/jackett" target="_blank">Jackett</a></li>
  <li><a href="https://hub.docker.com/r/wiserain/flexget" target="_blank">Flexget</a>. Aunque la base es esta, pero uso una modificada por mi</li>
  <li><a href="https://hub.docker.com/r/synopsis8/raspberrypi3-amule" target="_blank">Amule</a></li>
  <li><a href="https://hub.docker.com/r/jaymoulin/jdownloader" target="_blank">Jdownloader</a></li>
  <li><a href="https://hub.docker.com/r/linuxserver/calibre-web" target="_blank">Calibre Web</a></li>
  <li><a href="https://hub.docker.com/r/linuxserver/duckdns" target="_blank">DuckDNS</a>
    <ul>
      <li>Hay que tener en cuenta que para poder usar <code class="language-plaintext highlighter-rouge">DuckDns</code> hay que crearse una cuenta en la pagina web de ellos.</li>
    </ul>
  </li>
  <li><a href="https://hub.docker.com/_/traefik" target="_blank">Traefik</a></li>
  <li><a href="https://hub.docker.com/r/deluan/navidrome" target="_blank">Navidrome</a></li>
  <li><a href="https://hub.docker.com/r/dperson/samba" target="_blank">Samba</a></li>
</ul>

<p>Eso si, no penseis que la antigua RPI3b que tenia la he tirado, sino que esta haciendo de mediacenter con Libreelec y con la imagen de Samba me va perfecta.</p>]]></content><author><name>VSANTOS</name></author><category term="Hardware" /><category term="Raspberry Pi" /><category term="Hardware" /><category term="Raspberry Pi" /><summary type="html"><![CDATA[Ante la noticia de que iban a sacar una nueva Raspberry Pi con varias mejores (m√°s vale tarde que nunca que ya hablaremos m√°s adelante) y pense si ya era hora de cambiar mi Raspberry Pi 3b por la nueva versi√≥n.]]></summary></entry><entry><title type="html">Crear directorios a partir de un fichero de texto</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2020/08/31/crear-directorios-lista.html" rel="alternate" type="text/html" title="Crear directorios a partir de un fichero de texto" /><published>2020-08-31T00:00:00+00:00</published><updated>2020-08-31T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2020/08/31/crear-directorios-lista</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2020/08/31/crear-directorios-lista.html"><![CDATA[<p>A veces tengo que crear unos cuantos directorios (normalmente para musica). Si son 5 no pasa nada, pero cuando son m√°s de 20, pues al final te cansas un poco.</p>

<!-- more -->

<p>Pero buscando por internet, encontre una instrucci√≥n en <code class="language-plaintext highlighter-rouge">BASH</code> que hace lo mismo. La instrucci√≥n es la siguiente:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>xargs <span class="nt">-I</span><span class="o">{}</span> <span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"{}"</span> &lt; dirs.txt
</code></pre></div></div>

<p>Donde:</p>
<ul>
  <li><strong>dirs.txt</strong>: El fichero donde estan los directorios a crear</li>
</ul>

<p>Y hasta aqui hemos llegado. A ver si en un futuro, voy poniendo otras instrucciones que me son de utilidad y nunca se sabe, tambien os pueden servir.</p>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[A veces tengo que crear unos cuantos directorios (normalmente para musica). Si son 5 no pasa nada, pero cuando son m√°s de 20, pues al final te cansas un poco.]]></summary></entry><entry><title type="html">Copiar un archivo a varios directores</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2020/08/30/copiar-archivo-varios-directorios.html" rel="alternate" type="text/html" title="Copiar un archivo a varios directores" /><published>2020-08-30T00:00:00+00:00</published><updated>2020-08-30T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2020/08/30/copiar-archivo-varios-directorios</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2020/08/30/copiar-archivo-varios-directorios.html"><![CDATA[<p>A veces tengo que copiar un fichero (normalmente una caratula para la musica) a varios directorios. Si son 5 no pasa nada, pero cuando son m√°s de 20, pues al final te cansas un poco.</p>

<!-- more -->

<p>Pero buscando por internet, encontre una instrucci√≥n en <code class="language-plaintext highlighter-rouge">BASH</code> que hace lo mismo. La instrucci√≥n es la siguiente:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="k">for </span><span class="nb">dir </span><span class="k">in</span> <span class="k">*</span><span class="p">;</span> <span class="k">do</span> <span class="o">[</span> <span class="nt">-d</span> <span class="s2">"</span><span class="nv">$dir</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">cp</span> /path/file.txt <span class="s2">"</span><span class="nv">$dir</span><span class="s2">"</span> <span class="p">;</span> <span class="k">done</span>
</code></pre></div></div>

<p>Donde:</p>
<ul>
  <li><strong>$dir</strong>: son los directorios de destino</li>
  <li><strong>/path/file.txt</strong>: es el fichero que quiero copiar en los diferentes directorios</li>
</ul>

<p>Y hasta aqui hemos llegado. A ver si en un futuro, voy poniendo otras instrucciones que me son de utilidad y nunca se sabe, tambien os pueden servir.</p>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[A veces tengo que copiar un fichero (normalmente una caratula para la musica) a varios directorios. Si son 5 no pasa nada, pero cuando son m√°s de 20, pues al final te cansas un poco.]]></summary></entry><entry><title type="html">Mover ficheros de un arbol de directorios a un directorio</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2020/08/29/mover-ficheros-directorio.html" rel="alternate" type="text/html" title="Mover ficheros de un arbol de directorios a un directorio" /><published>2020-08-29T00:00:00+00:00</published><updated>2020-08-29T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2020/08/29/mover-ficheros-directorio</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2020/08/29/mover-ficheros-directorio.html"><![CDATA[<p>A veces tengo que mover varios ficheros (normalmente epub - libros electronicos). Si son 5 no pasa nada, pero cuando son m√°s de 20, pues al final te cansas un poco.</p>

<!-- more -->

<p>Pero buscando por internet, encontre una instrucci√≥n en <strong>BASH</strong> que hace lo mismo. La instrucci√≥n es la siguiente:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>find <span class="nb">.</span> <span class="nt">-type</span> f <span class="nt">-name</span> <span class="k">*</span>.ext <span class="nt">-exec</span> <span class="nb">mv</span> <span class="o">{}</span> /tmp <span class="se">\;</span>
</code></pre></div></div>

<p>Donde:</p>
<ul>
  <li><strong>*.ext</strong>: extensi√≥n de los ficheros que queremos mover</li>
</ul>

<p>Y hasta aqui hemos llegado. A ver si en un futuro, voy poniendo otras instrucciones que me son de utilidad y nunca se sabe, tambien os pueden servir.</p>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[A veces tengo que mover varios ficheros (normalmente epub - libros electronicos). Si son 5 no pasa nada, pero cuando son m√°s de 20, pues al final te cansas un poco.]]></summary></entry><entry><title type="html">Usando i3-wm</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/i3/2020/08/06/usando-i3-wm.html" rel="alternate" type="text/html" title="Usando i3-wm" /><published>2020-08-06T00:00:00+00:00</published><updated>2020-08-06T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/i3/2020/08/06/usando-i3-wm</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/i3/2020/08/06/usando-i3-wm.html"><![CDATA[<p>Aqui va una nueva entrada y en este caso hace referencia a <a href="https://i3wm.org" target="_blank">i3wm</a></p>

<p>Primero un poco de historia con respecto al porque de este post. Desde hace a√±os (cuando <strong>KDE</strong> se volvio tan pesado y desapareci√≥ el paquete kde-minimal) cambie a <strong>XFCE4</strong> y todo fue bien, hasta 
que vi que (en mi opini√≥n), se habia estancado, por eso decidi hacer un cambio y hablando con gente de <a href="https://exdebian.org" target="_blank">exDebian</a> me aconsejaron probar <strong>i3wm</strong>. Asi que empeze a buscar 
informaci√≥n y fue cuando encontre esta colecci√≥n de 3 videos en <a href="https://www.youtube.com/playlist?list=PL5ze0DjYv5DbCv9vNEzFmP6sU7ZmkGzcf" target="_blank">Youtube - i3wm</a> que me abrieron las puertas a <strong>i3wm</strong></p>

<!-- more -->

<p>Y gracias a estos videos, me puse manos a la obra. Pero como siempre me pasa, soy un culo inquieto y tambi√©n me canse, aunque creo que m√°s que cansanci√≥ fue ganas de buscar otra cosa o probar cosas 
nuevas. Asi que aprovechando que me compre un <a href="https://www.samsung.com/semiconductor/minisite/ssd/product/consumer/860evo/" target="_blank">SSD - Samsung Evo 860</a> volvi a XFCE4.</p>

<p>Pero fue mi mayor error. Porque con el recuerdo de i3wm en la mente, queria tener la misma funcionalidad en XFCE4 y eso no podia ser (algunas cosas si, pero otras no). Hasta que me canse y he vuelto a
 i3wm para (en principio) quedarme con el. Asi que aqui voy a explicar todo el proceso de instalaci√≥n y configuraci√≥n que he usado para mi i3wm.</p>

<h3 id="1-instalar-en-debian-gnulinux">1. Instalar en Debian GNU/Linux</h3>
<p>Es la parte m√°s sencilla de todo el proceso y sobretodo en <strong>Debian GNU/Linux</strong>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">sudo </span>aptitude <span class="nb">install </span>i3-wm i3blocks i3status
</code></pre></div></div>

<p>Con esta instrucci√≥n tan sencilla, ya tenemos los basico y necesario para usar i3-wm, ahora solo falta lanzarlo (en mi caso uso <strong>lightdm</strong>).</p>

<h3 id="2-configuraci√≥n-del-entorno">2. Configuraci√≥n del entorno</h3>
<p>Una vez que accedemos, nos aparece una pantalla, no os espereis una gran cosa, parece m√°s que sea de consola, nos pide elegir el <code class="language-plaintext highlighter-rouge">modkey</code> queremos usar. En mi caso, uso la tecla de <code class="language-plaintext highlighter-rouge">windows</code> porque se
 no usa para nada en caso de tener <strong>Debian GNU/Linux</strong>. Tambien nos da opci√≥n de usar la tecla <code class="language-plaintext highlighter-rouge">Alt</code>, aunque yo no recomiendo esta. Con este simple paso se puede decir que hemos realizado el primer paso 
 de la configuraci√≥n de <code class="language-plaintext highlighter-rouge">i3-wm</code>. Ahora viene lo m√°s dificil (al principio lo parece, pero luego no es tanto) la configuraci√≥ del resto del entorno. El fichero de configuraci√≥n lo encontramos 
 <code class="language-plaintext highlighter-rouge">~/.config/i3/config</code></p>

<h3 id="3-instalar-programas-basicos">3. Instalar programas basicos</h3>
<p>Para poder usar un poco m√°s holgadamente <code class="language-plaintext highlighter-rouge">i3-wm</code> os recomiendo que instaleis las siguientes aplicaciones que os facilitaran un poco la vida:</p>
<ul>
  <li>Obtener informaci√≥n sobre la bateria: <code class="language-plaintext highlighter-rouge">ACPI</code>.</li>
  <li>Informaci√≥n sobre el volumen: Yo uso <code class="language-plaintext highlighter-rouge">ALSA-UTILS</code>, aunque seguramente otro tambien sirve.</li>
  <li>Lanzador de aplicaciones: Puede usar el que recomienda que es <code class="language-plaintext highlighter-rouge">dmenu</code>, pero es mejor <code class="language-plaintext highlighter-rouge">ROFI</code>.</li>
  <li>Para el fondo de pantalla: Yo uso <code class="language-plaintext highlighter-rouge">FEH</code>.</li>
  <li>Para el control del sonido: Yo uso <code class="language-plaintext highlighter-rouge">PAVUCONTROL</code> y <code class="language-plaintext highlighter-rouge">PULSE</code></li>
  <li>Para visualizar informaci√≥n de la papelera en la barra de estado: Yo uso <code class="language-plaintext highlighter-rouge">TRASH</code>, que se puede encontrar en esta <a href="https://github.com/Anachron/i3blocks" target="_blank">pagina</a>.</li>
  <li>Apariencia: Yo me he decantado por <code class="language-plaintext highlighter-rouge">LXAPPEARENCE</code>, es facil de usar y no necesita muchas cosas para su uso. Con el puedes configurar iconos, temas, fuentes (que hablare m√°s adelante), etc‚Ä¶</li>
  <li>Barra de estado: Yo uso <code class="language-plaintext highlighter-rouge">I3BLOCK</code>, es facil de usar y de configurar y tiene multiples opciones.</li>
</ul>

<h3 id="4-configurar-las-fuentes-a-usar">4. Configurar las fuentes a usar</h3>
<p>Una de las cosas que es util de hacer (porque no es facil) es configurar manualmente las fuentes que vas a usar. En principio son dos.</p>
<ul>
  <li><a href="https://github.com/FortAwesome/Font-Awesome" target="_blank">Font Awesome</a>: Para los iconos que puedes usar en la barra de estado (i3block)</li>
  <li><a href="https://github.com/supermarin/YosemiteSanFranciscoFont" target="_blank">System San Francisco</a>: Que emula las letras de MACOSX y que quedan bien (aunque tu puedes usar otras).</li>
</ul>

<p>Una vez que las hayas descargado, solamente tienes que crear un directorio <code class="language-plaintext highlighter-rouge">~/.fonts</code> donde copiaras los <code class="language-plaintext highlighter-rouge">ttf</code> que has descargado y ya estaran listos para su uso.</p>

<p>La segunda parte es la modificaci√≥n de los siguientes ficheros para que <code class="language-plaintext highlighter-rouge">lxappearence</code> y con ello todo el sistema use las fuentes.</p>

<p>Estos dos ficheros son:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">~/.gtkrc-2.0</code>: En la opci√≥n <code class="language-plaintext highlighter-rouge">gtk-font-name=</code> tienes que poner <code class="language-plaintext highlighter-rouge">"System San Francisco Display 10"</code></li>
  <li><code class="language-plaintext highlighter-rouge">~/.config/gtk-3.0</code>: En la opci√≥n <code class="language-plaintext highlighter-rouge">gtk-font-name</code> tienes que poner <code class="language-plaintext highlighter-rouge">System San Francisco Display 10</code></li>
</ul>

<p>Y con esto tendras configurado el sistema para que use esta fuente.</p>

<blockquote>
  <p>üí° Se podria hacer a traves de <code class="language-plaintext highlighter-rouge">lxappearence</code>, pero no detecta esta fuente y no la podras seleccionar, por eso modificamos directamente los ficheros anteriores.</p>
</blockquote>

<h3 id="mi-escritorio">Mi Escritorio</h3>
<p>Despu√©s de la instalaci√≥n y si le dedicas un poco de tiempo, te puede quedar algo parecido al mio (o mejor) eso depende del gusto de cada uno.</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/screenshot_002.jpg" alt="screenshot_002.jpg" />
    </div>
    
</div>

<h3 id="mi-configuraci√≥n">Mi Configuraci√≥n</h3>
<p>A continuaci√≥n, siendo la parte m√°s interesante, la configuraci√≥n, os pongo la que yo uso (que seguro que en un futuro ire mejorando) pero que os puede servir como base de inicio.</p>
<ul>
  <li>Mi configuraci√≥n de i3-wm</li>
  <li>Mi configuraci√≥n de i3blocks</li>
</ul>

<h4 id="configi3config">.config/i3/config:</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c"># This file has been auto-generated by i3-config-wizard(1).</span>
   <span class="c"># It will not be overwritten, so edit it as you like.</span>
   <span class="c">#</span>
   <span class="c"># Should you change your keyboard layout some time, delete</span>
   <span class="c"># this file and re-run i3-config-wizard(1).</span>
   <span class="c">#</span>
   <span class="c"># i3 config file (v4)</span>
   <span class="c">#</span>
   <span class="c"># Please see https://i3wm.org/docs/userguide.html for a complete reference!</span>
   <span class="nb">set</span> <span class="nv">$mod</span> Mod4
   <span class="c">#</span>
   <span class="c"># VARIABLES DEL SISTEMA - COLORS</span>
   <span class="c">#</span>
   <span class="nb">set</span> <span class="nv">$bg</span><span class="nt">-color</span>            <span class="c">#2f343f</span>
   <span class="nb">set</span> <span class="nv">$inactive</span><span class="nt">-bg-color</span>   <span class="c">#2f343f</span>
   <span class="nb">set</span> <span class="nv">$text</span><span class="nt">-color</span>          <span class="c">#f3f4f5</span>
   <span class="nb">set</span> <span class="nv">$inactive</span><span class="nt">-text-color</span> <span class="c">#676E7D</span>
   <span class="nb">set</span> <span class="nv">$urgent</span><span class="nt">-bg-color</span>     <span class="c">#E53935</span>
   <span class="c">#</span>
   <span class="c"># VARIABLES DEL SISTEMA - COLORS PER A LES FINESTRES</span>
   <span class="c">#   border              background         text                 indicator</span>
   client.focused          <span class="nv">$bg</span><span class="nt">-color</span>           <span class="nv">$bg</span><span class="nt">-color</span>          <span class="nv">$text</span><span class="nt">-color</span>          <span class="c">#00ff00</span>
   client.unfocused        <span class="nv">$inactive</span><span class="nt">-bg-color</span>  <span class="nv">$inactive</span><span class="nt">-bg-color</span> <span class="nv">$inactive</span><span class="nt">-text-color</span> <span class="c">#00ff00</span>
   client.focused_inactive <span class="nv">$inactive</span><span class="nt">-bg-color</span>  <span class="nv">$inactive</span><span class="nt">-bg-color</span> <span class="nv">$inactive</span><span class="nt">-text-color</span> <span class="c">#00ff00</span>
   client.urgent           <span class="nv">$urgent</span><span class="nt">-bg-color</span>    <span class="nv">$urgent</span><span class="nt">-bg-color</span>   <span class="nv">$text</span><span class="nt">-color</span>          <span class="c">#00ff00</span>
   <span class="c"># Font for window titles. Will also be used by the bar unless a different font</span>
   <span class="c"># is used in the bar {} block below.</span>
   font pango:System San Francisco Display 9
   <span class="c">#</span>
   <span class="c"># VORES DE LES PANTALLES MES PRIMES</span>
   <span class="c">#</span>
   hide_edge_borders both
   <span class="c"># This font is widely installed, provides lots of unicode glyphs, right-to-left</span>
   <span class="c"># text rendering and scalability on retina/hidpi displays (thanks to pango).</span>
   <span class="c"># font pango:DejaVu Sans Mono 8</span>
   <span class="c"># Before i3 v4.8, we used to recommend this one as the default:</span>
   <span class="c"># font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1</span>
   <span class="c"># The font above is very space-efficient, that is, it looks good, sharp and</span>
   <span class="c"># clear in small sizes. However, its unicode glyph coverage is limited, the old</span>
   <span class="c"># X core fonts rendering does not support right-to-left and this being a bitmap</span>
   <span class="c"># font, it doesn‚Äôt scale on retina/hidpi displays.</span>
   <span class="c"># Use Mouse+$mod to drag floating windows to their wanted position</span>
   floating_modifier <span class="nv">$mod</span>
   <span class="c"># start a terminal</span>
   bindsym <span class="nv">$mod</span>+Return <span class="nb">exec</span> <span class="nt">--no-startup-id</span> xfce4-terminal
   <span class="c"># kill focused window</span>
   bindsym <span class="nv">$mod</span>+Shift+q <span class="nb">kill</span>
   <span class="c"># start dmenu (a program launcher)</span>
   <span class="c">#bindsym $mod+d exec dmenu_run</span>
   <span class="c">#bindsym $mod+d exec --no-startup-id rofi -show run -theme onedark -lines 3 -eh 2 -bw 0 -bc "$bg-color" -bg "$bg-color" -fg "$text-color" -hlbg "$bg-color" -hlfg "#9575cd" -font "System San Francisco Display 12"</span>
   <span class="c"># AQUEST ES LA PRIMERA VERSIO</span>
   <span class="c"># bindsym $mod+d exec --no-startup-id i3-dmenu-desktop --dmenu='rofi -theme custom-nord -dmenu -lines 5 -eh 2 -bw 0 -font "System San Francisco Display 12" -i sort'</span>
   <span class="c"># EL QUE ESTIC FENT SERVIR ARA</span>
   bindsym <span class="nv">$mod</span>+d <span class="nb">exec</span> <span class="s2">"rofi -show drun -sidebar-mode -theme custom-nord -modi drun,window,ssh -show-icons"</span>
   <span class="c"># There also is the (new) i3-dmenu-desktop which only displays applications</span>
   <span class="c"># shipping a .desktop file. It is a wrapper around dmenu, so you need that</span>
   <span class="c"># installed.</span>
   <span class="c"># bindsym $mod+d exec --no-startup-id i3-dmenu-desktop</span>
   <span class="c"># change focus</span>
   bindsym <span class="nv">$mod</span>+j focus left
   bindsym <span class="nv">$mod</span>+k focus down
   bindsym <span class="nv">$mod</span>+l focus up
   bindsym <span class="nv">$mod</span>+ntilde focus right
   <span class="c"># alternatively, you can use the cursor keys:</span>
   bindsym <span class="nv">$mod</span>+Left focus left
   bindsym <span class="nv">$mod</span>+Down focus down
   bindsym <span class="nv">$mod</span>+Up focus up
   bindsym <span class="nv">$mod</span>+Right focus right
   <span class="c"># move focused window</span>
   bindsym <span class="nv">$mod</span>+Shift+j move left
   bindsym <span class="nv">$mod</span>+Shift+k move down
   bindsym <span class="nv">$mod</span>+Shift+l move up
   bindsym <span class="nv">$mod</span>+Shift+ntilde move right
   <span class="c"># alternatively, you can use the cursor keys:</span>
   bindsym <span class="nv">$mod</span>+Shift+Left move left
   bindsym <span class="nv">$mod</span>+Shift+Down move down
   bindsym <span class="nv">$mod</span>+Shift+Up move up
   bindsym <span class="nv">$mod</span>+Shift+Right move right
   <span class="c"># split in horizontal orientation</span>
   bindsym <span class="nv">$mod</span>+h <span class="nb">split </span>h
   <span class="c"># split in vertical orientation</span>
   bindsym <span class="nv">$mod</span>+v <span class="nb">split </span>v
   <span class="c"># enter fullscreen mode for the focused container</span>
   bindsym <span class="nv">$mod</span>+f fullscreen toggle
   <span class="c"># change container layout (stacked, tabbed, toggle split)</span>
   bindsym <span class="nv">$mod</span>+s layout stacking
   bindsym <span class="nv">$mod</span>+w layout tabbed
   bindsym <span class="nv">$mod</span>+e layout toggle <span class="nb">split</span>
   <span class="c"># toggle tiling / floating</span>
   bindsym <span class="nv">$mod</span>+Shift+space floating toggle
   <span class="c"># change focus between tiling / floating windows</span>
   bindsym <span class="nv">$mod</span>+space focus mode_toggle
   <span class="c"># focus the parent container</span>
   bindsym <span class="nv">$mod</span>+a focus parent
   <span class="c"># focus the child container</span>
   <span class="c">#bindsym $mod+d focus child</span>
   <span class="c"># Define names for default workspaces for which we configure key bindings later on.</span>
   <span class="c"># We use variables to avoid repeating the names in multiple places.</span>
   <span class="nb">set</span> <span class="nv">$ws1</span> <span class="s2">"1: Web Ôâ©"</span>
   <span class="nb">set</span> <span class="nv">$ws2</span> <span class="s2">"2: Terminal ÔÑ†"</span>
   <span class="nb">set</span> <span class="nv">$ws3</span> <span class="s2">"3: File Manager ÔÑî"</span>
   <span class="nb">set</span> <span class="nv">$ws4</span> <span class="s2">"4: Music ÔÜº"</span>
   <span class="nb">set</span> <span class="nv">$ws5</span> <span class="s2">"5: VirtualBox ÔÇÖ"</span>
   <span class="nb">set</span> <span class="nv">$ws6</span> <span class="s2">"6: Email Ôä∑"</span>
   <span class="nb">set</span> <span class="nv">$ws7</span> <span class="s2">"7: Filezilla ÔÇé"</span>
   <span class="nb">set</span> <span class="nv">$ws8</span> <span class="s2">"8: Calibre ÔÄ≠"</span>
   <span class="nb">set</span> <span class="nv">$ws9</span> <span class="s2">"9: Misc ÔÖº"</span>
   <span class="nb">set</span> <span class="nv">$ws10</span> <span class="s2">"10: Misc ÔÖº"</span>
   <span class="c"># switch to workspace</span>
   bindsym <span class="nv">$mod</span>+1 workspace <span class="nv">$ws1</span>
   bindsym <span class="nv">$mod</span>+2 workspace <span class="nv">$ws2</span>
   bindsym <span class="nv">$mod</span>+3 workspace <span class="nv">$ws3</span>
   bindsym <span class="nv">$mod</span>+4 workspace <span class="nv">$ws4</span>
   bindsym <span class="nv">$mod</span>+5 workspace <span class="nv">$ws5</span>
   bindsym <span class="nv">$mod</span>+6 workspace <span class="nv">$ws6</span>
   bindsym <span class="nv">$mod</span>+7 workspace <span class="nv">$ws7</span>
   bindsym <span class="nv">$mod</span>+8 workspace <span class="nv">$ws8</span>
   bindsym <span class="nv">$mod</span>+9 workspace <span class="nv">$ws9</span>
   bindsym <span class="nv">$mod</span>+0 workspace <span class="nv">$ws10</span>
   <span class="c"># move focused container to workspace</span>
   bindsym <span class="nv">$mod</span>+Shift+1 move container to workspace <span class="nv">$ws1</span>
   bindsym <span class="nv">$mod</span>+Shift+2 move container to workspace <span class="nv">$ws2</span>
   bindsym <span class="nv">$mod</span>+Shift+3 move container to workspace <span class="nv">$ws3</span>
   bindsym <span class="nv">$mod</span>+Shift+4 move container to workspace <span class="nv">$ws4</span>
   bindsym <span class="nv">$mod</span>+Shift+5 move container to workspace <span class="nv">$ws5</span>
   bindsym <span class="nv">$mod</span>+Shift+6 move container to workspace <span class="nv">$ws6</span>
   bindsym <span class="nv">$mod</span>+Shift+7 move container to workspace <span class="nv">$ws7</span>
   bindsym <span class="nv">$mod</span>+Shift+8 move container to workspace <span class="nv">$ws8</span>
   bindsym <span class="nv">$mod</span>+Shift+9 move container to workspace <span class="nv">$ws9</span>
   bindsym <span class="nv">$mod</span>+Shift+0 move container to workspace <span class="nv">$ws10</span>
   <span class="c">#</span>
   <span class="c"># ASSIGNACI√ì DAPLICACIONS A LES FINESTRES PER DEFECTE</span>
   <span class="c"># NECESSITES X11-UTILS, PER SAPIGER QUINA "class" I AIXI PODER CONFIGURAR AQUESTA SECCI√ì</span>
   <span class="c"># virtualbox (mod+winkey+v)</span>
   assign <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Firefox"</span><span class="o">]</span> <span class="nv">$ws1</span>
   assign <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Xfce4-terminal"</span><span class="o">]</span> <span class="nv">$ws2</span>
   assign <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Thunar"</span><span class="o">]</span> <span class="nv">$ws3</span>
   assign <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Chromium"</span><span class="o">]</span> <span class="nv">$ws4</span>
   assign <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"VirtualBox Manager"</span><span class="o">]</span> <span class="nv">$ws5</span>
   assign <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Claws-mail"</span><span class="o">]</span> <span class="nv">$ws6</span>
   assign <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Filezilla"</span><span class="o">]</span> <span class="nv">$ws7</span>
   assign <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"calibre"</span><span class="o">]</span> <span class="nv">$ws8</span>
   <span class="c">#</span>
   for_window <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"(?i)lxappearance"</span><span class="o">]</span> floating <span class="nb">enable
   </span>for_window <span class="o">[</span><span class="nv">title</span><span class="o">=</span><span class="s2">"(?i)pulseaudio multiband EQ"</span><span class="o">]</span> floating <span class="nb">enable
   </span>for_window <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"(?i)pavucontrol"</span><span class="o">]</span> floating <span class="nb">enable</span>, move position mouse
   for_window <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"(?i)nm-connection-editor"</span><span class="o">]</span> floating <span class="nb">enable</span>
   <span class="c"># reload the configuration file</span>
   bindsym <span class="nv">$mod</span>+Shift+c reload
   <span class="c"># restart i3 inplace (preserves your layout/session, can be used to upgrade i3)</span>
   bindsym <span class="nv">$mod</span>+Shift+r restart
   <span class="c"># exit i3 (logs you out of your X session)</span>
   bindsym <span class="nv">$mod</span>+Shift+e <span class="nb">exec</span> <span class="s2">"i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"</span>
   <span class="c"># resize window (you can also use the mouse for that)</span>
   mode <span class="s2">"resize"</span> <span class="o">{</span>
       <span class="c"># These bindings trigger as soon as you enter the resize mode</span>
       <span class="c"># Pressing left will shrink the window‚Äôs width.</span>
       <span class="c"># Pressing right will grow the window‚Äôs width.</span>
      <span class="c"># Pressing up will shrink the window‚Äôs height.</span>
       <span class="c"># Pressing down will grow the window‚Äôs height.</span>
       bindsym j resize shrink width 10 px or 10 ppt
       bindsym k resize grow height 10 px or 10 ppt
       bindsym l resize shrink height 10 px or 10 ppt
       bindsym ntilde resize grow width 10 px or 10 ppt
       <span class="c"># same bindings, but for the arrow keys</span>
       bindsym Left resize shrink width 10 px or 10 ppt
       bindsym Down resize grow height 10 px or 10 ppt
       bindsym Up resize shrink height 10 px or 10 ppt
       bindsym Right resize grow width 10 px or 10 ppt
       <span class="c"># back to normal: Enter or Escape or $mod+r</span>
       bindsym Return mode <span class="s2">"default"</span>
       bindsym Escape mode <span class="s2">"default"</span>
       bindsym <span class="nv">$mod</span>+r mode <span class="s2">"default"</span>
   <span class="o">}</span>
   bindsym <span class="nv">$mod</span>+r mode <span class="s2">"resize"</span>
   <span class="c"># Start i3bar to display a workspace bar (plus the system information i3status</span>
   <span class="c"># finds out, if available)</span>
   bar <span class="o">{</span>
           status_command i3blocks <span class="nt">-c</span> /home/vsantos/.config/i3/i3blocks.conf
           position top
           separator_symbol <span class="s2">"ÔÅì"</span>
           colors <span class="o">{</span>
                   background        <span class="nv">$bg</span><span class="nt">-color</span>
                   separator         <span class="c">#757575</span>
                   <span class="c">#                  border             background         text</span>
                   focused_workspace  <span class="nv">$bg</span><span class="nt">-color</span>          <span class="nv">$bg</span><span class="nt">-color</span>          <span class="nv">$text</span><span class="nt">-color</span>
                   inactive_workspace <span class="nv">$inactive</span><span class="nt">-bg-color</span> <span class="nv">$inactive</span><span class="nt">-bg-color</span> <span class="nv">$inactive</span><span class="nt">-text-color</span>
                   urgent_workspace   <span class="nv">$urgent</span><span class="nt">-bg-color</span>   <span class="nv">$urgent</span><span class="nt">-bg-color</span>   <span class="nv">$text</span><span class="nt">-color</span>
           <span class="o">}</span>
           font pango:Source Code Pro <span class="k">for </span>Powerline, FontAwesome Regular, Icons 9
   <span class="o">}</span>
   <span class="c">#</span>
   <span class="c"># APLICACIONS QUE SEXECUTAN A LINICI</span>
   <span class="c">#</span>
   <span class="c"># BROWSER</span>
   <span class="nb">exec</span> <span class="nt">--no-startup-id</span> firefox
   for_window <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Firefox"</span><span class="o">]</span> focus
   <span class="c"># TERMINAL</span>
   <span class="nb">exec</span> <span class="nt">--no-startup-id</span> xfce4-terminal
   <span class="c"># CORREO</span>
   <span class="nb">exec</span> <span class="nt">--no-startup-id</span> claws-mail
   <span class="c"># CHROMIUM / MUSICA</span>
   <span class="nb">exec</span> <span class="nt">--no-startup-id</span> chromium
   <span class="c"># GESTOR FITXER</span>
   <span class="nb">exec</span> <span class="nt">--no-startup-id</span> thunar
   <span class="c"># GESTOR FTP</span>
   <span class="nb">exec</span> <span class="nt">--no-startup-id</span> filezilla
   <span class="c"># VIRTUAL BOX</span>
   <span class="nb">exec</span> <span class="nt">--no-startup-id</span> virtualbox
   <span class="c">#</span>
   <span class="c"># PER A CONFIGURAR LA CONNEXIO (ETHERNET / WIFI)</span>
   <span class="c">#</span>
   exec_always <span class="nt">--no-startup-id</span> nm-applet
   <span class="c">#</span>
   <span class="c"># PER A BLOQUEJA LA PANTALLA</span>
   <span class="c">#</span>
   <span class="c">#bindsym $mod+shift+x exec ~/.config/scripts/lock.sh</span>
   <span class="c">#</span>
   <span class="c"># PER A VISUALITZAR ELS FONS DE PANTALLA</span>
   <span class="c">#</span>
   exec_always <span class="nt">--no-startup-id</span> feh <span class="nt">--bg-scale</span> <span class="nt">--no-fehbg</span> ~/.config/wallpapers/Wallpaper_08.jpg
   <span class="c">#</span>
   <span class="c"># EXECUTAR SEMPRE COMPTON (PROGRAMA PER AL MENU)</span>
   <span class="c">#</span>
   exec_always <span class="nt">--no-startup-id</span> compton <span class="nt">-f</span>
   <span class="c">#</span>
   <span class="c"># Pulse Audio controls</span>
   <span class="c">#</span>
   bindsym XF86AudioRaiseVolume <span class="nb">exec</span> <span class="nt">--no-startup-id</span> pactl set-sink-volume 0 +5% <span class="c">#increase sound volume</span>
   bindsym XF86AudioLowerVolume <span class="nb">exec</span> <span class="nt">--no-startup-id</span> pactl set-sink-volume 0 <span class="nt">-5</span>% <span class="c">#decrease sound volume</span>
   bindsym XF86AudioMute <span class="nb">exec</span> <span class="nt">--no-startup-id</span> pactl set-sink-mute 0 toggle <span class="c"># mute sound</span>
</code></pre></div></div>

<h4 id="configi3i3blocksconf">.config/i3/i3blocks.conf</h4>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c"># i3blocks config file</span>
   <span class="c">#</span>
   <span class="c"># Please see man i3blocks for a complete reference!</span>
   <span class="c"># The man page is also hosted at http://vivien.github.io/i3blocks</span>
   <span class="c">#</span>
   <span class="c"># List of valid properties:</span>
   <span class="c">#</span>
   <span class="c"># align</span>
   <span class="c"># color</span>
   <span class="c"># command</span>
   <span class="c"># full_text</span>
   <span class="c"># instance</span>
   <span class="c"># interval</span>
   <span class="c"># label</span>
   <span class="c"># min_width</span>
   <span class="c"># name</span>
   <span class="c"># separator</span>
   <span class="c"># separator_block_width</span>
   <span class="c"># short_text</span>
   <span class="c"># signal</span>
   <span class="c"># urgent</span>
   <span class="c"># Global properties</span>
   <span class="c">#</span>
   <span class="c"># The top properties below are applied to every block, but can be overridden.</span>
   <span class="c"># Each block command defaults to the script name to avoid boilerplate.</span>
   <span class="nb">command</span><span class="o">=</span>/usr/share/i3blocks/<span class="nv">$BLOCK_NAME</span>
   <span class="nv">separator_block_width</span><span class="o">=</span>15
   <span class="nv">markup</span><span class="o">=</span>none
   <span class="c">#</span>
   <span class="o">[</span>volume]
   <span class="nv">label</span><span class="o">=</span>ÔÄ®
   <span class="nv">instance</span><span class="o">=</span>Master
   <span class="nv">interval</span><span class="o">=</span>1
   <span class="nv">signal</span><span class="o">=</span>10
   <span class="c">#</span>
   <span class="o">[</span>disk]
   <span class="nv">label</span><span class="o">=</span>ÔáÄ home:
   <span class="nv">interval</span><span class="o">=</span>1
   <span class="c">#</span>
   <span class="o">[</span>trash]
   <span class="nv">label</span><span class="o">=</span>ÔÄî
   <span class="nv">interval</span><span class="o">=</span>1
   <span class="c">#</span>
   <span class="o">[</span>load_average]
   <span class="nv">label</span><span class="o">=</span>ÔÉ§
   <span class="nv">interval</span><span class="o">=</span>1
   <span class="c">#</span>
   <span class="o">[</span>battery]
   <span class="nv">label</span><span class="o">=</span>‚ö°
   <span class="nv">interval</span><span class="o">=</span>1
   <span class="c">#</span>
   <span class="o">[</span><span class="nb">time</span><span class="o">]</span>
   <span class="nv">label</span><span class="o">=</span>ÔÅ≥
   <span class="nb">command</span><span class="o">=</span><span class="nb">date</span> <span class="s1">'+%d %b %H:%M'</span>
   <span class="nv">interval</span><span class="o">=</span>1
</code></pre></div></div>
<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://sergioquijanorey.github.io/i3/linux/programacion/administracion/2018/09/09/configuraci%C3%B3n-i3wm.html" target="_blank">Mi configuraci√≥n I3</a></li>
  <li><a href="https://www.youtube.com/playlist?list=PL5ze0DjYv5DbCv9vNEzFmP6sU7ZmkGzcf" target="_blank">Youtube I3wm</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="i3" /><category term="Debian GNU/Linux" /><category term="i3" /><summary type="html"><![CDATA[Aqui va una nueva entrada y en este caso hace referencia a i3wm Primero un poco de historia con respecto al porque de este post. Desde hace a√±os (cuando KDE se volvio tan pesado y desapareci√≥ el paquete kde-minimal) cambie a XFCE4 y todo fue bien, hasta que vi que (en mi opini√≥n), se habia estancado, por eso decidi hacer un cambio y hablando con gente de exDebian me aconsejaron probar i3wm. Asi que empeze a buscar informaci√≥n y fue cuando encontre esta colecci√≥n de 3 videos en Youtube - i3wm que me abrieron las puertas a i3wm]]></summary></entry><entry><title type="html">Usando Calibre-Web</title><link href="https://vctrsnts.github.io/docker/2020/04/12/usando-calibre-web.html" rel="alternate" type="text/html" title="Usando Calibre-Web" /><published>2020-04-12T00:00:00+00:00</published><updated>2020-04-12T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/2020/04/12/usando-calibre-web</id><content type="html" xml:base="https://vctrsnts.github.io/docker/2020/04/12/usando-calibre-web.html"><![CDATA[<p>Despu√©s del descubrimiento de <strong>docker</strong>, tal como dije en otra entrada se ha abierto un nuevo mundo de posibilidades por explorar. Y en este caso hemos descubierto <strong>calibre-web</strong>.</p>

<p>La idea me gusto, porque as√≠, voy quitando peso al port√°til y doy m√°s uso a la RPI3b (de momento a la espera de cambiar a una 4) y adem√°s, con el <em>HDD de 4Tb</em> que viene en camino, pues nos pusimos a 
ello.</p>

<!-- more -->

<p>Lo primero fue bajarse la imagen correcta y construir el <code class="language-plaintext highlighter-rouge">docker-compose.yaml</code> correcto (a continuaci√≥n pongo el que yo uso):</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="na">calibre</span><span class="pi">:</span>
     <span class="na">image</span><span class="pi">:</span> <span class="s">linuxserver/calibre-web</span>
     <span class="na">container_name</span><span class="pi">:</span> <span class="s">calibre</span>
     <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
     <span class="na">ports</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">9393:8083</span>
     <span class="na">environment</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">PUID=1001</span>
       <span class="pi">-</span> <span class="s">PGID=1001</span>
       <span class="pi">-</span> <span class="s">TZ=Europe/Madrid</span>
     <span class="na">volumes</span><span class="pi">:</span>
       <span class="pi">-</span> <span class="s">${STORAGE}/config/calibre:/config</span>
       <span class="pi">-</span> <span class="s">${MEDIA}/ebooks:/books</span>
</code></pre></div></div>

<p>Luego hay que hacer un simple:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker-compose up <span class="nt">-d</span> calibre
</code></pre></div></div>

<p>Ya lo tienes funcionando sin ning√∫n problema (aunque no es del todo cierto) porque para empezar a funcionar correctamente tienes que ponerle la librer√≠a (<em>metadata.db</em>) que venias usando hasta este 
momento. Una vez hecho esto ya tienes tu <code class="language-plaintext highlighter-rouge">calibre-web</code> en funcionamiento.</p>

<p>El √∫nico problema que tenia yo y que no me gustaba, es que a la hora de subir los libros (tienes que dar permiso para que se pueda hacer) los datos del libro y la caratula, no te los coge de los 
metadatos del propio libro, sino que busca la informaci√≥n a trav√©s de <strong>Google</strong> o de <strong>Douban</strong> y esto yo no quer√≠a que fuera as√≠.</p>

<p>Despu√©s de investigar, probar otras aplicaciones (es una lastima que no haya el <strong>calibre</strong> disponible para la arquitectura <strong>ARM</strong>, porque para <strong>x86</strong> si que esta), ninguna me gustaba tanto como 
<strong>calibre-web</strong>. Hasta que al final, revisando los ficheros que tiene el container, dentro del <code class="language-plaintext highlighter-rouge">directorio app</code> hay unos ficheros de informaci√≥n (podr√≠an estar m√°s accesibles o estar en la 
documentaci√≥n del container) te informa que si instalas (la imagen se basa en ubuntu) el paquete <strong>lxml</strong> se puede tener acceso a los <strong>metadatas</strong> de los libros, as√≠ que me puse a ello:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>apt-get update
<span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">--no-install-recommends</span> python3-lxml
</code></pre></div></div>

<p>Despu√©s de instalar el paquete, prob√© a subir un libro y ya si que funciono como yo quer√≠a, como la versi√≥n de calibre que te instalas en modo local.</p>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Docker" /><summary type="html"><![CDATA[Despu√©s del descubrimiento de docker, tal como dije en otra entrada se ha abierto un nuevo mundo de posibilidades por explorar. Y en este caso hemos descubierto calibre-web. La idea me gusto, porque as√≠, voy quitando peso al port√°til y doy m√°s uso a la RPI3b (de momento a la espera de cambiar a una 4) y adem√°s, con el HDD de 4Tb que viene en camino, pues nos pusimos a ello.]]></summary></entry><entry><title type="html">Raspberry Pi. Pasos para instalar Docker en Raspbian</title><link href="https://vctrsnts.github.io/docker/raspberry%20pi/2020/03/08/rpi-usando-docker.html" rel="alternate" type="text/html" title="Raspberry Pi. Pasos para instalar Docker en Raspbian" /><published>2020-03-08T00:00:00+00:00</published><updated>2020-03-08T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/raspberry%20pi/2020/03/08/rpi-usando-docker</id><content type="html" xml:base="https://vctrsnts.github.io/docker/raspberry%20pi/2020/03/08/rpi-usando-docker.html"><![CDATA[<p>Siempre me pasa lo mismo, me hago mis chuletas y apuntes, pero nunca me pongo como se realiza la instalaci√≥n sobre la cual funcionan las chuletas.</p>

<!-- more -->

<p>Por eso, ahora voy a explicar como se realiza la instalaci√≥n de <strong>Docker</strong> en <strong>Raspbian</strong> (en mi caso sobre una <strong>Raspberry pi 3b</strong>)</p>

<blockquote>
  <p>üí° Actualmente tengo una RPI4B de 4Gb, pero el proceso es el mismo</p>
</blockquote>

<p>A continuaci√≥n explicamos el proceso de instalaci√≥n de Docker:</p>

<h3 id="1-instalar-paquetes-necesarios">1. Instalar paquetes necesarios</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>apt-get update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> apt-transport-https ca-certificates curl gnupg2 software-properties-common
</code></pre></div></div>

<h3 id="2-instalar-firmas-gpg-del-repo-de-docker">2. Instalar firmas GPG del repo de Docker</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>curl <span class="nt">-fsSL</span> https://download.docker.com/linux/debian/gpg | <span class="nb">sudo </span>apt-key add -
<span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>apt-key fingerprint 0EBFCD88
</code></pre></div></div>

<h3 id="3-agregar-repo-de-docker">3. Agregar repo de Docker</h3>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nb">echo</span> <span class="s2">"deb [arch=armhf] https://download.docker.com/linux/debian </span><span class="se">\</span><span class="s2">
     </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2"> stable"</span> | <span class="se">\</span>
     <span class="nb">sudo tee</span> /etc/apt/sources.list.d/docker.list
</code></pre></div></div>

<h3 id="4-instalar-docker">4. Instalar Docker</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>apt-get update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> docker-ce docker-compose
</code></pre></div></div>

<h3 id="5-agregar-usuario-al-grupo-docker-y-desloguearse-y-volverse-a-loguear">5. Agregar usuario al grupo docker y desloguearse y volverse a loguear</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> docker tuUsuario
<span class="gp">   #</span><span class="o">(</span><span class="nb">logout </span>and login<span class="o">)</span>
</code></pre></div></div>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://gist.github.com/pablokbs/263ed38d0206de2aca7b3f106ba7a5dc" target="_blank">Pasos para instalar Docker</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Raspberry Pi" /><category term="Docker" /><category term="Raspberry Pi" /><summary type="html"><![CDATA[Siempre me pasa lo mismo, me hago mis chuletas y apuntes, pero nunca me pongo como se realiza la instalaci√≥n sobre la cual funcionan las chuletas.]]></summary></entry><entry><title type="html">TIP Sobre Docker</title><link href="https://vctrsnts.github.io/docker/2020/02/16/tip-docker.html" rel="alternate" type="text/html" title="TIP Sobre Docker" /><published>2020-02-16T00:00:00+00:00</published><updated>2020-02-16T00:00:00+00:00</updated><id>https://vctrsnts.github.io/docker/2020/02/16/tip-docker</id><content type="html" xml:base="https://vctrsnts.github.io/docker/2020/02/16/tip-docker.html"><![CDATA[<p>√öltimamente me he metido en el mundo de <strong>Docker</strong> para mi <strong>Raspberry</strong> y se me ha abierto un mundo nuevo de posibilidades infinitas.</p>

<p>A continuaci√≥n pongo un TIP sobre Docker y el mantenimiento (eliminaci√≥n) de vol√∫menes / im√°genes que ya no se utilizan.</p>

<!-- more -->

<h2 id="eliminar-todo-lo-no-usado">ELIMINAR TODO LO NO USADO</h2>

<p>En el caso de que lleguemos al punto de tener nuestro sistema hecho un desastre, hay un comando en <strong>Docker</strong> que sirve para limpiar im√°genes, contenedores, vol√∫menes y dispositivos de red, que no 
est√©n asociadas a ning√∫n contenedor.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker system prune
</code></pre></div></div>

<p>Si le a√±adimos el <code class="language-plaintext highlighter-rouge">flag -a</code> al final, borraremos tambi√©n:</p>
<ul>
  <li>Todos los contenedores parados</li>
  <li>Todas las im√°genes que no se est√©n usando en ese momento.
    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp"> usuari@raspberry:~$</span><span class="w"> </span>docker system prune <span class="nt">-a</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="borrar-im√°genes-de-docker">BORRAR IM√ÅGENES DE DOCKER</h2>

<h3 id="borrar-im√°genes">Borrar Im√°genes</h3>
<p>Para ver las im√°genes que tenemos en el sistema, podemos usar el comando: <code class="language-plaintext highlighter-rouge">docker images -a</code></p>

<p>Gracias al <code class="language-plaintext highlighter-rouge">flag -a</code> veremos todas las im√°genes de Docker (incluidas las im√°genes intermedias).</p>

<p>Una vez localizada la imagen que queremos borrar, utilizaremos su <code class="language-plaintext highlighter-rouge">ID</code> para borrarla:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker rmi
</code></pre></div></div>

<h3 id="borrar-im√°genes-colgadas-dangling-images">Borrar im√°genes ‚Äúcolgadas‚Äù (dangling images)</h3>
<p>Las im√°genes colgadas son las capas de im√°genes que no se est√°n utilizando en ning√∫n contenedor, tanto que est√©n en funcionamiento como que est√©n parados. Estas im√°genes pueden ser borradas en la gran
 mayor√≠a de las veces. Podemos ver estas im√°genes con el comando:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker images <span class="nt">-f</span> <span class="nv">dangling</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div></div>

<p>Y para borrarlas:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker images purge
</code></pre></div></div>

<h3 id="borrar-todas-las-im√°genes">Borrar todas las im√°genes</h3>
<p>Si queremos borrar todas las im√°genes, podemos ejecutar:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker rmi <span class="si">$(</span>docker images <span class="nt">-a</span> <span class="nt">-q</span><span class="si">)</span>
</code></pre></div></div>

<h2 id="borrar-contenedores-docker">BORRAR CONTENEDORES DOCKER</h2>

<h3 id="borrar-contenedores">Borrar Contenedores</h3>
<p>Primero debemos localizar los contenedores que queremos borrar, para ello ejecutaremos el comando:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker ps <span class="nt">-a</span>
</code></pre></div></div>

<p>Y para borrarlos:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker <span class="nb">rm</span>
</code></pre></div></div>

<p>Si no quieres que un contenedor se quede ah√≠ una vez parado, puedes lanzar el proceso con el <code class="language-plaintext highlighter-rouge">flag -rm</code>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker run <span class="nt">-rm</span>
</code></pre></div></div>

<h3 id="borrar-contenedores-mediante-filtros">Borrar contenedores mediante filtros</h3>
<p>Podemos usar filtros para seleccionar contenedores, por ejemplo:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker ps <span class="nt">-a</span> <span class="nt">-s</span> <span class="nv">status</span><span class="o">=</span>exited <span class="nt">-f</span> <span class="nv">status</span><span class="o">=</span>created
</code></pre></div></div>

<p>Y combin√°ndolos con los comandos anteriores, sirve para borrarlos:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker <span class="nb">rm</span> <span class="si">$(</span>docker ps <span class="nt">-a</span> <span class="nt">-f</span> <span class="nv">status</span><span class="o">=</span>exited <span class="nt">-f</span> <span class="nv">status</span><span class="o">=</span>created <span class="nt">-q</span><span class="si">)</span>
</code></pre></div></div>

<h3 id="parar-y-borrar-todos-los-contenedores-docker">Parar y borrar todos los contenedores Docker</h3>
<p>Tambi√©n podemos parar y borrar todos los contenedores con un solo comando:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker <span class="nb">rm</span> <span class="si">$(</span>docker ps <span class="nt">-a</span> <span class="nt">-q</span><span class="si">)</span>
</code></pre></div></div>

<h2 id="borrando-vol√∫menes-de-docker">BORRANDO VOL√öMENES DE DOCKER</h2>

<h3 id="borrar-vol√∫menes">Borrar vol√∫menes</h3>
<p>Para ver los vol√∫menes que tenemos en el sistema, podemos usar el comando:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker volume <span class="nb">ls</span>
</code></pre></div></div>

<p>Cuando localizamos el volumen, lo podemos borrar con:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker volume <span class="nb">rm</span>
</code></pre></div></div>

<h3 id="borrar-vol√∫menes-colgados-dangling-volume">Borrar vol√∫menes colgados (dangling volume)</h3>

<p>Los volumenes colgados son aquellos que no estan conectados a ningun contenedor. Ten en cuenta que es posible que haya volumenes en ese estado que no tengas que ser borrados. Para verlos utilizaremos:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker volume <span class="nb">ls</span> <span class="nt">-f</span> <span class="nv">dangling</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div></div>

<p>Localizaremos los que queremos borrar y lo haremos con el mismo comando del punto anterior:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker volume <span class="nb">rm</span>
</code></pre></div></div>

<p>Si queremos borrar todos los dangling volumes, ejecutaremos:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>docker volume prune
</code></pre></div></div>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.vidaxp.com/tecnologia/como-borrar-imagenes-contenedores-y-volumenes-docker" target="_blank">Como borrar containers, imagenes, etc‚Ä¶</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Docker" /><category term="Docker" /><summary type="html"><![CDATA[√öltimamente me he metido en el mundo de Docker para mi Raspberry y se me ha abierto un mundo nuevo de posibilidades infinitas. A continuaci√≥n pongo un TIP sobre Docker y el mantenimiento (eliminaci√≥n) de vol√∫menes / im√°genes que ya no se utilizan.]]></summary></entry><entry><title type="html">TIP Sobre Raspbian / Raspberry</title><link href="https://vctrsnts.github.io/hardware/raspberry%20pi/2019/12/13/tip-raspbian-raspberry.html" rel="alternate" type="text/html" title="TIP Sobre Raspbian / Raspberry" /><published>2019-12-13T00:00:00+00:00</published><updated>2019-12-13T00:00:00+00:00</updated><id>https://vctrsnts.github.io/hardware/raspberry%20pi/2019/12/13/tip-raspbian-raspberry</id><content type="html" xml:base="https://vctrsnts.github.io/hardware/raspberry%20pi/2019/12/13/tip-raspbian-raspberry.html"><![CDATA[<p>A continuaci√≥n pongo unos cuantos <strong>TIPS</strong> m√°s con respecto a Raspbian, mayormente para que no se me olviden para m√°s adelanta üòâ</p>

<!-- more -->

<h3 id="desactivar-la-wifi-y-el-bluetooth-de-la-raspberry">Desactivar la wifi y el bluetooth de la Raspberry</h3>
<p>Para hacer esto, solamente se tiene que modificar un fichero :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>vi /boot/config.txt
</code></pre></div></div>

<p>Y luego a√±adimos lo siguiente :</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">dtoverlay</span><span class="o">=</span>disable-wifi
   <span class="nv">dtoverlay</span><span class="o">=</span>disable-bt
</code></pre></div></div>

<h3 id="obtener-m√°s-voltaje-en-las-salidas-de-usb">Obtener m√°s voltaje en las salidas de USB</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>vi /boot/config.txt
</code></pre></div></div>

<p>Y luego a√±adimos lo siguiente:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">max_usb_current</span><span class="o">=</span>1
</code></pre></div></div>

<h3 id="alias-ssh">Alias SSH</h3>
<p>A continuaci√≥n, pongo un atajo (que he descubierto hace poco de un Youtuber llamado <a href="https://www.youtube.com/channel/UCrBzBOMcUVV8ryyAU_c6P5g" target="_blank">PeladoNerd</a>) para cuando tenemos que conectarnos a 
maquinas remotas a trav√©s de <code class="language-plaintext highlighter-rouge">SSH</code>, en vez de estar escribiendo todo el rato la <strong>IP</strong>, <strong>Puerto</strong> y <strong>Usuario</strong>, se puede hacer a trav√©s de un alias.</p>

<p>Esto se hace a traves del siguiente fichero:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry: ~$</span><span class="w"> </span>vi .ssh/config
</code></pre></div></div>

<p>Y a√±adimos lo siguiente :</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   Host aliasMaquina
     Hostname Ip de la Maquina
     User usuario de connexi√≥n
     Port Puerto de connexi√≥n en caso de no tener el por defecto
</code></pre></div></div>

<p>Con este simple fichero, tal como he dicho antes, con solo hacer :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry: ~$</span><span class="w"> </span>ssh aliasMaquina
</code></pre></div></div>

<p>Nos conectaremos directamente a la maquina. En mi caso, me pide el password, porque lo tengo configurado as√≠.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.cyberciti.biz/faq/create-ssh-config-file-on-linux-unix" target="_blank">OpenSSH Config</a></li>
  <li><a href="https://www.youtube.com/watch?v=RMS5zBYQIqA" target="_blank">Aprendiendo SSH</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Hardware" /><category term="Raspberry Pi" /><category term="Hardware" /><category term="Raspberry Pi" /><summary type="html"><![CDATA[A continuaci√≥n pongo unos cuantos TIPS m√°s con respecto a Raspbian, mayormente para que no se me olviden para m√°s adelanta üòâ]]></summary></entry><entry><title type="html">Actualizar FreeBSD (STABLE)</title><link href="https://vctrsnts.github.io/freebsd/2019/11/11/actualizar-freebsd-stable.html" rel="alternate" type="text/html" title="Actualizar FreeBSD (STABLE)" /><published>2019-11-11T00:00:00+00:00</published><updated>2019-11-11T00:00:00+00:00</updated><id>https://vctrsnts.github.io/freebsd/2019/11/11/actualizar-freebsd-stable</id><content type="html" xml:base="https://vctrsnts.github.io/freebsd/2019/11/11/actualizar-freebsd-stable.html"><![CDATA[<p>Aqui va otra entrada con respecto a <strong>FreeBSD</strong>.</p>

<p>En este caso, es como se puede hacer la actualizaci√≥n del sistema <strong>STABLE</strong>, es la que estoy usando yo en estos momentos.</p>

<!-- more -->

<p>Lo primero que tenemos que instalar el <code class="language-plaintext highlighter-rouge">subversion</code>, para hacer esto, se hace de la siguiente manera:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>pkg <span class="nb">install </span>subversion
</code></pre></div></div>

<p>Una vez tenemos instalado <code class="language-plaintext highlighter-rouge">subversion</code>, lo siguiente es actualizar el sistema, lo vuelvo a repetir, yo lo hago de esta manera:</p>

<p>Lo primero, es actualizar es el <strong>arbol del sistema</strong></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   rootfreebsd:~#</span><span class="w"> </span>svn checkout https://svn.freebsd.org/base/stable/11 /usr/src
</code></pre></div></div>

<p>Ahora pasamos a actualizar el sistema</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>svn update /usr/src
</code></pre></div></div>

<p>Esto tarda un rato, dependiendo de la velocidad que tengais.</p>

<p>Una vez, haya finalizado la actualizaci√≥n, se recomienda leer el fichero <code class="language-plaintext highlighter-rouge">/usr/src/UPDATING</code> para ver las modificaciones que comporta esta actualizaci√≥n y a continuaci√≥n:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span><span class="nb">cd</span> /usr/src
<span class="gp">   root@freebsd:~#</span><span class="w"> </span>make <span class="nt">-j4</span> buildworld
</code></pre></div></div>

<p>En la anterior instrucci√≥n, a mi entender, <strong>compila / construye</strong> el sistema, por eso, tomarlo con calma.</p>

<p>He puesto <code class="language-plaintext highlighter-rouge">-j4</code> porque son el numero de <code class="language-plaintext highlighter-rouge">CPU / CORES</code> que quiero que use esta instrucci√≥n. A m√°s <code class="language-plaintext highlighter-rouge">cpu / cores</code>, m√°s rapido ira la compilaci√≥n, pero puede repercutir en la maquina, eso sois vosotros 
los que teneis que encontrar el punto intermedio.</p>

<p>Ahora, pasamos a:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>make <span class="nt">-j4</span> kernel
</code></pre></div></div>

<p>Se aplica la misma norma que en la anterior instrucci√≥n.</p>

<p>Una vez que se ha realizado la compilaci√≥n del sistema y del kernel, reiniciamos el sistema</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>shutdown <span class="nt">-r</span> now
</code></pre></div></div>

<p>Ahora, a mi entender, actualizamos el sistema, con la siguiente instrucci√≥n :</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span><span class="nb">cd</span> /usr/src
<span class="gp">   root@freebsd:~#</span><span class="w"> </span>make installworld
</code></pre></div></div>

<p>Cuando finalize, hacemos lo siguiente:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>mergemarster <span class="nt">-Ui</span>
</code></pre></div></div>

<p>Y para finalizar, reiniciamos el sistema.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>shutdown <span class="nt">-r</span> now
</code></pre></div></div>

<p>Y con esto, ya tenemos el sistema actualizado.</p>]]></content><author><name>VSANTOS</name></author><category term="FreeBSD" /><category term="FreeBSD" /><summary type="html"><![CDATA[Aqui va otra entrada con respecto a FreeBSD. En este caso, es como se puede hacer la actualizaci√≥n del sistema STABLE, es la que estoy usando yo en estos momentos.]]></summary></entry><entry><title type="html">Mi configuraci√≥n en FreeBSD</title><link href="https://vctrsnts.github.io/freebsd/2019/11/11/mi-configuracion-freebsd.html" rel="alternate" type="text/html" title="Mi configuraci√≥n en FreeBSD" /><published>2019-11-11T00:00:00+00:00</published><updated>2019-11-11T00:00:00+00:00</updated><id>https://vctrsnts.github.io/freebsd/2019/11/11/mi-configuracion-freebsd</id><content type="html" xml:base="https://vctrsnts.github.io/freebsd/2019/11/11/mi-configuracion-freebsd.html"><![CDATA[<p>Siguiendo con mis entradas que hacen referencia a <strong>FreeBSD</strong>, a continuaci√≥n dejo la que uso en mi portatil <strong>Lenovo Y700</strong> y que parece ser que funciona correctamente.</p>

<p>A lo mejor en el futuro la voy modificando dependiendo del funcionamiento que vaya teniendo‚Ä¶</p>

<!-- more -->

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>vi /boot/loader.conf
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c"># CONSOLA</span>
   kern.vty<span class="o">=</span>vt
   <span class="c"># Esto es una cosa que tengo que seguir investigando, porque no acaba de funcionar</span>
   <span class="c"># correctamente.</span>
   kern.vt.fb.default_mode<span class="o">=</span><span class="s2">"1440x900"</span>
   hw.vga.textmode<span class="o">=</span>1
   <span class="c"># ACPI IBM/LENOVO</span>
   <span class="nv">acpi_ibm_load</span><span class="o">=</span><span class="s2">"YES"</span>
   <span class="nv">acpi_video_load</span><span class="o">=</span><span class="s2">"YES"</span>
   hint.p4tcc.0.disabled<span class="o">=</span>1
   hint.acpi_throttle.0.disabled<span class="o">=</span>1
   <span class="c"># WIFI</span>
   <span class="c"># LO TENGO DESACTIVADO, PORQUE NO LO USO, PERO...</span>
   <span class="c">#if_iwm_load="YES"</span>
   <span class="c">#iwm7265fw_load="YES"</span>
</code></pre></div></div>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>vi /etc.rc.conf
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c"># ESTO YA VIENE POR DEFECTE DESPUES DE INSTALAR EL SISTEMA</span>
   <span class="nv">clear_tmp_enable</span><span class="o">=</span><span class="s2">"YES"</span>
   <span class="nv">sendmail_enable</span><span class="o">=</span><span class="s2">"NONE"</span>
   keymap <span class="o">=</span> <span class="s2">"es.acc"</span>
   <span class="nb">hostname</span> <span class="o">=</span> <span class="s2">"miMaquina"</span>
   ifconfig_xxx <span class="o">=</span> <span class="s2">"inet x.x.x.x netmask 255.255.255.0"</span>
   defaultrouter <span class="o">=</span> <span class="s2">"x.x.x.x"</span>
   dumpdev <span class="o">=</span> <span class="s2">"AUTO"</span>
   <span class="c"># COSAS QUE HE A√ëADIDO</span>
   <span class="c"># NTP_DATE (TENGO QUE SEGUIR INVESTIGANDO PORQUE NO ME ACABA DE FUNCIONAR</span>
   <span class="c"># CORRECTAMENTE)</span>
   ntpd_enable <span class="o">=</span> <span class="s2">"YES"</span>
   <span class="c"># XORG</span>
   dbus_enable <span class="o">=</span> <span class="s2">"YES"</span>
   hald_enable <span class="o">=</span> <span class="s2">"YES"</span>
   <span class="c"># POWERD</span>
   powerd_enable <span class="o">=</span> <span class="s2">"YES"</span>
   performance_cx_lowert <span class="o">=</span> <span class="s2">"Cmax"</span>
   economy_cx_lowert <span class="o">=</span> <span class="s2">"Cmax"</span>
   <span class="c"># SSH (DE MOMENTO NO LO TENGO CONFIGURADO), ASI QUE, DESACTIVADO</span>
   sshd_enable <span class="o">=</span> <span class="s2">"NO"</span>
   <span class="c"># WIFI (DESACTIVADO PORQUE NO LO USO)</span>
   <span class="c">#wlans_iwm0 = "wlan0"</span>
   ifconfig_wlan0 <span class="o">=</span> <span class="s2">"WPA SYNCDHCP"</span>
</code></pre></div></div>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>vi /etc/sysctl.conf
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c"># Desactivamos el Speaker</span>
   hw.syscons.bell <span class="o">=</span> 0
</code></pre></div></div>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>vi /etc/fstab
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   proc	/proc	procfs	rw	0	0
</code></pre></div></div>
<p>Y de momento, esto es todo.</p>]]></content><author><name>VSANTOS</name></author><category term="FreeBSD" /><category term="FreeBSD" /><summary type="html"><![CDATA[Siguiendo con mis entradas que hacen referencia a FreeBSD, a continuaci√≥n dejo la que uso en mi portatil Lenovo Y700 y que parece ser que funciona correctamente. A lo mejor en el futuro la voy modificando dependiendo del funcionamiento que vaya teniendo‚Ä¶]]></summary></entry><entry><title type="html">TIP sobre SUDO en GNU/Linux</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/2019/11/11/tip-sudo-debian.html" rel="alternate" type="text/html" title="TIP sobre SUDO en GNU/Linux" /><published>2019-11-11T00:00:00+00:00</published><updated>2019-11-11T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/2019/11/11/tip-sudo-debian</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/2019/11/11/tip-sudo-debian.html"><![CDATA[<p>Despu√©s de mucho tiempo, pongo un <strong>TIP</strong> para que no se me olvide en caso de necesitarlo.</p>

<p>A lo mejor pongo m√°s de uno, porque despu√©s me cuesta mucho buscarlos de nuevo. As√≠ que aqui va el primero.</p>

<!-- more -->

<p>Para instalar y configurar sudo, los pasos (los que yo utilizo) son los siguientes:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:~#</span><span class="w"> </span>apt-get <span class="nb">install sudo</span>
</code></pre></div></div>

<p>Una vez se ha instalado, ejecutamos: <code class="language-plaintext highlighter-rouge">visudo</code></p>

<p>Esta instrucci√≥n se usa, para que en caso de trabajar con este fichero m√°s de una persona, no se pierda la informaci√≥n de las modificacions que va haciendo cada usuario, por eso es recomendable, 
aunque tambien se puede hacer editando el fichero:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:~#</span>vi /etc/sudoers
</code></pre></div></div>

<p>La definici√≥n de este fichero es la siguiente</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   nombre_usuario nombre_equipo = (usuario:grupo) comando_restringir
</span></code></pre></div></div>

<ul>
  <li>En este caso, vamos a dar permisos a un usuario en concreto: <code class="language-plaintext highlighter-rouge">tu_usuario ALL=(ALL:ALL) ALL</code>
    <ul>
      <li>Lo que hace es que al usuario <code class="language-plaintext highlighter-rouge">tu_usuario</code> le damos permiso para que en cualquier equipo pueda ejecutar cualquier comando en nombre de cualquier usuario y grupo.</li>
    </ul>
  </li>
  <li>Dar permisos de root a un usuario: <code class="language-plaintext highlighter-rouge">tu_usuario tu_maquina=(root:root) ALL</code>
    <ul>
      <li>Lo que hacemos es dar permisos a <code class="language-plaintext highlighter-rouge">tu_usuario</code> en <code class="language-plaintext highlighter-rouge">tu_maquina</code> para ejecutar cualquier comando en nombre de <code class="language-plaintext highlighter-rouge">root</code>.</li>
      <li>La diferencia con la instrucci√≥n de antes, es que en este caso, solo lo podra hacer en la maquina <code class="language-plaintext highlighter-rouge">tu_maquina</code> y solo lo podra hacer en nombre del usuario <code class="language-plaintext highlighter-rouge">root</code>.</li>
    </ul>
  </li>
  <li>Desactivar usuario root:
    <ul>
      <li>Una vez tenemos configurado sudo a nuestro gusto, en mi caso, he desactivado el acceso al usuario <code class="language-plaintext highlighter-rouge">root</code> de la siguiente manera:</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>üí° Antes de seguir adelante, se tiene que estar seguro de que todo la configuraci√≥n de sudo esta correctamente, porque entonces no podremos volver atras y podriamos tener graves problemas.</p>
</blockquote>

<p>Para bloquear al usuario root ejecutamos la siguiente instrucci√≥n</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">sudo </span>usermod <span class="nt">--lock</span> <span class="nt">--expiredate</span> 1979-01-01 root
</code></pre></div></div>

<p>Una vez ejecutado este comando, el usuario <code class="language-plaintext highlighter-rouge">root</code> queda desactivado y todas las instrucciones se realizan a traves de sudo.</p>

<p>En el caso de querer reactivar al usuario <code class="language-plaintext highlighter-rouge">root</code>, tan solo tendriamos que ejecutar el siguiente comando</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">sudo </span>usermod <span class="nt">--unlock</span> <span class="nt">--expiredate</span> 99999 root
</code></pre></div></div>

<p>Y el primer TIP ya esta listo.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://geekland.eu/configurar-sudo-en-linux" target="_blank">Configurar SUDO</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[Despu√©s de mucho tiempo, pongo un TIP para que no se me olvide en caso de necesitarlo. A lo mejor pongo m√°s de uno, porque despu√©s me cuesta mucho buscarlos de nuevo. As√≠ que aqui va el primero.]]></summary></entry><entry><title type="html">Grabar fichero img a USB</title><link href="https://vctrsnts.github.io/freebsd/2019/05/15/img-usb.html" rel="alternate" type="text/html" title="Grabar fichero img a USB" /><published>2019-05-15T00:00:00+00:00</published><updated>2019-05-15T00:00:00+00:00</updated><id>https://vctrsnts.github.io/freebsd/2019/05/15/img-usb</id><content type="html" xml:base="https://vctrsnts.github.io/freebsd/2019/05/15/img-usb.html"><![CDATA[<p>Siguiendo mi aprendizaje con FreeBSD, aqui explico, seguramente en otros sitios diferentes de este basto oceano llamado internet, lo encontrareis mejor explicado, como grabar un fichero <code class="language-plaintext highlighter-rouge">*.img</code> a un 
prendrive, es una cosa que nunca me acuerdo como se hace y siempre acabo buscandolo.</p>

<!-- more -->

<p>La instrucci√≥n para realizar esta acci√≥n es la siguiente:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:~#</span><span class="w"> </span><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>FreeBSD-11.0-STABLE-amd64-20170510-r318134-memstick.img <span class="nv">of</span><span class="o">=</span>/dev/sdb <span class="nv">bs</span><span class="o">=</span>1024 <span class="nv">conv</span><span class="o">=</span><span class="nb">sync</span>
</code></pre></div></div>

<p>Donde:</p>
<ul>
  <li>[dd](https://es.wikipedia.org/wiki/Dd_(Unix){:target=‚Äù_blank‚Äù} es el comanda para realizar la grabaci√≥n.</li>
  <li><code class="language-plaintext highlighter-rouge">if=*.img</code> donde se encuentra la imagen de disco memstick.</li>
  <li><code class="language-plaintext highlighter-rouge">of=/dev/sdb</code> donde esta el pendrive (lo estoy haciendo desde GNU/Linux).</li>
  <li><code class="language-plaintext highlighter-rouge">bs=10204</code> y <code class="language-plaintext highlighter-rouge">conv=sync</code> son los valores recomendados por el <em>equipo FreeBSD</em> para realizar la grabaci√≥n.</li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="FreeBSD" /><category term="FreeBSD" /><summary type="html"><![CDATA[Siguiendo mi aprendizaje con FreeBSD, aqui explico, seguramente en otros sitios diferentes de este basto oceano llamado internet, lo encontrareis mejor explicado, como grabar un fichero *.img a un prendrive, es una cosa que nunca me acuerdo como se hace y siempre acabo buscandolo.]]></summary></entry><entry><title type="html">Utilizar UTF-8 en FreeBSD</title><link href="https://vctrsnts.github.io/freebsd/2017/05/03/utilizar-utf8-freebsd.html" rel="alternate" type="text/html" title="Utilizar UTF-8 en FreeBSD" /><published>2017-05-03T00:00:00+00:00</published><updated>2017-05-03T00:00:00+00:00</updated><id>https://vctrsnts.github.io/freebsd/2017/05/03/utilizar-utf8-freebsd</id><content type="html" xml:base="https://vctrsnts.github.io/freebsd/2017/05/03/utilizar-utf8-freebsd.html"><![CDATA[<p>Una de las cosas que echo en falta a la hora de realizar la instalaci√≥n de <strong>FreeBSD</strong> es poder configurar <code class="language-plaintext highlighter-rouge">UTF-8</code> en el instalador.</p>

<p>Al igual que muchos sistemas operativo de la familia UNIX, <strong>FreeBSD</strong> no viene configurado para utilizar la codificaci√≥n de caracteres <code class="language-plaintext highlighter-rouge">UTF-8</code> por defecto, sin embargo esta totalmente soportado y es 
facilmente configurable.</p>

<!-- more -->

<p>Para determinar el locale apropiado para nuestro lenguaje y localizaci√≥n es posible utilizar la herramienta <code class="language-plaintext highlighter-rouge">locale</code>, para obtener m√°s informaci√≥n de su funcionamiento, con un simple <code class="language-plaintext highlighter-rouge">man locale</code> 
accedemos a su manual:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   locale -a | grep -i utf
</span></code></pre></div></div>

<p>Mi <strong>FreeBSD 11.0</strong> posee soporte para las siguientes configuraciones regionales (no las pongo todas, pongo la primera, la que voy a utilizar y la ultima):</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   usuari@freebsd:~% locale -a | grep -i utf
   af_ZA.UTF-8
</span><span class="c">   ..
   ..
</span><span class="go">   es_ES.UTF-8
</span><span class="c">   ..
   ..
</span><span class="go">   zh_TW.UTF-8
</span></code></pre></div></div>

<p>En mi caso, voy a utilizar <code class="language-plaintext highlighter-rouge">es_ES.UTF-8</code>.</p>

<p>Para determinar cual es la configuraci√≥n regional actual, ejecutar simplemente <code class="language-plaintext highlighter-rouge">locale</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   usuari@freebsd:~% locale
   LANG=
   LC_CTYPE="C"
   LC_COLLATE="C"
   LC_TIME="C"
   LC_NUMERIC="C"
   LC_MONETARY="C"
   LC_MESSAGES="C"
   LC_ALL=
</span></code></pre></div></div>

<p>Se observa que se esta utilizando el locale <code class="language-plaintext highlighter-rouge">C/POSIC</code>, donde <code class="language-plaintext highlighter-rouge">C</code> y <code class="language-plaintext highlighter-rouge">POSIC</code> son <code class="language-plaintext highlighter-rouge">aliases</code>.</p>

<p>Por lo tanto, es necesario cambiar el locale a UTF-8, para poder visualizar correctamente los tildes y e√±es. Para ello, editar el archivo <code class="language-plaintext highlighter-rouge">/etc/login.conf</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>vi /etc/login.conf
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   :charset<span class="o">=</span>UTF-8:<span class="se">\</span>
   :lang<span class="o">=</span>es_ES.UTF-8:
</code></pre></div></div>

<blockquote>
  <p>üí° Notar que en la ultima variable no se debe escapar el salto de linea</p>
</blockquote>

<p>Luego es necesario ejecutar <code class="language-plaintext highlighter-rouge">cap_mkdb</code> para regenerar la base de datos de capacidades de login:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>cap_mkdb /etc/login.conf
</code></pre></div></div>

<p>Ahora, vamos a configurar otro fichero que hace falta:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@freebsd:~#</span><span class="w"> </span>vi /etc/profile
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8<span class="p">;</span>   <span class="nb">export </span>LANG
   <span class="nv">CHARSET</span><span class="o">=</span>UTF-8<span class="p">;</span>  <span class="nb">export </span>CHARSET
</code></pre></div></div>

<p>Finalmente, cerrar la sesi√≥n.</p>

<p>Luego de iniciar la sesi√≥n, es posible verificar la configuraci√≥n regional nuevamente:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   usuari@freebsd:~% locale
</span></code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nv">LANG</span><span class="o">=</span>es_ES.UTF-8
   <span class="nv">LC_TYPE</span><span class="o">=</span><span class="s2">"es_ES.UTF-8"</span>
   <span class="nv">LC_COLLATE</span><span class="o">=</span><span class="s2">"es_ES.UTF-8"</span>
   <span class="nv">LC_TIME</span><span class="o">=</span><span class="s2">"es_ES.UTF-8"</span>
   <span class="nv">LC_NUMERIC</span><span class="o">=</span><span class="s2">"es_ES.UTF-8"</span>
   <span class="nv">LC_MONETARY</span><span class="o">=</span><span class="s2">"es_ES.UTF-8"</span>
   <span class="nv">LC_MESSAGES</span><span class="o">=</span><span class="s2">"es_ES.UTF-8"</span>
   <span class="nv">LC_ALL</span><span class="o">=</span>
</code></pre></div></div>

<p>Notar como <code class="language-plaintext highlighter-rouge">LC_COLLATE</code> se mantiene en <code class="language-plaintext highlighter-rouge">C</code>.</p>

<p>A partir de este momento, se visualizaran correctamente los tildes y e√±es en nombre de archivo, sesiones <code class="language-plaintext highlighter-rouge">SSH</code> y al escribir texto.</p>]]></content><author><name>VSANTOS</name></author><category term="FreeBSD" /><category term="FreeBSD" /><summary type="html"><![CDATA[Una de las cosas que echo en falta a la hora de realizar la instalaci√≥n de FreeBSD es poder configurar UTF-8 en el instalador. Al igual que muchos sistemas operativo de la familia UNIX, FreeBSD no viene configurado para utilizar la codificaci√≥n de caracteres UTF-8 por defecto, sin embargo esta totalmente soportado y es facilmente configurable.]]></summary></entry><entry><title type="html">Cambiar Debian GNU/Linux por FreeBSD?</title><link href="https://vctrsnts.github.io/freebsd/2016/08/20/cambiar-linux-freebsd.html" rel="alternate" type="text/html" title="Cambiar Debian GNU/Linux por FreeBSD?" /><published>2016-08-20T00:00:00+00:00</published><updated>2016-08-20T00:00:00+00:00</updated><id>https://vctrsnts.github.io/freebsd/2016/08/20/cambiar-linux-freebsd</id><content type="html" xml:base="https://vctrsnts.github.io/freebsd/2016/08/20/cambiar-linux-freebsd.html"><![CDATA[<blockquote>
  <p>üí° Antes de nada, decir que esto no es una critica a <a href="https://www.freebsd.org" target="_blank">FreeBSD</a> ni una guerra de cual es mejor (porque de eso, si buscas en cualquier foro de FreeBSD o de GNU/Linux encontraras 
muchas y mejores).</p>
</blockquote>

<blockquote>
  <p>üí° Sino que es mi opinion personal como usuario desde hace muchos a√±os de <strong>Debian GNU/Linux</strong> (empece con <strong>Potato</strong>) con respecto a la transici√≥n de <a href="http://www.debian.org/index.es.html">Debian GNU/Linux</a> 
a <a href="https://www.freebsd.org" target="_blank">FreeBSD</a>.</p>
</blockquote>

<p>Despu√©s de hacer esta aclaraci√≥n, ya podemos empezar‚Ä¶ üòâ</p>

<!-- more -->

<p>Todo esto, viene a raiz del pesimo modo (en mi opinion) en que se ha llevado a cabo la implementaci√≥n de <a href="https://es.wikipedia.org/wiki/Systemd" target="_blank">Systemd</a> en <strong>Debian GNU/Linux</strong>. A raiz de este cambio, 
estuve buscando alternativas, pero todas las versi√≥n de Linux ya tienen implementado <strong>Systemd</strong> en su interior y la unica alternativa que quedaba era <strong>FreeBSD</strong>. Y desde hace un par de meses, 
vengo haciendo pruebas en mi <strong>Dell XPS</strong> (junto con un HDD de 250GB) con <strong>FreeBSD</strong> y a continuaci√≥n explico mi opinion personal con respecto a su instalaci√≥n y uso (que conste que esto, lo estoy 
escribiendo desde <strong>Debian GNU/Linux</strong>).</p>

<blockquote>
  <p>üí° Repito, es mi opini√≥n personal</p>
</blockquote>

<h3 id="1-instalaci√≥n">1. Instalaci√≥n</h3>
<p>Es como se realizaba hace un par de a√±os en <strong>Debian GNU/Linux</strong>, asi que no es muy complicada. Lo unico que veo es la falta de <strong>UTF</strong>, a parte de esto, una instalaci√≥n muy facil y sencilla. Y eso, que 
yo no use, todo el HDD como unica partici√≥n, sino que hice las siguientes (constumbre de <strong>Debian GNU/Linux</strong>):</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   mount point     size
   ----------      -----------
   /               5Gb
   /tmp            5Gb
   /usr            24Gb
   /usr/home       190Gb
   /var            5Gb
   swap            3.5Gb
</span></code></pre></div></div>

<h3 id="2-paquetes">2. Paquetes</h3>
<p>Luego esta todo el tema de la instalaci√≥n de paquetes, en mi opini√≥n, ahora con <code class="language-plaintext highlighter-rouge">pkg</code> han echo un gran paso en su usabilidad, aunque aun estan los ports (un tema que me trae de cabeza y que nunca he 
logrado entender), a parte de que en mi portatil, no puedo usarlos, porque por cuestiones de temperatura no podia hacerlo</p>

<h3 id="3-configuraci√≥-sistema">3. Configuraci√≥ sistema</h3>
<p>La configuraci√≥n del sistema es facil, en principio, si no tienes nada raro, toda esta ya se ha realizado en la instalaci√≥n.</p>

<h3 id="4temperatura-del-sistema">4.Temperatura del sistema</h3>
<p>La temperatura, este es otro tema que me ha traido de cabeza, porque todo el rato, el ventilador estaba funcionando (eso si, la tecnologia <strong>Optimus</strong>, no ayuda mucho). Para que os hagais una idea:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   |   Uso   | Debian GNU/Linux | FreeBSD |
   | ------- | ---------------- | ------- |
   | Normal  |        54¬∫       |   65¬∫   | 
   | Intenso |        65¬∫       |   85¬∫   |
</span></code></pre></div></div>

<p>En cambio, despu√©s de unas <a href="https://forums.freebsd.org/threads/57176" target="_blank">modificaciones</a> en la configuraci√≥n del sistema que me aconsejaron en el <a href="https://forums.freebsd.org" target="_blank">Forum de FreeBSD</a> (que seria
 de mi sin ellos), he conseguido tener las mismas temperaturas que tenia en <strong>Debian GNU/Linux</strong> en <strong>FreeBSD</strong> üòâ</p>

<h3 id="5-xorg-slim-xfce">5. Xorg, Slim, Xfce</h3>
<p>Desde hace mucho tiempo que uso Xfce, no necesito m√°s y encima consume pocos recursos. Adem√°s estan en FreeBSD, que m√°s se puede pedir.</p>

<p>La instalaci√≥n, como dije antes a traves de pkg es muy facil, sin ningun problema, aunque tengo que decir que para la configuraci√≥n de Xorg (Optimus, ayudando) en un poco diferente a como lo pinta en 
el HandBook y como te lo intentan vender en el Foro.</p>

<p>Porque digo esto, segun el <a href="https://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/x-config.html" target="_blank">Handbook</a>(5.4.8) ya no es necesario crear el fichero <code class="language-plaintext highlighter-rouge">xorg.conf</code> para que todo funcione 
correctamente, pero en mi caso, no se si por culpa de <strong>Optimus</strong> o que, si no tenia el fichero <code class="language-plaintext highlighter-rouge">xorg.conf</code>, <code class="language-plaintext highlighter-rouge">startx</code> no me funcionaban. Despu√©s de mucho preguntar en el foro de FreeBSD, creo que al 
final, me creyeron cuando dije que sin fichero no me funcionaba.</p>

<p>Despu√©s activar <strong>Slim</strong> junto con <strong>DBUS</strong> y <strong>HAL</strong> ya tenia mi <strong>Xfce</strong> funcionando y en perfecto estado.</p>

<h3 id="6-aplicaciones-varias">6. Aplicaciones varias</h3>
<p>Ahora mismo, en <strong>Debian GNU/Linux</strong> uso las siguientes aplicaciones, todas muy basicas:</p>
<ul>
  <li>Firefox.</li>
  <li>VirtualBox</li>
  <li>Clementine</li>
  <li>Xpdf</li>
  <li>Filezilla</li>
  <li>Claws Mail</li>
  <li>Chromium</li>
  <li>Wicd</li>
  <li>Xfburn</li>
  <li>Mplayer</li>
  <li>Calibre</li>
</ul>

<p>Yo creo que todas estas aplicaciones estan todas portadas a FreeBSD, a excepci√≥n de Wicd, que me recomendaron como alternativa usar <a href="http://opal.com/freebsd/ports/net-mgmt/wifimgr" target="_blank">wifimgr</a>.</p>

<h3 id="7-hardware-externo">7. Hardware externo</h3>
<p>Porque tengo una secci√≥n sobre el <strong>Hardware</strong>, porque lo unico que me quedaba por probar es todo el tema de los USB (pendrive, ebook) no uso nada m√°s.</p>

<p>Y aqui es donde viene el problema, <strong>FreeBSD</strong> no tiene portado el paquete <code class="language-plaintext highlighter-rouge">xfce-volman</code>, asi que tienes que tirar de <a href="https://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/usb-disks.html" target="_blank">Handbook</a>.</p>

<p>Parezco un poco repetitivo, pero en la documentaci√≥n te lo ponen como que es muy facil, pero realmente no es asi. Tienes que modificar m√°s de un fichero, que si no te lo explican (no viene en la 
documentaci√≥n) no logras que funcione. Pero gracias a un usuario del foro de FreeBSD, consegui que funcionara, pero de aquella manera. Me explico.</p>

<p>Conectaba un pendrive (marca Toshiba), <strong>Xfce</strong> me lo detectaba correctamente, clicaba en el y todo correcto, podia trabajar con el correctamente. Lo desmontaba y todo perfecto.</p>

<p>El problema venia con otro pendrive (marca Sandisk), lo conectaba, lo intentaba montar y ahi es donde tenia el problema. No me lo detectaba. Al final, me aparecia un mensaje indicando <code class="language-plaintext highlighter-rouge">Dispositivo 
Desconocido</code>. Y lo m√°s raro de todo es que si extraia el pendrive, el sistema se reiniciaba solo‚Ä¶. :o</p>

<h3 id="8-documentaci√≥n">8. Documentaci√≥n</h3>
<p>Cuando me refiero a la documentaci√≥n, no estoy diciendo que sea mala, desordenada ni nada por es estilo. Yo solamente la comparo con la documentaci√≥n que hay con respecto a <strong>Debian GNU/Linux</strong> y con toda
 la documentaci√≥n existente de GNU/Linux.</p>

<p>Se puede decir que la documentaci√≥n como tal de <strong>GNU/Linux</strong> no existe, son miles de paginas desperdigadas por todo internet, en cambio la documentaci√≥n que hay sobre <strong>FreeBSD</strong>, sabes que esta en 
un unico sitio y todo bien puesto.</p>

<p>A mi modo de ver, es una ventaja y un inconveniente y ahora explico el motivo de porque digo esto.</p>

<p>Cuando digo que es una ventaja, es correcto, solamente un grupo de personas, crean, controlan y modifican la documentaci√≥n y no hay miles de documentos desperdigados.</p>

<p>Y el inconveniente es que toda la documentaci√≥n ha sido realizada a traves de una maquina virtual de VirtualBox (se puede ver si revisas un poco el HandBook)</p>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/bsdinstall-part-guided-disk.png" alt="bsdinstall-part-guided-disk.png" />
    </div>
    
</div>

<p>Y esto para mi es un inconveniente, porque la documentaci√≥n se basa en una maquina standart que muy poca gente dispone (ni yo mismo) y cuando vas a buscar ayuda en esta documentaci√≥n con respecto a 
cualquier problema que no hayan contemplado, pues te vas a volver loco, Pendrive, configuraci√≥n <code class="language-plaintext highlighter-rouge">Xorg</code>, etc.. No hay informaci√≥n sobre que hacer con respecto a estos problemas que ellos nunca se han
encontrado / contemplado, porque en una maquina virtual, esos problemas no se pueden dar.</p>

<p>Si, tienes el foro pero dependiendo como hagas la pregunta y lo experimentado que seas en el tema FreeBSD a lo mejor no te responden (que conste que eso nunca ha sido mi caso), pero si que me ha 
pasado que en la lista oficial en castellano que estoy suscripto, envie primero mis dudas con respecto a FreeBSD (las mismas que envie al foro) y aun estoy esperando. Que conste que no es una critica,
 pero‚Ä¶</p>

<p>Asi mismo, con respecto a la documentaci√≥ de a GNU/Linux, yo la veo m√°s util que la documentaci√≥ de FreeBSD, porque es documentaci√≥n que la ha realizado la gente sobre sus propias instalaciones en 
sus propias maquinas, maquinas reales, y esto es positivo, porque seguramente m√°s gente se ha encontrado el problema de Optimus, es un ejemplo, pero seguro que habras otros casos,  y ellos explican la
 solucion que han tomado con respecto a este problema. Puede que a ti te sirva o no, pero es un punto de partida que puedes tomar.</p>

<p>En cambio, esto, en FreeBSD no lo veo, porque como la documentaci√≥n solamente esta controlada por el grupo de FreeBSD, pues‚Ä¶</p>

<h3 id="9-conclusi√≥n">9. Conclusi√≥n</h3>
<p>Esta es la opini√≥n que he sacado despues de las pruebas que he realizado a FreeBSD, a mi modo de ver, aun quedan algunas cosas por pulir.</p>

<p>Cuando digo a pulir digo a facilitar la vida a los usuarios que quieren usar este sistema. Ejemplo claro <code class="language-plaintext highlighter-rouge">PKG</code>. Y digo esto, porque seguramente m√°s gente que antes estaba contenta con las diferentes 
distribuciones de GNU/Linux, al ver el camino que ha tomado <strong>Systemd</strong>, estaran pensado lo mismo que yo y estaran sopesando la idea de pasar a FreeBSD y pueden haber peque√±as cosas que les puedan 
echar atras.</p>

<p>Si tenemos <strong>PCBSD</strong>, pero es lo mismo que digo con respecto a Ubuntu y D<strong>Debian GNU/Linux</strong>. Porque vas a usar un sucedanio, si tienes el original.</p>

<p>Esto no quiere decir que vaya a desistir de √©l. Me gustaria realizar la migraci√≥n a FreeBSD y poder abrir una nueva etapa de mi vida, tal como hice con <strong>Debian GNU/Linux</strong>.</p>

<p>Esto lo digo con pena, porque veo que <strong>Debian GNU/Linux</strong> no ha sabido tratar el tema de <code class="language-plaintext highlighter-rouge">Systemd</code> como era de esperar respecto a la filosofia que ellos representan‚Ä¶</p>]]></content><author><name>VSANTOS</name></author><category term="FreeBSD" /><category term="FreeBSD" /><summary type="html"><![CDATA[üí° Antes de nada, decir que esto no es una critica a FreeBSD ni una guerra de cual es mejor (porque de eso, si buscas en cualquier foro de FreeBSD o de GNU/Linux encontraras muchas y mejores). üí° Sino que es mi opinion personal como usuario desde hace muchos a√±os de Debian GNU/Linux (empece con Potato) con respecto a la transici√≥n de Debian GNU/Linux a FreeBSD. Despu√©s de hacer esta aclaraci√≥n, ya podemos empezar‚Ä¶ üòâ]]></summary></entry><entry><title type="html">Raspberry Pi. Acceso a traves de ssh</title><link href="https://vctrsnts.github.io/raspberry%20pi/ssh/2016/04/04/rpi-acceso-traves-ssh.html" rel="alternate" type="text/html" title="Raspberry Pi. Acceso a traves de ssh" /><published>2016-04-04T00:00:00+00:00</published><updated>2016-04-04T00:00:00+00:00</updated><id>https://vctrsnts.github.io/raspberry%20pi/ssh/2016/04/04/rpi-acceso-traves-ssh</id><content type="html" xml:base="https://vctrsnts.github.io/raspberry%20pi/ssh/2016/04/04/rpi-acceso-traves-ssh.html"><![CDATA[<p>Una vez que ya tenemos nuestra Raspberry en marcha y funcionando ahora viene la parte divertida, como acceder a ella desde el exterior. En mi caso desde otra ubicaci√≥n y adem√°s con un poco de 
seguridad para que nadie pueda acceder a ella (recordar que esto se tiene que hacer desde el equipo que se va a conectar a la Raspberry).</p>

<!-- more -->

<p>Esto se consigue a traves de nuestro bien intencionado <code class="language-plaintext highlighter-rouge">ssh</code> y una correcta configuraci√≥n que pasare a explicar a continuaci√≥n.</p>

<p>Lo primero es tener instalado el paquete <code class="language-plaintext highlighter-rouge">openssh-server</code>, luego, procedemos a generar nuestras claves publicas para realizar la connexi√≥n con la Raspberry. Este procedimento se realiza a traves de la
 instruccion <code class="language-plaintext highlighter-rouge">ssh-keygen</code> como se muestra a continuaci√≥n:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>ssh-keygen <span class="nt">-t</span> rsa
<span class="go">   Generating public/private rsa key pair.
   Enter file in which to save the key (/home/tuUsuario/.ssh/id_rsa):
   Enter passphrase (empty for no passphrase):
   Enter same passphrase again:
   Your identification has been saved in /home/tuUsuario/.ssh/id_rsa.
   Your public key has been saved in /home/tuUsuario/.ssh/id_rsa.pub.
   The key fingerprint is:
   be:11:15:e3:6a:dc:a6:a6:7e:e9:6c:7b:9f:30:28:40 root@poe
   The key's randomart image is:
   +--[ RSA 2048]----+
   | o |
   | . o |
   | E o |
   | . . + |
   | . S o |
   | . o = |
   | . *.o |
   | =+o.o . |
   | .o+=o .o |
   +-----------------+
</span></code></pre></div></div>

<p>Ahora, pasamos a copiar esta clave publica a nuestro Raspberry con la instrucci√≥n <code class="language-plaintext highlighter-rouge">ssh-copy-id</code> como se muestra a continuaci√≥n:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>ssh-copy-id <span class="nt">-i</span> .ssh/id_rsa.pub tuUsuario@ipRaspberry
</code></pre></div></div>

<p>Con esta instrucci√≥n, lo que se hace es copiar nuestra clave publica en la Raspberry.</p>

<p>Ahora solamente faltaria realizar la connexi√≥n a traves de ssh para ver el resultado:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>ssh <span class="nt">-l</span> tuUsuario <span class="nt">-p</span> tuPuerto ipRaspberry
</code></pre></div></div>

<p>Asi mismo, para obtener un poco m√°s de seguridad, yo lo he echo, es configurar de la siguiente manera el fichero:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>vi /etc/ssh/sshd_config
</code></pre></div></div>

<p>Y modificaremos las siguientes opciones:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c"># Desactivar la opci√≥n de acceso a traves de password</span>
   PasswordAuthetication no
   <span class="c"># Desactivar la opci√≥n de acceso a traves de root</span>
   PermitRootLogin       no
   <span class="c"># Acceso a traves de una llave publica</span>
   PubkeyAuthenticacion  <span class="nb">yes</span>
   <span class="c"># Se aconseja cambiar el puerto de acceso del servicio ssh</span>
   Port 2222
   <span class="c"># Cantidad de segundos que la pantalla de login estara disponible</span>
   LoginGraceTime 60
   <span class="c"># No permitimos contrase√±as vacias o en blanco</span>
   PermitEmptyPasswords no
   <span class="c"># Numero maximo de errores permitidos al hacer login</span>
   MaxAuthTries 3
   <span class="c"># Numero maximo de conexiones simultaneas por IP</span>
   MaxStartups 2
</code></pre></div></div>
<blockquote>
  <p>üí° Antes de realizar este procedimiento, es aconsejable borrar las claves que tenemos en la Raspberry y volverlas a generar como simple medida de seguridad, porque estas claves son las mismas en todas las imagenes de Jessie que nos bajamos.</p>
</blockquote>

<blockquote>
  <p>üí° Tambien teneis disponible el siguiente <a href="/hardware/raspberry%20pi/2019/12/13/tip-raspbian-raspberry.html" target="_blank">articulo</a> donde explico como hacer <strong>alias</strong> para realizar las conexiones a nuestros servidores de <code class="language-plaintext highlighter-rouge">SSH</code> y no tener que poner todo la instrucci√≥n y solo hacerlo a traves del nombre del servidor.</p>
</blockquote>

<p>Entonces, si anteriormente nos hemos conectados desde nuestro PC a la Raspberry, ahora nos mostrara un mensaje donde nos indicara que las claves son erroneas. Para solucionar este problema, hay dos maneras, que son las siguientes:</p>
<ul>
  <li>Borrar el directorio <code class="language-plaintext highlighter-rouge">.ssh</code> de nuestro usuario</li>
  <li>Borrar la clave que tenemos almacenada de nuestra Raspberry</li>
</ul>

<p>Es preferible realizar la segunda opci√≥n de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>ssh-keygen <span class="nt">-f</span> <span class="s2">"/home/tuUsuario/.ssh/know_host"</span> <span class="nt">-R</span> ipRaspberryerry
</code></pre></div></div>

<p>Con esto conseguimos borrar la clave de la Raspberry que tenemos en nuestro PC.</p>]]></content><author><name>VSANTOS</name></author><category term="Raspberry Pi" /><category term="SSH" /><category term="Raspberry Pi" /><category term="SSH" /><summary type="html"><![CDATA[Una vez que ya tenemos nuestra Raspberry en marcha y funcionando ahora viene la parte divertida, como acceder a ella desde el exterior. En mi caso desde otra ubicaci√≥n y adem√°s con un poco de seguridad para que nadie pueda acceder a ella (recordar que esto se tiene que hacer desde el equipo que se va a conectar a la Raspberry).]]></summary></entry><entry><title type="html">Raspberry Pi. Configurar la red</title><link href="https://vctrsnts.github.io/ethernet/raspberry%20pi/2016/04/03/rpi-configurar-red.html" rel="alternate" type="text/html" title="Raspberry Pi. Configurar la red" /><published>2016-04-03T00:00:00+00:00</published><updated>2016-04-03T00:00:00+00:00</updated><id>https://vctrsnts.github.io/ethernet/raspberry%20pi/2016/04/03/rpi-configurar-red</id><content type="html" xml:base="https://vctrsnts.github.io/ethernet/raspberry%20pi/2016/04/03/rpi-configurar-red.html"><![CDATA[<p>Ahora que ya tenemos configurado y funcionando nuestra Raspberry, ahora le toca el turno a la red (en mi caso, quiero ip fija).</p>

<!-- more -->

<p>Para realizar la configuraci√≥n, ya no se hace antes, modificando el fichero :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>/etc/network/interfaces
</code></pre></div></div>

<p>Ahora se modifica el fichero :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>vi /etc/dhcpcd.conf
</code></pre></div></div>

<p>En mi caso, como quiero que tenga ip fija, yo lo dejo configurado de esta manera :</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   interface eth0
   static ip_address <span class="o">=</span> 192.168.0.2/24
   static routers <span class="o">=</span> 192.168.0.1
   static domain_name_servers <span class="o">=</span> 80.58.61.250 80.58.61.254
</code></pre></div></div>

<p>Yo estoy usando <code class="language-plaintext highlighter-rouge">vi</code>, otras personas a lo mejor usa <code class="language-plaintext highlighter-rouge">nano</code>, cuesti√≥n de gustos‚Ä¶</p>

<p>Despu√©s de esto, ya tenemos configurado nuestra tarjeta de red.</p>

<p>Ahora solamente falta reiniciar el servicio. Hay 2 maneras, reiniciar la Raspberry o reiniciando el servicio :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>/etc/init.d/networking stop
<span class="gp">   root@raspberry:~#</span><span class="w"> </span>/etc/init.d/networking start
</code></pre></div></div>

<p>Listos. En el proximo capitulo, explicare como copiar la raiz del sistema <code class="language-plaintext highlighter-rouge">/</code> a un <a href="/hardware/raspberry%20pi/2016/04/03/rpi-iniciar-hd-externo.html" target="_blank">HDD</a>, para preservar la SD.</p>

<p>Hasta la proxima</p>]]></content><author><name>VSANTOS</name></author><category term="Ethernet" /><category term="Raspberry Pi" /><category term="Ethernet" /><category term="Raspberry Pi" /><summary type="html"><![CDATA[Ahora que ya tenemos configurado y funcionando nuestra Raspberry, ahora le toca el turno a la red (en mi caso, quiero ip fija).]]></summary></entry><entry><title type="html">Raspberry Pi. Iniciar desde un HDD externo</title><link href="https://vctrsnts.github.io/hardware/raspberry%20pi/2016/04/03/rpi-iniciar-hd-externo.html" rel="alternate" type="text/html" title="Raspberry Pi. Iniciar desde un HDD externo" /><published>2016-04-03T00:00:00+00:00</published><updated>2016-04-03T00:00:00+00:00</updated><id>https://vctrsnts.github.io/hardware/raspberry%20pi/2016/04/03/rpi-iniciar-hd-externo</id><content type="html" xml:base="https://vctrsnts.github.io/hardware/raspberry%20pi/2016/04/03/rpi-iniciar-hd-externo.html"><![CDATA[<p>Despu√©s de haber configurado la red, ahora pasare a explicar como extraer la informaci√≥n de la raiz <code class="language-plaintext highlighter-rouge">/</code> de la SD para pasarla a un HDD externo y as√≠ alargar la vida de nuestra <em>SD</em>.</p>

<!-- more -->

<p>Haciendo este cambio, solamente se usara la SD en el momento del inicio, luego todo funcionara desde el HDD externo. El proceso es un poco largo, pero a la larga beneficiosa.</p>

<p>Lo primero que tenemos que hacer, es realizar una imagen de nuestra SD, tal como se encuentra ahora. Yo el proceso lo explicare bajo la premisa de que estas con Linux.</p>

<p>Antes de nada, tienes que saber en que dispositivo esta nuestra SD cuando lo insertamos en nuestro PC, para eso, haciendo un mount, se puede ver facilmente. En mi caso es el siguiente:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>mount
<span class="go">   /dev/mmcblk0p1     /boot
   /dev/mmcblk0p2     /
</span></code></pre></div></div>

<p>Lo que a nosotros nos interesa es copiar la segunda particion de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">  root@raspberry:~#</span><span class="w"> </span><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/mmcblk0p2 <span class="nv">of</span><span class="o">=</span>/home/usuario/backup.img
</code></pre></div></div>

<p>Despu√©s lo que yo hice, fue crear las particiones necesarias en el HDD externo.</p>

<p>Mi particionado, quedo de la siguiente manera (recordar que ahora mismo se estan realizando estas acciones desde el nuestro PC, no desde la Raspberry, por eso pongo <code class="language-plaintext highlighter-rouge">sdb</code>):</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   filesystem      mount point
   ----------      -----------   
   /dev/sdb1       /
   /dev/sdb2       /home
</span><span class="gp">   #</span><span class="w"> </span>para amule-daemon
<span class="go">   /dev/sdb5       /media/Incoming
   /dev/sdb6       /media/Temporal
</span><span class="gp">   #</span><span class="w"> </span>para transmission-daemon
<span class="go">   /dev/sdb7       /media/Torrents
</span></code></pre></div></div>

<p>Una vez, tenemos creadas las particiones en nuestro HDD externo, pasamos a copiar la imagen que hemos realizado anteriormente a la raiz de HDD de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/home/usuario/backup.img <span class="nv">of</span><span class="o">=</span>/dev/sdb1
</code></pre></div></div>

<p>Ahora viene lo importante, que es modificar un fichero de la partici√≥n <code class="language-plaintext highlighter-rouge">/boot</code> de la SD para que cuando pongamos el HDD externo conectado a la Raspberry funcione correctamente. Recordar que cuando se 
haga esa conexi√≥n, pasara de ser <code class="language-plaintext highlighter-rouge">/dev/sdb</code> a <code class="language-plaintext highlighter-rouge">/dev/sda</code>.</p>

<p>El fichero a modificar es el siguiente (previamente hemos hecho un mount de la particion <code class="language-plaintext highlighter-rouge">/boot</code>):</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>vi cmdline.txt
</code></pre></div></div>

<p>Y modificamos lo siguiente <code class="language-plaintext highlighter-rouge">root=/dev/mmcblk0p2</code> por <code class="language-plaintext highlighter-rouge">root=/dev/sda1</code></p>

<p>Otra cosa a tener en cuenta, es que si queremos que por defecto, se monten el resto de particiones que hemos creado, se tienen que incluir en el fichero <code class="language-plaintext highlighter-rouge">/etc/fstab</code> de la Raspberry. Yo lo he hecho de
 la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>vi /etc/fstab
</code></pre></div></div>

<p>Visualizaremos lo siguiente:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   filesystem      mount point     type    option                  dump    pass
   ----------      -----------     ----    ------                  ----    ----
   proc            /proc           proc    defaults                0       0
   /dev/mmcblkp1   /boot           vfat    defaults                0       2
   /dev/mmcblkp2   /               ext4    defaults,noatime        0       1
</span></code></pre></div></div>

<p>Y en mi caso, lo deje de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   filesystem      mount point     type    option                  dump    pass
   ----------      -----------     ----    ------                  ----    ----   
   proc            /proc           proc    defaults                0       0
   /dev/mmcblk0p1  /boot           vfat    defaults                0       2
   /dev/sda1       /               ext4    defaults,noatime        0       1
   /dev/sda2       /home           ext4    defaults                0       0
   /dev/sda5       /media/Incoming ext4    defaults,noatime        0       0
   /dev/sda6       /media/Temporal ext4    defaults,noatime        0       0
   /dev/sda7       /media/Torrents ext4    defaults,noatime        0       0
</span></code></pre></div></div>

<p>Ahora solamente nos quedaria poner la SD en nuestra Raspberry, conectar el HD externo y todo tendria que funcionar correctamente.</p>]]></content><author><name>VSANTOS</name></author><category term="Hardware" /><category term="Raspberry Pi" /><category term="Hardware" /><category term="Raspberry Pi" /><summary type="html"><![CDATA[Despu√©s de haber configurado la red, ahora pasare a explicar como extraer la informaci√≥n de la raiz / de la SD para pasarla a un HDD externo y as√≠ alargar la vida de nuestra SD.]]></summary></entry><entry><title type="html">Raspberry Pi. Actualizando a Jessie</title><link href="https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-actualizando-jessie.html" rel="alternate" type="text/html" title="Raspberry Pi. Actualizando a Jessie" /><published>2016-04-02T00:00:00+00:00</published><updated>2016-04-02T00:00:00+00:00</updated><id>https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-actualizando-jessie</id><content type="html" xml:base="https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-actualizando-jessie.html"><![CDATA[<p>Tal como habia explicado en el anterior capitulo, despu√©s de tener mi RPI con Whezzy y viendo que habian sacado una nueva versi√≥n <a href="https://www.raspberrypi.org/downloads/raspbian" target="_blank">Jessie-Lite</a> de 
Raspbian decidi realizar un <code class="language-plaintext highlighter-rouge">full-upgrade</code> para actualizar el sistema.</p>

<!-- more -->

<p>Pero hay confiado de mi, a partir de ese momento, empezaron todos mis problemas que me replantearon el futuro de mi RPI.</p>

<p>La actualizaci√≥n fue facil y sencilla, al estilo <strong>Debian GNU/Linux</strong>, cambiar los <code class="language-plaintext highlighter-rouge">sources</code> que apuntan a <strong>Wheezy</strong> y hacer que apunten a <strong>Jessie</strong>. En principio no tendria que haber habido ningun 
problema, pero que equivocado estaba.</p>

<p>El fichero que se tiene que cambiar es:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>vi /etc/apt/sources.list
</code></pre></div></div>

<p>Y donde pone <strong>Wheezy</strong>, cambiarlo por <strong>Jessie</strong> y todo solucionado, pero una vez que reinicie el sistema y accedir a la Raspberry, empezaron a aparecer los problemas.</p>

<p>A primera vista, lo que pude observar, fue que cada cierto tiempo perdia la conexi√≥n a internet sin ninguna explicaci√≥n y no habia forma de reconectar sino era reiniciando el sistema.</p>

<p>Despu√©s de buscar un poco de informaci√≥n y no encontrar nada, decidi volver a realizar la instalaci√≥n limpia de mi RPI con <strong>Wheezy</strong> y todo volvio a la normalidad (ya se, fui un cobarde, pero ‚Ä¶)</p>

<p>Pero he aqui amigo, que como soy un poco culo inquieto y despues de recibir el nuevo juguete que le iba a poner a la RPI, decidi volver a darle una nueva oportunidad <strong>Jessie-Lite</strong> y hacer una 
instalaci√≥n limpia y nueva a la Raspberry y parece ser que le gusto mucho, porque lleva 1 semana en <strong>Jessie</strong> y sin ningun problema ni caida de red‚Ä¶</p>

<p>En el proximo <a href="/raspberry%20pi%20os/2016/04/02/rpi-instalando-jessie-lite.html" target="_blank">articulo</a>, explicare el proceso de instalaci√≥n de <strong>Jessie</strong> en la Raspberry.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://www.raspberrypi.org/downloads/raspbian" target="_blank">Jessie-Lite</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Raspberry Pi OS" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Tal como habia explicado en el anterior capitulo, despu√©s de tener mi RPI con Whezzy y viendo que habian sacado una nueva versi√≥n Jessie-Lite de Raspbian decidi realizar un full-upgrade para actualizar el sistema.]]></summary></entry><entry><title type="html">Raspberry Pi. Configurando la Raspberry</title><link href="https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-configurando-raspberry.html" rel="alternate" type="text/html" title="Raspberry Pi. Configurando la Raspberry" /><published>2016-04-02T00:00:00+00:00</published><updated>2016-04-02T00:00:00+00:00</updated><id>https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-configurando-raspberry</id><content type="html" xml:base="https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-configurando-raspberry.html"><![CDATA[<p>Despu√©s de la instalaci√≥n viene la configuraci√≥n y en mi caso hice lo siguiente.</p>

<!-- more -->

<p>Acceder al sistema introduciendo el usuario y password. Los datos son los siguientes:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">   usuario: pi
   password: raspberrypi
</span></code></pre></div></div>

<p>Una vez hemos accedido al sistema, ejecutamos la siguiente instruccion:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>raspi-config
</code></pre></div></div>

<p>Con ello accedemos al menu de configuraci√≥n inicial de la Raspberry donde podremos configurar la siguientes opciones (al lado de cada opci√≥n, viene una breve explicaci√≥n de lo que hace cada una):</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/raspi-config.png" alt="raspi-config.png" />
    </div>
    
</div>

<p>En mi caso, las que he utilizado son las siguientes:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Expand Filesystem</code>: Expandir el SO para ocupar toda la SD, despu√©s nos aconseja reiniciar. Yo lo hago.</li>
  <li><code class="language-plaintext highlighter-rouge">Change User Password</code>: Cambiamos el password del usuario <code class="language-plaintext highlighter-rouge">usuari</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">Enable Boot to Desktop/Scratch</code>: Selecciono la opci√≥n de inicio en <code class="language-plaintext highlighter-rouge">consola</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">Internationalisation Options</code>: Poner en castellano nuestro sistema. Yo selecciono <code class="language-plaintext highlighter-rouge">es_ES.UTF-8</code></li>
  <li><code class="language-plaintext highlighter-rouge">Advanced Options</code>: En este caso, esta la opci√≥n de cambiar el nombre de <code class="language-plaintext highlighter-rouge">host</code> de nuestra Rusuari. Yo lo hago.</li>
</ul>

<p>Despu√©s de la configuraci√≥n inicial, en mi caso, hago una actualizaci√≥n del <code class="language-plaintext highlighter-rouge">firmware</code> de la Raspberry mediante la siguiente instrucci√≥n:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>rpi-update
<span class="gp">   #</span><span class="w"> </span>en caso de que visualizes el siguiente mensaje:
<span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>Command not found
</code></pre></div></div>

<p>Te esta indicando que no tienes instalado este paquete, solamente tienes que instalarlo a traves de apt-get de la siguiente manera:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>rpi-update
</code></pre></div></div>

<p>Una vez que hemos instalado el paquete, ahora si que podemos pasar a realizar la actualitzaci√≥n del firmware, kernel y modulos de nuestra Raspberry.</p>

<p>Un ejemplo de actualizaci√≥n, podria ser el siguiente:</p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/rpi_update.png" alt="rpi_update.png" />
    </div>
    
</div>

<p>Cuando el procedimiento de actualizaci√≥n ha finalizado, yo tengo por costumbre instalar los siguientes paquetes:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>deborphan localepurge
</code></pre></div></div>

<p>Para que:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">deborphan</code>: elimina los paquetes / librerias que han quedado huerfanas o que ya no se utilizan. Adem√°s, nos sera de mucha utilidad, cuando empezemos a eliminar paquetes que no son necesarios (esto
 es en mi caso).</li>
  <li><code class="language-plaintext highlighter-rouge">localepurge</code>: elimina los idiomas que no se estan usando en nuestro sistema</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>apt-get purge <span class="si">$(</span>deborphan <span class="nt">--libdevel</span><span class="si">)</span>
</code></pre></div></div>

<p>Una vez, realizado esta mini-limpieza, lo que hago es cambiarle el password a <strong>root</strong>, porque no me gusta usar <code class="language-plaintext highlighter-rouge">sudo</code>, esto lo hago a traves de:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span><span class="nb">sudo </span>passwd
</code></pre></div></div>

<p>Entonces, te pedira que pongas el nuevo password de <strong>root</strong>.</p>

<p>Despu√©s a√±ado el usuario que voy a utilizar y borro al usuario <code class="language-plaintext highlighter-rouge">usuari</code> que viene por defecto en la instalaci√≥n. Una medida m√°s de seguridad.
Las instrucciones para realizar esta acci√≥n son las siguientes:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>su -
<span class="go">   password:
  
</span><span class="gp">   root@raspberry:~#</span><span class="w"> </span>adduser miUsuario
<span class="go">   Adding user 'miUsuario' ...
   Adding new group 'miUsuario' (1001) ...
   Adding new user 'miUsuario' (1002) with group 'miUsuario'
   Creating home directory '/home/miUsuario'
   Copying files from '/etc/skel'
   Enter new UNIX password:
   Retype new UNIX password:
   passwd: password update successfully
   Changing the user information for miUsuario
   Enter the new value, or press ENTER for the default
     Full Name []:
     Rom Number []:
     Work Phone []:
     Home Phone []:
     Oher []:
   Is the information correct? [Y/n] y
</span></code></pre></div></div>

<p>Una vez, que ya he creado el usuario que voy a usar a partir de ahora, paso a borrar el usuario que viene por defecto. En este caso <code class="language-plaintext highlighter-rouge">usuari</code>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>su -
<span class="go">   password:

</span><span class="gp">   root@raspberry:~#</span><span class="w"> </span>deluser <span class="nt">--remove-home</span> usuari
</code></pre></div></div>

<p>Lo que hace esta instrucci√≥n, a parte de borrar al usuari <code class="language-plaintext highlighter-rouge">usuari</code>, es borrar tambien el directorio del usuario.</p>

<p>Una cosa que se tambien he realizado, ha sido usar <code class="language-plaintext highlighter-rouge">apt-get</code> en vez de <code class="language-plaintext highlighter-rouge">aptitude</code>, porque se vuelve lento.</p>

<p>El problema es que en <code class="language-plaintext highlighter-rouge">aptitude</code> se puede deshabilitar la opci√≥n que de que te instale los paquetes <strong>sugeridos</strong> y / o <strong>recomendados</strong>.</p>

<p>Tambien, se pueden deshabilitar, si se crea un fichero en:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>vi /etc/apt/apt.conf.d/10norecommends
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   APT::Install-Recommends <span class="s2">"false"</span><span class="p">;</span>
   APT::Install-Suggets <span class="s2">"false"</span><span class="p">;</span>
</code></pre></div></div>

<p>Con estas 2 opciones, cada vez que nosotros vayamos a realizar un:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span>apt-get update <span class="o">&amp;&amp;</span> apt-get upgrade
</code></pre></div></div>

<p>Nos mostrara los paquetes recomendados y los sugeridos, pero no nos los instalara si es que no lo hacemos nosostros mismos.</p>

<p>Despu√©s de esto ya tenemos funcionando nuestra Raspberry. En proximos capitulos, explicaremos como <a href="/ethernet/raspberry%20pi/2016/04/03/rpi-configurar-red.html" target="_blank">configurar la red</a> (porque por lo visto en 
<strong>Jessie</strong> es diferente) y m√°s cosas que explicare.</p>

<p>Hasta la proxima‚Ä¶</p>]]></content><author><name>VSANTOS</name></author><category term="Raspberry Pi OS" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Despu√©s de la instalaci√≥n viene la configuraci√≥n y en mi caso hice lo siguiente.]]></summary></entry><entry><title type="html">Raspberry Pi. Funcionamiento de la RPI</title><link href="https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-funcionamiento-raspberry.html" rel="alternate" type="text/html" title="Raspberry Pi. Funcionamiento de la RPI" /><published>2016-04-02T00:00:00+00:00</published><updated>2016-04-02T00:00:00+00:00</updated><id>https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-funcionamiento-raspberry</id><content type="html" xml:base="https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-funcionamiento-raspberry.html"><![CDATA[<p>De nuevo en la brecha. Despu√©s de tanto tiempo si publicar nada, aqui vuelvo.</p>

<!-- more -->

<p>Y para continuar con esta serie de articulos, que mejor que explicar mis experiencias con ella <strong>Raspberry Pi</strong>, como me ha ido todo este tiempo con mi regalo 
<a href="/hardware/raspberry%20pi%20os/2013/11/25/rpi-peque%C3%B1o-juguete.html" target="_blank">Raspberry Pi</a> y los planes de futuro que tengo para ella, que algunos ya se han ido cumpliendo.</p>

<p>Lo primero, es explicar el funcionamiento y opini√≥n con respecto a su uso que he tenido durante este tiempo‚Ä¶</p>

<p>El funcionamiento ha sido increible, sin ningun problema durante este tiempo y eso que lo he tenido conectado durante 24x7 y no he tenido ningun problema a excepci√≥n de los cortes de luz que puedo 
haber tenido, pero que eso ya no lo controlo yo‚Ä¶</p>

<p>En pocas palabras, es perfecta. La he tenido funcionando con:</p>
<ul>
  <li><strong>amule-daemon</strong></li>
  <li><strong>transmission-daemon</strong></li>
</ul>

<p>Y todo ha ido perfecto. Una maravilla.</p>

<p>Y que m√°s se puede decir‚Ä¶</p>

<p>El unico problema que he tenido fue (hace unas semanas) que fue al realizar la <a href="/raspberry%20pi%20os/2016/04/02/rpi-actualizando-jessie.html" target="_blank">actualizaci√≥n</a> a <strong>JESSIE</strong>, pero eso ya lo explicare en otro 
momento.</p>

<p>Nos vemos en un futuro‚Ä¶</p>]]></content><author><name>VSANTOS</name></author><category term="Raspberry Pi OS" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[De nuevo en la brecha. Despu√©s de tanto tiempo si publicar nada, aqui vuelvo.]]></summary></entry><entry><title type="html">Raspberry Pi. Instalando Jessie-Lite</title><link href="https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-instalando-jessie-lite.html" rel="alternate" type="text/html" title="Raspberry Pi. Instalando Jessie-Lite" /><published>2016-04-02T00:00:00+00:00</published><updated>2016-04-02T00:00:00+00:00</updated><id>https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-instalando-jessie-lite</id><content type="html" xml:base="https://vctrsnts.github.io/raspberry%20pi%20os/2016/04/02/rpi-instalando-jessie-lite.html"><![CDATA[<p>Como dije en el anterior capitulo, despues de recibir mi nuevo juguete:</p>

<!-- more -->

<ul>
  <li><a href="https://www.amazon.es/gp/product/B00TB7K8FA/ref=oh_aui_detailpage_o00_s00?ie=UTF8&amp;psc=1" target="_blank">Toshiba Canvio Connect II 1 TB</a></li>
</ul>

<p>Despu√©s de ver el correcto funcionamiento de mi nuevo HD, lo primero que hice, fue formatearlo con <strong>ext-4</strong> y crear las particiones necesarias que iba a utilizar en la Raspberry. Pero no nos 
adelantemos a los acontecimientos.</p>

<p>Para realizar una instalaci√≥n limpia, lo primero que hice fue bajarme la imagen de <strong>Jessie-Lite</strong> que podeis encontrar <a href="https://www.Raspberrypi.org/downloads/raspbian" target="_blank">aqui</a>. Yo escogi la <code class="language-plaintext highlighter-rouge">Lite</code>. 
En esta no viene ningun gestor de ventanas ni paquetes innecesarios para funcionar en modo servidor.</p>

<p>Una vez descargada, copie la imagen a la SD (lo hice desde mi portatil en <strong>GNU/Linux</strong>, supongo que para <em>Windows</em> tiene que haber alguna aplicacion que haga lo mismo):</p>

<p>Lo primero, es insertar la tarjeta SD y realizar la instrucci√≥n <code class="language-plaintext highlighter-rouge">mount</code> para descubrir que dispositivo es nuestra SD:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>mount
</code></pre></div></div>

<p>Y obtendras un listado con todos los dispositivos conectados. En mi caso, la tarjeta SD, era:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@raspberry:~$</span><span class="w"> </span>/dev/mmcblk0
</code></pre></div></div>

<p>Despu√©s de obtener esta informaci√≥n, solamente nos queda copiar la imagen a la SD.</p>

<blockquote>
  <p>üí° Hay que tener una cosa en cuenta a la hora de copiar la imagen en la SD, es que toda la informaci√≥n que pueda haber en la SD, se perdera.</p>
</blockquote>

<p>La instrucci√≥n para realizar la copia (<strong>se tiene que hacer como root</strong>) es la siguiente:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@raspberry:~#</span><span class="w"> </span><span class="nb">dd </span><span class="nv">bs</span><span class="o">=</span>4M <span class="k">if</span><span class="o">=</span>2016-03-18-raspbian-jessie-lite.img <span class="nv">of</span><span class="o">=</span>/dev/mmcblk0
<span class="go">   462+1 records in
   463+0 records out
   1941962752 bytes (1.9 GB) copied, 256.996 s, 7.6 MB/s
</span></code></pre></div></div>

<blockquote>
  <p>üí° Como se puede ver, a la opci√≥n bs, se le asigna el valor de 4M, esta puesto as√≠, porque si se pone la opci√≥n 1M, el volcado de la informaci√≥n tardaria mucho.</p>
</blockquote>

<p>Esto, lo que hara, es copiar la imagen en nuestra SD, tener en cuenta, que en mi caso, estaba en el mismo directorio donde tenia la imagen, en caso contrario, tengo que poner todo el path de donde se 
encuentra la imagen.</p>

<p>Una vez se ha realizado la copia, solamente nos queda insertar la SD en nuestro RPI y a jugar‚Ä¶</p>

<p>Ahora solamente nos quedara realizar la configuraci√≥n inicial y algunos cambios (que he realizado yo) que lo explicare en el siguiente capitulo.</p>

<p>Hasta otra‚Ä¶</p>

<blockquote>
  <p>üí° Si quereis obtener m√°s informaci√≥n, podeis mirar este <a href="http://elinux.org/RPi_Easy_SD_Card_Setup" target="_blank">link</a> donde se explica m√°s detalladamente el proceso tanto para Linux, Windows y Mac</p>
</blockquote>]]></content><author><name>VSANTOS</name></author><category term="Raspberry Pi OS" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Como dije en el anterior capitulo, despues de recibir mi nuevo juguete:]]></summary></entry><entry><title type="html">Los mejores repositorios para Debian GNU/Linux</title><link href="https://vctrsnts.github.io/bash/debian%20gnu/linux/2015/05/08/repositorios-debian.html" rel="alternate" type="text/html" title="Los mejores repositorios para Debian GNU/Linux" /><published>2015-05-08T00:00:00+00:00</published><updated>2015-05-08T00:00:00+00:00</updated><id>https://vctrsnts.github.io/bash/debian%20gnu/linux/2015/05/08/repositorios-debian</id><content type="html" xml:base="https://vctrsnts.github.io/bash/debian%20gnu/linux/2015/05/08/repositorios-debian.html"><![CDATA[<p>Cuando se est√° utilizando un sistema <strong>Debian GNU/Linux</strong>, una de las cosas que m√°s se disfrutan es la herramienta para administraci√≥n de paquetes <code class="language-plaintext highlighter-rouge">APT</code>.</p>

<!-- more -->

<p>La mayor√≠a, se pasa instalando distintos paquetes, aplicaciones, etc. aveces gastando mucho tiempo en lograr el objetivo (ej: actualizar el sistema), la mayoria de las veces provocado esto por la 
utilizaci√≥n de repositorios lentos‚Ä¶ ¬øpero como conozco los mejores repositorios para mi distro? F√°cil con <code class="language-plaintext highlighter-rouge">apt-spy</code>.</p>

<p><strong>APT-SPY</strong> es un programa usado para testear el ancho de banda de una serie de mirrors de <strong>Debian GNU/Linux</strong>, generando un archivo <code class="language-plaintext highlighter-rouge">/etc/apt/sources.list</code> con los servidores m√°s r√°pidos. Puedes 
seleccionar que servidores deseas testear por localizaci√≥n geogr√°fica.</p>

<p>Para poder usarlo, lo primero es instalarlo:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:~#</span><span class="w"> </span>aptitude <span class="nb">install </span>apt-spy
</code></pre></div></div>

<p>Ahora que ya lo tenemos‚Ä¶ simplemente debemos usarlo:</p>

<p>Algunas de sus opciones en linea de comando son:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">-d distribuci√≥n</code>: Indicamos que distribuci√≥n usamos, puede ser: stable, testing o unstable.</li>
  <li><code class="language-plaintext highlighter-rouge">-e n</code>: Indicamos que solo pruebe los primeros n mirrors que funcionan.</li>
  <li><code class="language-plaintext highlighter-rouge">-w archivo.list</code>: No sobreescribe nuestro <code class="language-plaintext highlighter-rouge">/etc/apt/sources.list</code>, en su lugar usa archivo.list.</li>
  <li><code class="language-plaintext highlighter-rouge">-a [africa | asia | europe | north-america | oceania | south-america ]</code>: Identifica la localizaci√≥n geogr√°fica donde buscar servidores</li>
</ul>

<p>Como ejemplo de uso:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:~#</span><span class="w"> </span>apt-spy <span class="nt">-d</span> unstable <span class="nt">-e</span> 10 <span class="nt">-w</span> nuevo_sources.list <span class="nt">-a</span> Europa
</code></pre></div></div>

<p>Esto probar√° los primeros 10 mirrors para Europa de <strong>Debian GNU/Linux UNSTABLE</strong> y los escribira en el archivo nuevo_sources.list</p>

<p>Con esto ya tenemos nuestros nuevos repositorios, simplemente copiamos nuevo_sources.list como <code class="language-plaintext highlighter-rouge">/etc/apt/sources.list</code> y listo!!!</p>]]></content><author><name>VSANTOS</name></author><category term="Bash" /><category term="Debian GNU/Linux" /><category term="Bash" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[Cuando se est√° utilizando un sistema Debian GNU/Linux, una de las cosas que m√°s se disfrutan es la herramienta para administraci√≥n de paquetes APT.]]></summary></entry><entry><title type="html">Crear imagen ISO desde la consola de Debian GNU/Linux</title><link href="https://vctrsnts.github.io/bash/debian%20gnu/linux/2014/01/03/crear-imagen-iso.html" rel="alternate" type="text/html" title="Crear imagen ISO desde la consola de Debian GNU/Linux" /><published>2014-01-03T00:00:00+00:00</published><updated>2014-01-03T00:00:00+00:00</updated><id>https://vctrsnts.github.io/bash/debian%20gnu/linux/2014/01/03/crear-imagen-iso</id><content type="html" xml:base="https://vctrsnts.github.io/bash/debian%20gnu/linux/2014/01/03/crear-imagen-iso.html"><![CDATA[<p>A veces, cuando intento realizar una ISO de un CD, no encuentro la manera de hacerlo a traves de <a href="http://goodies.xfce.org/projects/applications/xfburn" target="_blank">Xfburn</a>, aunque al final si que descubri como se
 tenia que hacer. Es aqui cuando me hago un lio y busco desesperadamente como se puede hacer. Pero nunca se me ocurre buscar la manera de como hacerlo a traves de consola.</p>

<!-- more -->

<p>Entonces, el otro dia, buscando como hacerlo por consola, encontre la siguiente chuleta de como se tiene que hacer:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/cdrom <span class="nv">of</span><span class="o">=</span>~/nombre_imagen.iso
</code></pre></div></div>

<p>Con esta instrucci√≥n, lo que haces, es redirigir el contenido del cdrom (cd del cual vas a realizar la ISO) a un fichero <code class="language-plaintext highlighter-rouge">nombre_imagen.iso</code> que ser√° la ISO en cuesti√≥n.</p>

<p>Y con esta simple instrucci√≥n, se consigue realizar una ISO de un CD.</p>

<p>Espero que esto os ayuda tanto como a mi.</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><del><a href="http://www.nicklabs.com.ar/?p=2867" target="_blank">NickLabs</a></del></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Bash" /><category term="Debian GNU/Linux" /><category term="Bash" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[A veces, cuando intento realizar una ISO de un CD, no encuentro la manera de hacerlo a traves de Xfburn, aunque al final si que descubri como se tenia que hacer. Es aqui cuando me hago un lio y busco desesperadamente como se puede hacer. Pero nunca se me ocurre buscar la manera de como hacerlo a traves de consola.]]></summary></entry><entry><title type="html">Raspberry Pi. Mi peque√±o nuevo juguete</title><link href="https://vctrsnts.github.io/hardware/raspberry%20pi%20os/2013/11/25/rpi-peque%C3%B1o-juguete.html" rel="alternate" type="text/html" title="Raspberry Pi. Mi peque√±o nuevo juguete" /><published>2013-11-25T00:00:00+00:00</published><updated>2013-11-25T00:00:00+00:00</updated><id>https://vctrsnts.github.io/hardware/raspberry%20pi%20os/2013/11/25/rpi-peque%C3%B1o-juguete</id><content type="html" xml:base="https://vctrsnts.github.io/hardware/raspberry%20pi%20os/2013/11/25/rpi-peque%C3%B1o-juguete.html"><![CDATA[<p>Pues nada. Desde hace un par de meses, tengo a mi disposici√≥n un nuevo juguete. La Raspberry modelo B, con las las siguientes caracteristicas:</p>

<!-- more -->

<ul>
  <li>Un procesador ARM11 a 700 MHz</li>
  <li>Procesador gr√°fico a medida que acelera por hardware el v√≠deo H264 (mpeg4)</li>
  <li>512 MB de memoria RAM</li>
  <li>2 puertos USB</li>
  <li>Una salida de audio y video HDMI</li>
  <li>Conector de red Ethernet RJ45 (10/100 mbps)</li>
  <li>Entrada de corriente microUSB</li>
  <li>Lector de tarjetas SD</li>
</ul>

<div class="row">
    
    <div class="column">
        <img class="single" src="/assets/img/images/raspberrypi.jpg" alt="raspberrypi.jpg" />
    </div>
    
</div>

<p>A parte, tengo los siguientes componentes para que pueda funcionar:</p>

<ul>
  <li>Western Digital Black 640Gb.</li>
  <li><a href="http://www.kingston.com/en/flash/microsd_cards#sdc10" target="_blank">Tarjeta Micro SD HC de 4Gb Kingston</a></li>
  <li><a href="http://www.amazon.es/Trust-Pyramid-Port-puertos-garantia/dp/B000RAH2LS/ref=pd_cp_computers_0" target="_blank">Trust Pyramid 7 Port</a></li>
</ul>

<p>Todo los componentes que tengo, los he conseguido para que funcionasen, en principio, sin ningun problema con la Raspberry.</p>

<p>Con respecto al Hub, teoricamente todos tendrian que funcionar sin ningun problema, pero te aconsejan que, como minimo el usb tiene que dar 1A (en este caso, este da 2A).
En el caso de la tarjeta SD Car, en esta <a href="http://elinux.org/RPi_SD_cards#Working_.2F_Non-working_SD_cards" target="_blank">pagina</a> podeis encontrar las tarjetas compatibles y no compatibles con la Raspberry.</p>

<p>Y todo esto unido con el mejor Sistema Operativo del mundo <a href="http://www.raspbian.org/FrontPage" target="_blank">Raspbian</a>. La perfecta uni√≥n entre la Raspberry + <strong>Debian GNU/Linux</strong>.</p>

<p>As√≠ que empezare una serie de capitulos donde explicare mis experiencias y mi proceso de instalaci√≥n que le he realizado a mi peque√±o gran juguete.</p>

<p>Los capitulos son los siguientes:</p>

<ul>
  <li><a href="/hardware/raspberry%20pi%20os/2013/11/25/rpi-peque%C3%B1o-juguete.html" target="_blank">Raspberry Pi. La presentaci√≥n</a></li>
  <li><a href="/raspberry%20pi%20os/2016/04/02/rpi-funcionamiento-raspberry.html" target="_blank">Raspberry Pi. Funcionamiento de la RPI</a></li>
  <li><a href="/raspberry%20pi%20os/2016/04/02/rpi-actualizando-jessie.html" target="_blank">Raspberry Pi. Actualizando a Jessie</a></li>
  <li><a href="/raspberry%20pi%20os/2016/04/02/rpi-instalando-jessie-lite.html" target="_blank">Raspberry Pi. Instalando Jessie-Lite</a></li>
  <li><a href="/raspberry%20pi%20os/2016/04/02/rpi-configurando-raspberry.html" target="_blank">Raspberry Pi. Configurando la Raspberry</a></li>
  <li><a href="/ethernet/raspberry%20pi/2016/04/03/rpi-configurar-red.html" target="_blank">Raspberry Pi. Configurar la red</a></li>
  <li><a href="/hardware/raspberry%20pi/2016/04/03/rpi-iniciar-hd-externo.html" target="_blank">Raspberry Pi. Iniciar desde HD externo</a></li>
  <li><a href="/raspberry%20pi/ssh/2016/04/04/rpi-acceso-traves-ssh.html" target="_blank">Raspberry Pi. Acceso a trave de SSH</a></li>
  <li><a href="/hardware/raspberry%20pi/2020/10/30/rpi-cambiando-equipo.html" target="_blank">Raspberry Pi. Cambiando el equipo</a></li>
  <li><a href="/docker/raspberry%20pi/2020/03/08/rpi-usando-docker.html" target="_blank">Raspberry Pi. Usando docker en Raspbian</a></li>
  <li><a href="/raspberry%20pi%20os/seguridad/2020/11/08/rpi-usando-fail2ban.html" target="_blank">Raspberry Pi. Instalar y configurar fail2ban</a></li>
  <li><a href="/docker/raspberry%20pi%20os/2021/01/17/rpi-copias-seguridad.html" target="_blank">Raspberry Pi. Haciendo copias de seguridad</a></li>
  <li><a href="/docker/raspberry%20pi%20os/2021/01/18/rpi-externalizando-copias-seguridad.html" target="_blank">Raspberry Pi. Salvaguardando nuestras copias de seguridad</a></li>
  <li><a href="/docker/raspberry%20pi%20os/2021/05/08/rpi-spotify.html" target="_blank">Raspberry Pi. Creando tu Spotify privado</a></li>
  <li><a href="/docker/raspberry%20pi%20os/2021/04/08/rpi-caddy-proxy-manager.html" target="_blank">Raspberry Pi. Cambiando Traefik por Caddy</a></li>
  <li><a href="/docker/raspberry%20pi%20os/2021/05/07/rpi-nginx-proxy-manager.html" target="_blank">Raspberry Pi. Al final nos quedamos Nginx-Proxy-Manager</a></li>
  <li><a href="/debian%20gnu/linux/docker/2022/05/26/nuevo-servidor.html" target="_blank">Raspberry Pi. Cambiando de Servidor</a></li>
</ul>

<blockquote>
  <p>üí° Como se puede observar, el ultimo articulo que he hecho con respecto a todo lo que vivido, probado, experimentado con la Raspberry es el de <a href="/debian%20gnu/linux/docker/2022/05/26/nuevo-servidor.html" target="_blank">Cambiando de servidor</a>,
 que es cuando me paso a un Dell Optiplex 3050.
 Pero hay que tener una cosa en cuenta, que todo lo que he escrito para la Raspberry tambien es aplicable para el Dell, porque no he tenido que hacer ninguna modificaci√≥n a mis configuraciones de docker de lo que tenia en la Raspberry, para que me funcione en Dell.</p>
</blockquote>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://elinux.org/RPi_SD_cards#Working_.2F_Non-working_SD_cards" target="_blank">RPi SD cards</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Hardware" /><category term="Raspberry Pi OS" /><category term="Hardware" /><category term="Raspberry Pi OS" /><summary type="html"><![CDATA[Pues nada. Desde hace un par de meses, tengo a mi disposici√≥n un nuevo juguete. La Raspberry modelo B, con las las siguientes caracteristicas:]]></summary></entry><entry><title type="html">Renombrar masivamente ficheros en Thunar</title><link href="https://vctrsnts.github.io/xfce/2013/11/24/renombrar-ficheros-thunar.html" rel="alternate" type="text/html" title="Renombrar masivamente ficheros en Thunar" /><published>2013-11-24T00:00:00+00:00</published><updated>2013-11-24T00:00:00+00:00</updated><id>https://vctrsnts.github.io/xfce/2013/11/24/renombrar-ficheros-thunar</id><content type="html" xml:base="https://vctrsnts.github.io/xfce/2013/11/24/renombrar-ficheros-thunar.html"><![CDATA[<p>Como siempre va bien, tener estas notas, por si las volvemos a necesitar‚Ä¶</p>

<!-- more -->

<p>Aqui os pongo, como a traves del gestor de ficheros Thunar (por defecto en XFCE) realizar un renombrado masivo de ficheros‚Ä¶</p>

<p>Volvemos a las andadas despues de estar un poco liado, con un nuevo TIP (de los que siempre van bien) para cuando hay necesidad de utilizarlo.</p>

<p>Es este caso, es como cambiar el nombre de varios ficheros a la vez, a traves del gestor de ficheros Thunar (por defecto en XFCE).</p>

<p>Lo primero que tenemos que hacer, es seleccionar los ficheros que queremos renombrar, despu√©s mediante el boton derecho, abrimos el submenu que tenemos disponible y seleccionamos la opci√≥n <strong>renombrar</strong></p>

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/thunar.jpg" alt="thunar.jpg" />
    </div>
    
</div>

<p>Lo que si que esta bien, es que a diferencia de Dolphin o Nautilius, permite modificar simultaneamente el nombre de una selecci√≥n de ficheros: agregar cadenas a partir de una posici√≥n, utilizar 
expresiones regulares, sustituir cadenas por otras, a√±adir una fecha o una numeraci√≥n, etc‚Ä¶</p>

<p>Y con un poco de imaginaci√≥n, podemos realizar el cambio de nombre de los ficheros‚Ä¶ Solo decir una cosa, si yo lo pude hacer, cualquiera lo puede hacer‚Ä¶</p>]]></content><author><name>VSANTOS</name></author><category term="Xfce" /><category term="Xfce" /><summary type="html"><![CDATA[Como siempre va bien, tener estas notas, por si las volvemos a necesitar‚Ä¶]]></summary></entry><entry><title type="html">USB se monta s√≥lo como lectura</title><link href="https://vctrsnts.github.io/bash/debian%20gnu/linux/hardware/2013/11/24/usb-lectura.html" rel="alternate" type="text/html" title="USB se monta s√≥lo como lectura" /><published>2013-11-24T00:00:00+00:00</published><updated>2013-11-24T00:00:00+00:00</updated><id>https://vctrsnts.github.io/bash/debian%20gnu/linux/hardware/2013/11/24/usb-lectura</id><content type="html" xml:base="https://vctrsnts.github.io/bash/debian%20gnu/linux/hardware/2013/11/24/usb-lectura.html"><![CDATA[<p>Por si a alguien le vuelve a pasar lo mismo que a mi, aqu√≠ pongo una peque√±a ayuda de lo que se puede hacer antes de tirar a la basura un USB, que, cada vez que lo montas, esta como lectura‚Ä¶</p>

<!-- more -->

<p>Me paso el otro dia, que al conectar el USB, este solamente estaba disponible como lectura y me era imposible grabar en el. Busque informaci√≥n sobre como arreglar este problema y en principio, todo 
lo que encontraba, era informaci√≥n diciendo, que el usb estaba en las ultimas‚Ä¶ Pero despu√©s de mucho buscar, encontre una <del><a href="">soluci√≥n</a></del> que podia dar algo de luz‚Ä¶</p>

<p>En el post, se explica, que hay una aplicaci√≥n llamada <code class="language-plaintext highlighter-rouge">dosfsck</code>, que sirve para comprobar la consistencia de sistemas de ficheros <code class="language-plaintext highlighter-rouge">FAT</code> en cualquier sistema basado en Unix, como <strong>Debian GNU/Linux</strong> y 
cuyas funciones son similares a las del comando chkdsk de Windows.</p>

<p>Los tres pasos a seguir son:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   #</span><span class="w"> </span>instalar el paquete dosftool
<span class="gp">   usuari@debian:~$</span><span class="w">  </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>dosfstools
<span class="gp">   #</span><span class="w"> </span>desmontar el disco duro externo o pendrive
<span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">sudo </span>umount /dev/sdb1
<span class="gp">   #</span><span class="w"> </span>verificar y reparar la partici√≥n
<span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">sudo </span>dosfsck <span class="nt">-t</span> <span class="nt">-a</span> <span class="nt">-w</span> /dev/sdb1
</code></pre></div></div>

<p>Con esta sencilla soluci√≥n, se repar√≥ la partici√≥n y el disco duro externo volvi√≥ a ser de lectura/escritura.</p>

<p>Lo que tengo que decir, es que la reparaci√≥n funciono durante un par de dias‚Ä¶ Al final lo que tenia que pasar, paso‚Ä¶ El USB acabo en la basura‚Ä¶ Estaba en las ultimas. Pero bueno, durante un par
 de dias, logre que siguiera funcionando.</p>]]></content><author><name>VSANTOS</name></author><category term="Bash" /><category term="Debian GNU/Linux" /><category term="Hardware" /><category term="Bash" /><category term="Debian GNU/Linux" /><category term="Hardware" /><summary type="html"><![CDATA[Por si a alguien le vuelve a pasar lo mismo que a mi, aqu√≠ pongo una peque√±a ayuda de lo que se puede hacer antes de tirar a la basura un USB, que, cada vez que lo montas, esta como lectura‚Ä¶]]></summary></entry><entry><title type="html">Cambiar dinamicamente el fondo de pantalla en Xfce</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/bash/xfce/2013/01/09/fondo-pantalla-xfce.html" rel="alternate" type="text/html" title="Cambiar dinamicamente el fondo de pantalla en Xfce" /><published>2013-01-09T00:00:00+00:00</published><updated>2013-01-09T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/bash/xfce/2013/01/09/fondo-pantalla-xfce</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/bash/xfce/2013/01/09/fondo-pantalla-xfce.html"><![CDATA[<p>Despu√©s de hacer limpieza de mi portatil (borrar ese espacio en el HD que no utilizaba para nada), he instalado de nuevo mi querido <strong>Debian GNU/Linux</strong>, y como estaba un poco cansado de KDE, lleno de 
programas que no utilizo, me decidi probar XFCE.</p>

<!-- more -->

<p>Pero una de las pocas cosas que hecho de menos en XFCE, se que puede parecer una tonteria, pero üòâ es el cambio dinamico de wallpapers. As√≠ que despu√©s de una busqueda por inet, encontre esta chuleta 
(que la pongo a continuaci√≥n) como apunte para mi o por si alguien le puede servir de ayuda:</p>
<ul>
  <li>Creamos una lista de imagenes, para ello tenemos que ir a la <em>configuraci√≥n de escritorio</em> y seleccionar <em>Lista de Imagenes</em> y aqui es donde agregamos las imagenes que nosotros queremos que se visualizen.</li>
  <li>Probar como quedan las imagenes con el cambio dinamico mediante el comando (desde consola).</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span>:0<span class="p">;</span>/usr/bin/xfdesktop <span class="nt">--reload</span>
</code></pre></div></div>

<ul>
  <li>Esto lo que hace es reiniciar el escritorio de XFCE, pero no vamos a estar haciendo esto cada vez que queramos cambiar el fondo de pantalla, as√≠ que ‚Ä¶</li>
  <li>Crearemos un script que insertaremos en el cron.</li>
  <li>Se crear un archivo donde agregamos lo siguiente y despu√©s lo guardamos:</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   */5 * * * * export DISPLAY=:0;</span>/usr/bin/xfdesktop <span class="nt">--reload</span>
</code></pre></div></div>

<ul>
  <li>Donde <code class="language-plaintext highlighter-rouge">*/5</code> dindica el numero de minutos en que se ejecutara la instrucci√≥n.</li>
  <li>Lo guardamos con nuestro editor de texto preferido y lo a√±adimos al cron mediante la siguiente instrucci√≥n:</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>crontab archivo_creado
</code></pre></div></div>

<p>Y con esto, le indicamos al <code class="language-plaintext highlighter-rouge">cron</code> que cada 5 minutos reinicie el escritorio de XFCE cambiando el fondo de pantalla. Es una funcionalidad o una manera de trabajar que nunca se me hubiese ocurrido, pero 
en esto consiste el software libre, si no lo encuentras siempre puedes hacerlo tu‚Ä¶</p>

<p>Bueno, espero que os sirve de ayuda</p>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Bash" /><category term="Xfce" /><category term="Debian GNU/Linux" /><category term="Bash" /><category term="Xfce" /><summary type="html"><![CDATA[Despu√©s de hacer limpieza de mi portatil (borrar ese espacio en el HD que no utilizaba para nada), he instalado de nuevo mi querido Debian GNU/Linux, y como estaba un poco cansado de KDE, lleno de programas que no utilizo, me decidi probar XFCE.]]></summary></entry><entry><title type="html">Deshabilitar tarjeta NVIDIA Optimus en Debian GNU/Linux</title><link href="https://vctrsnts.github.io/bash/debian%20gnu/linux/hardware/2012/11/11/optimus-debian.html" rel="alternate" type="text/html" title="Deshabilitar tarjeta NVIDIA Optimus en Debian GNU/Linux" /><published>2012-11-11T00:00:00+00:00</published><updated>2012-11-11T00:00:00+00:00</updated><id>https://vctrsnts.github.io/bash/debian%20gnu/linux/hardware/2012/11/11/optimus-debian</id><content type="html" xml:base="https://vctrsnts.github.io/bash/debian%20gnu/linux/hardware/2012/11/11/optimus-debian.html"><![CDATA[<p>Despu√©s de mucho buscar al final, pude encontrar un sitio <del><a href="http://pedrobonilla.blogspot.com.es/2011/11/deshabilitar-tarjeta-nvidia-en-sistema.html" target="_blank">aqui</a></del> donde te explicaba como desactivar 
la tarjeta grafica Nvidia de mi portatil Dell XPS 15. Estaba ya cansado de escuchar el ventilador funcionando todo el rato por culpa de una tarjeta grafica que no utilizaba. As√≠ que lo pongo a 
continuaci√≥n porque as√≠ se difunde m√°s facilmente y lo guardo para mi como apuntes‚Ä¶</p>

<!-- more -->

<p>El siguiente procedimiento sirve para deshabilitar (o desactivar) una tarjeta NVIDIA cuando contamos con un sistema h√≠brido de gr√°ficos, es decir, cuando contamos con dos tarjetas de video. El 
objetivo es reducir el consumo de energ√≠a en Linux, ya que no existe un buen soporte para gr√°ficos h√≠bridos en este sistema operativo (ni existir√° en el corto plazo, aparentemente).</p>

<p>En mi caso, poseo una laptop Dell XPS 15 con las siguientes dos tarjetas de video:</p>
<ul>
  <li>Intel Corporation 2nd Generation Core Processor Family Integrated Graphics Controller</li>
  <li>NVIDIA¬Æ GeForce¬Æ GT 540M 2GB</li>
</ul>

<p>La tecnolog√≠a Optimus se encarga de administrar estas dos tarjetas, activandolas o desactivandolas seg√∫n sea necesario (la NVIDIA solo es activada cuando estamos haciendo uso intensivo de gr√°ficos 
en 3D). De esta forma, se minimiza el consumo de energ√≠a.</p>

<p>Solo hay un problema: ¬°No existe Optimus para Linux! Esto conlleva a que el sistema utilice las dos tarjetas al mismo tiempo (consumiendo tu bater√≠a en minutos).</p>

<p>La soluci√≥n temporal es desactivar la tarjeta NVIDIA cargando un m√≥dulo (desarrollado por la comunidad) en el kernel. Los pasos son los siguientes:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   #</span><span class="w"> </span>instalamos el paquete git si no lo tenemos ya
<span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>git
<span class="gp">   usuari@debian:~$</span><span class="w"> </span>git clone https://github.com/mkottman/acpi_call.git
<span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">cd </span>acpi_call
<span class="go">  
</span><span class="gp">   #</span><span class="w"> </span>ahora procedemos a compilar el codigo
<span class="gp">   usuari@debian:~$</span><span class="w"> </span>make
<span class="gp">   #</span><span class="w"> </span>procedemos a cargar el  modulo en el kernel
<span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">sudo </span>insmod acpi_call.ko
<span class="go">
</span><span class="gp">   #</span><span class="w"> </span>damos permisos de ejecuci√≥n al fichero
<span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">chmod </span>755 test_off.sh
<span class="gp">   #</span><span class="w"> </span>y desactivamos la tarjeta NVIDIA
<span class="gp">   usuari@debian:~$</span><span class="w"> </span>./test_off.sh
</code></pre></div></div>

<p>Si aparece alg√∫n mensaje <code class="language-plaintext highlighter-rouge">works!</code>, entonces todo ha funcionado correctamente.</p>

<p>Espero que esto os ayuda tanto como a mi. As√≠ mismo, agradezco al autor original de este documento .</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><del><a href="http://pedrobonilla.blogspot.com.es" target="_blank">Deshabilitar Nvidia</a></del></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Bash" /><category term="Debian GNU/Linux" /><category term="Hardware" /><category term="Bash" /><category term="Debian GNU/Linux" /><category term="Hardware" /><summary type="html"><![CDATA[Despu√©s de mucho buscar al final, pude encontrar un sitio aqui donde te explicaba como desactivar la tarjeta grafica Nvidia de mi portatil Dell XPS 15. Estaba ya cansado de escuchar el ventilador funcionando todo el rato por culpa de una tarjeta grafica que no utilizaba. As√≠ que lo pongo a continuaci√≥n porque as√≠ se difunde m√°s facilmente y lo guardo para mi como apuntes‚Ä¶]]></summary></entry><entry><title type="html">Dividir / Unir Fichero en GNU/Linux</title><link href="https://vctrsnts.github.io/bash/debian%20gnu/linux/2012/03/07/divdir-unir-ficheros.html" rel="alternate" type="text/html" title="Dividir / Unir Fichero en GNU/Linux" /><published>2012-03-07T00:00:00+00:00</published><updated>2012-03-07T00:00:00+00:00</updated><id>https://vctrsnts.github.io/bash/debian%20gnu/linux/2012/03/07/divdir-unir-ficheros</id><content type="html" xml:base="https://vctrsnts.github.io/bash/debian%20gnu/linux/2012/03/07/divdir-unir-ficheros.html"><![CDATA[<p>Un truco nuevo, en mi caso, pero que seguro que mucha gente lo conoce, pero que nunca esta de m√°s tenerlo a mano por si se necesita‚Ä¶</p>

<!-- more -->

<p>En este caso, tengo que pasar un fichero de 10Gb a otro PC, pero no tengo red y como √∫nico medio posible de pasar la informaci√≥n es un USB de 8Gb. Si podr√≠a comprarme uno m√°s grande, pero ‚Ä¶</p>

<p>As√≠ que vamos a dividir el fichero y despu√©s volverlo a juntar. Vamos a por ello.</p>

<p>Para dividir el fichero usaremos la instrucci√≥n <code class="language-plaintext highlighter-rouge">split</code> de la siguiente manera :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">split</span> <span class="nt">-b</span> tama√±o_trozos fichero_a_trocear nombre_trozos
</code></pre></div></div>

<p>Donde :</p>
<ul>
  <li><strong>tama√±o_trozos</strong>: se indica un n¬∫. Por defecto es <em>en bytes</em>, pero a√±adiendo la opci√≥n <code class="language-plaintext highlighter-rouge">m</code> dir√≠amos megas.</li>
  <li><strong>fichero_a_trocear</strong>: fichero que queremos dividir en trozos.</li>
  <li><strong>nombre_trozos</strong>: prefijo de los trozos (split a√±adir√° aa, ab, ac, etc.)</li>
</ul>

<p>Una vez que hemos dividido el fichero, para volverlo a unir, usaremos la instrucci√≥n <code class="language-plaintext highlighter-rouge">cat</code> de la siguiente manera :</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span><span class="nb">cat </span>trozos.<span class="k">*</span> <span class="o">&gt;</span> fichero_destino
</code></pre></div></div>

<p>Donde :</p>
<ul>
  <li><strong>trozos</strong>: ser√† el nombre de los ficheros a unir.</li>
  <li><strong>fichero_destino</strong>: nombre del fichero original.</li>
</ul>

<p>Espero que esto os pueda servir de ayuda en un apuro. A mi me va a ser de mucha utilidad en algunos momentos.</p>]]></content><author><name>VSANTOS</name></author><category term="Bash" /><category term="Debian GNU/Linux" /><category term="Bash" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[Un truco nuevo, en mi caso, pero que seguro que mucha gente lo conoce, pero que nunca esta de m√°s tenerlo a mano por si se necesita‚Ä¶]]></summary></entry><entry><title type="html">Error respawning en consola‚Ä¶</title><link href="https://vctrsnts.github.io/bash/debian%20gnu/linux/2011/09/23/respawning-consola.html" rel="alternate" type="text/html" title="Error respawning en consola‚Ä¶" /><published>2011-09-23T00:00:00+00:00</published><updated>2011-09-23T00:00:00+00:00</updated><id>https://vctrsnts.github.io/bash/debian%20gnu/linux/2011/09/23/respawning-consola</id><content type="html" xml:base="https://vctrsnts.github.io/bash/debian%20gnu/linux/2011/09/23/respawning-consola.html"><![CDATA[<p>No se si os ha pasado a vosotros, pero despu√©s de una instalaci√≥n limpia de <strong>Debian GNU/Linux</strong>, siempre me aparec√≠a en la consola (antes de instalar KDE). Al final me canse de visualizar este error,
 porque llega a ser cansino.</p>

<!-- more -->

<p>Entonces buscando info por inet, encontre este <a href="http://forums.debian.net/viewtopic.php?f=30&amp;t=65460" target="_blank">sitio</a> donde salia la soluci√≥n a este problema:</p>

<p>Se tiene que editar el fichero <code class="language-plaintext highlighter-rouge">/etc/inittab</code> y comentaremos la linea:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   co:2345:respawn:/sbin/getty hvc0 9600 linux
</code></pre></div></div>

<p>dejandola de la siguiente manera :</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c">#co:2345:respawn:/sbin/getty hvc0 9600 linux</span>
</code></pre></div></div>

<p>Bueno, espero que os sirva‚Ä¶</p>

<h4 id="referencia">Referencia</h4>
<ul>
  <li><a href="https://forums.debian.net//viewtopic.php?f=30&amp;t=65460" target="_blank">Error after installing Debian ‚ÄòTesting‚Äô - INIT</a></li>
</ul>]]></content><author><name>VSANTOS</name></author><category term="Bash" /><category term="Debian GNU/Linux" /><category term="Bash" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[No se si os ha pasado a vosotros, pero despu√©s de una instalaci√≥n limpia de Debian GNU/Linux, siempre me aparec√≠a en la consola (antes de instalar KDE). Al final me canse de visualizar este error, porque llega a ser cansino.]]></summary></entry><entry><title type="html">Sustituir una clave antigua de known_hosts</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/ssh/2011/08/19/substituir-known-hosts.html" rel="alternate" type="text/html" title="Sustituir una clave antigua de known_hosts" /><published>2011-08-19T00:00:00+00:00</published><updated>2011-08-19T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/ssh/2011/08/19/substituir-known-hosts</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/ssh/2011/08/19/substituir-known-hosts.html"><![CDATA[<p>Es posible que m√°s de una vez nos hayamos encontrado con un mensaje donde nuestro sistema nos indica que la clave publica de nuestro servidor, o del servidor al que nos queremos conectar ha cambiado 
o a otras posibilidades que ya indicaremos m√°s adelante.</p>

<!-- more -->

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>ssh servidor-ssh
<span class="go">   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
   @ WARNING: REMOTE 
   @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
   IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
   Someone could be eavesdropping on you right now (man-in-the-middle attack)!
   It is also possible that the RSA host key has just been changed.
   The fingerprint for the RSA key sent by the remote host is
   00:ff:00:ff:00:ff:00:ff:00:ff:00:ff:00:ff:00:ff.
   Please contact your system administrator.
   Add correct host key in /home/usuario/.ssh/known_hosts to get rid of this message.
   Offending key in /home/usuario/.ssh/known_hosts:8
   RSA host key for localhost has changed and you have requested strict checking.
   Host key verification failed.
</span></code></pre></div></div>

<p>Este error se produce debido a ha fallado la que ha fallado la autenticaci√≥n de la clave p√∫blica ssh del servidor. Esto podr√≠a ser debido a :</p>
<ul>
  <li>Un intento de ataque <em>man in the middle</em>.</li>
  <li>Reinstalaci√≥n del sistema donde se esta ejecutando <code class="language-plaintext highlighter-rouge">SSH</code> y no nos hemos acordado de hacer una copia de su clave.</li>
</ul>

<p>Esto provoca que por seguridad, en clientes configurados con la opci√≥n <code class="language-plaintext highlighter-rouge">StrictHostKeyChecking=yes</code> no te permita conectar al servidor.</p>

<p>Una manera r√°pida de solucionar esto ser√≠a conectar forzando ignorar este aviso:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>ssh <span class="nt">-o</span> <span class="s2">"StrictHostKeyChecking=yes"</span> servidor-ssh
</code></pre></div></div>

<p>Por supuesto, esta no es la manera m√°s adecuada de hacerlo, primero, porque si lo hacemos sin ninguna comprobaci√≥n podr√≠amos ser v√≠ctimas de ataque que habl√°bamos antes, y segundo, porque el aviso no 
desaparecer√° en futuras conexiones.</p>

<p>Si efectivamente verificamos que se trata de una simple cambio de IP, DNS o reinstalaci√≥n de sistema (comprobando que el nuevo fingerprint coincide con el del servidor), tenemos que borrar la clave 
vieja.</p>

<p>Antiguamente, pod√≠amos editar el archivo <code class="language-plaintext highlighter-rouge">~/.ssh/known_hosts</code> directamente, pero actualmente los nombres de los hosts en este archivo estan ‚Äúocultos‚Äù mediante HMAC. Es por ello que para borrar 
dicha clave tendremos que ejecutar:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   usuari@debian:~$</span><span class="w"> </span>ssh-keygen <span class="nt">-R</span> servidor-ssh
</code></pre></div></div>

<p>La pr√≥xima vez que conectemos, el cliente ssh preguntar√° si deseamos conectar y guardar la nueva clave.</p>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="SSH" /><category term="Debian GNU/Linux" /><category term="SSH" /><summary type="html"><![CDATA[Es posible que m√°s de una vez nos hayamos encontrado con un mensaje donde nuestro sistema nos indica que la clave publica de nuestro servidor, o del servidor al que nos queremos conectar ha cambiado o a otras posibilidades que ya indicaremos m√°s adelante.]]></summary></entry><entry><title type="html">Comprimir / Descomprimir un fichero</title><link href="https://vctrsnts.github.io/bash/debian%20gnu/linux/2010/11/05/comprimir-descomprimir-un-fichero.html" rel="alternate" type="text/html" title="Comprimir / Descomprimir un fichero" /><published>2010-11-05T00:00:00+00:00</published><updated>2010-11-05T00:00:00+00:00</updated><id>https://vctrsnts.github.io/bash/debian%20gnu/linux/2010/11/05/comprimir-descomprimir-un-fichero</id><content type="html" xml:base="https://vctrsnts.github.io/bash/debian%20gnu/linux/2010/11/05/comprimir-descomprimir-un-fichero.html"><![CDATA[<p>Aqui va una cosa, que supongo que como a mi, a veces nos olvidamos de como se hace. Comprimir y descomprimir un fichero en <strong>Debian GNU/Linux</strong>.</p>

<!-- more -->

<h3 id="archivos-tar">Archivos .tar:</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>Comprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-cvf</span> archivo.tar directorio/
<span class="gp">#</span><span class="w"> </span>Descomprimir: 
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-xvf</span> archivo.tar
</code></pre></div></div>

<h3 id="archivos-gz">Archivos .gz:</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>Comprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">gzip</span> <span class="nt">-9</span> archivo
<span class="gp">#</span><span class="w"> </span>Descomprimir: 
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">gzip</span> <span class="nt">-d</span> archivo.gz / <span class="nb">gunzip </span>archivo.gz
</code></pre></div></div>

<h3 id="archivos-bz2">Archivos .bz2:</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>Comprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span>bzip2 archivo
<span class="gp">#</span><span class="w"> </span>Descomprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span>bzip2 <span class="nt">-d</span> archivo.bz2
</code></pre></div></div>

<h3 id="archivos-targz">Archivos .tar.gz:</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>Comprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-cvfz</span> archivo.tar.gz directorio/
<span class="gp">#</span><span class="w"> </span>Descomprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-xvfz</span> archivo.tar.gz
<span class="gp">#</span><span class="w"> </span>Visualizar 
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-tzf</span> archivo.tar.gz
</code></pre></div></div>

<h3 id="archivos-tarbz2">Archivos .tar.bz2:</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>Comprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-cvfj</span> archivo.tar.bz2 directorio/
<span class="gp">#</span><span class="w"> </span>Descomprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-xvfj</span> archivo.tar.bz2
<span class="gp">#</span><span class="w"> </span>Visualizar 
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-tjf</span> archivo.tar.bz2
</code></pre></div></div>

<h3 id="archivos-zip">Archivos .zip:</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>Comprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span>zip archivo.zip directorio/
<span class="gp">#</span><span class="w"> </span>Descomprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span>unzip archivo.zip
</code></pre></div></div>

<h3 id="archivos-tarxz">Archivos .tar.xz:</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>Comprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">tar </span>cJf archivo.tar.xz directorio<span class="sb">`</span>
<span class="gp">#</span><span class="w"> </span>Descomprimir
<span class="gp">usuari@debian:~$</span><span class="w"> </span><span class="nb">tar</span> <span class="nt">-Jxvf</span> archivo tar.xz
</code></pre></div></div>

<p>Espero que os sirva ayuda tanto como a mi. Porque nunca me acuerdo cuando lo necesito y siempre tengo que buscar como se hace‚Ä¶</p>

<p>Asi mismo, en este <a href="/bash/debian%20gnu/linux/2022/01/15/configurar-fichero-bashrc.html" target="_blank">articulo</a> que he escrito, explico como modificando nuestro fichero <code class="language-plaintext highlighter-rouge">.bashrc</code> podemos a√±adir esta funcionalidad automaticamente para facilitarnos el trabajo.</p>]]></content><author><name>VSANTOS</name></author><category term="Bash" /><category term="Debian GNU/Linux" /><category term="Bash" /><category term="Debian GNU/Linux" /><summary type="html"><![CDATA[Aqui va una cosa, que supongo que como a mi, a veces nos olvidamos de como se hace. Comprimir y descomprimir un fichero en Debian GNU/Linux.]]></summary></entry><entry><title type="html">Ya tenemos KDE4</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/kde/2009/06/06/tenemos-kde4.html" rel="alternate" type="text/html" title="Ya tenemos KDE4" /><published>2009-06-06T00:00:00+00:00</published><updated>2009-06-06T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/kde/2009/06/06/tenemos-kde4</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/kde/2009/06/06/tenemos-kde4.html"><![CDATA[<p>Pues si, despu√©s de una instalaci√≥n no tan traumatica como me esperaba, ya hemos instalado KDE 4.2 (a continuaci√≥n un screen de mi PC).</p>

<!-- more -->

<div class="row">
    
    <div style="flex: 100.0%">
        <img class="single" src="/assets/img/images/screenshot_001.jpg" alt="screenshot_001.jpg" />
    </div>
    
</div>

<p>En principio, las primeras sensaciones han sido un poco extra√±as <del><a href="http://www.esdebian.org/foro/32406/experiencias-kde4" target="_blank">los comprobareis aqui</a></del>, pero despu√©s cuando te vas acostumbrando, pues‚Ä¶</p>

<p>Aun le faltan algunas cosas por pulir (supongo que en KDE 4.3) ya estaran disponibles‚Ä¶ Aun as√≠..</p>

<p>Las sensaciones son muy buenas‚Ä¶ Esperemos que mejoren con la proxima revisi√≥n‚Ä¶</p>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Kde" /><category term="Debian GNU/Linux" /><category term="Kde" /><summary type="html"><![CDATA[Pues si, despu√©s de una instalaci√≥n no tan traumatica como me esperaba, ya hemos instalado KDE 4.2 (a continuaci√≥n un screen de mi PC).]]></summary></entry><entry><title type="html">Recuperar Archivos en ReiserFS</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/reiserfs/2009/04/27/recuperar-archivos-reiserfs.html" rel="alternate" type="text/html" title="Recuperar Archivos en ReiserFS" /><published>2009-04-27T00:00:00+00:00</published><updated>2009-04-27T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/reiserfs/2009/04/27/recuperar-archivos-reiserfs</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/reiserfs/2009/04/27/recuperar-archivos-reiserfs.html"><![CDATA[<p>A continuaci√≥n explicare los pasos necesarios para recuperar un archivo/s eliminado de una partici√≥n creada con <strong>ReiserFS</strong> (en principio funciona correctamente en <strong>Debian GNU/Linux</strong>)</p>

<!-- more -->

<p>Como root, desmonta la partici√≥n <strong>ReiserFS</strong> para recuperar los archivos (en este caso usaremos <code class="language-plaintext highlighter-rouge">/home</code> como ejemplo):</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:/#</span><span class="w"> </span>umount /home
</code></pre></div></div>

<p>Si te muestra un mensaje parecido a <code class="language-plaintext highlighter-rouge">umount: /home: device is busy</code>, significa que algo se esta usando en dicha partici√≥n. Tendras que pasarte a modo de usuario simple (consola) o puedes usar un cdrom live:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:/#</span><span class="w"> </span>init 1
</code></pre></div></div>

<p>Se crea una copia de seguridad de la partici√≥n por si la cosa no sale del todo bien. Es mejor perder un archivo, que no toda la informaci√≥n:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:/#</span><span class="w"> </span><span class="nb">dd </span><span class="k">if</span><span class="o">=</span>/dev/hda1 <span class="nv">of</span><span class="o">=</span>backup.dd <span class="nv">bs</span><span class="o">=</span>4096 <span class="nv">conv</span><span class="o">=</span>noerror
</code></pre></div></div>

<p>Recuperamos los archivos borrados pero en la particion (<em>backup.dd</em>):</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:/#</span><span class="w"> </span>reiserfsck <span class="nt">--rebuild-tree</span> <span class="nt">--scan-whole-partition</span> backup.dd
</code></pre></div></div>

<p>Pasamos a crear un punto de montaje:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:/#</span><span class="w"> </span><span class="nb">mkdir</span> /mnt/recovery
</code></pre></div></div>

<p>Montamos la partici√≥n virtual:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:/#</span><span class="w"> </span>mount <span class="nt">-o</span> loop backup.dd /mnt/recovery
</code></pre></div></div>

<p>Todos los archivos recuperados estaran en:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">   root@debian:/#</span><span class="w"> </span>/mnt/recovery/lost+found
</code></pre></div></div>

<p>Solamente nos queda montar la partici√≥n original y copiar los archivos de hemos recuperado.</p>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="ReiserFS" /><category term="Debian GNU/Linux" /><category term="ReiserFS" /><summary type="html"><![CDATA[A continuaci√≥n explicare los pasos necesarios para recuperar un archivo/s eliminado de una partici√≥n creada con ReiserFS (en principio funciona correctamente en Debian GNU/Linux)]]></summary></entry><entry><title type="html">KDE 4.2 ha entrado en SID</title><link href="https://vctrsnts.github.io/debian%20gnu/linux/kde/2009/04/09/kd4-sid.html" rel="alternate" type="text/html" title="KDE 4.2 ha entrado en SID" /><published>2009-04-09T00:00:00+00:00</published><updated>2009-04-09T00:00:00+00:00</updated><id>https://vctrsnts.github.io/debian%20gnu/linux/kde/2009/04/09/kd4-sid</id><content type="html" xml:base="https://vctrsnts.github.io/debian%20gnu/linux/kde/2009/04/09/kd4-sid.html"><![CDATA[<p>Todos los usuarios de <strong>Debian GNU/Linux</strong> estan de enhorabuena (me incluyo yo mismo). Ha entrado KDE 4.2 en la versi√≥n <strong>UNSTABLE</strong> de <strong>Debian GNU/Linux</strong>.</p>

<!-- more -->

<p>Tal como se puede ver en este <a href="http://lists.debian.org/debian-kde/2009/03/msg00157.html" target="_blank">mail</a>, se notifica que durante esta semana iran entrando los paquetes de KDE 4 en <strong>UNSTABLE</strong>. As√≠ que a upgradear‚Ä¶</p>

<p>Este no ser√° mi caso. Yo me esperare a que este todo m√°s calmado y entonces realizare una instalaci√≥n limpia de todo el sistema‚Ä¶</p>

<p>Alguien puede decir que no es necesario, pero en estos casos prefiero hacer esto y no perder el sistema por algun error mio o algun paquete rebelde‚Ä¶</p>]]></content><author><name>VSANTOS</name></author><category term="Debian GNU/Linux" /><category term="Kde" /><category term="Debian GNU/Linux" /><category term="Kde" /><summary type="html"><![CDATA[Todos los usuarios de Debian GNU/Linux estan de enhorabuena (me incluyo yo mismo). Ha entrado KDE 4.2 en la versi√≥n UNSTABLE de Debian GNU/Linux.]]></summary></entry><entry><title type="html">¬°Hola Mundo!</title><link href="https://vctrsnts.github.io/blog/2008/07/02/primer-post.html" rel="alternate" type="text/html" title="¬°Hola Mundo!" /><published>2008-07-02T00:00:00+00:00</published><updated>2008-07-02T00:00:00+00:00</updated><id>https://vctrsnts.github.io/blog/2008/07/02/primer-post</id><content type="html" xml:base="https://vctrsnts.github.io/blog/2008/07/02/primer-post.html"><![CDATA[<p>Ese mensaje t√≠pico al que mucho programadores estamos acostumbrados al iniciarnos en alg√∫n lenguaje nuevo ;-)</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">  !Hola Mundo!
</span></code></pre></div></div>
<!-- more -->

<p>Pues de esta misma manera hago la apertura de este blog personal, en donde ir√© escribiendo temas de lo m√°s variopintos, desde temas inform√°ticos, ya sea GNU/Linux, BSD, Raspberry, etc‚Ä¶. 
O alguna de las idas de olla que a veces tengo ;-)</p>

<p>De esta manera doy la bienvenida a las personas que lean este blog.</p>

<p>Si tienes cualquier comentario y/o sugerencia, no dudes en contactar conmigo‚Ä¶ Sino, en boquita cerrada no entran moscas!!!</p>

<p>A10</p>]]></content><author><name>VSANTOS</name></author><category term="Blog" /><category term="Blog" /><summary type="html"><![CDATA[Ese mensaje t√≠pico al que mucho programadores estamos acostumbrados al iniciarnos en alg√∫n lenguaje nuevo ;-) !Hola Mundo!]]></summary></entry></feed>