<!DOCTYPE html>
<!--
    Type on Strap jekyll theme v2.4.9
    Theme free for personal and commercial use under the MIT license
    https://github.com/sylhare/Type-on-Strap/blob/master/LICENSE
-->
<html lang="es">
  
  <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=5"> <!-- UMAMI --> <script defer src="https://umami.ahnenerbe.duckdns.org/script.js" data-website-id="c512a056-cf0b-43ad-9f5e-b4cda9a0eedf"></script> <!-- MASTODON CREATOR --> <link rel="me" href="https://mastodon.online/@vsantos" /> <meta name="fediverse:creator" content="@vsantos@mastodon.online"> <!-- STYLE --> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"> <!-- Theme Mode--> <script> const darkBtn = "Dark"; const lightBtn = "Light"; const isAutoTheme = false; const preferredTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'; if (isAutoTheme) { document.documentElement.setAttribute('data-theme', sessionStorage.getItem('theme') ?? preferredTheme); } else { document.documentElement.setAttribute('data-theme', "dark"); } </script> <!-- Main JS (navbar.js, katex_init.js and masonry_init.js)--> <script defer src="/assets/js/main.min.js"></script> <!-- CSS --> <link rel="stylesheet" href="/assets/css/main.css"> <!--Favicon--> <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"> <!-- KaTeX 0.16.9 --> <!-- Mermaid 10.8.0 --> <script defer src="/assets/js/vendor/mermaid.min.js"></script> <!-- Simple Jekyll Search 1.10.0 --> <script src="/assets/js/vendor/simple-jekyll-search.min.js" type="text/javascript"></script> <!-- Google Analytics / Cookie Consent --> <!-- <script> const cookieName = 'cookie-notice-dismissed-https://vctrsnts.github.io'; const isCookieConsent = 'false'; const analyticsName = ''; const analyticsNameGA4 = ''; </script> --> <!-- seo tags --> <meta property="og:image" content="https://vctrsnts.github.io/assets/img/feature-img/logo_post.jpg"> <meta property="og:type" content="website" /> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Matrix - 4. De vuelta al inicio, de Gotify a Matrix | Si lo haces, hazlo bien!</title> <meta name="generator" content="Jekyll v4.3.3" /> <meta property="og:title" content="Matrix - 4. De vuelta al inicio, de Gotify a Matrix" /> <meta name="author" content="VSANTOS" /> <meta property="og:locale" content="es_ES" /> <meta name="description" content="Como ya explique en este articulo, ante la imposibilidad de usar Matrix me pase a Gotify aunque me negue a dejar de lado a Matrix y segui investigando, el porque no funcionaba correctamente y asi llegado el momento, poderlo usar o sino, tener una alternativa Gotify." /> <meta property="og:description" content="Como ya explique en este articulo, ante la imposibilidad de usar Matrix me pase a Gotify aunque me negue a dejar de lado a Matrix y segui investigando, el porque no funcionaba correctamente y asi llegado el momento, poderlo usar o sino, tener una alternativa Gotify." /> <link rel="canonical" href="https://vctrsnts.github.io/docker/matrix/gotify/2025/05/25/gotify-matrix.html" /> <meta property="og:url" content="https://vctrsnts.github.io/docker/matrix/gotify/2025/05/25/gotify-matrix.html" /> <meta property="og:site_name" content="Si lo haces, hazlo bien!" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2025-05-25T00:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Matrix - 4. De vuelta al inicio, de Gotify a Matrix" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"VSANTOS","url":"https://github.com/vctrsnts"},"dateModified":"2025-05-25T00:00:00+00:00","datePublished":"2025-05-25T00:00:00+00:00","description":"Como ya explique en este articulo, ante la imposibilidad de usar Matrix me pase a Gotify aunque me negue a dejar de lado a Matrix y segui investigando, el porque no funcionaba correctamente y asi llegado el momento, poderlo usar o sino, tener una alternativa Gotify.","headline":"Matrix - 4. De vuelta al inicio, de Gotify a Matrix","mainEntityOfPage":{"@type":"WebPage","@id":"https://vctrsnts.github.io/docker/matrix/gotify/2025/05/25/gotify-matrix.html"},"url":"https://vctrsnts.github.io/docker/matrix/gotify/2025/05/25/gotify-matrix.html"}</script> <!-- End Jekyll SEO tag --> <!-- RSS --> <link rel="alternate" type="application/atom+xml" title="Si lo haces, hazlo bien!" href="https://vctrsnts.github.io/feed.xml"/> <link type="application/atom+xml" rel="alternate" href="https://vctrsnts.github.io/feed.xml" title="Si lo haces, hazlo bien!" /> <!-- Twitter Cards --> <meta name="twitter:title" content="Matrix - 4. De vuelta al inicio, de Gotify a Matrix"> <meta name="twitter:description" content="Como ya explique en este articulo, ante la imposibilidad de usar Matrix me pase a Gotify aunque me negue a dejar de lado a Matrix y segui investigando, el po..."> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://vctrsnts.github.io/assets/img/feature-img/logo_post.jpg"> <meta name="twitter:image:alt" content="Matrix - 4. De vuelta al inicio, de Gotify a Matrix"> </head>
  <body>
    
    <header class="site-header"> <!-- Logo and title --> <div class="branding"> <a href="/"> <img alt="logo img" class="avatar" src="/assets/img/logo.png" loading="lazy"/> </a> <a class="site-title" aria-label="Si lo haces, hazlo bien!" href="/"> Si lo haces, hazlo bien! </a> </div> <!-- Toggle menu --> <nav class="clear"> <a aria-label="pull" id="pull" class="toggle" href="#"> <i class="fas fa-bars fa-lg"></i> </a> <!-- Menu --> <ul class="hide"> <li class="separator"> | </li> <li> <a class="clear" aria-label="Libros" title="Libros" href="https://vsantos.envs.net"> <span class="navbar-label ">Libros</span> </a> </li> <li class="separator"> | </li> <li> <a class="clear" aria-label="About" title="About" href="/about/"> <span class="navbar-label ">About</span> </a> </li> <li class="separator"> | </li> <li> <a class="clear" aria-label="Archivo" title="Archivo" href="/archive"> <span class="navbar-label ">Archivo</span> </a> </li> <li class="separator"> | </li> <li> <a class="clear" aria-label="Tags" title="Tags" href="/tags/"> <i class="navbar-icon fas fa-tags" aria-hidden="true"></i> <span class="navbar-label navbar-label-with-icon">Tags</span> </a> </li> <li class="separator"> | </li> <li> <a class="clear" aria-label="Search" title="Search" href="/search/"> <i class="navbar-icon fas fa-search" aria-hidden="true"></i> <span class="navbar-label navbar-label-with-icon">Search</span> </a> </li> </ul> </nav> </header>
    <div class="content">
      <article class="feature-image" >
    <header id="main" style="">
        <div class="title-padder">
            
                <h1 id="Matrix+-+4.+De+vuelta+al+inicio%2C+de+Gotify+a+Matrix" class="title">Matrix - 4. De vuelta al inicio, de Gotify a Matrix</h1>
                


<div class="post-info"><a href="https://github.com/vctrsnts" target="_blank" rel="noopener">
      <img alt="Author's avatar" src="/assets/img/avatar.jpg" loading="lazy">
    
    <p class="meta">
      VSANTOS - 
      
      Mayo 25, 2025
    </p></a></div>

            
        </div>
    </header>

    <section class="post-content">
    
            <p>Como ya explique en este <a href="/docker/matrix/gotify/2025/05/20/matrix-gotify.html" target="_blank">articulo</a>, ante la imposibilidad de usar <strong>Matrix</strong> me pase a <strong>Gotify</strong> aunque me negue a dejar de lado a <em>Matrix</em> y segui investigando, el porque no funcionaba correctamente y asi llegado el momento, poderlo usar o sino, tener una alternativa <em>Gotify</em>.</p>

<!-- more -->

<p>Aqui si que tengo que dar las gracias a <strong>Lorenzo</strong> de <strong>atareao</strong>, por toda la ayuda que me ofrecio para resolver el problema que tenia üëè.</p>

<p>Lo primero fue facilitarme el <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> que el estaba usando para <strong>Matrix</strong>, os lo pongo  continuaci√≥n por si os sirve de ayuda, pero modificado para mis necesidades:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">conduit</span><span class="pi">:</span>
   <span class="na">image</span><span class="pi">:</span> <span class="s">matrixconduit/matrix-conduit:latest</span>
   <span class="na">container_name</span><span class="pi">:</span> <span class="s">matrixConduit</span>
   <span class="na">restart</span><span class="pi">:</span> <span class="s">unless-stopped</span>
   <span class="na">volumes</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">${HOME}/config/matrix/db:/var/lib/matrix-conduit/</span>
   <span class="na">environment</span><span class="pi">:</span>
     <span class="na">RUST_BACKTRACE</span><span class="pi">:</span> <span class="s">full</span>
     <span class="na">CONDUIT_LOG</span><span class="pi">:</span> <span class="s">warn</span>
     <span class="na">CONDUIT_SERVER_NAME</span><span class="pi">:</span> <span class="s">matrix.servidor.org</span>
     <span class="na">CONDUIT_DATABASE_PATH</span><span class="pi">:</span> <span class="s">/var/lib/matrix-conduit/</span>
     <span class="na">CONDUIT_DATABASE_BACKEND</span><span class="pi">:</span> <span class="s">rocksdb</span>
     <span class="na">CONDUIT_PORT</span><span class="pi">:</span> <span class="m">6167</span>
     <span class="na">CONDUIT_MAX_REQUEST_SIZE</span><span class="pi">:</span> <span class="s">20_000_000</span> <span class="c1"># in bytes, ~20 MB</span>
     <span class="na">CONDUIT_ALLOW_REGISTRATION</span><span class="pi">:</span> <span class="kc">false</span>
     <span class="na">CONDUIT_ALLOW_FEDERATION</span><span class="pi">:</span> <span class="kc">false</span>
     <span class="na">CONDUIT_ALLOW_CHECK_FOR_UPDATES</span><span class="pi">:</span> <span class="kc">true</span>
     <span class="na">CONDUIT_ENABLE_LIGHTNING_BOLT</span><span class="pi">:</span> <span class="kc">true</span>
     <span class="na">CONDUIT_TRUSTED_SERVERS</span><span class="pi">:</span> <span class="s1">'</span><span class="s">["matrix.org"]'</span>
     <span class="na">CONDUIT_ADDRESS</span><span class="pi">:</span> <span class="s">0.0.0.0</span>
     <span class="na">CONDUIT_CONFIG</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span> <span class="c1"># Ignore this</span>
   <span class="na">networks</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">proxy</span>
   <span class="na">labels</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">traefik.enable=true</span>
     <span class="pi">-</span> <span class="s">traefik.http.services.conduit.loadbalancer.server.port=6167</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.conduit.entrypoints=websecure</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.conduit.rule=Host(`${MATRIX_SERVER}`)</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.conduit-secure.tls=true</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.conduit-secure.tls.certresolver=letsencrypt</span>
     <span class="pi">-</span> <span class="s">traefik.http.routers.conduit.middlewares=cors-headers@docker</span>
     <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowOriginList=*</span>
     <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowHeaders=Origin, X-Requested-With, Content-Type, Accept, Authorization</span>
     <span class="pi">-</span> <span class="s">traefik.http.middlewares.cors-headers.headers.accessControlAllowMethods=GET, POST, PUT, DELETE, OPTIONS</span>
</code></pre></div></div>
<p>Con este simple <code class="language-plaintext highlighter-rouge">docker</code> es lo unico que se necesita para instalar <strong>Matrix</strong>, no como lo tenia yo <a href="/docker/matrix/2025/03/25/instal-config-matrix.html" target="_blank">antes</a> que eso si que era complicado, ahora si que ya teniamos todas las herramientas para hacer funcionar a <strong>Matrix</strong>, o eso creia yo.</p>

<p>Una vez que ya tenia el <strong>docker</strong>, lo unico que me quedaba era probarlo, porque esta nueva manera de instalaci√≥n, era mucho m√°s sencilla que la que yo tenia antes. Pues aqui vamos a ver que resultado obtenemos:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">usuari@debian:~$</span><span class="w"> </span>docker compose up <span class="nt">-d</span> conduit
</code></pre></div></div>
<p>Despu√©s de la instalaci√≥n, todo funcionaba correctamente, pero seguia con el problema de que las notificaciones no me llegaban al movil.</p>

<p>Aqui busque ayuda de todo el mundo, para saber el porque seguia sin funcionarme las notificaciones, tambien probe <strong>Synapse</strong>, pero con el mismo resultado, tambien llame a todas las puertas y todas me las encontraba cerradas o miraban la mirilla, pero no me abrianla puerta ;), hasta que al final pedi ayuda a <strong>atareao</strong> que muy amablemente se ofrecio a ver si conseguiamos llevar a buen puerto este problema que tenia, porque el, con esta misma configuraci√≥n, no tenia problemas.</p>

<p>Os pongo un resumen de todo fue todo, porque sino seria muy largo todo y os dareis cuenta de lo que una peque√±a cosa, los problemas que puede llegar a dar:</p>
<blockquote>
  <p><strong>atareao:</strong> Cuantos usuarios tienes en Matrix?<br />
<strong>yo:</strong> Uno solo, que es el adm que soy yo<br />
<strong>atareao:</strong> Crea otro usuario y manda los mensajes con el otro usuario<br /></p>
</blockquote>

<p>Y aqui es cuando llegamos al final de todo, con mi cerebro ya habia explosionado en mil trozitos y pidiendo a <strong>@atareao</strong> me que lance por un barranco ü•π<br /></p>
<blockquote>
  <p><strong>yo:</strong> @atareao Tienes cerca alguna cuerda larga y un barranco?<br />
<strong>yo:</strong> Para que me ates y me lances por ese barranco<br />
<strong>yo:</strong> He hecho lo que has comentado<br />
<strong>yo:</strong> He creado un usuario que es el administrador de los canales y luego me he creado mi usuario.<br />
<strong>yo:</strong> Entonces el adm me ha invitado a los canales y con el script que te he pasado estoy enviando mensajes a la sala y me aparecen las notificaciones<br />
<strong>yo:</strong> Por eso, yo me ato de pies y manos y tu solo tienes que empujarme hacia el barranco<br />
<strong>atareao:</strong> Ya‚Ä¶ Tiene l√≥gica que si te env√≠as a ti mismo un mensaje no te notifique que tienes un mensaje nuevo<br /></p>
</blockquote>

<p>Llevaba 1 mes con este problema al que no le encontraba soluci√≥n, y todo era por culpa de que solamente tenia un unico usuario, y por eso las notifiaciones no me llegaban. Que si te pones a pensar, tiene su logica, porque uno envia un mensaje al canal, para que el resto de usuarios les llegue la notificaciones. Pero claro es una cosa que no piensas, hasta que alguien te hace caer en ello.</p>

<p>Gracias <strong>atareao</strong> por toda la ayuda que me has dado.</p>

<p>Y ahora si que si, tengo a pleno rendimiento mi servidor de matrix para poder usarlo para las notificaciones de todos mis servicios.</p>

<p>De momento, tengo en funcionamiento:</p>
<ul>
  <li>El envio de notificaciones cuando se general los archivos <code class="language-plaintext highlighter-rouge">XML</code> de los podcast que descargo.</li>
  <li>Las notificaciones de la ejecuci√≥n de las copias de seguridad, que lo podreis ver en este <a href="" target="_blank">articulo</a>.</li>
</ul>

<p>Me queda pendiente las notificaciones:</p>
<ul>
  <li>Notificaciones de <strong>unRaid</strong></li>
  <li>Notificaciones de <strong>flexGet</strong></li>
</ul>

<p>Pero con estas tendre que pelearme un poco m√°s porque tengo que usar <strong>pushBits</strong>, tal como explique en este <a href="/docker/matrix/2025/03/28/pushbits.html" target="_blank">articulo</a>.</p>

<p>Y alguna cosa m√°s de la que me gustaria estar informado, pero para eso tengo que investigar si se puede hacer o no. Ya os ire informando de los progresos que voy teniendo.</p>

<h4 id="referencia">Referencia</h4>
<p><a href="https://github.com/atareao/self-hosted/tree/main/matrix" target="_blank">atareao - gitHub</a></p>

    
    </section>

    <!-- Social media shares -->
    




    <!-- Tag list -->
    
    


  <div class="tag-list">
    <ul>
      
        <li class="meta">Tags</li>
      

      
        <li><a class="button" href="/tags#Docker">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> Docker</p>
        </a></li>
      
        <li><a class="button" href="/tags#Gotify">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> Gotify</p>
        </a></li>
      
        <li><a class="button" href="/tags#Matrix">
          <p><i class="fas fa-tag fa-fw fa-sm"></i> Matrix</p>
        </a></li>
      
    </ul>
  </div>



</article>




<!-- To change color of links in the page --> <style> header#main { background-size: cover; background-repeat: no-repeat; background-position: center; } header#main { background-image: url('/assets/img/feature-img/logo_post.jpg'); } </style> <!-- Post navigation --> <div id="post-nav"> <div id="next-post"> <a alt="Restic + Backrest + MiniO - 1" href="/debian%20gnu/linux/docker/2025/05/22/restic-copias-locales-1.html"> <p>Next post</p> Restic + Backrest + MiniO - 1 </a> </div> </div> <!--Utterances--> <!-- Cusdis --> <!-- Disqus -->


    </div>
    
    <footer class="site-footer"> <ul> <a href="https://creativecommons.org/licenses/by-nc/4.0/deed.ca" title="This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License" target="_blank" rel="noopener"> <span class="fa-stack fa-lg"><i class="fab fa-creative-commons fa-stack fa-lg"></i></span><span class="fa-stack fa-lg"><i class="fab fa-creative-commons-by fa-stack fa-lg"></i></span><span class="fa-stack fa-lg"><i class="fab fa-creative-commons-nc-eu fa-stack fa-lg"></i></span> </a> </ul> <p class="text"> Powered by <a href="https://jekyllrb.com/">Jekyll</a> with <a href="https://github.com/sylhare/Type-on-Strap">Type on Strap</a> </p> <div class="footer-icons"> <ul> <!-- Social icons from Font Awesome, if enabled --> <li> <a feed.xml href="/feed.xml" title="Follow RSS feed" target="_blank"> <span class="fa-stack fa-lg"> <i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-rss fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="https://github.com/vctrsnts" title="Follow on Github" target="_blank" rel="me"> <span class="fa-stack fa-lg"> <i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-github fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="https://mastodon.online/@vsantos" title="Follow on Mastodon" target="_blank" rel="me"> <span class="fa-stack fa-lg"> <i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-mastodon fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="https://vctrsnts.tumblr.com/" title="Follow on Tumblr" target="_blank" rel="me"> <span class="fa-stack fa-lg"> <i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-tumblr fa-stack-1x fa-inverse"></i> </span> </a> </li> <li> <a href="https://bsky.app/profile/vctrsnts.bsky.social" title="Follow on Bluesky" target="_blank" rel="me"> <span class="fa-stack fa-lg"> <i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-bluesky fa-stack-1x fa-inverse"></i> </span> </a> </li> </ul> </div> <script type="module"> mermaid.initialize({ startOnLoad: false, theme: "default" }); mermaid.run({ nodes: [...document.querySelectorAll('.language-mermaid'), ...document.querySelectorAll('.mermaid')] }); </script> </footer>
  </body>
</html>
